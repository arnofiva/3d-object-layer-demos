import{dA as W,aD as s,aE as l,aF as V,au as U,cc as Z,pk as ee,pl as te,fX as F,f_ as k,m2 as M,pm as ie,pn as se,m5 as le,m6 as ne,m8 as re,po as ae,fY as oe,pp as z,aX as B,cr as h,aV as de,m9 as I,pq as D,az as ue,aU as b,ol as pe,ce as C,pr as he,ps as ce,cD as ye,gN as me,bi as ve}from"./main-79e5ed80.js";import{a as ge,V as be,W as fe,N as H,S as _e}from"./vmEvent-27fa49b3.js";let y=class extends W(U){constructor(t){super(t),this.element=null,this.feature=null,this.layer=null,this.type=null,this.visibilityExpressionExecutor=null}get description(){return this.element?.description}get evaluatedVisibilityExpression(){const{visibilityExpressionExecutor:t}=this;return t!=null?!!t.lastEvaluatedValue:null}get label(){return this.element?.label}get visible(){return this.evaluatedVisibilityExpression!=null?this.evaluatedVisibilityExpression:this.element!=null}};s([l({readOnly:!0})],y.prototype,"description",null),s([l({constructOnly:!0})],y.prototype,"element",void 0),s([l()],y.prototype,"evaluatedVisibilityExpression",null),s([l()],y.prototype,"feature",void 0),s([l()],y.prototype,"label",null),s([l()],y.prototype,"layer",void 0),s([l()],y.prototype,"type",void 0),s([l()],y.prototype,"visible",null),s([l()],y.prototype,"visibilityExpressionExecutor",void 0),y=s([V("esri.widgets.FeatureForm.InputBase")],y);const Ee=y;let w=class extends Ee{constructor(t){super(t),this.arcadeEditType="NA",this.editableExpressionExecutor=null}get editable(){return!!this.layerAllowsEdits&&(this.evaluatedEditableExpression??!1)}get evaluatedEditableExpression(){const{editableExpressionExecutor:t}=this;return t!=null?!!t.lastEvaluatedValue:null}get layerAllowsEdits(){const{layer:t}=this;if(!t)return!1;const i=Z(t),n=i?.operations.supportsEditing,r=ge(i,this.arcadeEditType);return!(!n||!r)}};s([l()],w.prototype,"arcadeEditType",void 0),s([l()],w.prototype,"editable",null),s([l()],w.prototype,"editableExpressionExecutor",void 0),s([l()],w.prototype,"evaluatedEditableExpression",null),s([l()],w.prototype,"layerAllowsEdits",null),w=s([V("esri.widgets.FeatureForm.EditableInput")],w);const we=w;var v;(function(e){e.Text="text",e.Number="number",e.Date="date",e.Unsupported="unsupported"})(v||(v={}));const xe="__internal-type-based-coded-value-domain__";let a=class extends we{constructor(t){super(t),this._storedValue=null,this.error=null,this.field=null,this.group=null,this.requiredExpressionExecutor=null,this.type="field",this.valueExpressionExecutor=null}get _dateRange(){const{element:t}=this;if(t?.input?.type==="datetime-picker"){const{max:i,min:n}=t.input;return{max:i,min:n}}return{min:null,max:null}}get _configAllowsEdits(){const{element:t,layer:i,name:n}=this;return t!=null?t.editableExpression?!!this.evaluatedEditableExpression:t.editable!==!1:i?.userHasUpdateItemPrivileges?!0:(i&&"popupTemplate"in i?i?.popupTemplate?.fieldInfos?.find(({fieldName:o})=>o===n):null)?.isEditable??!0}get _layerAndFieldAllowEdits(){return this.layerAllowsEdits&&this.field?.editable}get _isVisibleByDefault(){const{field:t,layer:i}=this;return!!t?.visible&&ee(t,i)}get _isEditTrackingField(){return te(this.layer).includes(this.name?.toLowerCase())}get _shouldUseValueExpression(){return this._layerAndFieldAllowEdits&&!this._configAllowsEdits&&this.valueExpressionExecutor!=null}get dataType(){const{field:t}=this;return F(t)?v.Number:k(t)?v.Text:M(t)?v.Date:v.Unsupported}get dateDataType(){if(this.dataType===v.Date)return this.field.type!=="date"?"string":"number"}get domain(){const{layer:t}=this,{typeFieldName:i,types:n}=be(t);if(i===this.name&&this.field.domain==null)return new ie({name:xe,codedValues:n.map(({code:c,name:u})=>new se({code:c,name:u}))});const{feature:r}=this,o=t?.getFieldDomain(this.name,{feature:r}),p=this.element?.domain;return p!=null&&this._isDomainCompatible(p)?p:o}get editable(){return!!this._layerAndFieldAllowEdits&&(this.evaluatedEditableExpression??this._configAllowsEdits)}get evaluatedRequiredExpression(){const{requiredExpressionExecutor:t}=this;return t!=null?!!t.lastEvaluatedValue:null}get evaluatedValueExpression(){const{valueExpressionExecutor:t}=this;return t!=null?t.lastEvaluatedValue:null}get hint(){return this.element?.hint}get includeDate(){return!(this.dataType!==v.Date||this.field.type==="time-only")}get includeTime(){const{element:t,field:i}=this;if(this.dataType!==v.Date)return!1;if(i.type==="time-only")return!0;if(i.type==="date-only")return!1;const n=t?.input?.type==="datetime-picker"?t.input.includeTime:void 0;return n===void 0||n}get includeTimestamp(){return this.field.type==="timestamp-offset"}set initialFeature(t){this._set("initialFeature",t),this.notifyChange("valid")}get inputType(){return this.element?.input?.type}get isRelationshipKeyField(){const{field:t,layer:i}=this;return fe(i)&&!!i.relationships?.some(n=>n.keyField===t.name)}get label(){return this.element?.label||this.field.alias||this.field.name}get maxLength(){if(this.dataType===v.Date)return-1;const{field:i,element:n}=this,r=i?.length,o=H(n)?n.input.maxLength:NaN;return o!=null&&!isNaN(o)&&o>=-1&&(r===-1||o<=r)?o:r}get minLength(){if(this.dataType===v.Date)return-1;const{field:i,element:n}=this,r=i?.length,o=H(n)?n.input.minLength:NaN;return o!=null&&!isNaN(o)&&o>=-1&&(r===-1||o<=r)?o:-1}get name(){return this.field?.name}get range(){const{_dateRange:t,domain:i,field:n}=this,{max:r,min:o}=t,p=r!=null&&q(r)?r.getTime():null,c=o!=null&&q(o)?o.getTime():null,u=le(i)||ne(n);if(!u)return{max:p,min:c};const f=u.max===Number.MAX_VALUE?null:u.max,_=u.min===Number.MIN_VALUE?null:u.min;return{max:p!=null&&(f===null||f!=null&&p<f)?p:f,min:c!=null&&(_===null||_!=null&&c>_)?c:_}}get required(){const{editable:t,evaluatedRequiredExpression:i,field:n,visible:r}=this;return!!t&&(n?.nullable===!1||!(!r||i==null)&&i)}set required(t){this._overrideIfSome("required",t)}get submittable(){const{field:t,required:i,valid:n,value:r}=this;return(!i||r!=null)&&(!!n||this.initialFeature.getAttribute(t.name)===r)}get updating(){const{editableExpressionExecutor:t,valueExpressionExecutor:i}=this;return i!=null&&i.updating||t!=null&&t.updating}get valid(){const t=this.editable?this._validate():null;return this._set("error",t),t===null}get value(){if(this._shouldUseValueExpression){const t=this.evaluatedValueExpression;if(this.dataType===v.Date){if(t instanceof Date)return t.getTime();if(typeof t!="number")return parseInt(t,10)}return t!=null&&typeof t=="object"?t.toString():t}return this.get("_storedValue")}set value(t){this.notifyChange("evaluatedVisibilityExpression"),this.set("_storedValue",t)}get visible(){return!this._isEditTrackingField&&(this.evaluatedVisibilityExpression!=null?this.evaluatedVisibilityExpression:this.element!=null||this._isVisibleByDefault)}_isDomainCompatible(t){const{field:i}=this;if(t?.type==="coded-value"){const n=typeof t.codedValues[0].code;if(n==="string"&&k(i)||n==="number"&&F(i))return!0}return!!(t?.type==="range"&&F(i)||M(i))}_validate(){const{dataType:t,domain:i,field:n,initialFeature:r,minLength:o,required:p,valid:c,value:u}=this,f=p&&u===null,_=c!==void 0;return!f&&r.getAttribute(n.name)===u&&_?null:f?re.INVALID_TYPE:t==="text"&&o>-1&&typeof u=="string"&&u.length<o?_e.TOO_SHORT:i?u!==null||p?ae(i,u):null:oe(n,u)}};s([l()],a.prototype,"_storedValue",void 0),s([l()],a.prototype,"_configAllowsEdits",null),s([l()],a.prototype,"_layerAndFieldAllowEdits",null),s([l()],a.prototype,"_isVisibleByDefault",null),s([l()],a.prototype,"_isEditTrackingField",null),s([l()],a.prototype,"_shouldUseValueExpression",null),s([l()],a.prototype,"dataType",null),s([l()],a.prototype,"dateDataType",null),s([l()],a.prototype,"domain",null),s([l()],a.prototype,"editable",null),s([l({readOnly:!0})],a.prototype,"error",void 0),s([l()],a.prototype,"evaluatedRequiredExpression",null),s([l()],a.prototype,"evaluatedValueExpression",null),s([l()],a.prototype,"field",void 0),s([l()],a.prototype,"group",void 0),s([l({readOnly:!0})],a.prototype,"hint",null),s([l()],a.prototype,"includeDate",null),s([l()],a.prototype,"includeTime",null),s([l()],a.prototype,"includeTimestamp",null),s([l()],a.prototype,"initialFeature",null),s([l({readOnly:!0})],a.prototype,"inputType",null),s([l()],a.prototype,"label",null),s([l()],a.prototype,"maxLength",null),s([l()],a.prototype,"minLength",null),s([l({readOnly:!0})],a.prototype,"name",null),s([l()],a.prototype,"range",null),s([l()],a.prototype,"required",null),s([l()],a.prototype,"requiredExpressionExecutor",void 0),s([l()],a.prototype,"submittable",null),s([l({readOnly:!0})],a.prototype,"type",void 0),s([l()],a.prototype,"updating",null),s([l()],a.prototype,"valid",null),s([l({value:null})],a.prototype,"value",null),s([l()],a.prototype,"valueExpressionExecutor",void 0),s([l()],a.prototype,"visible",null),a=s([V("esri.widgets.FeatureForm.FieldInput")],a);const q=e=>e&&!Number.isNaN(e.valueOf()),Ue=a,X={hide:"hide",hideChildren:"hide-children"};function T(e){if(e)return e.listMode!=null?e.listMode:void 0}function Le(e){if(e)return e.minScale!=null?e.minScale:void 0}function Ve(e){if(e)return e.maxScale!=null?e.maxScale:void 0}function Ie(e){if(!e)return"inherited";const t=e.get("layer.capabilities.exportMap.supportsSublayerVisibility");if(typeof t=="boolean")return t?"independent":"inherited";const i=e.get("capabilities.exportMap.supportsSublayerVisibility");return typeof i=="boolean"?i?"independent":"inherited":e.visibilityMode!=null?e.visibilityMode:"independent"}function j(e){if(e&&(!("type"in e)||e.type!=="wmts")&&e.listMode!==X.hideChildren)return"sublayers"in e?"sublayers":"layers"in e?"layers":void 0}function ze(e){const t=e&&(e.get("layer.layer")||e.layer);if(!t)return!1;const i=t.get("capabilities.exportMap.supportsDynamicLayers");return typeof i!="boolean"||i}function Se(e){return T(e)!==X.hide}function Ae(e,t){if(!e||isNaN(t))return!1;const i=Le(e),n=Ve(e),r=i!=null&&!isNaN(i)&&i>0&&t>i,o=n!=null&&!isNaN(n)&&n>0&&t<n;return r||o}function Ce(e,t){e&&e.sort((i,n)=>{const r=t.indexOf(i.uid),o=t.indexOf(n.uid);return r>o?-1:r<o?1:0})}function Be(e,t){const i=e?.layer;if(!i)return;const n=j(i);n&&Ce(i.get(n),t)}function R(e){const t=e?.layer;return t&&"layers"in t?t.layers:null}function Xe(e,t){const i=e.layer?.uid;return i!=null?t.find(n=>n.layer?.uid===i):null}function $e(e){const t=Te(e)?e:null,i=e?.parent,n=i?.type==="map-image"?t?.source:null,r="";return n&&i?{layer:i,title:r,sublayerIds:[n.mapLayerId]}:{layer:e,title:r}}function Te(e){return!!e?.layer}var O;let x=O=class extends z{constructor(e){super(e),this.displayValueEnabled=!1,this.max=1,this.min=0,this.step=.1,this.type="slider",this.value=null}clone(){return new O({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})}};s([l()],x.prototype,"displayValueEnabled",void 0),s([l()],x.prototype,"max",void 0),s([l()],x.prototype,"min",void 0),s([l()],x.prototype,"step",void 0),s([l()],x.prototype,"value",void 0),x=O=s([V("esri.support.Action.ActionSlider")],x);const Fe=x,K="esri-layer-list-panel",S=`${K}__content`,E={base:K,content:S,contentLegend:`${S}--legend`,contentString:`${S}--string`,contentElement:`${S}--html-element`,contentWidget:`${S}--widget`},Ne="legends";let m=class extends B(pe){constructor(e,t){super(e,t),this._legend=null,this.content=null,this.image=null,this.listItem=null,this.open=!1,this.visible=!0}initialize(){this.addHandles(h(()=>this.content,e=>this._createLegend(e),b))}destroy(){this._legend=de(this._legend)}get className(){const{image:e}=this,t=this._getFirstWidget();return this._get("className")||(!e&&t?t.iconClass??"":"")}set className(e){this._override("className",e)}get disabled(){const{listItem:e,_legend:t,content:i}=this;return!e||!(Array.isArray(i)&&i.length>1)&&!!t&&(!t.activeLayerInfos?.length||!e.visibleAtCurrentScale||!e.visible)}set disabled(e){this._overrideIfSome("disabled",e)}get title(){const e=this._getFirstWidget();return this._get("title")||(e?.label??"")}set title(e){this._override("title",e)}render(){return I("div",{class:E.base},this._renderContents())}_renderContent(e){const{_legend:t,disabled:i}=this;return!e||i?null:e==="legend"&&t?I("div",{class:this.classes(E.content,E.contentLegend),key:t},t.render()):typeof e=="string"?I("div",{class:this.classes(E.content,E.contentString),key:e,innerHTML:e}):D(e)?I("div",{class:this.classes(E.content,E.contentWidget),key:e},e.render()):e instanceof HTMLElement?I("div",{class:this.classes(E.content,E.contentElement),key:e,bind:e,afterCreate:this._attachToNode}):null}_renderContents(){const{content:e}=this;return Array.isArray(e)?e.map(t=>this._renderContent(t)):this._renderContent(e)}_getLegendOptions(){const{listItem:e}=this;if(!e)return{};const{layer:t,view:i}=e;return t&&i?{view:i,layerInfos:[$e(t)]}:{}}async _createLegend(e){if(!this._hasLegend(e)||this._legend)return;const{default:t}=await ue(()=>import("./Legend-19f09c44.js"),["./Legend-19f09c44.js","./main-79e5ed80.js","./main-7772480e.css","./ExportImageParameters-7717516b.js","./floorFilterUtils-73949d2d.js","./sublayerUtils-7f6367bc.js","./pixelRangeUtils-04f58c28.js","./rendererConversion-22515807.js","./symbolUtils-2e5baa60.js","./colorUtils-c0f43caf.js","./utils-3be18bec.js","./vmEvent-27fa49b3.js"],import.meta.url),{listItem:i}=this,n=new t(this._getLegendOptions());this._legend=n,this.notifyChange("className"),this.notifyChange("title");const r=h(()=>[i?.view,i?.layer,i?.layer?.source,i?.layer?.parent],()=>this._updateLegend(n),b);this.addHandles(r,Ne),this.scheduleRender()}_hasLegend(e){const t="legend";return e===t||e!=null&&!!Array.isArray(e)&&e.includes(t)}_attachToNode(e){e.appendChild(this)}_updateLegend(e){e.set(this._getLegendOptions()),this.scheduleRender()}_getWidget(e){return e==="legend"?this._legend:D(e)?e:null}_getFirstWidget(){const{content:e}=this;if(Array.isArray(e)){let t=null;return e.some(i=>{const n=this._getWidget(i);return n&&(t=n),!!n}),t}return this._getWidget(e)}};s([l()],m.prototype,"_legend",void 0),s([l()],m.prototype,"className",null),s([l()],m.prototype,"content",void 0),s([l()],m.prototype,"disabled",null),s([l()],m.prototype,"image",void 0),s([l()],m.prototype,"listItem",void 0),s([l()],m.prototype,"title",null),s([l()],m.prototype,"open",void 0),s([l()],m.prototype,"visible",void 0),m=s([V("esri.widgets.LayerList.ListItemPanel")],m);const Y=m;var A;const Oe=C.ofType({key:"type",defaultKeyValue:"button",base:z,typeMap:{button:he,toggle:ce,slider:Fe}}),G=C.ofType(Oe),$="layer",N="child-list-mode",Pe="hide",ke="esri.widgets.LayerList.ListItem";let d=A=class extends B(W(U)){constructor(e){super(e),this.actionsSections=new G,this.actionsOpen=!1,this.checkPublishStatusEnabled=!1,this.children=new(C.ofType(A)),this.childrenSortable=!0,this.hidden=!1,this.layer=null,this.layerView=null,this.listItemCreatedFunction=null,this.open=!1,this.panel=null,this.parent=null,this.sortable=!0,this.view=null}initialize(){if(this.handles.add([h(()=>this.layer,e=>this._watchLayerProperties(e),b),h(()=>this.checkPublishStatusEnabled,e=>this._updateChildrenPublishing(e),b),h(()=>this.view,e=>this._updateChildrenView(e),b),h(()=>this.panel,e=>this._setListItemOnPanel(e),b),h(()=>[this.layer,this.view],()=>this._getLayerView(),b)]),typeof this.listItemCreatedFunction=="function"){const e={item:this};this.listItemCreatedFunction.call(null,e)}}destroy(){this.view=null}get connectionStatus(){const{layerView:e,publishing:t}=this;if(!t&&e&&"connectionStatus"in e)return e.connectionStatus}get error(){return this.layer?.loadError}get incompatible(){const{layerView:e}=this;return!(!e||!("spatialReferenceSupported"in e))&&!e.spatialReferenceSupported}castPanel(e){return this.get("panel.open")&&!e.hasOwnProperty("open")&&(e.open=!0),e?new Y(e):null}get title(){const e=this.get("layer.layer");return(!e||e&&this.get("layer.layer.loaded"))&&this.get("layer.title")||this.get("layer.attributes.title")||""}set title(e){this._override("title",e)}get publishing(){const{layer:e,checkPublishStatusEnabled:t}=this;return t&&e&&"publishingInfo"in e&&e.publishingInfo?.status==="publishing"}get updating(){const{layerView:e,connectionStatus:t,layer:i,publishing:n}=this;return!n&&!t&&(e?e.updating:i?.loadStatus==="loading"||!1)}get visible(){return this.layer?.visible}set visible(e){const t=this.layer;t&&(t.visible=e)}get visibleAtCurrentScale(){return!Ae(this.layer,this.get("view.scale"))}get visibilityMode(){return Ie(this.layer)}clone(){return new A({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,children:this.children.clone(),layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,open:this.open,panel:this.panel,title:this.title,view:this.view,visible:this.visible})}_setListItemOnPanel(e){e&&(e.listItem=this)}_updateChildrenPublishing(e){const t=this.children;t&&t.forEach(i=>i.checkPublishStatusEnabled=e)}_updateChildrenView(e){const t=this.children;t&&t.forEach(i=>i.view=e)}_addChildren(e){if(this.handles.remove(N),this.children.removeAll(),!e)return;e.forEach(i=>{this.handles.add(h(()=>i.listMode,()=>this._addChildren(e)),N)});const t=e.filter(i=>T(i)!==Pe);this.children.addMany(this._makeChildren(t))}_watchSublayerChanges(e){e&&this.handles.add(e.on("change",()=>{this._addChildren(e)}),$)}_initializeChildLayers(e){this._addChildren(e),this._watchSublayerChanges(e)}_makeChildren(e){return e.map(t=>Se(t)?new A({layer:t,checkPublishStatusEnabled:this.checkPublishStatusEnabled,listItemCreatedFunction:this.listItemCreatedFunction,parent:this,view:this.view}):null).filter(ye).reverse()}_watchLayerProperties(e){if(!this.handles||(this.handles.remove($),this.handles.remove(N),!e))return;if(this.handles.add(h(()=>e.listMode,()=>this._watchLayerProperties(e)),$),T(e)==="hide-children")return void this.children.removeAll();const t=j(e);t&&this.handles.add(h(()=>e[t],i=>{e.hasOwnProperty(t)&&this._initializeChildLayers(i)},b),$)}async _getLayerView(){const{layer:e,view:t}=this;if(e&&t)try{const i=await t.whenLayerView(e);if(i.layer!==this.layer)return;this._set("layerView",i)}catch{}}};s([l({type:G})],d.prototype,"actionsSections",void 0),s([l()],d.prototype,"actionsOpen",void 0),s([l()],d.prototype,"checkPublishStatusEnabled",void 0),s([l({type:C})],d.prototype,"children",void 0),s([l()],d.prototype,"childrenSortable",void 0),s([l({readOnly:!0})],d.prototype,"connectionStatus",null),s([l({readOnly:!0})],d.prototype,"error",null),s([l()],d.prototype,"hidden",void 0),s([l({readOnly:!0})],d.prototype,"incompatible",null),s([l()],d.prototype,"layer",void 0),s([l({readOnly:!0})],d.prototype,"layerView",void 0),s([l()],d.prototype,"listItemCreatedFunction",void 0),s([l()],d.prototype,"open",void 0),s([l({type:Y})],d.prototype,"panel",void 0),s([me("panel")],d.prototype,"castPanel",null),s([l()],d.prototype,"parent",void 0),s([l()],d.prototype,"sortable",void 0),s([l()],d.prototype,"title",null),s([l({readOnly:!0})],d.prototype,"publishing",null),s([l({readOnly:!0})],d.prototype,"updating",null),s([l()],d.prototype,"view",void 0),s([l()],d.prototype,"visible",null),s([l({readOnly:!0})],d.prototype,"visibleAtCurrentScale",null),s([l({readOnly:!0})],d.prototype,"visibilityMode",null),d=A=s([V(ke)],d);const J=d,g={view:"view",viewLayers:"view-layers",mapLayers:"map-layers",layerViews:"layer-views",layerListMode:"layer-list-mode"},Me="hide",Q=C.ofType(J);let L=class extends ve.EventedAccessor{constructor(e){super(e),this.checkPublishStatusEnabled=!1,this.listItemCreatedFunction=null,this.operationalItems=new Q,this.view=null}initialize(){this.addHandles([h(()=>[this.view,this.view?.ready],()=>this._viewHandles(),b),h(()=>[this.listItemCreatedFunction,this.checkPublishStatusEnabled],()=>this._recompileList())],g.view)}destroy(){this.removeAllHandles(),this.view=null,this.operationalItems.removeAll()}get state(){const e=this.get("view");return this.get("view.ready")?"ready":e?"loading":"disabled"}triggerAction(e,t){e&&!e.disabled&&this.emit("trigger-action",{action:e,item:t})}moveListItem(e,t,i,n){const r=e?.layer;if(!r)return;const o=this.view?.map?.layers,p=t?R(t):o,c=i?R(i):o;if(!p||!c)return;const{operationalItems:u}=this,f=t?.children||u,_=i?.children||u,P=c.length-n;e.parent=i||null,f.includes(e)&&f.remove(e),p.includes(r)&&p.remove(r),_.includes(e)||_.add(e,P),c.includes(r)||c.add(r,P)}_createLayerViewHandles(e){this.removeHandles(g.layerViews),this._compileList(),e&&this.addHandles(e.on("change",()=>this._compileList()),g.layerViews)}_createMapLayerHandles(e){this.removeHandles(g.mapLayers),this._compileList(),e&&this.addHandles(e.on("change",()=>this._compileList()),g.mapLayers)}_createListItem(e){const{view:t,listItemCreatedFunction:i,checkPublishStatusEnabled:n}=this;return new J({checkPublishStatusEnabled:n,layer:e,listItemCreatedFunction:i,view:t})}_removeAllItems(){this.operationalItems.removeAll()}_getViewableLayers(e){if(e)return e.filter(t=>T(t)!==Me)}_watchLayersListMode(e){this.removeHandles(g.layerListMode),e&&e.forEach(t=>{"listMode"in t&&this.addHandles(h(()=>t.listMode,()=>this._compileList()),g.layerListMode)})}_compileList(){const e=this.get("view.map.layers");this._watchLayersListMode(e);const t=this._getViewableLayers(e);t&&t.length?(this._createNewItems(t),this._removeItems(t),this._sortItems(t)):this._removeAllItems()}_createNewItems(e){const{operationalItems:t}=this;e.forEach(i=>{t.find(n=>n.layer===i)||t.add(this._createListItem(i))})}_removeItems(e){const{operationalItems:t}=this,i=[];t.forEach(n=>{n&&e&&e.includes(n.layer)||i.push(n)}),t.removeMany(i)}_sortItems(e){const{operationalItems:t}=this;t.sort((i,n)=>{const r=e.indexOf(i.layer),o=e.indexOf(n.layer);return r>o?-1:r<o?1:0})}_recompileList(){this._removeAllItems(),this._compileList()}_viewHandles(){const{view:e}=this;this.removeHandles([g.mapLayers,g.layerViews,g.viewLayers]),this._recompileList(),e&&e.ready&&this.addHandles([h(()=>this.view?.map?.allLayers,t=>this._createMapLayerHandles(t),b),h(()=>this.view?.allLayerViews,t=>this._createLayerViewHandles(t),b)],g.viewLayers)}};s([l()],L.prototype,"checkPublishStatusEnabled",void 0),s([l()],L.prototype,"listItemCreatedFunction",void 0),s([l({type:Q})],L.prototype,"operationalItems",void 0),s([l({readOnly:!0})],L.prototype,"state",null),s([l()],L.prototype,"view",void 0),L=s([V("esri.widgets.LayerList.LayerListViewModel")],L);const je=L;export{Ue as V,we as a,j as b,Xe as c,Be as d,J as k,Ee as l,Se as o,Ce as s,ze as u,je as y};
