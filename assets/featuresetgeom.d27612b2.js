import{q as p}from"./arcadeUtils.ad069cdf.js";import{pl as m,pC as s,oT as o,p3 as R,o$ as f}from"./vendor.fd144a9e.js";import{d as w,g as c}from"./SpatialFilter.58a6f19b.js";import{w as S,A,x as g,O as F,p as v,g as d,h as E}from"./geometryEngineAsync.3bf69bae.js";import"./WhereClause.6eb5053b.js";function l(e){return e instanceof o}function i(e,a,r,u){return u(e,a,async function(h,t,n){if(n.length<2)throw new Error("Missing Parameters");if((n=m(n))[0]===null&&n[1]===null)return!1;if(s(n[0])){if(n[1]instanceof o)return new w({parentfeatureset:n[0],relation:r,relationGeom:n[1]});if(n[1]===null)return new c({parentfeatureset:n[0]});throw new Error("Spatial Relation cannot accept this parameter type")}if(l(n[0])){if(l(n[1])){switch(r){case"esriSpatialRelEnvelopeIntersects":return d(p(n[0]),p(n[1]));case"esriSpatialRelIntersects":return d(n[0],n[1]);case"esriSpatialRelContains":return v(n[0],n[1]);case"esriSpatialRelOverlaps":return F(n[0],n[1]);case"esriSpatialRelWithin":return g(n[0],n[1]);case"esriSpatialRelTouches":return A(n[0],n[1]);case"esriSpatialRelCrosses":return S(n[0],n[1])}throw new Error("Unrecognised Relationship")}if(s(n[1]))return new w({parentfeatureset:n[1],relation:r,relationGeom:n[0]});if(n[1]===null)return!1;throw new Error("Spatial Relation cannot accept this parameter type")}if(n[0]!==null)throw new Error("Spatial Relation cannot accept this parameter type");return s(n[1])?new c({parentfeatureset:n[1]}):!(n[1]instanceof o||n[1]===null)&&void 0})}function O(e){e.mode==="async"&&(e.functions.intersects=function(a,r){return i(a,r,"esriSpatialRelIntersects",e.standardFunctionAsync)},e.functions.envelopeintersects=function(a,r){return i(a,r,"esriSpatialRelEnvelopeIntersects",e.standardFunctionAsync)},e.signatures.push({name:"envelopeintersects",min:"2",max:"2"}),e.functions.contains=function(a,r){return i(a,r,"esriSpatialRelContains",e.standardFunctionAsync)},e.functions.overlaps=function(a,r){return i(a,r,"esriSpatialRelOverlaps",e.standardFunctionAsync)},e.functions.within=function(a,r){return i(a,r,"esriSpatialRelWithin",e.standardFunctionAsync)},e.functions.touches=function(a,r){return i(a,r,"esriSpatialRelTouches",e.standardFunctionAsync)},e.functions.crosses=function(a,r){return i(a,r,"esriSpatialRelCrosses",e.standardFunctionAsync)},e.functions.relate=function(a,r){return e.standardFunctionAsync(a,r,function(u,h,t){if(t=m(t),R(t,3,3),l(t[0])&&l(t[1]))return E(t[0],t[1],f(t[2]));if(t[0]instanceof o&&t[1]===null||t[1]instanceof o&&t[0]===null)return!1;if(s(t[0])&&t[1]===null)return new c({parentfeatureset:t[0]});if(s(t[1])&&t[0]===null)return new c({parentfeatureset:t[1]});if(s(t[0])&&t[1]instanceof o)return t[0].relate(t[1],f(t[2]));if(s(t[1])&&t[0]instanceof o)return t[1].relate(t[0],f(t[2]));if(t[0]===null&&t[1]===null)return!1;throw new Error("Illegal Argument")})})}export{O as registerFunctions};
