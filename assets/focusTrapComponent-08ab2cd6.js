import{ah as X,gW as Z,gX as z,gY as J,gZ as M,g_ as k,g$ as x}from"./index-cdda5707.js";/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.4.2
 */const ce=(r,t)=>{const u=r.level?`h${r.level}`:"div";return delete r.level,X(u,{...r},t)};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.4.2
 *//*!
* focus-trap 7.4.2
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function S(r,t){var u=Object.keys(r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);t&&(o=o.filter(function(v){return Object.getOwnPropertyDescriptor(r,v).enumerable})),u.push.apply(u,o)}return u}function G(r){for(var t=1;t<arguments.length;t++){var u=arguments[t]!=null?arguments[t]:{};t%2?S(Object(u),!0).forEach(function(o){Q(r,o,u[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(u)):S(Object(u)).forEach(function(o){Object.defineProperty(r,o,Object.getOwnPropertyDescriptor(u,o))})}return r}function Q(r,t,u){return t=ee(t),t in r?Object.defineProperty(r,t,{value:u,enumerable:!0,configurable:!0,writable:!0}):r[t]=u,r}function _(r,t){if(typeof r!="object"||r===null)return r;var u=r[Symbol.toPrimitive];if(u!==void 0){var o=u.call(r,t||"default");if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function ee(r){var t=_(r,"string");return typeof t=="symbol"?t:String(t)}var H={activateTrap:function(t,u){if(t.length>0){var o=t[t.length-1];o!==u&&o.pause()}var v=t.indexOf(u);v===-1||t.splice(v,1),t.push(u)},deactivateTrap:function(t,u){var o=t.indexOf(u);o!==-1&&t.splice(o,1),t.length>0&&t[t.length-1].unpause()}},te=function(t){return t.tagName&&t.tagName.toLowerCase()==="input"&&typeof t.select=="function"},ae=function(t){return t.key==="Escape"||t.key==="Esc"||t.keyCode===27},P=function(t){return t.key==="Tab"||t.keyCode===9},ne=function(t){return P(t)&&!t.shiftKey},re=function(t){return P(t)&&t.shiftKey},U=function(t){return setTimeout(t,0)},Y=function(t,u){var o=-1;return t.every(function(v,s){return u(v)?(o=s,!1):!0}),o},N=function(t){for(var u=arguments.length,o=new Array(u>1?u-1:0),v=1;v<u;v++)o[v-1]=arguments[v];return typeof t=="function"?t.apply(void 0,o):t},O=function(t){return t.target.shadowRoot&&typeof t.composedPath=="function"?t.composedPath()[0]:t.target},ie=[],oe=function(t,u){var o=u?.document||document,v=u?.trapStack||ie,s=G({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:ne,isKeyBackward:re},u),i={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},h,p=function(e,a,n){return e&&e[a]!==void 0?e[a]:s[n||a]},m=function(e,a){var n=typeof a?.composedPath=="function"?a.composedPath():void 0;return i.containerGroups.findIndex(function(c){var l=c.container,d=c.tabbableNodes;return l.contains(e)||n?.includes(l)||d.find(function(b){return b===e})})},y=function(e){var a=s[e];if(typeof a=="function"){for(var n=arguments.length,c=new Array(n>1?n-1:0),l=1;l<n;l++)c[l-1]=arguments[l];a=a.apply(void 0,c)}if(a===!0&&(a=void 0),!a){if(a===void 0||a===!1)return a;throw new Error("`".concat(e,"` was specified but was not a node, or did not return a node"))}var d=a;if(typeof a=="string"&&(d=o.querySelector(a),!d))throw new Error("`".concat(e,"` as selector refers to no known node"));return d},E=function(){var e=y("initialFocus");if(e===!1)return!1;if(e===void 0)if(m(o.activeElement)>=0)e=o.activeElement;else{var a=i.tabbableGroups[0],n=a&&a.firstTabbableNode;e=n||y("fallbackFocus")}if(!e)throw new Error("Your focus-trap needs to have at least one focusable element");return e},T=function(){if(i.containerGroups=i.containers.map(function(e){var a=J(e,s.tabbableOptions),n=M(e,s.tabbableOptions);return{container:e,tabbableNodes:a,focusableNodes:n,firstTabbableNode:a.length>0?a[0]:null,lastTabbableNode:a.length>0?a[a.length-1]:null,nextTabbableNode:function(l){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,b=n.findIndex(function(g){return g===l});if(!(b<0))return d?n.slice(b+1).find(function(g){return k(g,s.tabbableOptions)}):n.slice(0,b).reverse().find(function(g){return k(g,s.tabbableOptions)})}}}),i.tabbableGroups=i.containerGroups.filter(function(e){return e.tabbableNodes.length>0}),i.tabbableGroups.length<=0&&!y("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},F=function f(e){if(e!==!1&&e!==o.activeElement){if(!e||!e.focus){f(E());return}e.focus({preventScroll:!!s.preventScroll}),i.mostRecentlyFocusedNode=e,te(e)&&e.select()}},A=function(e){var a=y("setReturnFocus",e);return a||(a===!1?!1:e)},D=function(e){var a=O(e);if(!(m(a,e)>=0)){if(N(s.clickOutsideDeactivates,e)){h.deactivate({returnFocus:s.returnFocusOnDeactivate});return}N(s.allowOutsideClick,e)||e.preventDefault()}},L=function(e){var a=O(e),n=m(a,e)>=0;n||a instanceof Document?n&&(i.mostRecentlyFocusedNode=a):(e.stopImmediatePropagation(),F(i.mostRecentlyFocusedNode||E()))},q=function(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=O(e);T();var c=null;if(i.tabbableGroups.length>0){var l=m(n,e),d=l>=0?i.containerGroups[l]:void 0;if(l<0)a?c=i.tabbableGroups[i.tabbableGroups.length-1].lastTabbableNode:c=i.tabbableGroups[0].firstTabbableNode;else if(a){var b=Y(i.tabbableGroups,function(C){var K=C.firstTabbableNode;return n===K});if(b<0&&(d.container===n||x(n,s.tabbableOptions)&&!k(n,s.tabbableOptions)&&!d.nextTabbableNode(n,!1))&&(b=l),b>=0){var g=b===0?i.tabbableGroups.length-1:b-1,$=i.tabbableGroups[g];c=$.lastTabbableNode}else P(e)||(c=d.nextTabbableNode(n,!1))}else{var w=Y(i.tabbableGroups,function(C){var K=C.lastTabbableNode;return n===K});if(w<0&&(d.container===n||x(n,s.tabbableOptions)&&!k(n,s.tabbableOptions)&&!d.nextTabbableNode(n))&&(w=l),w>=0){var V=w===i.tabbableGroups.length-1?0:w+1,W=i.tabbableGroups[V];c=W.firstTabbableNode}else P(e)||(c=d.nextTabbableNode(n))}}else c=y("fallbackFocus");c&&(P(e)&&e.preventDefault(),F(c))},R=function(e){if(ae(e)&&N(s.escapeDeactivates,e)!==!1){e.preventDefault(),h.deactivate();return}(s.isKeyForward(e)||s.isKeyBackward(e))&&q(e,s.isKeyBackward(e))},B=function(e){var a=O(e);m(a,e)>=0||N(s.clickOutsideDeactivates,e)||N(s.allowOutsideClick,e)||(e.preventDefault(),e.stopImmediatePropagation())},I=function(){if(i.active)return H.activateTrap(v,h),i.delayInitialFocusTimer=s.delayInitialFocus?U(function(){F(E())}):F(E()),o.addEventListener("focusin",L,!0),o.addEventListener("mousedown",D,{capture:!0,passive:!1}),o.addEventListener("touchstart",D,{capture:!0,passive:!1}),o.addEventListener("click",B,{capture:!0,passive:!1}),o.addEventListener("keydown",R,{capture:!0,passive:!1}),h},j=function(){if(i.active)return o.removeEventListener("focusin",L,!0),o.removeEventListener("mousedown",D,!0),o.removeEventListener("touchstart",D,!0),o.removeEventListener("click",B,!0),o.removeEventListener("keydown",R,!0),h};return h={get active(){return i.active},get paused(){return i.paused},activate:function(e){if(i.active)return this;var a=p(e,"onActivate"),n=p(e,"onPostActivate"),c=p(e,"checkCanFocusTrap");c||T(),i.active=!0,i.paused=!1,i.nodeFocusedBeforeActivation=o.activeElement,a?.();var l=function(){c&&T(),I(),n?.()};return c?(c(i.containers.concat()).then(l,l),this):(l(),this)},deactivate:function(e){if(!i.active)return this;var a=G({onDeactivate:s.onDeactivate,onPostDeactivate:s.onPostDeactivate,checkCanReturnFocus:s.checkCanReturnFocus},e);clearTimeout(i.delayInitialFocusTimer),i.delayInitialFocusTimer=void 0,j(),i.active=!1,i.paused=!1,H.deactivateTrap(v,h);var n=p(a,"onDeactivate"),c=p(a,"onPostDeactivate"),l=p(a,"checkCanReturnFocus"),d=p(a,"returnFocus","returnFocusOnDeactivate");n?.();var b=function(){U(function(){d&&F(A(i.nodeFocusedBeforeActivation)),c?.()})};return d&&l?(l(A(i.nodeFocusedBeforeActivation)).then(b,b),this):(b(),this)},pause:function(e){if(i.paused||!i.active)return this;var a=p(e,"onPause"),n=p(e,"onPostPause");return i.paused=!0,a?.(),j(),n?.(),this},unpause:function(e){if(!i.paused||!i.active)return this;var a=p(e,"onUnpause"),n=p(e,"onPostUnpause");return i.paused=!1,a?.(),T(),I(),n?.(),this},updateContainerElements:function(e){var a=[].concat(e).filter(Boolean);return i.containers=a.map(function(n){return typeof n=="string"?o.querySelector(n):n}),i.active&&T(),this}},h.updateContainerElements(t),h};const ue=[];function le(r,t){const{el:u}=r,o=t?.focusTrapEl||u;if(!o)return;const v={clickOutsideDeactivates:!0,escapeDeactivates:!1,fallbackFocus:o,setReturnFocus:s=>(Z(s),!1),...t?.focusTrapOptions,document:u.ownerDocument,tabbableOptions:z,trapStack:ue};r.focusTrap=oe(o,v)}function fe(r,t){r.focusTrapDisabled||r.focusTrap?.activate(t)}function de(r,t){r.focusTrap?.deactivate(t)}function ve(r){r.focusTrap?.updateContainerElements(r.el)}export{ce as H,fe as a,le as c,de as d,ve as u};
