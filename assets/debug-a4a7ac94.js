import{aD as w,aE as x,gN as qr,au as Yr,aF as $t,ol as vi,cr as At,aU as zi,xQ as wc,m9 as G,xR as Cc,cN as Mi,xS as Ac,dA as Zr,op as Ro,xT as Li,xU as dr,vQ as Rr,bi as Sc,hJ as Nn,xV as xc,aB as mi,lT as te,xW as Ec,ok as Pe,tR as Ne,cs as Ic,on,bx as Se,cd as zo,xX as Tc,xY as Pc,fX as an,m0 as Oc,a_ as kc,xG as Dc,cc as hr,f_ as Rc,pm as zc,lV as No,ce as he,dY as ai,cD as wd,aL as ln,c2 as Nc,ca as Fc,cg as Fo,lM as Mc,sd as fs,eh as Lc,aT as $c,pP as Bc,xZ as Hc,hw as jc,l0 as Uc,pR as ms,om as Cd,x_ as wa,m7 as Ca,az as br,dT as Vc,cy as Wc,t0 as Gc,x$ as qc,ck as Yc,gY as yi,dw as Zc,gZ as $i,c3 as Fn,dk as Xc,aW as Jc,sF as Kc,y0 as Qc,sD as tu,fA as eu,j4 as iu,i_ as ru,sf as Aa}from"./main-79e5ed80.js";import"./rasterRenderers-5247beb2.js";import{Q as Sa,I as nu,n as su,r as ou}from"./vmEvent-27fa49b3.js";import{V as au,k as lu,y as Ad,c as _s,d as du,s as hu,u as cu}from"./LayerListViewModel-363ded88.js";import{p as gs}from"./uriUtils-6b0395c3.js";import"./vectorFieldUtils-d080e5ba.js";import"./colorUtils-c0f43caf.js";import"./pixelRangeUtils-04f58c28.js";import"./normalizeUtils-996b11fe.js";import"./normalizeUtilsCommon-4aa2ad72.js";var En;let _e=En=class extends Yr{constructor(i){super(i),this.autoCloseMenu=!1,this.iconClass=null,this.items=null,this.label=null,this.open=!1,this.selected=!1,this.selectionEnabled=!1,this.clickFunction=null}castItems(i){return i?i.map(t=>t instanceof En?t:new En(t)):null}};w([x()],_e.prototype,"autoCloseMenu",void 0),w([x()],_e.prototype,"iconClass",void 0),w([x()],_e.prototype,"items",void 0),w([qr("items")],_e.prototype,"castItems",null),w([x()],_e.prototype,"label",void 0),w([x()],_e.prototype,"open",void 0),w([x()],_e.prototype,"selected",void 0),w([x()],_e.prototype,"selectionEnabled",void 0),w([x()],_e.prototype,"clickFunction",void 0),_e=En=w([$t("esri.widgets.FeatureTable.Grid.support.ButtonMenuItem")],_e);const ne=_e;let Pi=class extends Yr{constructor(t){super(t),this.items=null,this.open=!1}castItems(t){return t?t.map(e=>e instanceof ne?e:new ne(e)):null}};w([x()],Pi.prototype,"items",void 0),w([qr("items")],Pi.prototype,"castItems",null),w([x()],Pi.prototype,"open",void 0),Pi=w([$t("esri.widgets.FeatureTable.Grid.support.ButtonMenuViewModel")],Pi);const uu=Pi;function ue(i){if(i==null)return window;if(i.toString()!=="[object Window]"){var t=i.ownerDocument;return t&&t.defaultView||window}return i}function bi(i){var t=ue(i).Element;return i instanceof t||i instanceof Element}function ye(i){var t=ue(i).HTMLElement;return i instanceof t||i instanceof HTMLElement}function Mo(i){if(typeof ShadowRoot>"u")return!1;var t=ue(i).ShadowRoot;return i instanceof t||i instanceof ShadowRoot}var gi=Math.max,Mn=Math.min,ji=Math.round;function Ks(){var i=navigator.userAgentData;return i!=null&&i.brands&&Array.isArray(i.brands)?i.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function Sd(){return!/^((?!chrome|android).)*safari/i.test(Ks())}function Ui(i,t,e){t===void 0&&(t=!1),e===void 0&&(e=!1);var r=i.getBoundingClientRect(),n=1,s=1;t&&ye(i)&&(n=i.offsetWidth>0&&ji(r.width)/i.offsetWidth||1,s=i.offsetHeight>0&&ji(r.height)/i.offsetHeight||1);var o=bi(i)?ue(i):window,a=o.visualViewport,l=!Sd()&&e,d=(r.left+(l&&a?a.offsetLeft:0))/n,h=(r.top+(l&&a?a.offsetTop:0))/s,c=r.width/n,m=r.height/s;return{width:c,height:m,top:h,right:d+c,bottom:h+m,left:d,x:d,y:h}}function Lo(i){var t=ue(i),e=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:e,scrollTop:r}}function pu(i){return{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}}function fu(i){return i===ue(i)||!ye(i)?Lo(i):pu(i)}function De(i){return i?(i.nodeName||"").toLowerCase():null}function li(i){return((bi(i)?i.ownerDocument:i.document)||window.document).documentElement}function $o(i){return Ui(li(i)).left+Lo(i).scrollLeft}function He(i){return ue(i).getComputedStyle(i)}function Bo(i){var t=He(i),e=t.overflow,r=t.overflowX,n=t.overflowY;return/auto|scroll|overlay|hidden/.test(e+n+r)}function mu(i){var t=i.getBoundingClientRect(),e=ji(t.width)/i.offsetWidth||1,r=ji(t.height)/i.offsetHeight||1;return e!==1||r!==1}function _u(i,t,e){e===void 0&&(e=!1);var r=ye(t),n=ye(t)&&mu(t),s=li(t),o=Ui(i,n,e),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!e)&&((De(t)!=="body"||Bo(s))&&(a=fu(t)),ye(t)?(l=Ui(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):s&&(l.x=$o(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function Ho(i){var t=Ui(i),e=i.offsetWidth,r=i.offsetHeight;return Math.abs(t.width-e)<=1&&(e=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:i.offsetLeft,y:i.offsetTop,width:e,height:r}}function rs(i){return De(i)==="html"?i:i.assignedSlot||i.parentNode||(Mo(i)?i.host:null)||li(i)}function xd(i){return["html","body","#document"].indexOf(De(i))>=0?i.ownerDocument.body:ye(i)&&Bo(i)?i:xd(rs(i))}function vr(i,t){var e;t===void 0&&(t=[]);var r=xd(i),n=r===((e=i.ownerDocument)==null?void 0:e.body),s=ue(r),o=n?[s].concat(s.visualViewport||[],Bo(r)?r:[]):r,a=t.concat(o);return n?a:a.concat(vr(rs(o)))}function gu(i){return["table","td","th"].indexOf(De(i))>=0}function xa(i){return!ye(i)||He(i).position==="fixed"?null:i.offsetParent}function yu(i){var t=/firefox/i.test(Ks()),e=/Trident/i.test(Ks());if(e&&ye(i)){var r=He(i);if(r.position==="fixed")return null}var n=rs(i);for(Mo(n)&&(n=n.host);ye(n)&&["html","body"].indexOf(De(n))<0;){var s=He(n);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||t&&s.willChange==="filter"||t&&s.filter&&s.filter!=="none")return n;n=n.parentNode}return null}function Xr(i){for(var t=ue(i),e=xa(i);e&&gu(e)&&He(e).position==="static";)e=xa(e);return e&&(De(e)==="html"||De(e)==="body"&&He(e).position==="static")?t:e||yu(i)||t}var se="top",ve="bottom",we="right",oe="left",jo="auto",Jr=[se,ve,we,oe],Vi="start",zr="end",bu="clippingParents",Ed="viewport",tr="popper",vu="reference",Ea=Jr.reduce(function(i,t){return i.concat([t+"-"+Vi,t+"-"+zr])},[]),Id=[].concat(Jr,[jo]).reduce(function(i,t){return i.concat([t,t+"-"+Vi,t+"-"+zr])},[]),wu="beforeRead",Cu="read",Au="afterRead",Su="beforeMain",xu="main",Eu="afterMain",Iu="beforeWrite",Tu="write",Pu="afterWrite",Ou=[wu,Cu,Au,Su,xu,Eu,Iu,Tu,Pu];function ku(i){var t=new Map,e=new Set,r=[];i.forEach(function(s){t.set(s.name,s)});function n(s){e.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!e.has(a)){var l=t.get(a);l&&n(l)}}),r.push(s)}return i.forEach(function(s){e.has(s.name)||n(s)}),r}function Du(i){var t=ku(i);return Ou.reduce(function(e,r){return e.concat(t.filter(function(n){return n.phase===r}))},[])}function Ru(i){var t;return function(){return t||(t=new Promise(function(e){Promise.resolve().then(function(){t=void 0,e(i())})})),t}}function zu(i){var t=i.reduce(function(e,r){var n=e[r.name];return e[r.name]=n?Object.assign({},n,r,{options:Object.assign({},n.options,r.options),data:Object.assign({},n.data,r.data)}):r,e},{});return Object.keys(t).map(function(e){return t[e]})}function Nu(i,t){var e=ue(i),r=li(i),n=e.visualViewport,s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(n){s=n.width,o=n.height;var d=Sd();(d||!d&&t==="fixed")&&(a=n.offsetLeft,l=n.offsetTop)}return{width:s,height:o,x:a+$o(i),y:l}}function Fu(i){var t,e=li(i),r=Lo(i),n=(t=i.ownerDocument)==null?void 0:t.body,s=gi(e.scrollWidth,e.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),o=gi(e.scrollHeight,e.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),a=-r.scrollLeft+$o(i),l=-r.scrollTop;return He(n||e).direction==="rtl"&&(a+=gi(e.clientWidth,n?n.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function Td(i,t){var e=t.getRootNode&&t.getRootNode();if(i.contains(t))return!0;if(e&&Mo(e)){var r=t;do{if(r&&i.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Qs(i){return Object.assign({},i,{left:i.x,top:i.y,right:i.x+i.width,bottom:i.y+i.height})}function Mu(i,t){var e=Ui(i,!1,t==="fixed");return e.top=e.top+i.clientTop,e.left=e.left+i.clientLeft,e.bottom=e.top+i.clientHeight,e.right=e.left+i.clientWidth,e.width=i.clientWidth,e.height=i.clientHeight,e.x=e.left,e.y=e.top,e}function Ia(i,t,e){return t===Ed?Qs(Nu(i,e)):bi(t)?Mu(t,e):Qs(Fu(li(i)))}function Lu(i){var t=vr(rs(i)),e=["absolute","fixed"].indexOf(He(i).position)>=0,r=e&&ye(i)?Xr(i):i;return bi(r)?t.filter(function(n){return bi(n)&&Td(n,r)&&De(n)!=="body"}):[]}function $u(i,t,e,r){var n=t==="clippingParents"?Lu(i):[].concat(t),s=[].concat(n,[e]),o=s[0],a=s.reduce(function(l,d){var h=Ia(i,d,r);return l.top=gi(h.top,l.top),l.right=Mn(h.right,l.right),l.bottom=Mn(h.bottom,l.bottom),l.left=gi(h.left,l.left),l},Ia(i,o,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function Oe(i){return i.split("-")[0]}function Wi(i){return i.split("-")[1]}function Uo(i){return["top","bottom"].indexOf(i)>=0?"x":"y"}function Pd(i){var t=i.reference,e=i.element,r=i.placement,n=r?Oe(r):null,s=r?Wi(r):null,o=t.x+t.width/2-e.width/2,a=t.y+t.height/2-e.height/2,l;switch(n){case se:l={x:o,y:t.y-e.height};break;case ve:l={x:o,y:t.y+t.height};break;case we:l={x:t.x+t.width,y:a};break;case oe:l={x:t.x-e.width,y:a};break;default:l={x:t.x,y:t.y}}var d=n?Uo(n):null;if(d!=null){var h=d==="y"?"height":"width";switch(s){case Vi:l[d]=l[d]-(t[h]/2-e[h]/2);break;case zr:l[d]=l[d]+(t[h]/2-e[h]/2);break}}return l}function Od(){return{top:0,right:0,bottom:0,left:0}}function kd(i){return Object.assign({},Od(),i)}function Dd(i,t){return t.reduce(function(e,r){return e[r]=i,e},{})}function Nr(i,t){t===void 0&&(t={});var e=t,r=e.placement,n=r===void 0?i.placement:r,s=e.strategy,o=s===void 0?i.strategy:s,a=e.boundary,l=a===void 0?bu:a,d=e.rootBoundary,h=d===void 0?Ed:d,c=e.elementContext,m=c===void 0?tr:c,p=e.altBoundary,g=p===void 0?!1:p,f=e.padding,b=f===void 0?0:f,y=kd(typeof b!="number"?b:Dd(b,Jr)),v=m===tr?vu:tr,S=i.rects.popper,I=i.elements[g?v:m],T=$u(bi(I)?I:I.contextElement||li(i.elements.popper),l,h,o),D=Ui(i.elements.reference),R=Pd({reference:D,element:S,strategy:"absolute",placement:n}),M=Qs(Object.assign({},S,R)),O=m===tr?M:D,H={top:T.top-O.top+y.top,bottom:O.bottom-T.bottom+y.bottom,left:T.left-O.left+y.left,right:O.right-T.right+y.right},J=i.modifiersData.offset;if(m===tr&&J){var E=J[n];Object.keys(H).forEach(function(N){var _=[we,ve].indexOf(N)>=0?1:-1,$=[se,ve].indexOf(N)>=0?"y":"x";H[N]+=E[$]*_})}return H}var Ta={placement:"bottom",modifiers:[],strategy:"absolute"};function Pa(){for(var i=arguments.length,t=new Array(i),e=0;e<i;e++)t[e]=arguments[e];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function Bu(i){i===void 0&&(i={});var t=i,e=t.defaultModifiers,r=e===void 0?[]:e,n=t.defaultOptions,s=n===void 0?Ta:n;return function(a,l,d){d===void 0&&(d=s);var h={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ta,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},c=[],m=!1,p={state:h,setOptions:function(y){var v=typeof y=="function"?y(h.options):y;f(),h.options=Object.assign({},s,h.options,v),h.scrollParents={reference:bi(a)?vr(a):a.contextElement?vr(a.contextElement):[],popper:vr(l)};var S=Du(zu([].concat(r,h.options.modifiers)));return h.orderedModifiers=S.filter(function(I){return I.enabled}),g(),p.update()},forceUpdate:function(){if(!m){var y=h.elements,v=y.reference,S=y.popper;if(Pa(v,S)){h.rects={reference:_u(v,Xr(S),h.options.strategy==="fixed"),popper:Ho(S)},h.reset=!1,h.placement=h.options.placement,h.orderedModifiers.forEach(function(H){return h.modifiersData[H.name]=Object.assign({},H.data)});for(var I=0;I<h.orderedModifiers.length;I++){if(h.reset===!0){h.reset=!1,I=-1;continue}var T=h.orderedModifiers[I],D=T.fn,R=T.options,M=R===void 0?{}:R,O=T.name;typeof D=="function"&&(h=D({state:h,options:M,name:O,instance:p})||h)}}}},update:Ru(function(){return new Promise(function(b){p.forceUpdate(),b(h)})}),destroy:function(){f(),m=!0}};if(!Pa(a,l))return p;p.setOptions(d).then(function(b){!m&&d.onFirstUpdate&&d.onFirstUpdate(b)});function g(){h.orderedModifiers.forEach(function(b){var y=b.name,v=b.options,S=v===void 0?{}:v,I=b.effect;if(typeof I=="function"){var T=I({state:h,name:y,instance:p,options:S}),D=function(){};c.push(T||D)}})}function f(){c.forEach(function(b){return b()}),c=[]}return p}}var dn={passive:!0};function Hu(i){var t=i.state,e=i.instance,r=i.options,n=r.scroll,s=n===void 0?!0:n,o=r.resize,a=o===void 0?!0:o,l=ue(t.elements.popper),d=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&d.forEach(function(h){h.addEventListener("scroll",e.update,dn)}),a&&l.addEventListener("resize",e.update,dn),function(){s&&d.forEach(function(h){h.removeEventListener("scroll",e.update,dn)}),a&&l.removeEventListener("resize",e.update,dn)}}const ju={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Hu,data:{}};function Uu(i){var t=i.state,e=i.name;t.modifiersData[e]=Pd({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const Vu={name:"popperOffsets",enabled:!0,phase:"read",fn:Uu,data:{}};var Wu={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Gu(i,t){var e=i.x,r=i.y,n=t.devicePixelRatio||1;return{x:ji(e*n)/n||0,y:ji(r*n)/n||0}}function Oa(i){var t,e=i.popper,r=i.popperRect,n=i.placement,s=i.variation,o=i.offsets,a=i.position,l=i.gpuAcceleration,d=i.adaptive,h=i.roundOffsets,c=i.isFixed,m=o.x,p=m===void 0?0:m,g=o.y,f=g===void 0?0:g,b=typeof h=="function"?h({x:p,y:f}):{x:p,y:f};p=b.x,f=b.y;var y=o.hasOwnProperty("x"),v=o.hasOwnProperty("y"),S=oe,I=se,T=window;if(d){var D=Xr(e),R="clientHeight",M="clientWidth";if(D===ue(e)&&(D=li(e),He(D).position!=="static"&&a==="absolute"&&(R="scrollHeight",M="scrollWidth")),D=D,n===se||(n===oe||n===we)&&s===zr){I=ve;var O=c&&D===T&&T.visualViewport?T.visualViewport.height:D[R];f-=O-r.height,f*=l?1:-1}if(n===oe||(n===se||n===ve)&&s===zr){S=we;var H=c&&D===T&&T.visualViewport?T.visualViewport.width:D[M];p-=H-r.width,p*=l?1:-1}}var J=Object.assign({position:a},d&&Wu),E=h===!0?Gu({x:p,y:f},ue(e)):{x:p,y:f};if(p=E.x,f=E.y,l){var N;return Object.assign({},J,(N={},N[I]=v?"0":"",N[S]=y?"0":"",N.transform=(T.devicePixelRatio||1)<=1?"translate("+p+"px, "+f+"px)":"translate3d("+p+"px, "+f+"px, 0)",N))}return Object.assign({},J,(t={},t[I]=v?f+"px":"",t[S]=y?p+"px":"",t.transform="",t))}function qu(i){var t=i.state,e=i.options,r=e.gpuAcceleration,n=r===void 0?!0:r,s=e.adaptive,o=s===void 0?!0:s,a=e.roundOffsets,l=a===void 0?!0:a,d={placement:Oe(t.placement),variation:Wi(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:n,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,Oa(Object.assign({},d,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,Oa(Object.assign({},d,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const Yu={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:qu,data:{}};function Zu(i){var t=i.state;Object.keys(t.elements).forEach(function(e){var r=t.styles[e]||{},n=t.attributes[e]||{},s=t.elements[e];!ye(s)||!De(s)||(Object.assign(s.style,r),Object.keys(n).forEach(function(o){var a=n[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function Xu(i){var t=i.state,e={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,e.popper),t.styles=e,t.elements.arrow&&Object.assign(t.elements.arrow.style,e.arrow),function(){Object.keys(t.elements).forEach(function(r){var n=t.elements[r],s=t.attributes[r]||{},o=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:e[r]),a=o.reduce(function(l,d){return l[d]="",l},{});!ye(n)||!De(n)||(Object.assign(n.style,a),Object.keys(s).forEach(function(l){n.removeAttribute(l)}))})}}const Ju={name:"applyStyles",enabled:!0,phase:"write",fn:Zu,effect:Xu,requires:["computeStyles"]};function Ku(i,t,e){var r=Oe(i),n=[oe,se].indexOf(r)>=0?-1:1,s=typeof e=="function"?e(Object.assign({},t,{placement:i})):e,o=s[0],a=s[1];return o=o||0,a=(a||0)*n,[oe,we].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function Qu(i){var t=i.state,e=i.options,r=i.name,n=e.offset,s=n===void 0?[0,0]:n,o=Id.reduce(function(h,c){return h[c]=Ku(c,t.rects,s),h},{}),a=o[t.placement],l=a.x,d=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=d),t.modifiersData[r]=o}const tp={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Qu};var ep={left:"right",right:"left",bottom:"top",top:"bottom"};function In(i){return i.replace(/left|right|bottom|top/g,function(t){return ep[t]})}var ip={start:"end",end:"start"};function ka(i){return i.replace(/start|end/g,function(t){return ip[t]})}function rp(i,t){t===void 0&&(t={});var e=t,r=e.placement,n=e.boundary,s=e.rootBoundary,o=e.padding,a=e.flipVariations,l=e.allowedAutoPlacements,d=l===void 0?Id:l,h=Wi(r),c=h?a?Ea:Ea.filter(function(g){return Wi(g)===h}):Jr,m=c.filter(function(g){return d.indexOf(g)>=0});m.length===0&&(m=c);var p=m.reduce(function(g,f){return g[f]=Nr(i,{placement:f,boundary:n,rootBoundary:s,padding:o})[Oe(f)],g},{});return Object.keys(p).sort(function(g,f){return p[g]-p[f]})}function np(i){if(Oe(i)===jo)return[];var t=In(i);return[ka(i),t,ka(t)]}function sp(i){var t=i.state,e=i.options,r=i.name;if(!t.modifiersData[r]._skip){for(var n=e.mainAxis,s=n===void 0?!0:n,o=e.altAxis,a=o===void 0?!0:o,l=e.fallbackPlacements,d=e.padding,h=e.boundary,c=e.rootBoundary,m=e.altBoundary,p=e.flipVariations,g=p===void 0?!0:p,f=e.allowedAutoPlacements,b=t.options.placement,y=Oe(b),v=y===b,S=l||(v||!g?[In(b)]:np(b)),I=[b].concat(S).reduce(function(Q,Z){return Q.concat(Oe(Z)===jo?rp(t,{placement:Z,boundary:h,rootBoundary:c,padding:d,flipVariations:g,allowedAutoPlacements:f}):Z)},[]),T=t.rects.reference,D=t.rects.popper,R=new Map,M=!0,O=I[0],H=0;H<I.length;H++){var J=I[H],E=Oe(J),N=Wi(J)===Vi,_=[se,ve].indexOf(E)>=0,$=_?"width":"height",et=Nr(t,{placement:J,boundary:h,rootBoundary:c,altBoundary:m,padding:d}),U=_?N?we:oe:N?ve:se;T[$]>D[$]&&(U=In(U));var ot=In(U),W=[];if(s&&W.push(et[E]<=0),a&&W.push(et[U]<=0,et[ot]<=0),W.every(function(Q){return Q})){O=J,M=!1;break}R.set(J,W)}if(M)for(var st=g?3:1,F=function(Z){var St=I.find(function(zt){var dt=R.get(zt);if(dt)return dt.slice(0,Z).every(function(ft){return ft})});if(St)return O=St,"break"},z=st;z>0;z--){var rt=F(z);if(rt==="break")break}t.placement!==O&&(t.modifiersData[r]._skip=!0,t.placement=O,t.reset=!0)}}const op={name:"flip",enabled:!0,phase:"main",fn:sp,requiresIfExists:["offset"],data:{_skip:!1}};function ap(i){return i==="x"?"y":"x"}function wr(i,t,e){return gi(i,Mn(t,e))}function lp(i,t,e){var r=wr(i,t,e);return r>e?e:r}function dp(i){var t=i.state,e=i.options,r=i.name,n=e.mainAxis,s=n===void 0?!0:n,o=e.altAxis,a=o===void 0?!1:o,l=e.boundary,d=e.rootBoundary,h=e.altBoundary,c=e.padding,m=e.tether,p=m===void 0?!0:m,g=e.tetherOffset,f=g===void 0?0:g,b=Nr(t,{boundary:l,rootBoundary:d,padding:c,altBoundary:h}),y=Oe(t.placement),v=Wi(t.placement),S=!v,I=Uo(y),T=ap(I),D=t.modifiersData.popperOffsets,R=t.rects.reference,M=t.rects.popper,O=typeof f=="function"?f(Object.assign({},t.rects,{placement:t.placement})):f,H=typeof O=="number"?{mainAxis:O,altAxis:O}:Object.assign({mainAxis:0,altAxis:0},O),J=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,E={x:0,y:0};if(D){if(s){var N,_=I==="y"?se:oe,$=I==="y"?ve:we,et=I==="y"?"height":"width",U=D[I],ot=U+b[_],W=U-b[$],st=p?-M[et]/2:0,F=v===Vi?R[et]:M[et],z=v===Vi?-M[et]:-R[et],rt=t.elements.arrow,Q=p&&rt?Ho(rt):{width:0,height:0},Z=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Od(),St=Z[_],zt=Z[$],dt=wr(0,R[et],Q[et]),ft=S?R[et]/2-st-dt-St-H.mainAxis:F-dt-St-H.mainAxis,Ft=S?-R[et]/2+st+dt+zt+H.mainAxis:z+dt+zt+H.mainAxis,Et=t.elements.arrow&&Xr(t.elements.arrow),fe=Et?I==="y"?Et.clientTop||0:Et.clientLeft||0:0,ee=(N=J?.[I])!=null?N:0,u=U+ft-ee-fe,B=U+Ft-ee,L=wr(p?Mn(ot,u):ot,U,p?gi(W,B):W);D[I]=L,E[I]=L-U}if(a){var A,C=I==="x"?se:oe,P=I==="x"?ve:we,j=D[T],V=T==="y"?"height":"width",k=j+b[C],q=j-b[P],tt=[se,oe].indexOf(y)!==-1,Y=(A=J?.[T])!=null?A:0,nt=tt?k:j-R[V]-M[V]-Y+H.altAxis,wt=tt?j+R[V]+M[V]-Y-H.altAxis:q,ct=p&&tt?lp(nt,j,wt):wr(p?nt:k,j,p?wt:q);D[T]=ct,E[T]=ct-j}t.modifiersData[r]=E}}const hp={name:"preventOverflow",enabled:!0,phase:"main",fn:dp,requiresIfExists:["offset"]};var cp=function(t,e){return t=typeof t=="function"?t(Object.assign({},e.rects,{placement:e.placement})):t,kd(typeof t!="number"?t:Dd(t,Jr))};function up(i){var t,e=i.state,r=i.name,n=i.options,s=e.elements.arrow,o=e.modifiersData.popperOffsets,a=Oe(e.placement),l=Uo(a),d=[oe,we].indexOf(a)>=0,h=d?"height":"width";if(!(!s||!o)){var c=cp(n.padding,e),m=Ho(s),p=l==="y"?se:oe,g=l==="y"?ve:we,f=e.rects.reference[h]+e.rects.reference[l]-o[l]-e.rects.popper[h],b=o[l]-e.rects.reference[l],y=Xr(s),v=y?l==="y"?y.clientHeight||0:y.clientWidth||0:0,S=f/2-b/2,I=c[p],T=v-m[h]-c[g],D=v/2-m[h]/2+S,R=wr(I,D,T),M=l;e.modifiersData[r]=(t={},t[M]=R,t.centerOffset=R-D,t)}}function pp(i){var t=i.state,e=i.options,r=e.element,n=r===void 0?"[data-popper-arrow]":r;n!=null&&(typeof n=="string"&&(n=t.elements.popper.querySelector(n),!n)||Td(t.elements.popper,n)&&(t.elements.arrow=n))}const fp={name:"arrow",enabled:!0,phase:"main",fn:up,effect:pp,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Da(i,t,e){return e===void 0&&(e={x:0,y:0}),{top:i.top-t.height-e.y,right:i.right-t.width+e.x,bottom:i.bottom-t.height+e.y,left:i.left-t.width-e.x}}function Ra(i){return[se,we,ve,oe].some(function(t){return i[t]>=0})}function mp(i){var t=i.state,e=i.name,r=t.rects.reference,n=t.rects.popper,s=t.modifiersData.preventOverflow,o=Nr(t,{elementContext:"reference"}),a=Nr(t,{altBoundary:!0}),l=Da(o,r),d=Da(a,n,s),h=Ra(l),c=Ra(d);t.modifiersData[e]={referenceClippingOffsets:l,popperEscapeOffsets:d,isReferenceHidden:h,hasPopperEscaped:c},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":c})}const _p={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:mp};var gp=[ju,Vu,Yu,Ju,tp,op,hp,fp,_p],yp=Bu({defaultModifiers:gp});const bp=["bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end","top","top-start","top-end"],za={base:"esri-popover",open:"esri-popover--open"},vp={position:"fixed","z-index":"1000"};let Ie=class extends vi{constructor(t,e){super(t,e),this._popper=null,this._contentNode=null,this._renderAttached=!1,this._rootNode=null,this.anchorElement=null,this.offset=[0,0],this.open=!1,this.renderContentFunction=null,this._afterRootCreate=r=>{this._rootNode=r},this._afterContentCreate=r=>{this._contentNode=r},this._updatePosition=()=>{this._popper!=null&&this._popper.update()}}initialize(){this.when(()=>{this.destroyed||(this._projector.append(document.body,this.render),this._renderAttached=!0)}),this.addHandles([At(()=>[this.open,this.anchorElement],()=>this._buildPopper(),zi),At(()=>[this.placement,this.offset],()=>this._setPopperOptions(),zi)])}destroy(){this.owner=null,this.anchorElement=null,this.renderContentFunction=null,this._renderAttached&&(this._projector.detach(this.render),this._renderAttached=!1),this._rootNode!=null&&(wc(this._rootNode),this._rootNode=null),this._contentNode=null,this._popper!=null&&(this._popper.destroy(),this._popper=null)}set container(t){}set owner(t){this._set("owner",t)}get placement(){return"top"}set placement(t){bp.includes(t)?this._override("placement",t):this._clearOverride("placement")}get test(){return{rootNode:this._rootNode}}render(){const{open:t,owner:e,renderContentFunction:r}=this;return G("div",{afterCreate:this._afterRootCreate,class:this.classes(za.base,t?za.open:null),styles:vp,lang:Mi()},G("div",{dir:Cc(this.owner?.container),afterCreate:this._afterContentCreate,afterUpdate:this._updatePosition},t&&r?.call(e)))}_buildPopper(){this._popper!=null&&(this._popper.destroy(),this._popper=null);const t=this._contentNode;if(t==null||!this.open||!this.renderContentFunction)return;const e=this._getAnchor();e&&(this._popper=yp(e,t),this._setPopperOptions())}_setPopperOptions(){const{placement:t,offset:e,_popper:r}=this;r!=null&&(r.setOptions({placement:t,modifiers:[{name:"offset",options:{offset:e}}]}),r.forceUpdate())}_getAnchor(){const{anchorElement:t}=this;return Ac(typeof t=="function"?t():t)}};w([x()],Ie.prototype,"anchorElement",void 0),w([x()],Ie.prototype,"container",null),w([x()],Ie.prototype,"offset",void 0),w([x()],Ie.prototype,"open",void 0),w([x()],Ie.prototype,"owner",null),w([x()],Ie.prototype,"placement",null),w([x()],Ie.prototype,"renderContentFunction",void 0),Ie=w([$t("esri.widgets.support.Popover")],Ie);const Rd=Ie,Xt="esri-button-menu",Gt={base:Xt,content:`${Xt}__content`,contentWrapper:`${Xt}__content-wrapper`,itemWrapper:`${Xt}__item-wrapper`,label:`${Xt}__label`,icon:`${Xt}__icon`,item:`${Xt}__item`,itemLabel:`${Xt}__item-label`,itemLabelContent:`${Xt}__item-label-content`,selectableMenuItem:`${Xt}__item--selectable`,selectedMenuItem:`${Xt}__item--selected`,checkbox:`${Xt}__checkbox`,embeddedContentWrapper:`${Xt}__embedded-content-wrapper`,button:`${Xt}__button`,buttonSelected:`${Xt}__button--selected`,defaultIconClass:"esri-icon-menu",widget:"esri-widget"};let Ye=class extends Zr(vi){constructor(t,e){super(t,e),this._menuContentNode=null,this._popover=null,this._rootNode=null,this.disabled=!1,this.iconClass="",this.viewModel=new uu,this._handleOutsideClick=this._handleOutsideClick.bind(this)}postInitialize(){this._popover=new Rd({owner:this,open:!!this.open,placement:Ro(this.container)?"bottom-start":"bottom-end",renderContentFunction:this.renderMenuContent,anchorElement:this._rootNode}),this.handles.add(At(()=>this.open,t=>this._popover?.set("open",t))),document.addEventListener("click",this._handleOutsideClick)}destroy(){this._popover?.destroy(),this._popover=null,document.removeEventListener("click",this._handleOutsideClick)}_handleOutsideClick(t){if(!this.open||!this._rootNode||!this._menuContentNode)return;const e=t.target;this._menuContentNode?.contains(e)||this._rootNode?.contains(e)||(this.open=!1)}get items(){return this.viewModel.items}set items(t){this.viewModel.items=t}get open(){return this.viewModel.open}set open(t){this.viewModel.open=t}render(){return G("div",{afterCreate:this._afterRootNodeCreate,bind:this,"data-node-ref":"_rootNode",class:this.classes(Gt.base,Gt.widget),key:"menu"},this.renderMenuButton())}renderMenuButton(){const{iconClass:t,id:e,label:r,open:n}=this,s=this.classes(Gt.button,t??Gt.defaultIconClass,n?Gt.buttonSelected:null);return G("button",{"aria-pressed":n.toString(),"aria-controls":`${e}-menu`,"aria-expanded":n.toString(),"aria-haspopup":"true","aria-label":r,bind:this,class:s,disabled:this.disabled,id:`${e}-button`,title:r??"",selected:n,onclick:this._toggleOpen,tabindex:this.disabled?-1:0,type:"button"})}renderMenuContent(){const{id:t,open:e}=this;return G("div",{afterCreate:this._afterMenuContentNodeCreate,bind:this,class:Gt.content,"data-node-ref":"_menuContentNode",key:"esri-button-menu-content",hidden:!e},G("ul",{"aria-labelledby":`${t}-button`,bind:this,class:Gt.itemWrapper,id:`${t}-menu`,role:"menu"},this.items?.length&&this.renderItems()))}renderItems(){return this.items?.map((t,e)=>this.renderItem(t,e))}renderItem(t,e,r){const n=r!=null?`${this.id}-menu-item-${e}-${r}`:`${this.id}-menu-item-${e}`,s=`${n}-label`,o=this.classes(Gt.item,t.selectionEnabled?Gt.selectableMenuItem:null,t.selectionEnabled&&t.selected?Gt.selectedMenuItem:null);return G("li",{afterCreate:this._afterMenuItemCreate,bind:this,class:o,"data-item-index":e,"data-item-subIndex":r,for:n,key:n,onkeydown:a=>this._handleMenuItemKeydown(a,t),onclick:a=>this._handleMenuItemInteraction(a,t),role:"menuitem",tabindex:this.disabled?-1:0},G("input",{disabled:!0,checked:t.selected,class:Gt.checkbox,id:n,name:n,tabindex:"-1",type:"checkbox"}),G("label",{bind:this,class:this.classes(Gt.button,Gt.itemLabel),for:n,id:s},G("span",{class:this.classes(Gt.icon,t.iconClass),"aria-hidden":"true"}),G("span",{class:Gt.itemLabelContent},Li.sanitize(t.label))),G("ul",{"aria-labelledby":s,class:Gt.embeddedContentWrapper,id:`${this.id}-submenu`,role:"menu"},t?.items?.map((a,l)=>this.renderItem(a,e,l))))}_afterRootNodeCreate(t){this._rootNode=t,this._popover?.set("anchorElement",()=>t)}_handleMenuItemInteraction(t,e){e.selected=!e.selected,e.open=!(!e.selected||!e.items),e.autoCloseMenu&&this.set("open",!1),e.clickFunction&&e.clickFunction({event:t,item:e}),t.stopPropagation()}_handleMenuItemKeydown(t,e){const r=Rr(t);dr(r)&&this._handleMenuItemInteraction(t,e),r==="Escape"&&(this.open=!1,t.preventDefault(),t.stopPropagation())}_afterMenuContentNodeCreate(t){this._menuContentNode=t,t.focus()}_toggleOpen(){this.open=!this.open}_afterMenuItemCreate(t){t["data-item-index"]===0&&t.focus()}};w([x()],Ye.prototype,"disabled",void 0),w([x()],Ye.prototype,"iconClass",void 0),w([x()],Ye.prototype,"items",null),w([x()],Ye.prototype,"open",null),w([x()],Ye.prototype,"viewModel",void 0),Ye=w([$t("esri.widgets.FeatureTable.Grid.support.ButtonMenu")],Ye);const zd=Ye,hn="esri-column",di={sortAscIcon:"esri-icon-arrow-up",sortDescIcon:"esri-icon-arrow-down",menuContainer:`${hn}__menu-container`,menuIcon:"esri-icon-handle-horizontal",sorter:`${hn}__sorter`,headerContent:`${hn}__header-content`,headerLabel:`${hn}__header-label`},Na={keyboardSort1:"Enter",keyboardSort2:"Spacebar"};let bt=class extends Zr(Sc.EventedAccessor){constructor(i){super(i),this._menuContainer=document.createElement("div"),this.activeRowIndex=null,this.autoWidth=!1,this.cellValueFormatFunction=({value:t})=>Li.sanitize(t),this.flexGrow=1,this.footerRenderFunction=null,this.frozen=!1,this.grid=null,this.header=null,this.headerRenderFunction=t=>{const{root:e}=t;if(this.removeCellContent(e),e.classList.add(di.headerContent),this.sortable)this.headerSorterRenderFunction(t);else{const r=document.createElement("div");r.classList.add(di.headerLabel),r.textContent=this.label,e.appendChild(r)}this.headerMenuEnabled&&this.headerMenuRenderFunction(t)},this.headerMenuRenderFunction=({root:t})=>{this.menu?.items?.length&&t.appendChild(this._menuContainer)},this.headerSorterRenderFunction=({root:t})=>{const{label:e,sortElement:r}=this;if(!r)return void(t.textContent=e);r.textContent!==e&&r.setAttribute("textContent",e),t.appendChild(r);const n=this.grid?.getSlotElementByName(t.slot),s=n?.parentElement;s&&!s.onkeydown&&(s.onkeydown=({key:o})=>{o!==Na.keyboardSort1&&o!==Na.keyboardSort2||r.click()})},this.hidden=!1,this.headerMenuEnabled=!0,this.initialSortPriority=null,this.menu=null,this.menuConfig=null,this.messages=null,this.messagesCommon=null,this.messagesURIUtils=null,this.path=null,this.renderFunction=({root:t,column:e,rowData:r})=>{const n=this.getCellValue(e,r),s=this.cellValueFormatFunction({column:e,rowData:r,value:n});t.innerHTML!==s&&(t.innerHTML=s)},this.resizable=!0,this.sortable=!0,this.textAlign="start",this.width=200}initialize(){const{messages:i,path:t}=this;this._set("sortElement",this.createSortElement()),this.sortElement.setAttribute("path",t??""),this._menuContainer.classList.add(di.menuContainer),this.menu=new zd({label:i?.options,iconClass:di.menuIcon,...this.menuConfig}),this.menu.container=this._menuContainer,this.menu.set("items",this.getMenuItems()),this.handles.add(At(()=>this.hidden,()=>this.menu?.set("open",!1)),At(()=>this.path,e=>{this.sortElement&&this.sortElement.path!==e&&this.sortElement.setAttribute("path",e??"")}))}destroy(){this.menu?.destroy()}set direction(i){this.sortable&&(this.sortElement&&(i?this.sortElement.direction!==i&&this.sortElement.setAttribute("direction",i):this.sortElement.removeAttribute("direction")),this._set("direction",i))}get direction(){return this._get("direction")||null}get label(){return Li.sanitize(this.header??this.path??"")}getMenuItems(){const{menuConfig:i,sortable:t}=this,e=i?.items,r=this.getSortMenuItems(),n=[];return t&&n.push(...r),e?.length&&n.push(...e),n.length?n:null}getSortMenuItems(){const{messages:i}=this;return[{selected:this.direction==="asc",iconClass:di.sortAscIcon,label:i?.sortAsc,autoCloseMenu:!0,clickFunction:()=>this.set("direction",this.direction!=="asc"?"asc":null)},{selected:this.direction==="desc",iconClass:di.sortDescIcon,label:i?.sortDesc,autoCloseMenu:!0,clickFunction:()=>this.set("direction",this.direction!=="desc"?"desc":null)}]}getCellValue(i,t){return t?.item[i?.path]??""}createSortElement(){const{direction:i,label:t,path:e,initialSortPriority:r}=this,n=document.createElement("vaadin-grid-sorter");return n.classList.add(di.sorter),n.setAttribute("path",e??""),n.setAttribute("title",t),n.textContent=t,i&&n.setAttribute("direction",i),r!=null&&(n._initialOrder=r),n.addEventListener("direction-changed",()=>{this.direction!==n.direction&&this._set("direction",n.direction)}),n}removeCellContent(i){if(i)for(;i.firstChild;)try{i.removeChild(i.firstChild)}catch{}}};w([x()],bt.prototype,"activeRowIndex",void 0),w([x()],bt.prototype,"autoWidth",void 0),w([x()],bt.prototype,"cellValueFormatFunction",void 0),w([x()],bt.prototype,"direction",null),w([x()],bt.prototype,"flexGrow",void 0),w([x()],bt.prototype,"footerRenderFunction",void 0),w([x()],bt.prototype,"frozen",void 0),w([x()],bt.prototype,"grid",void 0),w([x()],bt.prototype,"header",void 0),w([x()],bt.prototype,"headerRenderFunction",void 0),w([x()],bt.prototype,"headerMenuRenderFunction",void 0),w([x()],bt.prototype,"headerSorterRenderFunction",void 0),w([x()],bt.prototype,"hidden",void 0),w([x()],bt.prototype,"headerMenuEnabled",void 0),w([x({constructOnly:!0})],bt.prototype,"initialSortPriority",void 0),w([x({readOnly:!0})],bt.prototype,"label",null),w([x()],bt.prototype,"menu",void 0),w([x()],bt.prototype,"menuConfig",void 0),w([x()],bt.prototype,"messages",void 0),w([x()],bt.prototype,"messagesCommon",void 0),w([x()],bt.prototype,"messagesURIUtils",void 0),w([x()],bt.prototype,"path",void 0),w([x()],bt.prototype,"renderFunction",void 0),w([x()],bt.prototype,"resizable",void 0),w([x()],bt.prototype,"sortable",void 0),w([x({readOnly:!0})],bt.prototype,"sortElement",void 0),w([x()],bt.prototype,"textAlign",void 0),w([x()],bt.prototype,"width",void 0),bt=w([$t("esri.widgets.FeatureTable.Grid.Column")],bt);const ns=bt,wp={attachmentsColumn:"esri-feature-table__column--attachments"};let Ze=class extends ns{constructor(t){super(t),this.header="",this.path="EsriFeatureTableAttachmentsColumn",this.renderFunction=({root:e,rowData:r})=>{const n=this._countFromItem(r?.item).toString();e.innerHTML=`<div class="${wp.attachmentsColumn}">${n}</div>`},this.sortable=!1,this.textAlign="center"}_countFromItem(t){return t?.attachments&&t.attachments.length||0}};w([x({constructOnly:!0})],Ze.prototype,"header",void 0),w([x({readOnly:!0})],Ze.prototype,"path",void 0),w([x()],Ze.prototype,"renderFunction",void 0),w([x({readOnly:!0})],Ze.prototype,"sortable",void 0),w([x({readOnly:!0})],Ze.prototype,"textAlign",void 0),Ze=w([$t("esri.widgets.FeatureTable.AttachmentsColumn")],Ze);const Cp=Ze,Fa="esri-editor-column__cell-input",Ma={input:Fa,inputContainer:`${Fa}--container`},La={showInput:"Enter",hideInput:"Escape"};let Yt=class extends ns{constructor(t){super(t),this.activeEditInfo=null,this.cellValueValidatorFunction=({oldValue:e,value:r})=>e!==r,this.editable=!1,this.inputRenderFunction=({root:e,column:r,rowData:n})=>{if(this.activeEditInfo?.updating||!this.editable)return;const s=this.getCellValue(r,n),o=this.createInputElement({root:e,column:r,rowData:n,value:s});this._set("activeEditInfo",{column:r,input:o,root:e,rowData:n,updating:!0,oldValue:s});const a=this.createInputContainer();a.appendChild(o),this.removeCellContent(e),e.appendChild(a),o.focus(),o instanceof HTMLInputElement&&o.select(),this.grid?.notifyResize()},this.loadingMessage="",this.inputType="text",this.maxLength=null,this.parseInputValueFunction=({input:e})=>e.value,this.renderFunction=e=>{const{root:r,column:n,rowData:s}=e,{activeEditInfo:o}=this;if(o&&o.updating)return;const a=this.getCellValue(n,s),l=this.cellValueFormatFunction({column:n,rowData:s,value:a});r.onclick=()=>r.focus(),r.ondblclick=()=>this.inputRenderFunction(e),r.ontouchend=()=>this.inputRenderFunction(e);const d=this.grid?.getSlotElementByName(r.slot),h=d?.parentElement;h&&!h.onkeydown&&(h.onkeydown=m=>{m.key!==La.showInput||this.activeEditInfo||this.inputRenderFunction(e),m.key===La.hideInput&&this.activeEditInfo&&this.cancel()}),a!=null&&l!=null?r.title=l.toString():r.title&&r.removeAttribute("title");const c=gs(this.messagesURIUtils,l);l?.toString()!==r.innerHTML&&c!==r.innerHTML&&(r.innerHTML=c)},this.required=!1,this.store=null,this.updateRowItemFunction=({rowData:e,column:r,value:n})=>{Nn(e),e.item[r.path]=n},this.updateStoreItemFunction=async({rowData:e,column:r,value:n})=>{Nn(e),await this.store?.updateItem({index:e.index,name:r.path,value:n})}}cancel(){const{activeEditInfo:t}=this;if(!t)return;const{column:e,root:r,rowData:n,oldValue:s}=t;this._set("activeEditInfo",null);const o=this.cellValueFormatFunction({column:e,rowData:n,value:s}),a=gs(this.messagesURIUtils,o);r.innerHTML=a,this.grid?.notifyResize()}createInputContainer(){const t=document.createElement("div");return t.classList.add(Ma.inputContainer),t}createInputElement({value:t}){const e=document.createElement("input");return e.classList.add(Ma.input),this.maxLength!=null&&(e.maxLength=this.maxLength),e.type=this.inputType,e.value=t,e.onblur=()=>{e.onblur=null,this.submit()},e}async submit(){const{activeEditInfo:t}=this;if(!t)return;const{column:e,input:r,root:n,rowData:s,oldValue:o}=t,a=this.parseInputValueFunction({input:r,column:e,rowData:s});if(!this.cellValueValidatorFunction({value:a,oldValue:o,column:e,rowData:s}))this.cancel();else{n.innerHTML=this.loadingMessage,this.grid?.notifyResize();try{await this.updateStoreItemFunction({rowData:s,column:e,value:a}),this.updateRowItemFunction({rowData:s,column:e,value:a});const l=this.getCellValue(e,s),d=this.cellValueFormatFunction({column:e,rowData:s,value:l});l!=null&&d!=null?n.title=d.toString():n.title&&n.removeAttribute("title");const h=gs(this.messagesURIUtils,d);n.innerHTML=h,this.emit("value-change",{column:e,rowData:s,value:l}),this._set("activeEditInfo",null),this.grid?.notifyResize()}catch{this.cancel()}}}};w([x({readOnly:!0})],Yt.prototype,"activeEditInfo",void 0),w([x()],Yt.prototype,"cellValueValidatorFunction",void 0),w([x()],Yt.prototype,"editable",void 0),w([x()],Yt.prototype,"inputRenderFunction",void 0),w([x({constructOnly:!0})],Yt.prototype,"loadingMessage",void 0),w([x()],Yt.prototype,"inputType",void 0),w([x()],Yt.prototype,"maxLength",void 0),w([x()],Yt.prototype,"parseInputValueFunction",void 0),w([x()],Yt.prototype,"renderFunction",void 0),w([x()],Yt.prototype,"required",void 0),w([x()],Yt.prototype,"store",void 0),w([x()],Yt.prototype,"updateRowItemFunction",void 0),w([x()],Yt.prototype,"updateStoreItemFunction",void 0),Yt=w([$t("esri.widgets.FeatureTable.Grid.EditorColumn")],Yt);const Ap=Yt;function Sp(i,t){const e=xc(t),r=Date.now(),n=e.formatToParts(r),s=new Set;n.filter(({type:d})=>d==="literal").forEach(({value:d})=>s.add(d));let o=0;const a={};for(;n.length>0;){const{type:d,value:h}=n.shift();for(let c=0;c<h.length;c++,o++){const m=i.charAt(o);if(s.has(m)){o++;break}if(d==="literal")break;a[d]||(a[d]=[]),a[d].push(m)}}const l={};try{l.day=ys(a.day.join("")),l.month=ys(a.month.join("")),l.year=ys((a.year||a.relatedYear).join(""))}catch{throw $a(t)}if(isNaN(l.day)||isNaN(l.month)||isNaN(l.year))throw $a(t);return l}function ys(i){const t=[/٠/g,/١/g,/٢/g,/٣/g,/٤/g,/٥/g,/٦/g,/٧/g,/٨/g,/٩/g];for(let e=0;e<10;e++)i=i.replace(t[e],e.toString());return Number(i)}function $a(i){return new mi(`could not parse date input, expecting the following format: ${te(Date.now(),i)}`)}const er={ar:6,"ar-dz":6,"ar-kw":6,"ar-ly":6,"ar-ma":1,"ar-sa":7,"ar-tn":1,bg:1,bs:1,ca:1,cs:1,da:1,de:1,"de-at":1,"de-ch":1,el:1,"en-au":1,"en-ca":7,"en-gb":1,"en-ie":1,"en-il":7,"en-in":7,"en-nz":1,"en-sg":7,es:1,"es-do":7,"es-mx":7,"es-us":7,et:1,fi:1,fr:1,"fr-ca":7,"fr-ch":1,he:7,hr:1,hu:1,id:7,it:1,"it-ch":1,ja:7,ko:7,lt:1,lv:1,nb:1,nl:1,"nl-be":1,pl:1,pt:7,"pt-br":7,ro:1,ru:1,sk:1,sl:1,sr:1,"sr-cyrl":1,sv:1,th:7,tr:1,uk:1,vi:1,"zh-cn":1,"zh-hk":7,"zh-mo":7,"zh-tw":7},xp="Locale"in Intl&&"weekInfo"in Intl.Locale.prototype;function Nd(i){if(i=i.toLowerCase(),er[i])return er[i];if(xp)try{const e=new Intl.Locale(i).weekInfo.firstDay;return er[i]=e,e}catch{}const t=Ec(i);return er[t]?er[t]:7}function Ep(i,t){return(t+7-Nd(i))%7}let cr=class extends Yr{constructor(){super(...arguments),this.state="ready",this.value=new Date}};w([x()],cr.prototype,"state",void 0),w([x()],cr.prototype,"value",void 0),cr=w([$t("esri.widgets.support.DateTimeElementViewModel")],cr);const Fd=cr;let to=class extends Fd{constructor(t){super(t)}};to=w([$t("esri.widgets.support.DatePickerViewModel")],to);const Md=to,Mt="esri-date-picker",ut={base:Mt,datePicker:`${Mt}__calendar`,monthPicker:`${Mt}__month-picker`,dayPicker:`${Mt}__day-picker`,week:`${Mt}__week-item`,nearbyMonth:`${Mt}__day-item--nearby-month`,activeDay:`${Mt}__day-item--active`,today:`${Mt}__day-item--today`,selectedDay:`${Mt}__day-item--selected`,day:`${Mt}__day-item`,dayHeader:`${Mt}__day-item--header`,yearPicker:`${Mt}__year-picker`,selectedYear:`${Mt}__year-picker-item--selected`,year:`${Mt}__year-picker-item`,monthDropdown:`${Mt}__month-dropdown`,date:`${Mt}__date`,datePickerToggle:`${Mt}__calendar-toggle`,dateInput:`${Mt}__input`,dateTextInput:`${Mt}__text-input`,leadingIcon:`${Mt}__icon--leading`,previousIcon:"esri-icon-left",nextIcon:"esri-icon-right",calendarIcon:"esri-icon-calendar",widget:"esri-widget",button:"esri-widget--button",input:"esri-input",select:"esri-select"},wi={year:"numeric",month:"2-digit",day:"2-digit"},Ip=[" ","ArrowDown","ArrowLeft","ArrowRight","ArrowUp","End","Enter","Home","PageDown","PageUp"];let Vt=class extends vi{constructor(t,e){super(t,e),this._calendarNode=null,this._inputOrButtonNode=null,this._rootNode=null,this._requestDayPickerFocusOnCreate=!1,this._activeDate=null,this._calendarPopover=new Rd({owner:this,placement:"bottom-start",anchorElement:()=>this._rootNode,renderContentFunction:this._renderCalendar}),this._isOpen=!1,this.dateInputEnabled=!1,this.messages=null,this.commitOnMonthChange=!1,this.viewModel=new Md,this.disabled=!1,this.toggle=this.toggle.bind(this)}initialize(){this.addHandles(At(()=>({viewModel:this.viewModel,value:this.viewModel?.value}),({viewModel:t,value:e})=>{!this.destroyed&&t&&this.onChange!=null&&this.onChange(e)},Ic))}destroy(){this._calendarPopover.destroy()}get value(){return this.viewModel.value}set value(t){this.viewModel.value=t}get isOpen(){return this._isOpen}render(){return G("div",{afterCreate:on,bind:this,class:this.classes(ut.base,ut.widget),"data-node-ref":"_rootNode"},this.dateInputEnabled?this._renderInputAndButtonMode():this._renderButtonOnlyMode())}toggle(){this._isOpen?this.close():this.open()}open(t=!0){this._activeDate=Se.fromJSDate(this.viewModel.value),this._isOpen=!0,this._calendarPopover.open=!0,this._requestDayPickerFocusOnCreate=t}close(t=!0){this._activeDate=null,this._isOpen=!1,this._calendarPopover.open=!1,t&&this._inputOrButtonNode?.focus()}_renderButtonOnlyMode(){const t=te(this.viewModel.value,wi),{disabled:e,_isOpen:r,messages:n}=this;return G("div",{key:`date-button-${e}`,afterCreate:on,"aria-controls":r?this._getCalendarId():null,"aria-expanded":r.toString(),"aria-haspopup":"true","aria-label":n.setDate,"aria-pressed":r.toString(),bind:this,class:this.classes(ut.button,ut.select,ut.datePickerToggle),"data-node-ref":"_inputOrButtonNode",onclick:this.toggle,onkeydown:this._handleDateButtonKeyDown,role:"button",tabIndex:e?void 0:0},G("span",{class:ut.date},t))}_renderInputAndButtonMode(){const t=te(this.viewModel.value,wi),{_isOpen:e,messages:r}=this;return G("div",{class:this.classes(ut.dateInput)},G("input",{afterCreate:on,"data-node-ref":"_inputOrButtonNode","aria-controls":e?this._getCalendarId():null,"aria-haspopup":"true","aria-label":r.setDate,bind:this,class:this.classes(ut.dateTextInput,ut.input),key:"date-input",onblur:this._handleDateInputBlur,onclick:this._handleDateInputClick,onkeydown:this._handleDateInputKeyDown,type:"text",value:t}),G("span",{"aria-hidden":"true",class:this.classes(ut.leadingIcon,ut.calendarIcon)}))}_handleDateInputClick(){this.open(!1)}_handleDateInputKeyDown(t){const{key:e}=t;this._isOpen?e==="Enter"?this._handleDateText(t):e==="Escape"&&this.close():e==="ArrowDown"&&(this.open(),t.preventDefault())}_handleDateButtonKeyDown(t){const{key:e,shiftKey:r}=t;this._isOpen&&e==="Tab"&&r?this.close():dr(e)&&this.toggle()}_handleDateInputBlur(t){this._isOpen||this._handleDateText(t)}_handleDateText(t){const e=t.currentTarget;let r;try{r=Sp(e.value,wi)}catch(s){return zo.getLogger(this).warn(s),void(e.value=te(this.viewModel.value,wi))}const n=Se.fromObject(r);n.isValid?(this.viewModel.value=n.toJSDate(),this._activeDate=n):e.value=te(this.viewModel.value,wi)}_handleDatePickerKeydown(t){Rr(t)==="Escape"&&(this.close(),t.preventDefault(),t.stopPropagation())}_renderCalendar(){const t=this._activeDate;if(!t)return null;const e=Se.fromJSDate(this.viewModel.value);return G("div",{afterCreate:on,bind:this,class:this.classes(ut.datePicker,ut.widget),"data-node-ref":"_calendarNode",id:this._getCalendarId(),key:"esri-date-picker__calendar",tabIndex:-1,onfocusout:this._onCalendarFocusOut,onkeydown:this._handleDatePickerKeydown},this._renderMonthPicker(t),this._renderDayPicker(t,e),this._renderYearPicker(t))}_getCalendarId(){return`date-picker__calendar--${this.id}`}_onCalendarFocusOut(t){const e=t.relatedTarget;e&&e instanceof Node&&(this._calendarNode?.contains(e)||this._rootNode?.contains(e))||this.close(!1)}_renderMonthPicker(t){const e=Ro(this.container),r=e?ut.nextIcon:ut.previousIcon,n=e?ut.previousIcon:ut.nextIcon,s=Tc.months("long",{locale:Mi()}).map((l,d)=>{const h=t.month-1===d;return G("option",{selected:h,value:d.toString()},l)}),{disabled:o,messages:a}=this;return G("div",{class:ut.monthPicker},G("div",{key:`previous-month-${o}`,"aria-label":a.goToPreviousMonth,bind:this,class:ut.button,onclick:this._setPreviousMonth,onkeydown:this._handlePreviousMonthKeyDown,role:"button",tabIndex:o?void 0:0,title:a.goToPreviousMonth},G("span",{"aria-hidden":"true",class:r})),G("select",{"aria-live":"assertive","aria-label":a.selectMonth,bind:this,class:this.classes(ut.monthDropdown,ut.select),disabled:o,id:`${this.id}__month-picker`,onchange:this._setMonth,onkeydown:this._setMonth,title:a.selectMonth},s),G("div",{key:`next-month-${o}`,"aria-label":a.goToNextMonth,bind:this,class:ut.button,onclick:this._setNextMonth,onkeydown:this._setNextMonth,role:"button",tabIndex:o?void 0:0,title:a.goToNextMonth},G("span",{"aria-hidden":"true",class:n})))}_renderDayPicker(t,e){const r=this._getWeekLabels(),n=this._getDayId(t),s=this._renderMonth(t,e),{id:o,disabled:a}=this;return G("div",{key:`day-picker-${a}`,afterCreate:this._handleDayPickerCreate,"aria-activedescendant":n,"aria-labelledby":`${o}__month-picker ${o}__selected-year`,bind:this,class:ut.dayPicker,id:`${o}__day-picker`,onkeydown:this._handleDayPickerKeydown,role:"grid",tabIndex:a?void 0:0},G("div",{class:ut.week,role:"row"},r.map(l=>G("div",{"aria-label":l.name,class:this.classes(ut.day,ut.dayHeader),role:"columnheader",title:l.name},l.abbr))),s)}_getDayId(t){return`${this.id}__${te(t.valueOf(),wi)}`}_handleDayPickerCreate(t){this._requestDayPickerFocusOnCreate&&(this._requestDayPickerFocusOnCreate=!1,t.focus())}_getWeekLabels(){const t=[],e={weekday:"long"},r={weekday:"narrow"};let n=Se.now().set({weekday:Nd(Mi())});for(let s=0;s<7;s++)t.push({name:te(n.valueOf(),e),abbr:te(n.valueOf(),r)}),n=n.plus({day:1});return t}_handleDayPickerKeydown(t){const{ctrlKey:e,shiftKey:r}=t,n=Rr(t);if(!Ip.includes(n))return;let s=this._activeDate;if(s){if(n==="ArrowLeft")s=s.minus({day:1});else if(n==="ArrowRight")s=s.plus({day:1});else if(n==="ArrowUp")s=s.minus({week:1});else if(n==="ArrowDown")s=s.plus({week:1});else if(n==="PageUp"){const o=r?"year":"month";s=s.minus({[o]:1})}else if(n==="PageDown"){const o=r?"year":"month";s=s.plus({[o]:1})}else if(n==="Home"){const o=e?"year":"month";s=s.startOf(o)}else if(n==="End"){const o=e?"year":"month";s=s.endOf(o)}else dr(n)&&(this.viewModel.value=s.toJSDate(),this.close());this._activeDate=s,t.preventDefault(),t.stopPropagation()}}_renderMonth(t,e){const r=Se.now(),n=t.startOf("month"),s=t.endOf("month"),o=6,a=7;let l=n.minus({day:Ep(Mi(),n.weekday)});const d=[];for(let h=0;h<o;h++){const c=[];for(let m=0;m<a;m++){const p=l.day,g=l.hasSame(t,"day"),f=l.hasSame(e,"day"),b=this._getDayId(l),y=Pc.fromDateTimes(n,s),v={[ut.nearbyMonth]:!y.contains(l),[ut.today]:l.hasSame(r,"day"),[ut.activeDay]:g,[ut.selectedDay]:f};c.push(G("div",{"aria-label":p.toString(),"aria-selected":g.toString(),bind:this,class:this.classes(ut.day,v),"data-iso-date":l.toISO(),id:b,onclick:this._handleSelectedDate,onkeydown:this._handleSelectedDate,role:"gridcell"},p)),l=l.plus({day:1})}d.push(G("div",{class:ut.week,role:"row"},c))}return d}_renderYearPicker(t){const e={year:"numeric"},r=t,n=te(r.valueOf(),e),s=te(r.plus({year:1}).valueOf(),e),o=te(r.minus({year:1}).valueOf(),e),{disabled:a,messages:l}=this;return G("div",{class:ut.yearPicker},G("div",{key:`previous-year-${a}`,"aria-label":l.goToPreviousYear,bind:this,class:ut.year,onclick:this._setPreviousYear,onkeydown:this._setPreviousYear,tabIndex:a?void 0:0,title:l.goToPreviousYear},o),G("div",{class:this.classes(ut.year,ut.selectedYear),id:`${this.id}__selected-year`},n),G("div",{key:`next-year-${a}`,"aria-label":l.goToNextYear,bind:this,class:ut.year,onclick:this._setNextYear,onkeydown:this._handleNextYearKeyDown,tabIndex:a?void 0:0,title:l.goToNextYear},s))}_setMonth(t){const e=t.target,r=Number(e.value)+1;this._activeDate&&(this._activeDate=this._activeDate.set({month:r}),this.commitOnMonthChange&&(this.viewModel.value=this._activeDate.toJSDate()))}_setPreviousMonth(){this._activeDate&&(this._activeDate=this._activeDate.minus({month:1}),this.commitOnMonthChange&&(this.viewModel.value=this._activeDate.toJSDate()))}_handlePreviousMonthKeyDown(t){if(t.key==="Tab"&&t.shiftKey)return t.preventDefault(),void this.close();dr(t.key)&&this._setPreviousMonth()}_setNextMonth(){this._activeDate&&(this._activeDate=this._activeDate.plus({month:1}),this.commitOnMonthChange&&(this.viewModel.value=this._activeDate.toJSDate()))}_setPreviousYear(){this._activeDate=this._activeDate?.minus({year:1})??null}_setNextYear(){this._activeDate=this._activeDate?.plus({year:1})??null}_handleNextYearKeyDown(t){if(t.key==="Tab"&&!t.shiftKey)return t.preventDefault(),void this.close();dr(t.key)&&this._setNextYear()}_handleSelectedDate(t){const e=t.target;this.viewModel.value=Se.fromISO(e.getAttribute("data-iso-date")).toJSDate(),this.close()}};w([x()],Vt.prototype,"_activeDate",void 0),w([x()],Vt.prototype,"_calendarPopover",void 0),w([x()],Vt.prototype,"_isOpen",void 0),w([x()],Vt.prototype,"dateInputEnabled",void 0),w([x(),Pe("esri/widgets/support/t9n/DatePicker")],Vt.prototype,"messages",void 0),w([x()],Vt.prototype,"value",null),w([x()],Vt.prototype,"commitOnMonthChange",void 0),w([x({type:Md})],Vt.prototype,"viewModel",void 0),w([x()],Vt.prototype,"onChange",void 0),w([x()],Vt.prototype,"disabled",void 0),w([x()],Vt.prototype,"isOpen",null),w([Ne()],Vt.prototype,"_setNextMonth",null),w([Ne()],Vt.prototype,"_setPreviousYear",null),w([Ne()],Vt.prototype,"_handleSelectedDate",null),Vt=w([$t("esri.widgets.support.DatePicker")],Vt);const Tp=Vt;let eo=class extends Fd{constructor(i){super(i)}};eo=w([$t("esri.widgets.support.TimePickerViewModel")],eo);const Ld=eo,bs="esri-time-picker",vs={base:`${bs} esri-widget`,timePicker:`${bs}__date-picker`,timePickerInput:`${bs}__input`,input:"esri-input",button:"esri-widget--button"},io={hour:"numeric",minute:"numeric"},Ba="t",Pp=["ArrowDown","ArrowLeft","ArrowRight","ArrowUp","Tab"];function Ha(i){return i!=null&&te(i.valueOf(),io).includes(" ")}let Oi=class extends vi{constructor(t,e){super(t,e),this._activePart=null,this._activeTime=null,this.messages=null,this.viewModel=new Ld}get value(){return this.viewModel.value}set value(t){this.viewModel.value=t}render(){const t=this._activeTime||this.viewModel.value;return G("div",{class:vs.base},G("input",{afterUpdate:this._handleInputUpdate,"aria-label":this.messages.inputTitle,bind:this,class:this.classes(vs.timePickerInput,vs.input),onblur:this._handleInputBlur,onfocus:this._handleInputFocus,onkeydown:this._handleInputKeydown,oninput:this._handleInputKeydown,onclick:this._handleInputClick,onpaste:this._handleInputPaste,onwheel:this._handleInputWheel,value:te(t.valueOf(),io)}))}_handleInputBlur(){this._activeTime?.isValid&&(this.viewModel.value=this._activeTime.toJSDate()),this._activeTime=null,this._activePart=null}_handleInputUpdate(t){this._selectPart(t,this._activePart)}_selectPart(t,e){const r=this._activeTime;if(!r||!t)return;const n=te(r.valueOf(),io),s=0,o=n.indexOf(":");if(e==="hours")return void t.setSelectionRange(s,o);const a=o+1,l=a+2;if(e==="minutes")return void t.setSelectionRange(a,l);const d=l+1,h=n.length;e!=="meridiem"||t.setSelectionRange(d,h)}_handleInputFocus(t){this._activePart="hours",this._activeTime=Se.fromJSDate(this.viewModel.value).startOf("minute"),this._selectPart(t.target,"hours")}_caretIndexToPartName(t){const e=this._activeTime?.toFormat(Ba,{locale:Mi(),numberingSystem:"latn"});if(!e)return null;const r=e.indexOf(":"),n=e.indexOf(" ");return t<=r?"hours":t>r&&t<=n?"minutes":"meridiem"}_handleInputKeydown(t){const{ctrlKey:e,metaKey:r,shiftKey:n}=t,s=Rr(t),o=this._activeTime,a=this._activePart,l=/\d/.test(s),d=/^a|p$/i.test(s),h=r||e;if((Pp.includes(s)||l||a==="meridiem"&&d&&!h)&&o!=null){if(s==="ArrowLeft")this._activePart=this._prevPart();else if(s==="ArrowRight")this._activePart=this._nextPart();else if(s==="Tab"){const c=n?this._prevPart():this._nextPart();if(c===this._activePart)return;this._activePart=c}else if(s==="ArrowUp")this._shift("up",a);else if(s==="ArrowDown")this._shift("down",a);else if(l)this._setTime(o,a,Number(s));else if(d){const c=s.toLowerCase(),m=o.hour;(c==="a"&&m>=12||c==="p"&&m<12)&&this._shift("up",a)}t.preventDefault(),t.stopImmediatePropagation()}else h||(t.preventDefault(),t.stopImmediatePropagation())}_handleInputClick(t){const e=t.target;this._activePart=null,this.renderNow(),this._activePart=this._caretIndexToPartName(e.selectionStart??0)}_getOrderedParts(){return Ha(this._activeTime)?["hours","minutes","meridiem"]:["hours","minutes"]}_prevPart(){const t=this._getOrderedParts(),e=this._activePart?t.indexOf(this._activePart)-1:0;return t[Math.max(e,0)]}_nextPart(){const t=this._getOrderedParts(),e=this._activePart?t.indexOf(this._activePart)+1:0;return t[Math.min(e,t.length-1)]}_setTime(t,e,r){if(e==="hours"){const n=Ha(t)?12:24,s=""+t.hour%n,o=r,a=+`${s}${r}`;s.length===2||a>n?this._activeTime=t.set({hour:o}):a<=n&&(this._activeTime=t.set({hour:a}))}else if(e==="minutes"){const s=`${t.minute}`,o=r,a=+`${s}${r}`;s.length===2||a>59?this._activeTime=t.set({minute:o}):a<59&&(this._activeTime=t.set({minute:a}))}}_parseTime(t){if(!t)return null;const e={locale:Mi(),numberingSystem:"latn"};let r=Se.fromFormat(t,Ba,e);return r.isValid?r:(r=Se.fromISO(t,e),r.isValid?r:(r=Se.fromRFC2822(t,e),r.isValid?r:(r=Se.fromJSDate(new Date(t)),r.isValid?r:null)))}_handleInputPaste(t){const e=t.clipboardData?.getData("text/plain"),r=this._parseTime(e);r&&(this._activeTime=r),t.preventDefault(),t.stopImmediatePropagation()}_handleInputWheel(t){const e=t.deltaY<0?"up":"down";this._shift(e,this._activePart)}_shift(t,e){if(!e)return;const r=t==="up"?"plus":"minus",n=e==="meridiem"?12:1,s=e==="hours"?"hour":e==="minutes"?"minute":"hours";this._activeTime=this._activeTime?.[r]({[s]:n})??null}};w([x(),Pe("esri/widgets/support/t9n/TimePicker")],Oi.prototype,"messages",void 0),w([x()],Oi.prototype,"value",null),w([x({type:Ld})],Oi.prototype,"viewModel",void 0),Oi=w([$t("esri.widgets.support.TimePicker")],Oi);const Op=Oi,kp={cancelEdit:"Escape"},hi="esri-field-column",Ce={headerContent:`${hi}__header-content`,headerLabel:`${hi}__header-label`,input:`${hi}__cell-input`,inputContainer:`${hi}__cell__input-container`,dateInputContainer:`${hi}__cell__date-input-container`,dateInputWrapper:`${hi}__cell__date-input-wrapper`,button:`${hi}__button`,saveIcon:"esri-icon-save",trashIcon:"esri-icon-trash",locked:"esri-icon-locked"},Dp=No("short-date-short-time"),Rp=No("short-date"),zp={useGrouping:!0,maximumFractionDigits:20};let _t=class extends Ap{constructor(t){super(t),this._inputField=null,this.cellValueFormatFunction=({rowData:e,value:r})=>{if(this.formatFunction){const{config:l,field:d}=this;return this.formatFunction({config:l,field:d,value:Li.sanitize(r)})}if(r===null)return"&nbsp;";const{config:n,field:s}=this,o=e?.item?.feature,a=this._getDomainForFeature(o);if(a)return this._getComputedDomain(r,a);if(s.type==="date"){const l=this._getDateFormatOptions(),d=this.layer?.type==="feature"&&this.layer.datesInUnknownTimezone?{timeZone:"UTC"}:null;return r?te(r,{...l,...d}):null}if(Sa.has(s.type)&&r){const l=nu(s,r);return Li.sanitize(l)}if(an(s)){const l=n?.format?Oc(n.format):zp;return kc(parseFloat(r),l)}return Li.sanitize(r)},this.cellValueValidatorFunction=({oldValue:e,value:r})=>!(this._inputField&&!this._inputField.valid)&&(!this.required||r!=null&&r!=="")&&e!==r,this.config=null,this.editingEnabled=!1,this.expressionInfos=null,this.field=null,this.formatFunction=null,this.headerRenderFunction=e=>{const{root:r}=e,{editable:n,editingEnabled:s,headerMenuEnabled:o,sortable:a}=this;if(this.removeCellContent(r),r.classList.add(Ce.headerContent),s&&!n&&r.appendChild(this.createLockedElement()),a)this.headerSorterRenderFunction(e);else{const l=document.createElement("div");l.classList.add(Ce.headerLabel),l.textContent=this.label,r.appendChild(l)}o&&this.headerMenuRenderFunction(e)},this.inputRenderFunction=({root:e,column:r,rowData:n})=>{if(this.activeEditInfo?.updating||!this.editable)return;const s=this.getCellValue(r,n),o=this.createInputElement({root:e,column:r,rowData:n,value:s});if(this._set("activeEditInfo",{column:r,input:o,root:e,rowData:n,updating:!0,oldValue:s}),this.field.type==="date")return void this._renderDateEditors(s,e,o);const a=this.createInputContainer();a.appendChild(o),this.removeCellContent(e),e.appendChild(a),o.focus(),o instanceof HTMLInputElement&&o.select(),this.grid?.notifyResize()},this.layer=null,this.parseInputValueFunction=({input:e})=>{const r=this._inputField;if(!r)return null;const n=e.value,{dataType:s,required:o}=r;return o||n!==""?s==="number"||s==="date"?parseFloat(n):s==="text"?n.trim():n:null},this.store=null,this.template=null,this.updateRowItemFunction=({rowData:e,column:r,value:n})=>{e&&(e.item.feature.attributes[r.path]=n)},this.updateStoreItemFunction=async({rowData:e,column:r,value:n})=>{if(!e||!this.store)return;const s=e.item.objectId,o=this.store.getObjectIdIndex(s)??e.index;await this.store.updateItem({index:o,name:r.path,value:n})}}get alias(){return this.field?.alias}get defaultValue(){return this.field?.defaultValue}get description(){return this.template?.description??this.config?.description??this.field?.description??null}get editable(){const{config:t,editingEnabled:e,field:r,layer:n,template:s}=this;if(r==null||n==null)return!1;const o=Dc(n),a=hr(n),l=a?.operations.supportsUpdate;return!!(r.editable&&o&&l)&&!Sa.has(r.type)&&(e?!(s?.editable===!1||t?.editable===!1):!(!s?.editable&&!t?.editable))}get header(){return this.template?.label||this.config?.label||this.alias||this.path||null}get hidden(){const{config:t}=this;return t?.visible===!1||this._get("hidden")||!1}set hidden(t){this._set("hidden",t)}get loadingMessage(){return this.messages?.loading||"..."}get maxLength(){const{field:t,config:e,template:r}=this,n=t?.length,s=r?.input&&"maxLength"in r.input?r.input.maxLength:e?.maxLength;return s!=null&&!isNaN(s)&&s>=-1&&(n===-1||s<=n)?s:n}get minLength(){const{config:t,template:e,maxLength:r}=this,n=e?.input&&"minLength"in e.input?e.input.minLength:t?.minLength||null;return r&&n<=r?n:null}get name(){return this.field?.name}get nullable(){return this.field?.nullable??!1}get path(){return this.field?.name}get required(){const{config:t,field:e,template:r}=this,n=e?.nullable,s=t?.required,o=r?.required;return this.editable&&(!n||s===!0||o===!0)}get sortable(){return this.template?this.template?.sortable!==!1:this.config?.sortable!==!1}createInputElement({rowData:t,value:e}){const r=t?.item;if(!r||!r.feature)return null;this._inputField=this._setUpInputField(r.feature,e);const{field:n,maxLength:s,minLength:o,required:a}=this,{domain:l}=this._inputField;let d;l?.type==="coded-value"?(d=this._createSelectElement(e,l.codedValues.map(({code:m,name:p})=>({value:m,name:p})),this._inputField),d.onchange=()=>{d.onblur=null,c()}):(d=document.createElement("input"),d.type=an(n)?"number":"text",s>-1&&(d.maxLength=s),o>0&&(d.minLength=o)),d.classList.add(Ce.input),d.value=e,d.required=a;let h=!1;d.onkeydown=m=>{h=m.key===kp.cancelEdit},d.onblur=()=>{d.onblur=null,c()};const c=()=>{h?this.cancel():this.submit(),this._inputField=null};return d}createInputContainer(){const t=document.createElement("div");return t.classList.add(Ce.inputContainer),t}createLockedElement(){const t=document.createElement("div");return t.classList.add(Ce.locked),t}getCellValue({path:t},e){return e?.item?.feature?.attributes?.[t]??null}_renderDateEditors(t,e,r){const{config:n,messagesCommon:s,template:o}=this,a=t?new Date(t):new Date(Date.now()),l=new Tp({dateInputEnabled:!0,value:a}),d=new Op({value:a});r.value=a.getTime().toString();let h=!t;const c=()=>{h=!0;const I=this._getCombinedDateTime(l.value,d.value);r.value=I.getTime().toString()},m=()=>{h?this.submit():this.cancel()},p=()=>{r.value=null,this.submit()};At(()=>[l.value,d.value],()=>c());const g=document.createElement("div"),f=document.createElement("div");l.container=g,d.container=f;const b=document.createElement("button");b.classList.add(Ce.button,Ce.saveIcon),b.onclick=()=>m(),b.title=s?.save;const y=document.createElement("button");y.classList.add(Ce.button,Ce.trashIcon),y.onclick=()=>p(),y.title=s?.clear;const v=document.createElement("div");v.classList.add(Ce.dateInputWrapper),v.appendChild(g),(o&&o.input&&o.input.type==="datetime-picker"&&o.input.includeTime!==!1||n&&n.includeTime!==!1)&&v.appendChild(f);const S=document.createElement("div");S.classList.add(Ce.dateInputContainer),S.appendChild(v),S.appendChild(b),S.appendChild(y),l.when(()=>{const I=l._inputOrButtonNode;I&&(I.onblur=T=>{const D=T.relatedTarget;D&&D.className.includes("esri-date-picker")||l.close(!1)}),this.grid?.notifyResize()}),d.when(()=>this.grid?.notifyResize()),this.removeCellContent(e),e.appendChild(S),this.grid?.notifyResize()}_createSelectElement(t,e,r){let n=!1;const s=e.map(a=>{a.value===t&&(n=!0);const l=document.createElement("option");return l.text=a.name,l.value=a.value,l});if(t!=null&&t!==""&&!n){const a=document.createElement("option");a.text=t,a.value=t,s.unshift(a)}if(!r.required&&r.value==null){const a=document.createElement("option");a.value="",s.unshift(a)}const o=document.createElement("select");return s.forEach(a=>o.add(a)),o.value=t,o}_setUpInputField(t,e){const{field:r,layer:n}=this,s=new au({feature:t,initialFeature:t.clone(),field:r,layer:n});return s.set("value",e),s}_isDomainCompatible(t){const{field:e}=this;if(t&&t.type==="coded-value"){const r=typeof t.codedValues[0].code;if(r==="string"&&Rc(e)||r==="number"&&an(e))return!0}return!(!t||t.type!=="range"||!an(e))}_getDomainForFeature(t){const{config:e,layer:r,name:n,template:s}=this;if(!r||r.type==="wfs"||r.type==="geojson"||r.type==="csv")return null;if(s?.domain&&this._isDomainCompatible(s.domain))return s.domain;const{typeIdField:o}=r,a=o===n,l=this.field.domain;if(a&&!l)return new zc({name:"__internal-type-based-coded-value-domain__",codedValues:r.types?.map(({id:c,name:m})=>({code:c,name:m}))});const d=o&&n!=null&&r.getFieldDomain(n,{feature:t})||l,h=e?.domain;return this._isDomainCompatible(h)?h:d}_getComputedDomain(t,e){if(!e)return null;if(e.type==="range")return t;if(e.type==="coded-value"){const r=e.codedValues.filter(n=>n.hasOwnProperty("code")&&n.code===t);return r&&r.length?r[0].name:t}return null}_getCombinedDateTime(t,e){return new Date(t.getFullYear(),t.getMonth(),t.getDate(),e.getHours(),e.getMinutes(),e.getSeconds())}_getDateFormatOptions(){const{config:t,template:e}=this,r=e?.format?.dateFormat||t?.format?.dateFormat;return r?No(r):e&&e.input&&!("includeTime"in e.input)||t?.includeTime===!1?Rp:Dp}};w([x({readOnly:!0})],_t.prototype,"alias",null),w([x()],_t.prototype,"cellValueFormatFunction",void 0),w([x()],_t.prototype,"cellValueValidatorFunction",void 0),w([x()],_t.prototype,"config",void 0),w([x({readOnly:!0})],_t.prototype,"defaultValue",null),w([x({readOnly:!0})],_t.prototype,"description",null),w([x({readOnly:!0})],_t.prototype,"editable",null),w([x()],_t.prototype,"editingEnabled",void 0),w([x()],_t.prototype,"expressionInfos",void 0),w([x()],_t.prototype,"field",void 0),w([x()],_t.prototype,"formatFunction",void 0),w([x({readOnly:!0})],_t.prototype,"header",null),w([x()],_t.prototype,"hidden",null),w([x()],_t.prototype,"headerRenderFunction",void 0),w([x()],_t.prototype,"inputRenderFunction",void 0),w([x()],_t.prototype,"layer",void 0),w([x({readOnly:!0})],_t.prototype,"loadingMessage",null),w([x()],_t.prototype,"maxLength",null),w([x()],_t.prototype,"minLength",null),w([x({readOnly:!0})],_t.prototype,"name",null),w([x({readOnly:!0})],_t.prototype,"nullable",null),w([x()],_t.prototype,"parseInputValueFunction",void 0),w([x({readOnly:!0})],_t.prototype,"path",null),w([x({readOnly:!0})],_t.prototype,"required",null),w([x()],_t.prototype,"sortable",null),w([x()],_t.prototype,"store",void 0),w([x()],_t.prototype,"template",void 0),w([x()],_t.prototype,"updateRowItemFunction",void 0),w([x()],_t.prototype,"updateStoreItemFunction",void 0),_t=w([$t("esri.widgets.FeatureTable.FieldColumn")],_t);const ws=_t;let re=class extends Yr{constructor(i){super(i),this.cellClassNameGenerator=null,this.columnReorderingEnabled=!0,this.columns=new he,this.dataProvider=async({page:t,pageSize:e},r)=>{const{store:n}=this;r&&(n?r(await n.fetchItems({page:t,pageSize:e})):r&&r([]))},this.multiSortEnabled=!1,this.pageSize=50,this.rowDetailsRenderer=null,this.store=null}get highlightIds(){return this._get("highlightIds")||new he}set highlightIds(i){Array.isArray(i)?this._set("highlightIds",new he(i)):this._set("highlightIds",i)}get size(){return this.store&&this.store.count||0}get state(){const{store:i}=this;return i&&i.state!=="disabled"?i.state==="loading"?"loading":i.state==="loaded"?"loaded":"ready":"disabled"}closeColumnMenus(){this.columns?.forEach(i=>{i.menu&&i.menu.open&&i.menu.set("open",!1)})}sortColumn(i,t){const e=this.findColumn(i);e&&(e.direction=t)}hideColumn(i){const t=this.findColumn(i);t?.hidden===!1&&(t.hidden=!0)}showColumn(i){const t=this.findColumn(i);t?.hidden&&(t.hidden=!1)}showAllColumns(){this.columns?.forEach(i=>{i.hidden&&(i.hidden=!1)})}findColumn(i){const t=[];return this.columns.forEach(e=>{t.push(e),"columns"in e&&e.columns?.forEach(r=>t.push(r))}),t.find(e=>e.path===i)}getRowItemAt(i){return this.store?.getLocalItemAt(i)}refresh(){this.store&&(this.store.reset(),this.store.load())}};w([x()],re.prototype,"cellClassNameGenerator",void 0),w([x()],re.prototype,"columnReorderingEnabled",void 0),w([x()],re.prototype,"columns",void 0),w([x()],re.prototype,"dataProvider",void 0),w([x()],re.prototype,"highlightIds",null),w([x()],re.prototype,"multiSortEnabled",void 0),w([x()],re.prototype,"pageSize",void 0),w([x()],re.prototype,"rowDetailsRenderer",void 0),w([x({readOnly:!0})],re.prototype,"size",null),w([x()],re.prototype,"store",void 0),w([x({readOnly:!0})],re.prototype,"state",null),re=w([$t("esri.widgets.FeatureTable.Grid.GridViewModel")],re);const $d=re;let Np=class extends HTMLElement{static get version(){return"1.6.1"}};customElements.define("vaadin-lumo-styles",Np);let Cs,As=null,ja=window.HTMLImports&&window.HTMLImports.whenReady||null;function Ua(i){requestAnimationFrame(function(){ja?ja(i):(As||(As=new Promise(t=>{Cs=t}),document.readyState==="complete"?Cs():document.addEventListener("readystatechange",()=>{document.readyState==="complete"&&Cs()})),As.then(function(){i&&i()}))})}const Va="__seenByShadyCSS",cn="__shadyCSSCachedStyle";let Ln=null,Cr=null,Xe=class{constructor(){this.customStyles=[],this.enqueued=!1,Ua(()=>{window.ShadyCSS.flushCustomStyles&&window.ShadyCSS.flushCustomStyles()})}enqueueDocumentValidation(){!this.enqueued&&Cr&&(this.enqueued=!0,Ua(Cr))}addCustomStyle(t){t[Va]||(t[Va]=!0,this.customStyles.push(t),this.enqueueDocumentValidation())}getStyleForCustomStyle(t){if(t[cn])return t[cn];let e;return e=t.getStyle?t.getStyle():t,e}processStyles(){const t=this.customStyles;for(let e=0;e<t.length;e++){const r=t[e];if(r[cn])continue;const n=this.getStyleForCustomStyle(r);if(n){const s=n.__appliedElement||n;Ln&&Ln(s),r[cn]=s}}return t}};Xe.prototype.addCustomStyle=Xe.prototype.addCustomStyle,Xe.prototype.getStyleForCustomStyle=Xe.prototype.getStyleForCustomStyle,Xe.prototype.processStyles=Xe.prototype.processStyles,Object.defineProperties(Xe.prototype,{transformCallback:{get:()=>Ln,set(i){Ln=i}},validateCallback:{get:()=>Cr,set(i){let t=!1;Cr||(t=!0),Cr=i,t&&this.enqueueDocumentValidation()}}});const ro=/(?:^|[;\s{]\s*)(--[\w-]*?)\s*:\s*(?:((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};{])+)|\{([^}]*)\}(?:(?=[;\s}])|$))/gi,$n=/(?:^|\W+)@apply\s*\(?([^);\n]*)\)?/gi,Fp=/@media\s(.*)/;function no(i,t){for(let e in t)e===null?i.style.removeProperty(e):i.style.setProperty(e,t[e])}function Bd(i,t){const e=window.getComputedStyle(i).getPropertyValue(t);return e?e.trim():""}function Mp(i){const t=$n.test(i)||ro.test(i);return $n.lastIndex=0,ro.lastIndex=0,t}const ss=!(window.ShadyDOM&&window.ShadyDOM.inUse);let Vo,Fr;function Wa(i){Vo=(!i||!i.shimcssproperties)&&(ss||!!(!navigator.userAgent.match(/AppleWebKit\/601|Edge\/15/)&&window.CSS&&CSS.supports&&CSS.supports("box-shadow","0 0 0 var(--foo)")))}window.ShadyCSS&&window.ShadyCSS.cssBuild!==void 0&&(Fr=window.ShadyCSS.cssBuild);const Hd=!!(window.ShadyCSS&&window.ShadyCSS.disableRuntime);window.ShadyCSS&&window.ShadyCSS.nativeCss!==void 0?Vo=window.ShadyCSS.nativeCss:window.ShadyCSS?(Wa(window.ShadyCSS),window.ShadyCSS=void 0):Wa(window.WebComponents&&window.WebComponents.flags);const Wo=Vo,un=new Xe;window.ShadyCSS||(window.ShadyCSS={prepareTemplate(i,t,e){},prepareTemplateDom(i,t){},prepareTemplateStyles(i,t,e){},styleSubtree(i,t){un.processStyles(),no(i,t)},styleElement(i){un.processStyles()},styleDocument(i){un.processStyles(),no(document.body,i)},getComputedStyleValue:(i,t)=>Bd(i,t),flushCustomStyles(){},nativeCss:Wo,nativeShadow:ss,cssBuild:Fr,disableRuntime:Hd}),window.ShadyCSS.CustomStyleInterface=un,window.JSCompiler_renameProperty=function(i,t){return i};let pn,ae,Lp=/(url\()([^)]*)(\))/g,$p=/(^\/[^\/])|(^#)|(^[\w-\d]*:)/;function Ar(i,t){if(i&&$p.test(i)||i==="//")return i;if(pn===void 0){pn=!1;try{const e=new URL("b","http://a");e.pathname="c%20d",pn=e.href==="http://a/c%20d"}catch{}}if(t||(t=document.baseURI||window.location.href),pn)try{return new URL(i,t).href}catch{return i}return ae||(ae=document.implementation.createHTMLDocument("temp"),ae.base=ae.createElement("base"),ae.head.appendChild(ae.base),ae.anchor=ae.createElement("a"),ae.body.appendChild(ae.anchor)),ae.base.href=t,ae.anchor.href=i,ae.anchor.href||i}function Go(i,t){return i.replace(Lp,function(e,r,n,s){return r+"'"+Ar(n.replace(/["']/g,""),t)+"'"+s})}function qo(i){return i.substring(0,i.lastIndexOf("/")+1)}const Yo=!window.ShadyDOM||!window.ShadyDOM.inUse;!window.ShadyCSS||window.ShadyCSS.nativeCss;const Bp=Yo&&"adoptedStyleSheets"in Document.prototype&&"replaceSync"in CSSStyleSheet.prototype&&(()=>{try{const i=new CSSStyleSheet;i.replaceSync("");const t=document.createElement("div");return t.attachShadow({mode:"open"}),t.shadowRoot.adoptedStyleSheets=[i],t.shadowRoot.adoptedStyleSheets[0]===i}catch{return!1}})();let Hp=window.Polymer&&window.Polymer.rootPath||qo(document.baseURI||window.location.href),Bn=window.Polymer&&window.Polymer.sanitizeDOMValue||void 0,jp=window.Polymer&&window.Polymer.setPassiveTouchGestures||!1,Gi=window.Polymer&&window.Polymer.strictTemplatePolicy||!1,Up=window.Polymer&&window.Polymer.allowTemplateFromDomModule||!1,Mr=window.Polymer&&window.Polymer.legacyOptimizations||!1,jd=window.Polymer&&window.Polymer.legacyWarnings||!1,Vp=window.Polymer&&window.Polymer.syncInitialRender||!1,so=window.Polymer&&window.Polymer.legacyUndefined||!1,Wp=window.Polymer&&window.Polymer.orderedComputed||!1,Ga=window.Polymer&&window.Polymer.removeNestedTemplates||!1,Ud=window.Polymer&&window.Polymer.fastDomIf||!1,oo=window.Polymer&&window.Polymer.suppressTemplateNotifications||!1,fn=window.Polymer&&window.Polymer.legacyNoObservedAttributes||!1,Gp=window.Polymer&&window.Polymer.useAdoptedStyleSheetsWithBuiltCSS||!1,Zo={},Vd={};function qa(i,t){Zo[i]=Vd[i.toLowerCase()]=t}function Ya(i){return Zo[i]||Vd[i.toLowerCase()]}function qp(i){i.querySelector("style")&&console.warn("dom-module %s has style outside template",i.id)}class qi extends HTMLElement{static get observedAttributes(){return["id"]}static import(t,e){if(t){let r=Ya(t);return r&&e?r.querySelector(e):r}return null}attributeChangedCallback(t,e,r,n){e!==r&&this.register()}get assetpath(){if(!this.__assetpath){const t=window.HTMLImports&&HTMLImports.importForElement?HTMLImports.importForElement(this)||document:this.ownerDocument,e=Ar(this.getAttribute("assetpath")||"",t.baseURI);this.__assetpath=qo(e)}return this.__assetpath}register(t){if(t=t||this.id){if(Gi&&Ya(t)!==void 0)throw qa(t,null),new Error(`strictTemplatePolicy: dom-module ${t} re-registered`);this.id=t,qa(t,this),qp(this)}}}qi.prototype.modules=Zo,customElements.define("dom-module",qi);const Yp="link[rel=import][type~=css]",Zp="include",Za="shady-unscoped";function Xo(i){return qi.import(i)}function Xa(i){const t=Go((i.body?i.body:i).textContent,i.baseURI),e=document.createElement("style");return e.textContent=t,e}function Xp(i){const t=i.trim().split(/\s+/),e=[];for(let r=0;r<t.length;r++)e.push(...Jp(t[r]));return e}function Jp(i){const t=Xo(i);if(!t)return console.warn("Could not find style data in module named",i),[];if(t._styles===void 0){const e=[];e.push(...Ko(t));const r=t.querySelector("template");r&&e.push(...Jo(r,t.assetpath)),t._styles=e}return t._styles}function Jo(i,t){if(!i._styles){const e=[],r=i.content.querySelectorAll("style");for(let n=0;n<r.length;n++){let s=r[n],o=s.getAttribute(Zp);o&&e.push(...Xp(o).filter(function(a,l,d){return d.indexOf(a)===l})),t&&(s.textContent=Go(s.textContent,t)),e.push(s)}i._styles=e}return i._styles}function Kp(i){let t=Xo(i);return t?Ko(t):[]}function Ko(i){const t=[],e=i.querySelectorAll(Yp);for(let r=0;r<e.length;r++){let n=e[r];if(n.import){const s=n.import,o=n.hasAttribute(Za);if(o&&!s._unscopedStyle){const a=Xa(s);a.setAttribute(Za,""),s._unscopedStyle=a}else s._style||(s._style=Xa(s));t.push(o?s._unscopedStyle:s._style)}}return t}function Qp(i){let t=i.trim().split(/\s+/),e="";for(let r=0;r<t.length;r++)e+=tf(t[r]);return e}function tf(i){let t=Xo(i);if(t&&t._cssText===void 0){let e=rf(t),r=t.querySelector("template");r&&(e+=ef(r,t.assetpath)),t._cssText=e||null}return t||console.warn("Could not find style data in module named",i),t&&t._cssText||""}function ef(i,t){let e="";const r=Jo(i,t);for(let n=0;n<r.length;n++){let s=r[n];s.parentNode&&s.parentNode.removeChild(s),e+=s.textContent}return e}function rf(i){let t="",e=Ko(i);for(let r=0;r<e.length;r++)t+=e[r].textContent;return t}const Ja="include",nf=window.ShadyCSS.CustomStyleInterface;class sf extends HTMLElement{constructor(){super(),this._style=null,nf.addCustomStyle(this)}getStyle(){if(this._style)return this._style;const t=this.querySelector("style");if(!t)return null;this._style=t;const e=t.getAttribute(Ja);return e&&(t.removeAttribute(Ja),t.textContent=Qp(e)+t.textContent),this.ownerDocument!==window.document&&window.document.head.appendChild(this),this._style}}window.customElements.define("custom-style",sf);const Ka=document.createElement("template");Ka.innerHTML=`<custom-style>
  <style>
    html {
      /* Base (background) */
      --lumo-base-color: #FFF;

      /* Tint */
      --lumo-tint-5pct: hsla(0, 0%, 100%, 0.3);
      --lumo-tint-10pct: hsla(0, 0%, 100%, 0.37);
      --lumo-tint-20pct: hsla(0, 0%, 100%, 0.44);
      --lumo-tint-30pct: hsla(0, 0%, 100%, 0.5);
      --lumo-tint-40pct: hsla(0, 0%, 100%, 0.57);
      --lumo-tint-50pct: hsla(0, 0%, 100%, 0.64);
      --lumo-tint-60pct: hsla(0, 0%, 100%, 0.7);
      --lumo-tint-70pct: hsla(0, 0%, 100%, 0.77);
      --lumo-tint-80pct: hsla(0, 0%, 100%, 0.84);
      --lumo-tint-90pct: hsla(0, 0%, 100%, 0.9);
      --lumo-tint: #FFF;

      /* Shade */
      --lumo-shade-5pct: hsla(214, 61%, 25%, 0.05);
      --lumo-shade-10pct: hsla(214, 57%, 24%, 0.1);
      --lumo-shade-20pct: hsla(214, 53%, 23%, 0.16);
      --lumo-shade-30pct: hsla(214, 50%, 22%, 0.26);
      --lumo-shade-40pct: hsla(214, 47%, 21%, 0.38);
      --lumo-shade-50pct: hsla(214, 45%, 20%, 0.5);
      --lumo-shade-60pct: hsla(214, 43%, 19%, 0.61);
      --lumo-shade-70pct: hsla(214, 42%, 18%, 0.72);
      --lumo-shade-80pct: hsla(214, 41%, 17%, 0.83);
      --lumo-shade-90pct: hsla(214, 40%, 16%, 0.94);
      --lumo-shade: hsl(214, 35%, 15%);

      /* Contrast */
      --lumo-contrast-5pct: var(--lumo-shade-5pct);
      --lumo-contrast-10pct: var(--lumo-shade-10pct);
      --lumo-contrast-20pct: var(--lumo-shade-20pct);
      --lumo-contrast-30pct: var(--lumo-shade-30pct);
      --lumo-contrast-40pct: var(--lumo-shade-40pct);
      --lumo-contrast-50pct: var(--lumo-shade-50pct);
      --lumo-contrast-60pct: var(--lumo-shade-60pct);
      --lumo-contrast-70pct: var(--lumo-shade-70pct);
      --lumo-contrast-80pct: var(--lumo-shade-80pct);
      --lumo-contrast-90pct: var(--lumo-shade-90pct);
      --lumo-contrast: var(--lumo-shade);

      /* Text */
      --lumo-header-text-color: var(--lumo-contrast);
      --lumo-body-text-color: var(--lumo-contrast-90pct);
      --lumo-secondary-text-color: var(--lumo-contrast-70pct);
      --lumo-tertiary-text-color: var(--lumo-contrast-50pct);
      --lumo-disabled-text-color: var(--lumo-contrast-30pct);

      /* Primary */
      --lumo-primary-color: hsl(214, 90%, 52%);
      --lumo-primary-color-50pct: hsla(214, 90%, 52%, 0.5);
      --lumo-primary-color-10pct: hsla(214, 90%, 52%, 0.1);
      --lumo-primary-text-color: var(--lumo-primary-color);
      --lumo-primary-contrast-color: #FFF;

      /* Error */
      --lumo-error-color: hsl(3, 100%, 61%);
      --lumo-error-color-50pct: hsla(3, 100%, 60%, 0.5);
      --lumo-error-color-10pct: hsla(3, 100%, 60%, 0.1);
      --lumo-error-text-color: hsl(3, 92%, 53%);
      --lumo-error-contrast-color: #FFF;

      /* Success */
      --lumo-success-color: hsl(145, 80%, 42%); /* hsl(144,82%,37%); */
      --lumo-success-color-50pct: hsla(145, 76%, 44%, 0.55);
      --lumo-success-color-10pct: hsla(145, 76%, 44%, 0.12);
      --lumo-success-text-color: hsl(145, 100%, 32%);
      --lumo-success-contrast-color: #FFF;
    }
  </style>
</custom-style><dom-module id="lumo-color">
  <template>
    <style>
      [theme~="dark"] {
        /* Base (background) */
        --lumo-base-color: hsl(214, 35%, 21%);

        /* Tint */
        --lumo-tint-5pct: hsla(214, 65%, 85%, 0.06);
        --lumo-tint-10pct: hsla(214, 60%, 80%, 0.14);
        --lumo-tint-20pct: hsla(214, 64%, 82%, 0.23);
        --lumo-tint-30pct: hsla(214, 69%, 84%, 0.32);
        --lumo-tint-40pct: hsla(214, 73%, 86%, 0.41);
        --lumo-tint-50pct: hsla(214, 78%, 88%, 0.5);
        --lumo-tint-60pct: hsla(214, 82%, 90%, 0.6);
        --lumo-tint-70pct: hsla(214, 87%, 92%, 0.7);
        --lumo-tint-80pct: hsla(214, 91%, 94%, 0.8);
        --lumo-tint-90pct: hsla(214, 96%, 96%, 0.9);
        --lumo-tint: hsl(214, 100%, 98%);

        /* Shade */
        --lumo-shade-5pct: hsla(214, 0%, 0%, 0.07);
        --lumo-shade-10pct: hsla(214, 4%, 2%, 0.15);
        --lumo-shade-20pct: hsla(214, 8%, 4%, 0.23);
        --lumo-shade-30pct: hsla(214, 12%, 6%, 0.32);
        --lumo-shade-40pct: hsla(214, 16%, 8%, 0.41);
        --lumo-shade-50pct: hsla(214, 20%, 10%, 0.5);
        --lumo-shade-60pct: hsla(214, 24%, 12%, 0.6);
        --lumo-shade-70pct: hsla(214, 28%, 13%, 0.7);
        --lumo-shade-80pct: hsla(214, 32%, 13%, 0.8);
        --lumo-shade-90pct: hsla(214, 33%, 13%, 0.9);
        --lumo-shade: hsl(214, 33%, 13%);

        /* Contrast */
        --lumo-contrast-5pct: var(--lumo-tint-5pct);
        --lumo-contrast-10pct: var(--lumo-tint-10pct);
        --lumo-contrast-20pct: var(--lumo-tint-20pct);
        --lumo-contrast-30pct: var(--lumo-tint-30pct);
        --lumo-contrast-40pct: var(--lumo-tint-40pct);
        --lumo-contrast-50pct: var(--lumo-tint-50pct);
        --lumo-contrast-60pct: var(--lumo-tint-60pct);
        --lumo-contrast-70pct: var(--lumo-tint-70pct);
        --lumo-contrast-80pct: var(--lumo-tint-80pct);
        --lumo-contrast-90pct: var(--lumo-tint-90pct);
        --lumo-contrast: var(--lumo-tint);

        /* Text */
        --lumo-header-text-color: var(--lumo-contrast);
        --lumo-body-text-color: var(--lumo-contrast-90pct);
        --lumo-secondary-text-color: var(--lumo-contrast-70pct);
        --lumo-tertiary-text-color: var(--lumo-contrast-50pct);
        --lumo-disabled-text-color: var(--lumo-contrast-30pct);

        /* Primary */
        --lumo-primary-color: hsl(214, 86%, 55%);
        --lumo-primary-color-50pct: hsla(214, 86%, 55%, 0.5);
        --lumo-primary-color-10pct: hsla(214, 90%, 63%, 0.1);
        --lumo-primary-text-color: hsl(214, 100%, 70%);
        --lumo-primary-contrast-color: #FFF;

        /* Error */
        --lumo-error-color: hsl(3, 90%, 63%);
        --lumo-error-color-50pct: hsla(3, 90%, 63%, 0.5);
        --lumo-error-color-10pct: hsla(3, 90%, 63%, 0.1);
        --lumo-error-text-color: hsl(3, 100%, 67%);

        /* Success */
        --lumo-success-color: hsl(145, 65%, 42%);
        --lumo-success-color-50pct: hsla(145, 65%, 42%, 0.5);
        --lumo-success-color-10pct: hsla(145, 65%, 42%, 0.1);
        --lumo-success-text-color: hsl(145, 85%, 47%);
      }

      html {
        color: var(--lumo-body-text-color);
        background-color: var(--lumo-base-color);
      }

      [theme~="dark"] {
        color: var(--lumo-body-text-color);
        background-color: var(--lumo-base-color);
      }

      h1,
      h2,
      h3,
      h4,
      h5,
      h6 {
        color: var(--lumo-header-text-color);
      }

      a {
        color: var(--lumo-primary-text-color);
      }

      blockquote {
        color: var(--lumo-secondary-text-color);
      }

      code,
      pre {
        background-color: var(--lumo-contrast-10pct);
        border-radius: var(--lumo-border-radius-m);
      }
    </style>
  </template>
</dom-module><dom-module id="lumo-color-legacy">
  <template>
    <style include="lumo-color">
      :host {
        color: var(--lumo-body-text-color) !important;
        background-color: var(--lumo-base-color) !important;
      }
    </style>
  </template>
</dom-module>`,document.head.appendChild(Ka.content);const Qa=document.createElement("template");Qa.innerHTML=`<custom-style>
  <style>
    @font-face {
      font-family: 'lumo-icons';
      src: url(data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAABEcAAsAAAAAIiwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADsAAABUIIslek9TLzIAAAFEAAAAQwAAAFZAIUuKY21hcAAAAYgAAAD4AAADrsCU8d5nbHlmAAACgAAAC2MAABd4h9To2WhlYWQAAA3kAAAAMAAAADZa/6SsaGhlYQAADhQAAAAdAAAAJAbpA35obXR4AAAONAAAABAAAACspBAAAGxvY2EAAA5EAAAAWAAAAFh55IAsbWF4cAAADpwAAAAfAAAAIAFKAXBuYW1lAAAOvAAAATEAAAIuUUJZCHBvc3QAAA/wAAABKwAAAelm8SzVeJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiBmg4gCACY7BUgAeJxjYGS+yDiBgZWBgamKaQ8DA0MPhGZ8wGDIyAQUZWBlZsAKAtJcUxgcXjG+0mIO+p/FEMUcxDANKMwIkgMABn8MLQB4nO3SWW6DMABF0UtwCEnIPM/zhLK8LqhfXRybSP14XUYtHV9hGYQwQBNIo3cUIPkhQeM7rib1ekqnXg981XuC1qvy84lzojleh3puxL0hPjGjRU473teloEefAUNGjJkwZcacBUtWrNmwZceeA0dOnLlw5cadB09elPGhGf+j0NTI/65KfXerT6JhqKnpRKtgOpuqaTrtKjPUlqHmhto21I7pL6i6hlqY3q7qGWrfUAeGOjTUkaGODXViqFNDnRnq3FAXhro01JWhrg11Y6hbQ90Z6t5QD4Z6NNSToZ4N9WKoV0O9GerdUB+G+jTUl6GWRvkL24BkEXictVh9bFvVFb/nxvbz+7Rf/N6zHcd2bCfP+Wgc1Z9N0jpNnEL6kbRVS6HA2hQYGh9TGR1CbCqa2rXrWOkQE/sHNJgmtZvoVNZqE1B1DNHxzTQxCehUTYiJTQyENui0qSLezr3PduyQfgmRWOfde8+9551z7rnn/O4jLoJ/bRP0UaKQMLFJjpBAvphLZC3Dk0ok7WBzR2/upJs7Ryw/nfFbln/uuN/apCvwrKLrSvUqRufbm5pn0fs0w4gYxnGVP6qHnO4bWiDQGQgwtS6lm3lB3QoX1M2vwEmuzirF39y+Es2+DJ8d1pkyqBIqoze3D1+Zz4DrFoazxI8dWwMrDlZ2DMqQAR9AROsJU+2cmlTPazTco52F1xTa2a2+K8vvq92dVHmtLoPeQX/AZPRYGthDYOeZjBjKoFsVGulR3lWU95WeCK44qHU7MhWUGUKZDT3oKUcG2GWuh+EDDfUYA/jhAhl0TOsJNYSEu7mQmi3UzfXwZKA4BsVsHLXQYGgRW95uEtpJ1Vfn9XiLriRBlFEqxsDjA09yCNUoQxxwd7KWSTt2y3GTKiflqHRSoWZc3m11Wa/fJdFgXD4sSYfleJBKd8GMz7J8dZn/cGRCcKGDnA2Ge3fKzcvlnTDNthGWLXzX/WaXtUAmRgeLlHSr30r0G9UTXMb0AtmwzOoy73fkSlHZkduw/TYuU9cAD4YutPoxTTsA3797wVr4Z/1NC5zARHr4vtxJjxIfiZMhMkbWk+14BnJZKwqGZwDfswLyxWDSg11rFLJF7Nopxjd1h1/QOT+oezgfu3Yq+Hk+duf5x+40o1GTkaIgikK/IEnC6aYxCUBaZJSN4XTYFjU/YMNIKqJwhDGOCCI8FDXnXmXjtGhGJyShqjAOnBOkW2JG9S7GgYeMWAU5JzhnWmBOaOM+CKEPoqSfFDC2Unq+DLlUgUVUFFLZGJg6jtlojsdsa8kPObPuJdi5dnBdBsLJMGTWDa4t2JvtwuPo9s+Y86suv/W33QG1rAaOAUV+vx4K6f2D04PVKlC7WLSrZzAi45ZV6lIC7WoXqmRyvUqoVwrzUoVsIjeTXWQv+RH5GTlBXiB/In8ln0IbBCAFOajAJrgZYyOHWqOfUe/aHjI12R6OQo1jCgt215l+4f6XPb+0MNou0V+43n2F77tSfRb24d7zitgnKmvYHs69zugaPvBwv6ioXkb2LdL65Atw51uLkXlu1bhMMRcXSPcYoqKIRlh34lQP8/5JbuUFye4vxD6/6MxFF11C0uVLr9Ulgw44tS3pMViNLUExbycFgLIct+QDMibRimx1ydUz8FXZiuOIDBOMVX2nUZc+huNE5XUJ81uiJoiabwqaVF0uacKbau/pl4R2VW0XXlJra6boVrYG646TF5NYzwy4vjENVrDlcNpZPl8DH6XX8XWCx0mvWVZY6KFLrvsY66/zPict5FnxaNUR/juvZCM3TvD60E2W1tZizbXTPDuabcm0nbbzpWKpmA1ayBQ8giedLUM+A0kNjBjQjmuYz7YrgIXYvmF63ZLBwSXrpn9Tb9wwdd/U1H0PMQK3XcO8ul3WT7PyPPdpy0TemKxNRcJNauiXJnnUDpUppQWs4SnUIy0EESGYqJYQLGHxzaGWwVIaS6Y7mQFM8ZjYDQ3axjf61SWjU33JwOZA1pwaG1L9mzf71aHRdX1JHw6Fp0aXhNwbqyeGNg4NbdzGCBxoz4ZXjy4Nu69Zr6sDY6vMrLU5nA1P8JkbdWXJ6ERfMryvNh1JfQ9+T4dIhGvK9w3dxjBBzatsQ/MlOHVIDnYpDz6odAXlQ01t2Pa5Iafd8MMpxAeDKP0C6CjgVLT5osB6icUx01lWjXxzT/GyRF2welEM5Z/7jG3VjQ1SrNn5IbyzOG5dobB3/QHxyZvsXcoz8IoEwS7plCg+zxHQk424q9BfEpkESJbFHQusDBSWFkuBkoPO0kLKwRVYjxGXlHTcTDQMJ/H6TX9afkO7mnraTO1feTnZAXLu4cp7HAXMmNG1yeFk9TgS/NHhZR/4QoBTr/ZB+6hCgyl15Nq1UbN6nE1/ZnP1U2cizCBpvs8cJQZJ4LkYx5N/yZPAUZNQQ0V4f3BQllWrK3YRzl30dOT6RVn2upNur6woSa8CqpdT/aKnBM4o3jNur9d9xqtUT6veBEt9Ca9at+ERzEEhUkR8sa5mQ4aVvJoVeEA8zI4ei5mULXFGyU7z/6TAeYLVcpzSWZY8PYYF5yrTV60sT0+XV141vX++Wf16V2bFeGVPZXxFpkvyeKTWLlzfW0mnKxsY6Y3294/0998SCfX1blm5pbcvFGlq/r07MRAMhYIDiW5JFKWW3vdrEpCsZSJG+om7Zu/PSScZJhNkLbmW5Wsr12pWqW5zKtlwRS4bFOxUw17mCzy6lskCDl1WYOGWDYrADrMA7BDDweWWNd5koiJnR1dz+ytLP2q0SqPB1lnK2ccB7RYe4FSoPks3iB3t4txTSHctb2sy1ivk0pvHuCNm6w1f6wxv3+OCgN78LqdQnUVh7R0oTAp0zOf2rbW770Vu5C2dIyGdTnHo8zSji7dppj0USoVCz+lhRMTh53Teq9VbGfbjuSbAooSdXayY4PYHg374C6f7gl1B/DXuJ4/QXxOBdJFJspFsI3egpoWUUCjlTIFnNYNl+ZyZKmBeYKGHkD1QyDlhaKbKwKcIJqJ4TLJ2OmdY/JWXae4DdGBw8HZ7eXcgFF2zr2SoalDry5iKqoa0Puhe3hPQ2s3elTYM+MI+n3rK0KgL7/La3GeMLt6m7u912vGnvtORiIa0qBmhqVi+XW9XNBmqb8eVgKzIHfGI5bNoG7X0UCzeISmqIcO/nY8FH7U8avX9fx/ST+hx0sezPw9Qy8Mum3GWf2N4Uy/yIYGVBXbJHWIZp7dfTcptdMTr9Qmq7DaiK/ukqCL4kt4RUfS5XPnMtmT22/mQFqF7emSqtrlu8SVElxDRJrZODkpuwe0VfTfjdEp1f7A7v+fozNBXUJ/6WTuK2TtFlpFVZAZ3LcFvUi1Z2p2YT+EMAkGJVStOzLTAPg4IqWIAlzRSjOBkl2zxj3TKycpzT/MnvX3uaSMWM+gU0rkXjohhefVRMaps3/kLMSKv23lT23uxQrkQjyOJleMDsdhAnD6ZGElWZ5MjCXzCE/hkWX+WF4knzGhVOyK2eQZekV3eyo0zL8kuYWCnDCvjjhAkcTPOBDXVdoav3HVcFnQjLvtV9S2p0zA6JegPwMQxt+yFb3ll9zGlq/5dRKb3cEyQYoaNYpharJ7xCB7AWxsLY3jjZXY0XsZj0Wjwc9I6PP/dKABnCZaqHpaZEACxk4ZeLZSKNgZABl+lYQX1sJQOSX3n6r410evcoud5JeAGUXVP9H1tZOKejTq4Ono0z0erro1FrnOpohva1d/hTdtVsQdKN5W9RlT3NjD0nznyKNTgKAMfWNWcyodV0IGLPIHOF0o4JyqufaK4z6WIIzuGh3d8c8cwQg8ER+OVxyrjdm8vNuhts4LoOihGxIMuUdgzwiYN7xhh1+oZnJNuTG7gQZvu4XWZ9GAZZjGEubwePqYhtKDTH+9VQkl17/iGybsnJ+8+sKtyPrcll9ty65Zsdst/9iqpEKh7M5VdBxh3csOdNc6tW3I1uyM1PzOXegSOrLFsFNI2O27M+TF2ApnN9MUv5ud6LjxIvEQnHRzxIu4IsA9MLFkJn2tcZoZ7ON7dXe7ujrc8HrusPKamlqXwd77lQUuLpilau4PUMapueBb7irU4RoUXEYXuVuIGlRGmOp+2lNkaRPVziOqmlaZvaqG4dFgSj0jxEJWrv12IUWntmw+rfQarRE0Aph4ocI6nlUlGqs+u3/+T/ethW62PpHp2eHbZstnh/wOO95yDAHicY2BkYGAA4pmJ6QHx/DZfGbiZXwBFGGpUNzQi6P+vmacy3QJyORiYQKIANoULVXicY2BkYGAO+p8FJF8wAAHzVAZGBlSgDQBW9gNvAAAAeJxjYGBgYH4xNDAAzwQmjwAAAAAATgCaAOgBCgEsAU4BcAGaAcQB7gIaApwC6ASaBLwE1gTyBQ4FKgV6BdAF/gZEBmYGtgcYB5AIGAhSCGoI/glGCb4J2goECjwKggq4CvALUAuWC7x4nGNgZGBg0GZMYRBlAAEmIOYCQgaG/2A+AwAYlAG8AHicbZE9TsMwGIbf9A/RSggEYmHxAgtq+jN2ZGj3Dt3T1GlTOXHkuBW9AyfgEByCgTNwCA7BW/NJlVBtyd/jx+8XKwmAa3whwnFE6Ib1OBq44O6Pm6Qb4Rb5QbiNHh6FO/RD4S6eMRHu4RaaT4halzR3eBVu4Apvwk36d+EW+UO4jXt8Cnfov4W7WOBHuIen6MXsCtvPU1vWc73emcSdxIkW2tW5LdUoHp7kTJfaJV6v1PKg6v167H2mMmcLNbWl18ZYVTm71amPN95Xk8EgEx+ntoDBDgUs+siRspaoMef7rukNEriziXNuwS7Hmoe9wggxv+e55IzJMqQTeNYV00scuNbY8+YxrUfGfcaMZb/CNPQe04bT0lThbEuT0sfYhK6K/23Amf3Lx+H24hcj4GScAAAAeJxtjtlugzAQRbkJUEJIuu/7vqR8lGNPAcWx0YAb5e/LklR96EgenSufGY038PqKvf9rhgGG8BEgxA4ijBBjjAQTTLGLPezjAIc4wjFOcIoznOMCl7jCNW5wizvc4wGPeMIzXvCKN7zjAzN8eonQRWZSSaYmjvug6ase98hFltexMJmmVNmV2WBvdNgZUc+ujAWzXW3UDnu1w43asStHc8GpzAXX/py0jqTQZJTgkcxJLpaCF0lD32xNt+43tAsn29Dft02uDKS2cjGUNgsk26qK2lFthYoU27INPqmiDqg5goe0pqR5qSoqMdek/CUZFywL46rEsiImleqiqoMyt4baXlu/1GLdNFf5zbcNmdr1YUWCZe47o+zUmb/DoStbw3cVsef9ALjjiPQA) format('woff');
      font-weight: normal;
      font-style: normal;
    }

    html {
      --lumo-icons-align-center: "\\ea01";
      --lumo-icons-align-left: "\\ea02";
      --lumo-icons-align-right: "\\ea03";
      --lumo-icons-angle-down: "\\ea04";
      --lumo-icons-angle-left: "\\ea05";
      --lumo-icons-angle-right: "\\ea06";
      --lumo-icons-angle-up: "\\ea07";
      --lumo-icons-arrow-down: "\\ea08";
      --lumo-icons-arrow-left: "\\ea09";
      --lumo-icons-arrow-right: "\\ea0a";
      --lumo-icons-arrow-up: "\\ea0b";
      --lumo-icons-bar-chart: "\\ea0c";
      --lumo-icons-bell: "\\ea0d";
      --lumo-icons-calendar: "\\ea0e";
      --lumo-icons-checkmark: "\\ea0f";
      --lumo-icons-chevron-down: "\\ea10";
      --lumo-icons-chevron-left: "\\ea11";
      --lumo-icons-chevron-right: "\\ea12";
      --lumo-icons-chevron-up: "\\ea13";
      --lumo-icons-clock: "\\ea14";
      --lumo-icons-cog: "\\ea15";
      --lumo-icons-cross: "\\ea16";
      --lumo-icons-download: "\\ea17";
      --lumo-icons-dropdown: "\\ea18";
      --lumo-icons-edit: "\\ea19";
      --lumo-icons-error: "\\ea1a";
      --lumo-icons-eye: "\\ea1b";
      --lumo-icons-eye-disabled: "\\ea1c";
      --lumo-icons-menu: "\\ea1d";
      --lumo-icons-minus: "\\ea1e";
      --lumo-icons-ordered-list: "\\ea1f";
      --lumo-icons-phone: "\\ea20";
      --lumo-icons-photo: "\\ea21";
      --lumo-icons-play: "\\ea22";
      --lumo-icons-plus: "\\ea23";
      --lumo-icons-redo: "\\ea24";
      --lumo-icons-reload: "\\ea25";
      --lumo-icons-search: "\\ea26";
      --lumo-icons-undo: "\\ea27";
      --lumo-icons-unordered-list: "\\ea28";
      --lumo-icons-upload: "\\ea29";
      --lumo-icons-user: "\\ea2a";
    }
  </style>
</custom-style>`,document.head.appendChild(Qa.content);const tl=document.createElement("template");tl.innerHTML=`<custom-style>
  <style>
    html {
      --lumo-size-xs: 1.625rem;
      --lumo-size-s: 1.875rem;
      --lumo-size-m: 2.25rem;
      --lumo-size-l: 2.75rem;
      --lumo-size-xl: 3.5rem;

      /* Icons */
      --lumo-icon-size-s: 1.25em;
      --lumo-icon-size-m: 1.5em;
      --lumo-icon-size-l: 2.25em;
      /* For backwards compatibility */
      --lumo-icon-size: var(--lumo-icon-size-m);
    }
  </style>
</custom-style>`,document.head.appendChild(tl.content);const el=document.createElement("template");el.innerHTML=`<custom-style>
  <style>
    html {
      /* Square */
      --lumo-space-xs: 0.25rem;
      --lumo-space-s: 0.5rem;
      --lumo-space-m: 1rem;
      --lumo-space-l: 1.5rem;
      --lumo-space-xl: 2.5rem;

      /* Wide */
      --lumo-space-wide-xs: calc(var(--lumo-space-xs) / 2) var(--lumo-space-xs);
      --lumo-space-wide-s: calc(var(--lumo-space-s) / 2) var(--lumo-space-s);
      --lumo-space-wide-m: calc(var(--lumo-space-m) / 2) var(--lumo-space-m);
      --lumo-space-wide-l: calc(var(--lumo-space-l) / 2) var(--lumo-space-l);
      --lumo-space-wide-xl: calc(var(--lumo-space-xl) / 2) var(--lumo-space-xl);

      /* Tall */
      --lumo-space-tall-xs: var(--lumo-space-xs) calc(var(--lumo-space-xs) / 2);
      --lumo-space-tall-s: var(--lumo-space-s) calc(var(--lumo-space-s) / 2);
      --lumo-space-tall-m: var(--lumo-space-m) calc(var(--lumo-space-m) / 2);
      --lumo-space-tall-l: var(--lumo-space-l) calc(var(--lumo-space-l) / 2);
      --lumo-space-tall-xl: var(--lumo-space-xl) calc(var(--lumo-space-xl) / 2);
    }
  </style>
</custom-style>`,document.head.appendChild(el.content);const il=document.createElement("template");il.innerHTML=`<custom-style>
  <style>
    html {
      /* Border radius */
      --lumo-border-radius-s: 0.25em; /* Checkbox, badge, date-picker year indicator, etc */
      --lumo-border-radius-m: var(--lumo-border-radius, 0.25em); /* Button, text field, menu overlay, etc */
      --lumo-border-radius-l: 0.5em; /* Dialog, notification, etc */
      --lumo-border-radius: 0.25em; /* Deprecated */

      /* Shadow */
      --lumo-box-shadow-xs: 0 1px 4px -1px var(--lumo-shade-50pct);
      --lumo-box-shadow-s: 0 2px 4px -1px var(--lumo-shade-20pct), 0 3px 12px -1px var(--lumo-shade-30pct);
      --lumo-box-shadow-m: 0 2px 6px -1px var(--lumo-shade-20pct), 0 8px 24px -4px var(--lumo-shade-40pct);
      --lumo-box-shadow-l: 0 3px 18px -2px var(--lumo-shade-20pct), 0 12px 48px -6px var(--lumo-shade-40pct);
      --lumo-box-shadow-xl: 0 4px 24px -3px var(--lumo-shade-20pct), 0 18px 64px -8px var(--lumo-shade-40pct);

      /* Clickable element cursor */
      --lumo-clickable-cursor: default;
    }
  </style>
</custom-style>`,document.head.appendChild(il.content);const rl=document.createElement("template");rl.innerHTML=`<custom-style>
  <style>
    html {
      /* Font families */
      --lumo-font-family: -apple-system, BlinkMacSystemFont, "Roboto", "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";

      /* Font sizes */
      --lumo-font-size-xxs: .75rem;
      --lumo-font-size-xs: .8125rem;
      --lumo-font-size-s: .875rem;
      --lumo-font-size-m: 1rem;
      --lumo-font-size-l: 1.125rem;
      --lumo-font-size-xl: 1.375rem;
      --lumo-font-size-xxl: 1.75rem;
      --lumo-font-size-xxxl: 2.5rem;

      /* Line heights */
      --lumo-line-height-xs: 1.25;
      --lumo-line-height-s: 1.375;
      --lumo-line-height-m: 1.625;
    }

  </style>
</custom-style><dom-module id="lumo-typography">
  <template>
    <style>
      html {
        font-family: var(--lumo-font-family);
        font-size: var(--lumo-font-size, var(--lumo-font-size-m));
        line-height: var(--lumo-line-height-m);
        -webkit-text-size-adjust: 100%;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }

      /* Can’t combine with the above selector because that doesn’t work in browsers without native shadow dom */
      :host {
        font-family: var(--lumo-font-family);
        font-size: var(--lumo-font-size, var(--lumo-font-size-m));
        line-height: var(--lumo-line-height-m);
        -webkit-text-size-adjust: 100%;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }

      small,
      [theme~="font-size-s"] {
        font-size: var(--lumo-font-size-s);
        line-height: var(--lumo-line-height-s);
      }

      [theme~="font-size-xs"] {
        font-size: var(--lumo-font-size-xs);
        line-height: var(--lumo-line-height-xs);
      }

      h1,
      h2,
      h3,
      h4,
      h5,
      h6 {
        font-weight: 600;
        line-height: var(--lumo-line-height-xs);
        margin-top: 1.25em;
      }

      h1 {
        font-size: var(--lumo-font-size-xxxl);
        margin-bottom: 0.75em;
      }

      h2 {
        font-size: var(--lumo-font-size-xxl);
        margin-bottom: 0.5em;
      }

      h3 {
        font-size: var(--lumo-font-size-xl);
        margin-bottom: 0.5em;
      }

      h4 {
        font-size: var(--lumo-font-size-l);
        margin-bottom: 0.5em;
      }

      h5 {
        font-size: var(--lumo-font-size-m);
        margin-bottom: 0.25em;
      }

      h6 {
        font-size: var(--lumo-font-size-xs);
        margin-bottom: 0;
        text-transform: uppercase;
        letter-spacing: 0.03em;
      }

      p,
      blockquote {
        margin-top: 0.5em;
        margin-bottom: 0.75em;
      }

      a {
        text-decoration: none;
      }

      a:hover {
        text-decoration: underline;
      }

      hr {
        display: block;
        align-self: stretch;
        height: 1px;
        border: 0;
        padding: 0;
        margin: var(--lumo-space-s) calc(var(--lumo-border-radius-m) / 2);
        background-color: var(--lumo-contrast-10pct);
      }

      blockquote {
        border-left: 2px solid var(--lumo-contrast-30pct);
      }

      b,
      strong {
        font-weight: 600;
      }

      /* RTL specific styles */

      blockquote[dir="rtl"] {
        border-left: none;
        border-right: 2px solid var(--lumo-contrast-30pct);
      }

    </style>
  </template>
</dom-module>`,document.head.appendChild(rl.content);const nl=typeof window<"u"&&window.customElements!=null&&window.customElements.polyfillWrapFlushCallback!==void 0,Qo=(i,t,e=null)=>{for(;t!==e;){const r=t.nextSibling;i.removeChild(t),t=r}},Fe=`{{lit-${String(Math.random()).slice(2)}}}`,Wd=`<!--${Fe}-->`,sl=new RegExp(`${Fe}|${Wd}`),ur="$lit$";class Gd{constructor(t,e){this.parts=[],this.element=e;const r=[],n=[],s=document.createTreeWalker(e.content,133,null,!1);let o=0,a=-1,l=0;const{strings:d,values:{length:h}}=t;for(;l<h;){const c=s.nextNode();if(c!==null){if(a++,c.nodeType===1){if(c.hasAttributes()){const m=c.attributes,{length:p}=m;let g=0;for(let f=0;f<p;f++)ol(m[f].name,ur)&&g++;for(;g-- >0;){const f=d[l],b=ao.exec(f)[2],y=b.toLowerCase()+ur,v=c.getAttribute(y);c.removeAttribute(y);const S=v.split(sl);this.parts.push({type:"attribute",index:a,name:b,strings:S}),l+=S.length-1}}c.tagName==="TEMPLATE"&&(n.push(c),s.currentNode=c.content)}else if(c.nodeType===3){const m=c.data;if(m.indexOf(Fe)>=0){const p=c.parentNode,g=m.split(sl),f=g.length-1;for(let b=0;b<f;b++){let y,v=g[b];if(v==="")y=ei();else{const S=ao.exec(v);S!==null&&ol(S[2],ur)&&(v=v.slice(0,S.index)+S[1]+S[2].slice(0,-ur.length)+S[3]),y=document.createTextNode(v)}p.insertBefore(y,c),this.parts.push({type:"node",index:++a})}g[f]===""?(p.insertBefore(ei(),c),r.push(c)):c.data=g[f],l+=f}}else if(c.nodeType===8)if(c.data===Fe){const m=c.parentNode;c.previousSibling!==null&&a!==o||(a++,m.insertBefore(ei(),c)),o=a,this.parts.push({type:"node",index:a}),c.nextSibling===null?c.data="":(r.push(c),a--),l++}else{let m=-1;for(;(m=c.data.indexOf(Fe,m+1))!==-1;)this.parts.push({type:"node",index:-1}),l++}}else s.currentNode=n.pop()}for(const c of r)c.parentNode.removeChild(c)}}const ol=(i,t)=>{const e=i.length-t.length;return e>=0&&i.slice(e)===t},qd=i=>i.index!==-1,ei=()=>document.createComment(""),ao=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/,ta=133;function Yd(i,t){const{element:{content:e},parts:r}=i,n=document.createTreeWalker(e,ta,null,!1);let s=Sr(r),o=r[s],a=-1,l=0;const d=[];let h=null;for(;n.nextNode();){a++;const c=n.currentNode;for(c.previousSibling===h&&(h=null),t.has(c)&&(d.push(c),h===null&&(h=c)),h!==null&&l++;o!==void 0&&o.index===a;)o.index=h!==null?-1:o.index-l,s=Sr(r,s),o=r[s]}d.forEach(c=>c.parentNode.removeChild(c))}const of=i=>{let t=i.nodeType===11?0:1;const e=document.createTreeWalker(i,ta,null,!1);for(;e.nextNode();)t++;return t},Sr=(i,t=-1)=>{for(let e=t+1;e<i.length;e++){const r=i[e];if(qd(r))return e}return-1};function af(i,t,e=null){const{element:{content:r},parts:n}=i;if(e==null)return void r.appendChild(t);const s=document.createTreeWalker(r,ta,null,!1);let o=Sr(n),a=0,l=-1;for(;s.nextNode();)for(l++,s.currentNode===e&&(a=of(t),e.parentNode.insertBefore(t,e));o!==-1&&n[o].index===l;){if(a>0){for(;o!==-1;)n[o].index+=a,o=Sr(n,o);return}o=Sr(n,o)}}const lf=new WeakMap,df=i=>typeof i=="function"&&lf.has(i),al={},ll={};class lo{constructor(t,e,r){this.__parts=[],this.template=t,this.processor=e,this.options=r}update(t){let e=0;for(const r of this.__parts)r!==void 0&&r.setValue(t[e]),e++;for(const r of this.__parts)r!==void 0&&r.commit()}_clone(){const t=nl?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),e=[],r=this.template.parts,n=document.createTreeWalker(t,133,null,!1);let s,o=0,a=0,l=n.nextNode();for(;o<r.length;)if(s=r[o],qd(s)){for(;a<s.index;)a++,l.nodeName==="TEMPLATE"&&(e.push(l),n.currentNode=l.content),(l=n.nextNode())===null&&(n.currentNode=e.pop(),l=n.nextNode());if(s.type==="node"){const d=this.processor.handleTextExpression(this.options);d.insertAfterNode(l.previousSibling),this.__parts.push(d)}else this.__parts.push(...this.processor.handleAttributeExpressions(l,s.name,s.strings,this.options));o++}else this.__parts.push(void 0),o++;return nl&&(document.adoptNode(t),customElements.upgrade(t)),t}}const dl=window.trustedTypes&&trustedTypes.createPolicy("lit-html",{createHTML:i=>i}),hf=` ${Fe} `;class cf{constructor(t,e,r,n){this.strings=t,this.values=e,this.type=r,this.processor=n}getHTML(){const t=this.strings.length-1;let e="",r=!1;for(let n=0;n<t;n++){const s=this.strings[n],o=s.lastIndexOf("<!--");r=(o>-1||r)&&s.indexOf("-->",o+1)===-1;const a=ao.exec(s);e+=a===null?s+(r?hf:Wd):s.substr(0,a.index)+a[1]+a[2]+ur+a[3]+Fe}return e+=this.strings[t],e}getTemplateElement(){const t=document.createElement("template");let e=this.getHTML();return dl!==void 0&&(e=dl.createHTML(e)),t.innerHTML=e,t}}const uf=i=>i===null||!(typeof i=="object"||typeof i=="function"),pf=i=>Array.isArray(i)||!(!i||!i[Symbol.iterator]);class ea{constructor(t){this.value=void 0,this.__pendingValue=void 0,this.options=t}appendInto(t){this.startNode=t.appendChild(ei()),this.endNode=t.appendChild(ei())}insertAfterNode(t){this.startNode=t,this.endNode=t.nextSibling}appendIntoPart(t){t.__insert(this.startNode=ei()),t.__insert(this.endNode=ei())}insertAfterPart(t){t.__insert(this.startNode=ei()),this.endNode=t.endNode,t.endNode=this.startNode}setValue(t){this.__pendingValue=t}commit(){if(this.startNode.parentNode===null)return;for(;df(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=al,e(this)}const t=this.__pendingValue;t!==al&&(uf(t)?t!==this.value&&this.__commitText(t):t instanceof cf?this.__commitTemplateResult(t):t instanceof Node?this.__commitNode(t):pf(t)?this.__commitIterable(t):t===ll?(this.value=ll,this.clear()):this.__commitText(t))}__insert(t){this.endNode.parentNode.insertBefore(t,this.endNode)}__commitNode(t){this.value!==t&&(this.clear(),this.__insert(t),this.value=t)}__commitText(t){const e=this.startNode.nextSibling,r=typeof(t=t??"")=="string"?t:String(t);e===this.endNode.previousSibling&&e.nodeType===3?e.data=r:this.__commitNode(document.createTextNode(r)),this.value=t}__commitTemplateResult(t){const e=this.options.templateFactory(t);if(this.value instanceof lo&&this.value.template===e)this.value.update(t.values);else{const r=new lo(e,t.processor,this.options),n=r._clone();r.update(t.values),this.__commitNode(n),this.value=r}}__commitIterable(t){Array.isArray(this.value)||(this.value=[],this.clear());const e=this.value;let r,n=0;for(const s of t)r=e[n],r===void 0&&(r=new ea(this.options),e.push(r),n===0?r.appendIntoPart(this):r.insertAfterPart(e[n-1])),r.setValue(s),r.commit(),n++;n<e.length&&(e.length=n,this.clear(r&&r.endNode))}clear(t=this.startNode){Qo(this.startNode.parentNode,t.nextSibling,this.endNode)}}let ff=!1;function mf(i){let t=Lr.get(i.type);t===void 0&&(t={stringsArray:new WeakMap,keyString:new Map},Lr.set(i.type,t));let e=t.stringsArray.get(i.strings);if(e!==void 0)return e;const r=i.strings.join(Fe);return e=t.keyString.get(r),e===void 0&&(e=new Gd(i,i.getTemplateElement()),t.keyString.set(r,e)),t.stringsArray.set(i.strings,e),e}(()=>{try{const i={get capture(){return ff=!0,!1}};window.addEventListener("test",i,i),window.removeEventListener("test",i,i)}catch{}})();const Lr=new Map,Ni=new WeakMap,_f=(i,t,e)=>{let r=Ni.get(t);r===void 0&&(Qo(t,t.firstChild),Ni.set(t,r=new ea(Object.assign({templateFactory:mf},e))),r.appendInto(t)),r.setValue(i),r.commit()};typeof window<"u"&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.4.1");const Zd=(i,t)=>`${i}--${t}`;let Hn=!0;window.ShadyCSS===void 0?Hn=!1:window.ShadyCSS.prepareTemplateDom===void 0&&(console.warn("Incompatible ShadyCSS version detected. Please update to at least @webcomponents/webcomponentsjs@2.0.2 and @webcomponents/shadycss@1.3.1."),Hn=!1);const gf=i=>t=>{const e=Zd(t.type,i);let r=Lr.get(e);r===void 0&&(r={stringsArray:new WeakMap,keyString:new Map},Lr.set(e,r));let n=r.stringsArray.get(t.strings);if(n!==void 0)return n;const s=t.strings.join(Fe);if(n=r.keyString.get(s),n===void 0){const o=t.getTemplateElement();Hn&&window.ShadyCSS.prepareTemplateDom(o,i),n=new Gd(t,o),r.keyString.set(s,n)}return r.stringsArray.set(t.strings,n),n},yf=["html","svg"],bf=i=>{yf.forEach(t=>{const e=Lr.get(Zd(t,i));e!==void 0&&e.keyString.forEach(r=>{const{element:{content:n}}=r,s=new Set;Array.from(n.querySelectorAll("style")).forEach(o=>{s.add(o)}),Yd(r,s)})})},Xd=new Set,vf=(i,t,e)=>{Xd.add(i);const r=e?e.element:document.createElement("template"),n=t.querySelectorAll("style"),{length:s}=n;if(s===0)return void window.ShadyCSS.prepareTemplateStyles(r,i);const o=document.createElement("style");for(let d=0;d<s;d++){const h=n[d];h.parentNode.removeChild(h),o.textContent+=h.textContent}bf(i);const a=r.content;e?af(e,o,a.firstChild):a.insertBefore(o,a.firstChild),window.ShadyCSS.prepareTemplateStyles(r,i);const l=a.querySelector("style");if(window.ShadyCSS.nativeShadow&&l!==null)t.insertBefore(l.cloneNode(!0),t.firstChild);else if(e){a.insertBefore(o,a.firstChild);const d=new Set;d.add(o),Yd(e,d)}},wf=(i,t,e)=>{if(!e||typeof e!="object"||!e.scopeName)throw new Error("The `scopeName` option is required.");const r=e.scopeName,n=Ni.has(t),s=Hn&&t.nodeType===11&&!!t.host,o=s&&!Xd.has(r),a=o?document.createDocumentFragment():t;if(_f(i,a,Object.assign({templateFactory:gf(r)},e)),o){const l=Ni.get(a);Ni.delete(a);const d=l.value instanceof lo?l.value.template:void 0;vf(r,a,d),Qo(t,t.firstChild),t.appendChild(a),Ni.set(t,l)}!n&&s&&window.ShadyCSS.styleElement(t.host)};window.JSCompiler_renameProperty=(i,t)=>i;const ho={toAttribute(i,t){switch(t){case Boolean:return i?"":null;case Object:case Array:return i==null?i:JSON.stringify(i)}return i},fromAttribute(i,t){switch(t){case Boolean:return i!==null;case Number:return i===null?null:Number(i);case Object:case Array:return JSON.parse(i)}return i}},Jd=(i,t)=>t!==i&&(t==t||i==i),Ss={attribute:!0,type:String,converter:ho,reflect:!1,hasChanged:Jd},xs=1,Es=4,Is=8,Ts=16,co="finalized";class Kd extends HTMLElement{constructor(){super(),this.initialize()}static get observedAttributes(){this.finalize();const t=[];return this._classProperties.forEach((e,r)=>{const n=this._attributeNameForProperty(r,e);n!==void 0&&(this._attributeToPropertyMap.set(n,r),t.push(n))}),t}static _ensureClassProperties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_classProperties",this))){this._classProperties=new Map;const t=Object.getPrototypeOf(this)._classProperties;t!==void 0&&t.forEach((e,r)=>this._classProperties.set(r,e))}}static createProperty(t,e=Ss){if(this._ensureClassProperties(),this._classProperties.set(t,e),e.noAccessor||this.prototype.hasOwnProperty(t))return;const r=typeof t=="symbol"?Symbol():`__${t}`,n=this.getPropertyDescriptor(t,r,e);n!==void 0&&Object.defineProperty(this.prototype,t,n)}static getPropertyDescriptor(t,e,r){return{get(){return this[e]},set(n){const s=this[t];this[e]=n,this.requestUpdateInternal(t,s,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this._classProperties&&this._classProperties.get(t)||Ss}static finalize(){const t=Object.getPrototypeOf(this);if(t.hasOwnProperty(co)||t.finalize(),this[co]=!0,this._ensureClassProperties(),this._attributeToPropertyMap=new Map,this.hasOwnProperty(JSCompiler_renameProperty("properties",this))){const e=this.properties,r=[...Object.getOwnPropertyNames(e),...typeof Object.getOwnPropertySymbols=="function"?Object.getOwnPropertySymbols(e):[]];for(const n of r)this.createProperty(n,e[n])}}static _attributeNameForProperty(t,e){const r=e.attribute;return r===!1?void 0:typeof r=="string"?r:typeof t=="string"?t.toLowerCase():void 0}static _valueHasChanged(t,e,r=Jd){return r(t,e)}static _propertyValueFromAttribute(t,e){const r=e.type,n=e.converter||ho,s=typeof n=="function"?n:n.fromAttribute;return s?s(t,r):t}static _propertyValueToAttribute(t,e){if(e.reflect===void 0)return;const r=e.type,n=e.converter;return(n&&n.toAttribute||ho.toAttribute)(t,r)}initialize(){this._updateState=0,this._updatePromise=new Promise(t=>this._enableUpdatingResolver=t),this._changedProperties=new Map,this._saveInstanceProperties(),this.requestUpdateInternal()}_saveInstanceProperties(){this.constructor._classProperties.forEach((t,e)=>{if(this.hasOwnProperty(e)){const r=this[e];delete this[e],this._instanceProperties||(this._instanceProperties=new Map),this._instanceProperties.set(e,r)}})}_applyInstanceProperties(){this._instanceProperties.forEach((t,e)=>this[e]=t),this._instanceProperties=void 0}connectedCallback(){this.enableUpdating()}enableUpdating(){this._enableUpdatingResolver!==void 0&&(this._enableUpdatingResolver(),this._enableUpdatingResolver=void 0)}disconnectedCallback(){}attributeChangedCallback(t,e,r){e!==r&&this._attributeToProperty(t,r)}_propertyToAttribute(t,e,r=Ss){const n=this.constructor,s=n._attributeNameForProperty(t,r);if(s!==void 0){const o=n._propertyValueToAttribute(e,r);if(o===void 0)return;this._updateState=this._updateState|Is,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._updateState=this._updateState&~Is}}_attributeToProperty(t,e){if(this._updateState&Is)return;const r=this.constructor,n=r._attributeToPropertyMap.get(t);if(n!==void 0){const s=r.getPropertyOptions(n);this._updateState=this._updateState|Ts,this[n]=r._propertyValueFromAttribute(e,s),this._updateState=this._updateState&~Ts}}requestUpdateInternal(t,e,r){let n=!0;if(t!==void 0){const s=this.constructor;r=r||s.getPropertyOptions(t),s._valueHasChanged(this[t],e,r.hasChanged)?(this._changedProperties.has(t)||this._changedProperties.set(t,e),r.reflect!==!0||this._updateState&Ts||(this._reflectingProperties===void 0&&(this._reflectingProperties=new Map),this._reflectingProperties.set(t,r))):n=!1}!this._hasRequestedUpdate&&n&&(this._updatePromise=this._enqueueUpdate())}requestUpdate(t,e){return this.requestUpdateInternal(t,e),this.updateComplete}async _enqueueUpdate(){this._updateState=this._updateState|Es;try{await this._updatePromise}catch{}const t=this.performUpdate();return t!=null&&await t,!this._hasRequestedUpdate}get _hasRequestedUpdate(){return this._updateState&Es}get hasUpdated(){return this._updateState&xs}performUpdate(){if(!this._hasRequestedUpdate)return;this._instanceProperties&&this._applyInstanceProperties();let t=!1;const e=this._changedProperties;try{t=this.shouldUpdate(e),t?this.update(e):this._markUpdated()}catch(r){throw t=!1,this._markUpdated(),r}t&&(this._updateState&xs||(this._updateState=this._updateState|xs,this.firstUpdated(e)),this.updated(e))}_markUpdated(){this._changedProperties=new Map,this._updateState=this._updateState&~Es}get updateComplete(){return this._getUpdateComplete()}_getUpdateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._updatePromise}shouldUpdate(t){return!0}update(t){this._reflectingProperties!==void 0&&this._reflectingProperties.size>0&&(this._reflectingProperties.forEach((e,r)=>this._propertyToAttribute(r,this[r],e)),this._reflectingProperties=void 0),this._markUpdated()}updated(t){}firstUpdated(t){}}Kd[co]=!0;const uo=window.ShadowRoot&&(window.ShadyCSS===void 0||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,ia=Symbol();class os{constructor(t,e){if(e!==ia)throw new Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t}get styleSheet(){return this._styleSheet===void 0&&(uo?(this._styleSheet=new CSSStyleSheet,this._styleSheet.replaceSync(this.cssText)):this._styleSheet=null),this._styleSheet}toString(){return this.cssText}}const Cf=i=>new os(String(i),ia),Af=i=>{if(i instanceof os)return i.cssText;if(typeof i=="number")return i;throw new Error(`Value passed to 'css' function must be a 'css' function result: ${i}. Use 'unsafeCSS' to pass non-literal values, but
            take care to ensure page security.`)},$r=(i,...t)=>{const e=t.reduce((r,n,s)=>r+Af(n)+i[s+1],i[0]);return new os(e,ia)};(window.litElementVersions||(window.litElementVersions=[])).push("2.5.1");const hl={};class Ps extends Kd{static getStyles(){return this.styles}static _getUniqueStyles(){if(this.hasOwnProperty(JSCompiler_renameProperty("_styles",this)))return;const t=this.getStyles();if(Array.isArray(t)){const e=(s,o)=>s.reduceRight((a,l)=>Array.isArray(l)?e(l,a):(a.add(l),a),o),r=e(t,new Set),n=[];r.forEach(s=>n.unshift(s)),this._styles=n}else this._styles=t===void 0?[]:[t];this._styles=this._styles.map(e=>{if(e instanceof CSSStyleSheet&&!uo){const r=Array.prototype.slice.call(e.cssRules).reduce((n,s)=>n+s.cssText,"");return Cf(r)}return e})}initialize(){super.initialize(),this.constructor._getUniqueStyles(),this.renderRoot=this.createRenderRoot(),window.ShadowRoot&&this.renderRoot instanceof window.ShadowRoot&&this.adoptStyles()}createRenderRoot(){return this.attachShadow(this.constructor.shadowRootOptions)}adoptStyles(){const t=this.constructor._styles;t.length!==0&&(window.ShadyCSS===void 0||window.ShadyCSS.nativeShadow?uo?this.renderRoot.adoptedStyleSheets=t.map(e=>e instanceof CSSStyleSheet?e:e.styleSheet):this._needsShimAdoptedStyleSheets=!0:window.ShadyCSS.ScopingShim.prepareAdoptedCssText(t.map(e=>e.cssText),this.localName))}connectedCallback(){super.connectedCallback(),this.hasUpdated&&window.ShadyCSS!==void 0&&window.ShadyCSS.styleElement(this)}update(t){const e=this.render();super.update(t),e!==hl&&this.constructor.render(e,this.renderRoot,{scopeName:this.localName,eventContext:this}),this._needsShimAdoptedStyleSheets&&(this._needsShimAdoptedStyleSheets=!1,this.constructor._styles.forEach(r=>{const n=document.createElement("style");n.textContent=r.cssText,this.renderRoot.appendChild(n)}))}render(){return hl}}Ps.finalized=!0,Ps.render=wf,Ps.shadowRootOptions={mode:"open"};let cl=0;const Os={},Br=(i,t,e)=>{const r=e&&e.moduleId||"custom-style-module-"+cl++;Array.isArray(t)||(t=t?[t]:[]),t.forEach(o=>{if(!(o instanceof os))throw new Error("An item in styles is not of type CSSResult. Use `unsafeCSS` or `css`.");if(!Os[o]){const a=document.createElement("dom-module");a.innerHTML=`
        <template>
          <style>${o.toString()}</style>
        </template>
      `;const l="custom-style-module-"+cl++;a.register(l),Os[o]=l}});const n=document.createElement("dom-module");if(i){const o=window.customElements&&window.customElements.get(i);o&&o.hasOwnProperty("__finalized")&&console.warn(`The custom element definition for "${i}"
      was finalized before a style module was registered.
      Make sure to add component specific style modules before
      importing the corresponding custom element.`),n.setAttribute("theme-for",i)}const s=e&&e.include||[];n.innerHTML=`
    <template>
      ${s.map(o=>`<style include=${o}></style>`)}
      ${t.map(o=>`<style include=${Os[o]}></style>`)}
    </template>
  `,n.register(r)};Br("vaadin-checkbox",$r`
    :host {
      -webkit-tap-highlight-color: transparent;
      -webkit-user-select: none;
      -moz-user-select: none;
      user-select: none;
      cursor: default;
      outline: none;
    }

    [part='label']:not([empty]) {
      margin: 0.1875em 0.875em 0.1875em 0.375em;
    }

    [part='checkbox'] {
      width: calc(1em + 2px);
      height: calc(1em + 2px);
      margin: 0.1875em;
      position: relative;
      border-radius: var(--lumo-border-radius-s);
      background-color: var(--lumo-contrast-20pct);
      transition: transform 0.2s cubic-bezier(0.12, 0.32, 0.54, 2), background-color 0.15s;
      pointer-events: none;
      line-height: 1.2;
    }

    :host([indeterminate]) [part='checkbox'],
    :host([checked]) [part='checkbox'] {
      background-color: var(--lumo-primary-color);
    }

    /* Needed to align the checkbox nicely on the baseline */
    [part='checkbox']::before {
      content: '\\2003';
    }

    /* Checkmark */
    [part='checkbox']::after {
      content: '';
      display: inline-block;
      width: 0;
      height: 0;
      border: 0 solid var(--lumo-primary-contrast-color);
      border-width: 0.1875em 0 0 0.1875em;
      box-sizing: border-box;
      transform-origin: 0 0;
      position: absolute;
      top: 0.8125em;
      left: 0.5em;
      transform: scale(0.55) rotate(-135deg);
      opacity: 0;
    }

    :host([checked]) [part='checkbox']::after {
      opacity: 1;
      width: 0.625em;
      height: 1.0625em;
    }

    /* Indeterminate checkmark */
    :host([indeterminate]) [part='checkbox']::after {
      transform: none;
      opacity: 1;
      top: 45%;
      height: 10%;
      left: 22%;
      right: 22%;
      width: auto;
      border: 0;
      background-color: var(--lumo-primary-contrast-color);
      transition: opacity 0.25s;
    }

    /* Focus ring */
    :host([focus-ring]) [part='checkbox'] {
      box-shadow: 0 0 0 3px var(--lumo-primary-color-50pct);
    }

    /* Disabled */
    :host([disabled]) {
      pointer-events: none;
      color: var(--lumo-disabled-text-color);
    }

    :host([disabled]) [part='label'] ::slotted(*) {
      color: inherit;
    }

    :host([disabled]) [part='checkbox'] {
      background-color: var(--lumo-contrast-10pct);
    }

    :host([disabled]) [part='checkbox']::after {
      border-color: var(--lumo-contrast-30pct);
    }

    :host([indeterminate][disabled]) [part='checkbox']::after {
      background-color: var(--lumo-contrast-30pct);
    }

    /* RTL specific styles */
    :host([dir='rtl']) [part='label']:not([empty]) {
      margin: 0.1875em 0.375em 0.1875em 0.875em;
    }

    /* Transition the checkmark if activated with the mouse (disabled for grid select-all this way) */
    :host(:hover) [part='checkbox']::after {
      transition: width 0.1s, height 0.25s;
    }

    /* Used for activation "halo" */
    [part='checkbox']::before {
      color: transparent;
      display: inline-block;
      width: 100%;
      height: 100%;
      border-radius: inherit;
      background-color: inherit;
      transform: scale(1.4);
      opacity: 0;
      transition: transform 0.1s, opacity 0.8s;
    }

    /* Hover */
    :host(:not([checked]):not([indeterminate]):not([disabled]):hover) [part='checkbox'] {
      background-color: var(--lumo-contrast-30pct);
    }

    /* Disable hover for touch devices */
    @media (pointer: coarse) {
      :host(:not([checked]):not([indeterminate]):not([disabled]):hover) [part='checkbox'] {
        background-color: var(--lumo-contrast-20pct);
      }
    }

    /* Active */
    :host([active]) [part='checkbox'] {
      transform: scale(0.9);
      transition-duration: 0.05s;
    }

    :host([active][checked]) [part='checkbox'] {
      transform: scale(1.1);
    }

    :host([active]:not([checked])) [part='checkbox']::before {
      transition-duration: 0.01s, 0.01s;
      transform: scale(0);
      opacity: 0.4;
    }
  `,{moduleId:"lumo-checkbox"});let Sf=0;const pe=function(i){let t=i.__mixinApplications;t||(t=new WeakMap,i.__mixinApplications=t);let e=Sf++;function r(n){let s=n.__mixinSet;if(s&&s[e])return n;let o=t,a=o.get(n);if(!a){a=i(n),o.set(n,a);let l=Object.create(a.__mixinSet||s||null);l[e]=!0,a.__mixinSet=l}return a}return r},it=window.ShadyDOM&&window.ShadyDOM.noPatch&&window.ShadyDOM.wrap?window.ShadyDOM.wrap:window.ShadyDOM?i=>ShadyDOM.patch(i):i=>i;function po(i){return i.indexOf(".")>=0}function Ue(i){let t=i.indexOf(".");return t===-1?i:i.slice(0,t)}function Qd(i,t){return i.indexOf(t+".")===0}function Hr(i,t){return t.indexOf(i+".")===0}function jr(i,t,e){return t+e.slice(i.length)}function xf(i,t){return i===t||Qd(i,t)||Hr(i,t)}function pr(i){if(Array.isArray(i)){let t=[];for(let e=0;e<i.length;e++){let r=i[e].toString().split(".");for(let n=0;n<r.length;n++)t.push(r[n])}return t.join(".")}return i}function th(i){return Array.isArray(i)?pr(i).split("."):i.toString().split(".")}function Qt(i,t,e){let r=i,n=th(t);for(let s=0;s<n.length;s++){if(!r)return;r=r[n[s]]}return e&&(e.path=n.join(".")),r}function ul(i,t,e){let r=i,n=th(t),s=n[n.length-1];if(n.length>1){for(let o=0;o<n.length-1;o++)if(r=r[n[o]],!r)return;r[s]=e}else r[t]=e;return n.join(".")}const jn={},Ef=/-[a-z]/g,If=/([A-Z])/g;function eh(i){return jn[i]||(jn[i]=i.indexOf("-")<0?i:i.replace(Ef,t=>t[1].toUpperCase()))}function as(i){return jn[i]||(jn[i]=i.replace(If,"-$1").toLowerCase())}let Tf=0,ih=0,Bi=[],Pf=0,fo=!1,rh=document.createTextNode("");function Of(){fo=!1;const i=Bi.length;for(let t=0;t<i;t++){let e=Bi[t];if(e)try{e()}catch(r){setTimeout(()=>{throw r})}}Bi.splice(0,i),ih+=i}new window.MutationObserver(Of).observe(rh,{characterData:!0});const xe={after:i=>({run:t=>window.setTimeout(t,i),cancel(t){window.clearTimeout(t)}}),run:(i,t)=>window.setTimeout(i,t),cancel(i){window.clearTimeout(i)}},Me={run:i=>window.requestAnimationFrame(i),cancel(i){window.cancelAnimationFrame(i)}},nh={run:i=>window.requestIdleCallback?window.requestIdleCallback(i):window.setTimeout(i,16),cancel(i){window.cancelIdleCallback?window.cancelIdleCallback(i):window.clearTimeout(i)}},be={run:i=>(fo||(fo=!0,rh.textContent=Pf++),Bi.push(i),Tf++),cancel(i){const t=i-ih;if(t>=0){if(!Bi[t])throw new Error("invalid async handle: "+i);Bi[t]=null}}},kf=be,sh=pe(i=>{class t extends i{static createProperties(r){const n=this.prototype;for(let s in r)s in n||n._createPropertyAccessor(s)}static attributeNameForProperty(r){return r.toLowerCase()}static typeForProperty(r){}_createPropertyAccessor(r,n){this._addPropertyToAttributeMap(r),this.hasOwnProperty(JSCompiler_renameProperty("__dataHasAccessor",this))||(this.__dataHasAccessor=Object.assign({},this.__dataHasAccessor)),this.__dataHasAccessor[r]||(this.__dataHasAccessor[r]=!0,this._definePropertyAccessor(r,n))}_addPropertyToAttributeMap(r){this.hasOwnProperty(JSCompiler_renameProperty("__dataAttributes",this))||(this.__dataAttributes=Object.assign({},this.__dataAttributes));let n=this.__dataAttributes[r];return n||(n=this.constructor.attributeNameForProperty(r),this.__dataAttributes[n]=r),n}_definePropertyAccessor(r,n){Object.defineProperty(this,r,{get(){return this.__data[r]},set:n?function(){}:function(s){this._setPendingProperty(r,s,!0)&&this._invalidateProperties()}})}constructor(){super(),this.__dataEnabled=!1,this.__dataReady=!1,this.__dataInvalid=!1,this.__data={},this.__dataPending=null,this.__dataOld=null,this.__dataInstanceProps=null,this.__dataCounter=0,this.__serializing=!1,this._initializeProperties()}ready(){this.__dataReady=!0,this._flushProperties()}_initializeProperties(){for(let r in this.__dataHasAccessor)this.hasOwnProperty(r)&&(this.__dataInstanceProps=this.__dataInstanceProps||{},this.__dataInstanceProps[r]=this[r],delete this[r])}_initializeInstanceProperties(r){Object.assign(this,r)}_setProperty(r,n){this._setPendingProperty(r,n)&&this._invalidateProperties()}_getProperty(r){return this.__data[r]}_setPendingProperty(r,n,s){let o=this.__data[r],a=this._shouldPropertyChange(r,n,o);return a&&(this.__dataPending||(this.__dataPending={},this.__dataOld={}),this.__dataOld&&!(r in this.__dataOld)&&(this.__dataOld[r]=o),this.__data[r]=n,this.__dataPending[r]=n),a}_isPropertyPending(r){return!(!this.__dataPending||!this.__dataPending.hasOwnProperty(r))}_invalidateProperties(){!this.__dataInvalid&&this.__dataReady&&(this.__dataInvalid=!0,kf.run(()=>{this.__dataInvalid&&(this.__dataInvalid=!1,this._flushProperties())}))}_enableProperties(){this.__dataEnabled||(this.__dataEnabled=!0,this.__dataInstanceProps&&(this._initializeInstanceProperties(this.__dataInstanceProps),this.__dataInstanceProps=null),this.ready())}_flushProperties(){this.__dataCounter++;const r=this.__data,n=this.__dataPending,s=this.__dataOld;this._shouldPropertiesChange(r,n,s)&&(this.__dataPending=null,this.__dataOld=null,this._propertiesChanged(r,n,s)),this.__dataCounter--}_shouldPropertiesChange(r,n,s){return!!n}_propertiesChanged(r,n,s){}_shouldPropertyChange(r,n,s){return s!==n&&(s==s||n==n)}attributeChangedCallback(r,n,s,o){n!==s&&this._attributeToProperty(r,s),super.attributeChangedCallback&&super.attributeChangedCallback(r,n,s,o)}_attributeToProperty(r,n,s){if(!this.__serializing){const o=this.__dataAttributes,a=o&&o[r]||r;this[a]=this._deserializeValue(n,s||this.constructor.typeForProperty(a))}}_propertyToAttribute(r,n,s){this.__serializing=!0,s=arguments.length<3?this[r]:s,this._valueToNodeAttribute(this,s,n||this.constructor.attributeNameForProperty(r)),this.__serializing=!1}_valueToNodeAttribute(r,n,s){const o=this._serializeValue(n);s!=="class"&&s!=="name"&&s!=="slot"||(r=it(r)),o===void 0?r.removeAttribute(s):r.setAttribute(s,o)}_serializeValue(r){return typeof r=="boolean"?r?"":void 0:r?.toString()}_deserializeValue(r,n){switch(n){case Boolean:return r!==null;case Number:return Number(r);default:return r}}}return t}),oh={};let mn=HTMLElement.prototype;for(;mn;){let i=Object.getOwnPropertyNames(mn);for(let t=0;t<i.length;t++)oh[i[t]]=!0;mn=Object.getPrototypeOf(mn)}function Df(i,t){if(!oh[t]){let e=i[t];e!==void 0&&(i.__data?i._setPendingProperty(t,e):(i.__dataProto?i.hasOwnProperty(JSCompiler_renameProperty("__dataProto",i))||(i.__dataProto=Object.create(i.__dataProto)):i.__dataProto={},i.__dataProto[t]=e))}}const ah=pe(i=>{const t=sh(i);class e extends t{static createPropertiesForAttributes(){let n=this.observedAttributes;for(let s=0;s<n.length;s++)this.prototype._createPropertyAccessor(eh(n[s]))}static attributeNameForProperty(n){return as(n)}_initializeProperties(){this.__dataProto&&(this._initializeProtoProperties(this.__dataProto),this.__dataProto=null),super._initializeProperties()}_initializeProtoProperties(n){for(let s in n)this._setProperty(s,n[s])}_ensureAttribute(n,s){const o=this;o.hasAttribute(n)||this._valueToNodeAttribute(o,s,n)}_serializeValue(n){if(typeof n=="object"){if(n instanceof Date)return n.toString();if(n)try{return JSON.stringify(n)}catch{return""}}return super._serializeValue(n)}_deserializeValue(n,s){let o;switch(s){case Object:try{o=JSON.parse(n)}catch{o=n}break;case Array:try{o=JSON.parse(n)}catch{o=null,console.warn(`Polymer::Attributes: couldn't decode Array as JSON: ${n}`)}break;case Date:o=isNaN(n)?String(n):Number(n),o=new Date(o);break;default:o=super._deserializeValue(n,s)}return o}_definePropertyAccessor(n,s){Df(this,n),super._definePropertyAccessor(n,s)}_hasAccessor(n){return this.__dataHasAccessor&&this.__dataHasAccessor[n]}_isPropertyPending(n){return!!(this.__dataPending&&n in this.__dataPending)}}return e}),Rf={"dom-if":!0,"dom-repeat":!0};let pl=!1,fl=!1;function zf(){if(!pl){pl=!0;const i=document.createElement("textarea");i.placeholder="a",fl=i.placeholder===i.textContent}return fl}function Nf(i){zf()&&i.localName==="textarea"&&i.placeholder&&i.placeholder===i.textContent&&(i.textContent=null)}function Ff(i){let t=i.getAttribute("is");if(t&&Rf[t]){let e=i;for(e.removeAttribute("is"),i=e.ownerDocument.createElement(t),e.parentNode.replaceChild(i,e),i.appendChild(e);e.attributes.length;)i.setAttribute(e.attributes[0].name,e.attributes[0].value),e.removeAttribute(e.attributes[0].name)}return i}function lh(i,t){let e=t.parentInfo&&lh(i,t.parentInfo);if(!e)return i;for(let r=e.firstChild,n=0;r;r=r.nextSibling)if(t.parentIndex===n++)return r}function Mf(i,t,e,r){r.id&&(t[r.id]=e)}function Lf(i,t,e){if(e.events&&e.events.length)for(let r,n=0,s=e.events;n<s.length&&(r=s[n]);n++)i._addMethodEventListenerToNode(t,r.name,r.value,i)}function $f(i,t,e,r){e.templateInfo&&(t._templateInfo=e.templateInfo,t._parentTemplateInfo=r)}function Bf(i,t,e){return i=i._methodHost||i,function(r){i[e]?i[e](r,r.detail):console.warn("listener method `"+e+"` not defined")}}const Hf=pe(i=>{class t extends i{static _parseTemplate(r,n){if(!r._templateInfo){let s=r._templateInfo={};s.nodeInfoList=[],s.nestedTemplate=!!n,s.stripWhiteSpace=n&&n.stripWhiteSpace||r.hasAttribute("strip-whitespace"),this._parseTemplateContent(r,s,{parent:null})}return r._templateInfo}static _parseTemplateContent(r,n,s){return this._parseTemplateNode(r.content,n,s)}static _parseTemplateNode(r,n,s){let o=!1,a=r;return a.localName!="template"||a.hasAttribute("preserve-content")?a.localName==="slot"&&(n.hasInsertionPoint=!0):o=this._parseTemplateNestedTemplate(a,n,s)||o,Nf(a),a.firstChild&&this._parseTemplateChildNodes(a,n,s),a.hasAttributes&&a.hasAttributes()&&(o=this._parseTemplateNodeAttributes(a,n,s)||o),o||s.noted}static _parseTemplateChildNodes(r,n,s){if(r.localName!=="script"&&r.localName!=="style")for(let o,a=r.firstChild,l=0;a;a=o){if(a.localName=="template"&&(a=Ff(a)),o=a.nextSibling,a.nodeType===Node.TEXT_NODE){let h=o;for(;h&&h.nodeType===Node.TEXT_NODE;)a.textContent+=h.textContent,o=h.nextSibling,r.removeChild(h),h=o;if(n.stripWhiteSpace&&!a.textContent.trim()){r.removeChild(a);continue}}let d={parentIndex:l,parentInfo:s};this._parseTemplateNode(a,n,d)&&(d.infoIndex=n.nodeInfoList.push(d)-1),a.parentNode&&l++}}static _parseTemplateNestedTemplate(r,n,s){let o=r,a=this._parseTemplate(o,n);return(a.content=o.content.ownerDocument.createDocumentFragment()).appendChild(o.content),s.templateInfo=a,!0}static _parseTemplateNodeAttributes(r,n,s){let o=!1,a=Array.from(r.attributes);for(let l,d=a.length-1;l=a[d];d--)o=this._parseTemplateNodeAttribute(r,n,s,l.name,l.value)||o;return o}static _parseTemplateNodeAttribute(r,n,s,o,a){return o.slice(0,3)==="on-"?(r.removeAttribute(o),s.events=s.events||[],s.events.push({name:o.slice(3),value:a}),!0):o==="id"&&(s.id=a,!0)}static _contentForTemplate(r){let n=r._templateInfo;return n&&n.content||r.content}_stampTemplate(r,n){r&&!r.content&&window.HTMLTemplateElement&&HTMLTemplateElement.decorate&&HTMLTemplateElement.decorate(r);let s=(n=n||this.constructor._parseTemplate(r)).nodeInfoList,o=n.content||r.content,a=document.importNode(o,!0);a.__noInsertionPoint=!n.hasInsertionPoint;let l=a.nodeList=new Array(s.length);a.$={};for(let d,h=0,c=s.length;h<c&&(d=s[h]);h++){let m=l[h]=lh(a,d);Mf(this,a.$,m,d),$f(this,m,d,n),Lf(this,m,d)}return a}_addMethodEventListenerToNode(r,n,s,o){let a=Bf(o=o||r,n,s);return this._addEventListenerToNode(r,n,a),a}_addEventListenerToNode(r,n,s){r.addEventListener(n,s)}_removeEventListenerFromNode(r,n,s){r.removeEventListener(n,s)}}return t});let Ur=0;const Vr=[],yt={COMPUTE:"__computeEffects",REFLECT:"__reflectEffects",NOTIFY:"__notifyEffects",PROPAGATE:"__propagateEffects",OBSERVE:"__observeEffects",READ_ONLY:"__readOnly"},dh="__computeInfo",jf=/[A-Z]/;function ks(i,t,e){let r=i[t];if(r){if(!i.hasOwnProperty(t)&&(r=i[t]=Object.create(i[t]),e))for(let n in r){let s=r[n],o=r[n]=Array(s.length);for(let a=0;a<s.length;a++)o[a]=s[a]}}else r=i[t]={};return r}function fr(i,t,e,r,n,s){if(t){let o=!1;const a=Ur++;for(let l in e){let d=t[n?Ue(l):l];if(d)for(let h,c=0,m=d.length;c<m&&(h=d[c]);c++)h.info&&h.info.lastRun===a||n&&!ra(l,h.trigger)||(h.info&&(h.info.lastRun=a),h.fn(i,l,e,r,h.info,n,s),o=!0)}return o}return!1}function Uf(i,t,e,r,n,s,o,a){let l=!1,d=t[o?Ue(r):r];if(d)for(let h,c=0,m=d.length;c<m&&(h=d[c]);c++)h.info&&h.info.lastRun===e||o&&!ra(r,h.trigger)||(h.info&&(h.info.lastRun=e),h.fn(i,r,n,s,h.info,o,a),l=!0);return l}function ra(i,t){if(t){let e=t.name;return e==i||!(!t.structured||!Qd(e,i))||!(!t.wildcard||!Hr(e,i))}return!0}function ml(i,t,e,r,n){let s=typeof n.method=="string"?i[n.method]:n.method,o=n.property;s?s.call(i,i.__data[o],r[o]):n.dynamicFn||console.warn("observer method `"+n.method+"` not defined")}function Vf(i,t,e,r,n){let s,o,a=i[yt.NOTIFY],l=Ur++;for(let d in t)t[d]&&(a&&Uf(i,a,l,d,e,r,n)||n&&Wf(i,d,e))&&(s=!0);s&&(o=i.__dataHost)&&o._invalidateProperties&&o._invalidateProperties()}function Wf(i,t,e){let r=Ue(t);return r!==t?(hh(i,as(r)+"-changed",e[t],t),!0):!1}function hh(i,t,e,r){let n={value:e,queueProperty:!0};r&&(n.path=r),it(i).dispatchEvent(new CustomEvent(t,{detail:n}))}function Gf(i,t,e,r,n,s){let o=(s?Ue(t):t)!=t?t:null,a=o?Qt(i,o):i.__data[t];o&&a===void 0&&(a=e[t]),hh(i,n.eventName,a,o)}function qf(i,t,e,r,n){let s,o=i.detail,a=o&&o.path;a?(r=jr(e,r,a),s=o&&o.value):s=i.currentTarget[e],s=n?!s:s,t[yt.READ_ONLY]&&t[yt.READ_ONLY][r]||!t._setPendingPropertyOrPath(r,s,!0,!!a)||o&&o.queueProperty||t._invalidateProperties()}function Yf(i,t,e,r,n){let s=i.__data[t];Bn&&(s=Bn(s,n.attrName,"attribute",i)),i._propertyToAttribute(t,n.attrName,s)}function Zf(i,t,e,r){let n=i[yt.COMPUTE];if(n)if(Wp){Ur++;const s=Jf(i),o=[];for(let l in t)_l(l,n,o,s,r);let a;for(;a=o.shift();)ch(i,"",t,e,a)&&_l(a.methodInfo,n,o,s,r);Object.assign(e,i.__dataOld),Object.assign(t,i.__dataPending),i.__dataPending=null}else{let s=t;for(;fr(i,n,s,e,r);)Object.assign(e,i.__dataOld),Object.assign(t,i.__dataPending),s=i.__dataPending,i.__dataPending=null}}const Xf=(i,t,e)=>{let r=0,n=t.length-1,s=-1;for(;r<=n;){const o=r+n>>1,a=e.get(t[o].methodInfo)-e.get(i.methodInfo);if(a<0)r=o+1;else{if(!(a>0)){s=o;break}n=o-1}}s<0&&(s=n+1),t.splice(s,0,i)},_l=(i,t,e,r,n)=>{const s=t[n?Ue(i):i];if(s)for(let o=0;o<s.length;o++){const a=s[o];a.info.lastRun===Ur||n&&!ra(i,a.trigger)||(a.info.lastRun=Ur,Xf(a.info,e,r))}};function Jf(i){let t=i.constructor.__orderedComputedDeps;if(!t){t=new Map;const e=i[yt.COMPUTE];let r,{counts:n,ready:s,total:o}=Kf(i);for(;r=s.shift();){t.set(r,t.size);const a=e[r];a&&a.forEach(l=>{const d=l.info.methodInfo;--o,--n[d]==0&&s.push(d)})}o!==0&&console.warn(`Computed graph for ${i.localName} incomplete; circular?`),i.constructor.__orderedComputedDeps=t}return t}function Kf(i){const t=i[dh],e={},r=i[yt.COMPUTE],n=[];let s=0;for(let o in t){const a=t[o];s+=e[o]=a.args.filter(l=>!l.literal).length+(a.dynamicFn?1:0)}for(let o in r)t[o]||n.push(o);return{counts:e,ready:n,total:s}}function ch(i,t,e,r,n){let s=mo(i,t,e,r,n);if(s===Vr)return!1;let o=n.methodInfo;return i.__dataHasAccessor&&i.__dataHasAccessor[o]?i._setPendingProperty(o,s,!0):(i[o]=s,!1)}function Qf(i,t,e){let r=i.__dataLinkedPaths;if(r){let n;for(let s in r){let o=r[s];Hr(s,t)?(n=jr(s,o,t),i._setPendingPropertyOrPath(n,e,!0,!0)):Hr(o,t)&&(n=jr(o,s,t),i._setPendingPropertyOrPath(n,e,!0,!0))}}}function Ds(i,t,e,r,n,s,o){e.bindings=e.bindings||[];let a={kind:r,target:n,parts:s,literal:o,isCompound:s.length!==1};if(e.bindings.push(a),nm(a)){let{event:d,negate:h}=a.parts[0];a.listenerEvent=d||as(n)+"-changed",a.listenerNegate=h}let l=t.nodeInfoList.length;for(let d=0;d<a.parts.length;d++){let h=a.parts[d];h.compoundIndex=d,tm(i,t,a,h,l)}}function tm(i,t,e,r,n){if(!r.literal)if(e.kind==="attribute"&&e.target[0]==="-")console.warn("Cannot set attribute "+e.target+' because "-" is not a valid attribute starting character');else{let s=r.dependencies,o={index:n,binding:e,part:r,evaluator:i};for(let a=0;a<s.length;a++){let l=s[a];typeof l=="string"&&(l=ph(l),l.wildcard=!0),i._addTemplatePropertyEffect(t,l.rootProperty,{fn:em,info:o,trigger:l})}}}function em(i,t,e,r,n,s,o){let a=o[n.index],l=n.binding,d=n.part;if(s&&d.source&&t.length>d.source.length&&l.kind=="property"&&!l.isCompound&&a.__isPropertyEffectsClient&&a.__dataHasAccessor&&a.__dataHasAccessor[l.target]){let h=e[t];t=jr(d.source,l.target,t),a._setPendingPropertyOrPath(t,h,!1,!0)&&i._enqueueClient(a)}else{let h=n.evaluator._evaluateBinding(i,d,t,e,r,s);h!==Vr&&im(i,a,l,d,h)}}function im(i,t,e,r,n){if(n=rm(t,n,e,r),Bn&&(n=Bn(n,e.target,e.kind,t)),e.kind=="attribute")i._valueToNodeAttribute(t,n,e.target);else{let s=e.target;t.__isPropertyEffectsClient&&t.__dataHasAccessor&&t.__dataHasAccessor[s]?t[yt.READ_ONLY]&&t[yt.READ_ONLY][s]||t._setPendingProperty(s,n)&&i._enqueueClient(t):i._setUnmanagedPropertyToNode(t,s,n)}}function rm(i,t,e,r){if(e.isCompound){let n=i.__dataCompoundStorage[e.target];n[r.compoundIndex]=t,t=n.join("")}return e.kind!=="attribute"&&(e.target!=="textContent"&&(e.target!=="value"||i.localName!=="input"&&i.localName!=="textarea")||(t=t??"")),t}function nm(i){return!!i.target&&i.kind!="attribute"&&i.kind!="text"&&!i.isCompound&&i.parts[0].mode==="{"}function sm(i,t){let{nodeList:e,nodeInfoList:r}=t;if(r.length)for(let n=0;n<r.length;n++){let s=r[n],o=e[n],a=s.bindings;if(a)for(let l=0;l<a.length;l++){let d=a[l];om(o,d),am(o,i,d)}o.__dataHost=i}}function om(i,t){if(t.isCompound){let e=i.__dataCompoundStorage||(i.__dataCompoundStorage={}),r=t.parts,n=new Array(r.length);for(let o=0;o<r.length;o++)n[o]=r[o].literal;let s=t.target;e[s]=n,t.literal&&t.kind=="property"&&(s==="className"&&(i=it(i)),i[s]=t.literal)}}function am(i,t,e){if(e.listenerEvent){let r=e.parts[0];i.addEventListener(e.listenerEvent,function(n){qf(n,t,e.target,r.source,r.negate)})}}function gl(i,t,e,r,n,s){s=t.static||s&&(typeof s!="object"||s[t.methodName]);let o={methodName:t.methodName,args:t.args,methodInfo:n,dynamicFn:s};for(let a,l=0;l<t.args.length&&(a=t.args[l]);l++)a.literal||i._addPropertyEffect(a.rootProperty,e,{fn:r,info:o,trigger:a});return s&&i._addPropertyEffect(t.methodName,e,{fn:r,info:o}),o}function mo(i,t,e,r,n){let s=i._methodHost||i,o=s[n.methodName];if(o){let a=i._marshalArgs(n.args,t,e);return a===Vr?Vr:o.apply(s,a)}n.dynamicFn||console.warn("method `"+n.methodName+"` not defined")}const lm=[],uh="(?:[a-zA-Z_$][\\w.:$\\-*]*)",yl="(?:("+uh+`|(?:[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?)|(?:(?:'(?:[^'\\\\]|\\\\.)*')|(?:"(?:[^"\\\\]|\\\\.)*")))\\s*)`,bl=new RegExp("(\\[\\[|{{)\\s*(?:(!)\\s*)?"+("("+uh+"\\s*"+("(?:\\(\\s*(?:"+("(?:"+yl+"(?:,\\s*"+yl+")*)")+"?)\\)\\s*)")+"?)")+"(?:]]|}})","g");function vl(i){let t="";for(let e=0;e<i.length;e++)t+=i[e].literal||"";return t}function Rs(i){let t=i.match(/([^\s]+?)\(([\s\S]*)\)/);if(t){let e={methodName:t[1],static:!0,args:lm};return t[2].trim()?dm(t[2].replace(/\\,/g,"&comma;").split(","),e):e}return null}function dm(i,t){return t.args=i.map(function(e){let r=ph(e);return r.literal||(t.static=!1),r},this),t}function ph(i){let t=i.trim().replace(/&comma;/g,",").replace(/\\(.)/g,"$1"),e={name:t,value:"",literal:!1},r=t[0];switch(r==="-"&&(r=t[1]),r>="0"&&r<="9"&&(r="#"),r){case"'":case'"':e.value=t.slice(1,-1),e.literal=!0;break;case"#":e.value=Number(t),e.literal=!0}return e.literal||(e.rootProperty=Ue(t),e.structured=po(t),e.structured&&(e.wildcard=t.slice(-2)==".*",e.wildcard&&(e.name=t.slice(0,-2)))),e}function wl(i,t,e){let r=Qt(i,e);return r===void 0&&(r=t[e]),r}function fh(i,t,e,r){const n={indexSplices:r};so&&!i._overrideLegacyUndefined&&(t.splices=n),i.notifyPath(e+".splices",n),i.notifyPath(e+".length",t.length),so&&!i._overrideLegacyUndefined&&(n.indexSplices=[])}function ir(i,t,e,r,n,s){fh(i,t,e,[{index:r,addedCount:n,removed:s,object:t,type:"splice"}])}function hm(i){return i[0].toUpperCase()+i.substring(1)}const ls=pe(i=>{const t=Hf(ah(i));class e extends t{constructor(){super(),this.__isPropertyEffectsClient=!0,this.__dataClientsReady,this.__dataPendingClients,this.__dataToNotify,this.__dataLinkedPaths,this.__dataHasPaths,this.__dataCompoundStorage,this.__dataHost,this.__dataTemp,this.__dataClientsInitialized,this.__data,this.__dataPending,this.__dataOld,this.__computeEffects,this.__computeInfo,this.__reflectEffects,this.__notifyEffects,this.__propagateEffects,this.__observeEffects,this.__readOnly,this.__templateInfo,this._overrideLegacyUndefined}get PROPERTY_EFFECT_TYPES(){return yt}_initializeProperties(){super._initializeProperties(),this._registerHost(),this.__dataClientsReady=!1,this.__dataPendingClients=null,this.__dataToNotify=null,this.__dataLinkedPaths=null,this.__dataHasPaths=!1,this.__dataCompoundStorage=this.__dataCompoundStorage||null,this.__dataHost=this.__dataHost||null,this.__dataTemp={},this.__dataClientsInitialized=!1}_registerHost(){if(rr.length){let n=rr[rr.length-1];n._enqueueClient(this),this.__dataHost=n}}_initializeProtoProperties(n){this.__data=Object.create(n),this.__dataPending=Object.create(n),this.__dataOld={}}_initializeInstanceProperties(n){let s=this[yt.READ_ONLY];for(let o in n)s&&s[o]||(this.__dataPending=this.__dataPending||{},this.__dataOld=this.__dataOld||{},this.__data[o]=this.__dataPending[o]=n[o])}_addPropertyEffect(n,s,o){this._createPropertyAccessor(n,s==yt.READ_ONLY);let a=ks(this,s,!0)[n];a||(a=this[s][n]=[]),a.push(o)}_removePropertyEffect(n,s,o){let a=ks(this,s,!0)[n],l=a.indexOf(o);l>=0&&a.splice(l,1)}_hasPropertyEffect(n,s){let o=this[s];return!!(o&&o[n])}_hasReadOnlyEffect(n){return this._hasPropertyEffect(n,yt.READ_ONLY)}_hasNotifyEffect(n){return this._hasPropertyEffect(n,yt.NOTIFY)}_hasReflectEffect(n){return this._hasPropertyEffect(n,yt.REFLECT)}_hasComputedEffect(n){return this._hasPropertyEffect(n,yt.COMPUTE)}_setPendingPropertyOrPath(n,s,o,a){if(a||Ue(Array.isArray(n)?n[0]:n)!==n){if(!a){let l=Qt(this,n);if(!(n=ul(this,n,s))||!super._shouldPropertyChange(n,s,l))return!1}if(this.__dataHasPaths=!0,this._setPendingProperty(n,s,o))return Qf(this,n,s),!0}else{if(this.__dataHasAccessor&&this.__dataHasAccessor[n])return this._setPendingProperty(n,s,o);this[n]=s}return!1}_setUnmanagedPropertyToNode(n,s,o){o===n[s]&&typeof o!="object"||(s==="className"&&(n=it(n)),n[s]=o)}_setPendingProperty(n,s,o){let a=this.__dataHasPaths&&po(n),l=a?this.__dataTemp:this.__data;return!!this._shouldPropertyChange(n,s,l[n])&&(this.__dataPending||(this.__dataPending={},this.__dataOld={}),n in this.__dataOld||(this.__dataOld[n]=this.__data[n]),a?this.__dataTemp[n]=s:this.__data[n]=s,this.__dataPending[n]=s,(a||this[yt.NOTIFY]&&this[yt.NOTIFY][n])&&(this.__dataToNotify=this.__dataToNotify||{},this.__dataToNotify[n]=o),!0)}_setProperty(n,s){this._setPendingProperty(n,s,!0)&&this._invalidateProperties()}_invalidateProperties(){this.__dataReady&&this._flushProperties()}_enqueueClient(n){this.__dataPendingClients=this.__dataPendingClients||[],n!==this&&this.__dataPendingClients.push(n)}_flushClients(){this.__dataClientsReady?this.__enableOrFlushClients():(this.__dataClientsReady=!0,this._readyClients(),this.__dataReady=!0)}__enableOrFlushClients(){let n=this.__dataPendingClients;if(n){this.__dataPendingClients=null;for(let s=0;s<n.length;s++){let o=n[s];o.__dataEnabled?o.__dataPending&&o._flushProperties():o._enableProperties()}}}_readyClients(){this.__enableOrFlushClients()}setProperties(n,s){for(let o in n)!s&&this[yt.READ_ONLY]&&this[yt.READ_ONLY][o]||this._setPendingPropertyOrPath(o,n[o],!0);this._invalidateProperties()}ready(){this._flushProperties(),this.__dataClientsReady||this._flushClients(),this.__dataPending&&this._flushProperties()}_propertiesChanged(n,s,o){let a,l=this.__dataHasPaths;this.__dataHasPaths=!1,Zf(this,s,o,l),a=this.__dataToNotify,this.__dataToNotify=null,this._propagatePropertyChanges(s,o,l),this._flushClients(),fr(this,this[yt.REFLECT],s,o,l),fr(this,this[yt.OBSERVE],s,o,l),a&&Vf(this,a,s,o,l),this.__dataCounter==1&&(this.__dataTemp={})}_propagatePropertyChanges(n,s,o){this[yt.PROPAGATE]&&fr(this,this[yt.PROPAGATE],n,s,o),this.__templateInfo&&this._runEffectsForTemplate(this.__templateInfo,n,s,o)}_runEffectsForTemplate(n,s,o,a){const l=(d,h)=>{fr(this,n.propertyEffects,d,o,h,n.nodeList);for(let c=n.firstChild;c;c=c.nextSibling)this._runEffectsForTemplate(c,d,o,h)};n.runEffects?n.runEffects(l,s,a):l(s,a)}linkPaths(n,s){n=pr(n),s=pr(s),this.__dataLinkedPaths=this.__dataLinkedPaths||{},this.__dataLinkedPaths[n]=s}unlinkPaths(n){n=pr(n),this.__dataLinkedPaths&&delete this.__dataLinkedPaths[n]}notifySplices(n,s){let o={path:""};fh(this,Qt(this,n,o),o.path,s)}get(n,s){return Qt(s||this,n)}set(n,s,o){o?ul(o,n,s):this[yt.READ_ONLY]&&this[yt.READ_ONLY][n]||this._setPendingPropertyOrPath(n,s,!0)&&this._invalidateProperties()}push(n,...s){let o={path:""},a=Qt(this,n,o),l=a.length,d=a.push(...s);return s.length&&ir(this,a,o.path,l,s.length,[]),d}pop(n){let s={path:""},o=Qt(this,n,s),a=!!o.length,l=o.pop();return a&&ir(this,o,s.path,o.length,0,[l]),l}splice(n,s,o,...a){let l,d={path:""},h=Qt(this,n,d);return s<0?s=h.length-Math.floor(-s):s&&(s=Math.floor(s)),l=arguments.length===2?h.splice(s):h.splice(s,o,...a),(a.length||l.length)&&ir(this,h,d.path,s,a.length,l),l}shift(n){let s={path:""},o=Qt(this,n,s),a=!!o.length,l=o.shift();return a&&ir(this,o,s.path,0,0,[l]),l}unshift(n,...s){let o={path:""},a=Qt(this,n,o),l=a.unshift(...s);return s.length&&ir(this,a,o.path,0,s.length,[]),l}notifyPath(n,s){let o;if(arguments.length==1){let a={path:""};s=Qt(this,n,a),o=a.path}else o=Array.isArray(n)?pr(n):n;this._setPendingPropertyOrPath(o,s,!0,!0)&&this._invalidateProperties()}_createReadOnlyProperty(n,s){this._addPropertyEffect(n,yt.READ_ONLY),s&&(this["_set"+hm(n)]=function(o){this._setProperty(n,o)})}_createPropertyObserver(n,s,o){let a={property:n,method:s,dynamicFn:!!o};this._addPropertyEffect(n,yt.OBSERVE,{fn:ml,info:a,trigger:{name:n}}),o&&this._addPropertyEffect(s,yt.OBSERVE,{fn:ml,info:a,trigger:{name:s}})}_createMethodObserver(n,s){let o=Rs(n);if(!o)throw new Error("Malformed observer expression '"+n+"'");gl(this,o,yt.OBSERVE,mo,null,s)}_createNotifyingProperty(n){this._addPropertyEffect(n,yt.NOTIFY,{fn:Gf,info:{eventName:as(n)+"-changed",property:n}})}_createReflectedProperty(n){let s=this.constructor.attributeNameForProperty(n);s[0]==="-"?console.warn("Property "+n+" cannot be reflected to attribute "+s+' because "-" is not a valid starting attribute name. Use a lowercase first letter for the property instead.'):this._addPropertyEffect(n,yt.REFLECT,{fn:Yf,info:{attrName:s}})}_createComputedProperty(n,s,o){let a=Rs(s);if(!a)throw new Error("Malformed computed expression '"+s+"'");const l=gl(this,a,yt.COMPUTE,ch,n,o);ks(this,dh)[n]=l}_marshalArgs(n,s,o){const a=this.__data,l=[];for(let d=0,h=n.length;d<h;d++){let{name:c,structured:m,wildcard:p,value:g,literal:f}=n[d];if(!f)if(p){const b=Hr(c,s),y=wl(a,o,b?s:c);g={path:b?s:c,value:y,base:b?Qt(a,c):y}}else g=m?wl(a,o,c):a[c];if(so&&!this._overrideLegacyUndefined&&g===void 0&&n.length>1)return Vr;l[d]=g}return l}static addPropertyEffect(n,s,o){this.prototype._addPropertyEffect(n,s,o)}static createPropertyObserver(n,s,o){this.prototype._createPropertyObserver(n,s,o)}static createMethodObserver(n,s){this.prototype._createMethodObserver(n,s)}static createNotifyingProperty(n){this.prototype._createNotifyingProperty(n)}static createReadOnlyProperty(n,s){this.prototype._createReadOnlyProperty(n,s)}static createReflectedProperty(n){this.prototype._createReflectedProperty(n)}static createComputedProperty(n,s,o){this.prototype._createComputedProperty(n,s,o)}static bindTemplate(n){return this.prototype._bindTemplate(n)}_bindTemplate(n,s){let o=this.constructor._parseTemplate(n),a=this.__preBoundTemplateInfo==o;if(!a)for(let l in o.propertyEffects)this._createPropertyAccessor(l);if(s)if(o=Object.create(o),o.wasPreBound=a,this.__templateInfo){const l=n._parentTemplateInfo||this.__templateInfo,d=l.lastChild;o.parent=l,l.lastChild=o,o.previousSibling=d,d?d.nextSibling=o:l.firstChild=o}else this.__templateInfo=o;else this.__preBoundTemplateInfo=o;return o}static _addTemplatePropertyEffect(n,s,o){(n.hostProps=n.hostProps||{})[s]=!0;let a=n.propertyEffects=n.propertyEffects||{};(a[s]=a[s]||[]).push(o)}_stampTemplate(n,s){s=s||this._bindTemplate(n,!0),rr.push(this);let o=super._stampTemplate(n,s);if(rr.pop(),s.nodeList=o.nodeList,!s.wasPreBound){let a=s.childNodes=[];for(let l=o.firstChild;l;l=l.nextSibling)a.push(l)}return o.templateInfo=s,sm(this,s),this.__dataClientsReady&&(this._runEffectsForTemplate(s,this.__data,null,!1),this._flushClients()),o}_removeBoundDom(n){const s=n.templateInfo,{previousSibling:o,nextSibling:a,parent:l}=s;o?o.nextSibling=a:l&&(l.firstChild=a),a?a.previousSibling=o:l&&(l.lastChild=o),s.nextSibling=s.previousSibling=null;let d=s.childNodes;for(let h=0;h<d.length;h++){let c=d[h];it(it(c).parentNode).removeChild(c)}}static _parseTemplateNode(n,s,o){let a=t._parseTemplateNode.call(this,n,s,o);if(n.nodeType===Node.TEXT_NODE){let l=this._parseBindings(n.textContent,s);l&&(n.textContent=vl(l)||" ",Ds(this,s,o,"text","textContent",l),a=!0)}return a}static _parseTemplateNodeAttribute(n,s,o,a,l){let d=this._parseBindings(l,s);if(d){let h=a,c="property";jf.test(a)?c="attribute":a[a.length-1]=="$"&&(a=a.slice(0,-1),c="attribute");let m=vl(d);return m&&c=="attribute"&&(a=="class"&&n.hasAttribute("class")&&(m+=" "+n.getAttribute(a)),n.setAttribute(a,m)),c=="attribute"&&h=="disable-upgrade$"&&n.setAttribute(a,""),n.localName==="input"&&h==="value"&&n.setAttribute(h,""),n.removeAttribute(h),c==="property"&&(a=eh(a)),Ds(this,s,o,c,a,d,m),!0}return t._parseTemplateNodeAttribute.call(this,n,s,o,a,l)}static _parseTemplateNestedTemplate(n,s,o){let a=t._parseTemplateNestedTemplate.call(this,n,s,o);const l=n.parentNode,d=o.templateInfo,h=l.localName==="dom-if",c=l.localName==="dom-repeat";Ga&&(h||c)&&(l.removeChild(n),(o=o.parentInfo).templateInfo=d,o.noted=!0,a=!1);let m=d.hostProps;if(Ud&&h)m&&(s.hostProps=Object.assign(s.hostProps||{},m),Ga||(o.parentInfo.noted=!0));else{let p="{";for(let g in m)Ds(this,s,o,"property","_host_"+g,[{mode:p,source:g,dependencies:[g],hostProp:!0}])}return a}static _parseBindings(n,s){let o,a=[],l=0;for(;(o=bl.exec(n))!==null;){o.index>l&&a.push({literal:n.slice(l,o.index)});let d=o[1][0],h=!!o[2],c=o[3].trim(),m=!1,p="",g=-1;d=="{"&&(g=c.indexOf("::"))>0&&(p=c.substring(g+2),c=c.substring(0,g),m=!0);let f=Rs(c),b=[];if(f){let{args:y,methodName:v}=f;for(let I=0;I<y.length;I++){let T=y[I];T.literal||b.push(T)}let S=s.dynamicFns;(S&&S[v]||f.static)&&(b.push(v),f.dynamicFn=!0)}else b.push(c);a.push({source:c,mode:d,negate:h,customEvent:m,signature:f,dependencies:b,event:p}),l=bl.lastIndex}if(l&&l<n.length){let d=n.substring(l);d&&a.push({literal:d})}return a.length?a:null}static _evaluateBinding(n,s,o,a,l,d){let h;return h=s.signature?mo(n,o,a,l,s.signature):o!=s.source?Qt(n,s.source):d&&po(o)?Qt(n,o):n.__data[o],s.negate&&(h=!h),h}}return e}),rr=[];function cm(i){const t={};for(let e in i){const r=i[e];t[e]=typeof r=="function"?{type:r}:r}return t}const um=pe(i=>{const t=sh(i);function e(s){const o=Object.getPrototypeOf(s);return o.prototype instanceof n?o:null}function r(s){if(!s.hasOwnProperty(JSCompiler_renameProperty("__ownProperties",s))){let o=null;if(s.hasOwnProperty(JSCompiler_renameProperty("properties",s))){const a=s.properties;a&&(o=cm(a))}s.__ownProperties=o}return s.__ownProperties}class n extends t{static get observedAttributes(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__observedAttributes",this))){this.prototype;const o=this._properties;this.__observedAttributes=o?Object.keys(o).map(a=>this.prototype._addPropertyToAttributeMap(a)):[]}return this.__observedAttributes}static finalize(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__finalized",this))){const o=e(this);o&&o.finalize(),this.__finalized=!0,this._finalizeClass()}}static _finalizeClass(){const o=r(this);o&&this.createProperties(o)}static get _properties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__properties",this))){const o=e(this);this.__properties=Object.assign({},o&&o._properties,r(this))}return this.__properties}static typeForProperty(o){const a=this._properties[o];return a&&a.type}_initializeProperties(){this.constructor.finalize(),super._initializeProperties()}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this._enableProperties()}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback()}}return n}),pm="3.4.1",_o=window.ShadyCSS&&window.ShadyCSS.cssBuild,ds=pe(i=>{const t=um(ls(i));function e(l){if(!l.hasOwnProperty(JSCompiler_renameProperty("__propertyDefaults",l))){l.__propertyDefaults=null;let d=l._properties;for(let h in d){let c=d[h];"value"in c&&(l.__propertyDefaults=l.__propertyDefaults||{},l.__propertyDefaults[h]=c)}}return l.__propertyDefaults}function r(l){return l.hasOwnProperty(JSCompiler_renameProperty("__ownObservers",l))||(l.__ownObservers=l.hasOwnProperty(JSCompiler_renameProperty("observers",l))?l.observers:null),l.__ownObservers}function n(l,d,h,c){h.computed&&(h.readOnly=!0),h.computed&&(l._hasReadOnlyEffect(d)?console.warn(`Cannot redefine computed property '${d}'.`):l._createComputedProperty(d,h.computed,c)),h.readOnly&&!l._hasReadOnlyEffect(d)?l._createReadOnlyProperty(d,!h.computed):h.readOnly===!1&&l._hasReadOnlyEffect(d)&&console.warn(`Cannot make readOnly property '${d}' non-readOnly.`),h.reflectToAttribute&&!l._hasReflectEffect(d)?l._createReflectedProperty(d):h.reflectToAttribute===!1&&l._hasReflectEffect(d)&&console.warn(`Cannot make reflected property '${d}' non-reflected.`),h.notify&&!l._hasNotifyEffect(d)?l._createNotifyingProperty(d):h.notify===!1&&l._hasNotifyEffect(d)&&console.warn(`Cannot make notify property '${d}' non-notify.`),h.observer&&l._createPropertyObserver(d,h.observer,c[h.observer]),l._addPropertyToAttributeMap(d)}function s(l,d,h,c){if(!_o){const m=d.content.querySelectorAll("style"),p=Jo(d),g=Kp(h),f=d.content.firstElementChild;for(let y=0;y<g.length;y++){let v=g[y];v.textContent=l._processStyleText(v.textContent,c),d.content.insertBefore(v,f)}let b=0;for(let y=0;y<p.length;y++){let v=p[y],S=m[b];S!==v?(v=v.cloneNode(!0),S.parentNode.insertBefore(v,S)):b++,v.textContent=l._processStyleText(v.textContent,c)}}if(window.ShadyCSS&&window.ShadyCSS.prepareTemplate(d,h),Gp&&_o&&Bp){const m=d.content.querySelectorAll("style");if(m){let p="";Array.from(m).forEach(g=>{p+=g.textContent,g.parentNode.removeChild(g)}),l._styleSheet=new CSSStyleSheet,l._styleSheet.replaceSync(p)}}}function o(l){let d=null;if(l&&(!Gi||Up)&&(d=qi.import(l,"template"),Gi&&!d))throw new Error(`strictTemplatePolicy: expecting dom-module or null template for ${l}`);return d}class a extends t{static get polymerElementVersion(){return pm}static _finalizeClass(){t._finalizeClass.call(this);const d=r(this);d&&this.createObservers(d,this._properties),this._prepareTemplate()}static _prepareTemplate(){let d=this.template;d&&(typeof d=="string"?(console.error("template getter must return HTMLTemplateElement"),d=null):Mr||(d=d.cloneNode(!0))),this.prototype._template=d}static createProperties(d){for(let h in d)n(this.prototype,h,d[h],d)}static createObservers(d,h){const c=this.prototype;for(let m=0;m<d.length;m++)c._createMethodObserver(d[m],h)}static get template(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_template",this))){const d=this.prototype.hasOwnProperty(JSCompiler_renameProperty("_template",this.prototype))?this.prototype._template:void 0;this._template=d!==void 0?d:this.hasOwnProperty(JSCompiler_renameProperty("is",this))&&o(this.is)||Object.getPrototypeOf(this.prototype).constructor.template}return this._template}static set template(d){this._template=d}static get importPath(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_importPath",this))){const d=this.importMeta;if(d)this._importPath=qo(d.url);else{const h=qi.import(this.is);this._importPath=h&&h.assetpath||Object.getPrototypeOf(this.prototype).constructor.importPath}}return this._importPath}constructor(){super(),this._template,this._importPath,this.rootPath,this.importPath,this.root,this.$}_initializeProperties(){this.constructor.finalize(),this.constructor._finalizeTemplate(this.localName),super._initializeProperties(),this.rootPath=Hp,this.importPath=this.constructor.importPath;let d=e(this.constructor);if(d)for(let h in d){let c=d[h];if(this._canApplyPropertyDefault(h)){let m=typeof c.value=="function"?c.value.call(this):c.value;this._hasAccessor(h)?this._setPendingProperty(h,m,!0):this[h]=m}}}_canApplyPropertyDefault(d){return!this.hasOwnProperty(d)}static _processStyleText(d,h){return Go(d,h)}static _finalizeTemplate(d){const h=this.prototype._template;if(h&&!h.__polymerFinalized){h.__polymerFinalized=!0;const c=this.importPath;s(this,h,d,c?Ar(c):""),this.prototype._bindTemplate(h)}}connectedCallback(){window.ShadyCSS&&this._template&&window.ShadyCSS.styleElement(this),super.connectedCallback()}ready(){this._template&&(this.root=this._stampTemplate(this._template),this.$=this.root.$),super.ready()}_readyClients(){this._template&&(this.root=this._attachDom(this.root)),super._readyClients()}_attachDom(d){const h=it(this);if(h.attachShadow)return d?(h.shadowRoot||(h.attachShadow({mode:"open",shadyUpgradeFragment:d}),h.shadowRoot.appendChild(d),this.constructor._styleSheet&&(h.shadowRoot.adoptedStyleSheets=[this.constructor._styleSheet])),Vp&&window.ShadyDOM&&window.ShadyDOM.flushInitial(h.shadowRoot),h.shadowRoot):null;throw new Error("ShadowDOM not available. PolymerElement can create dom as children instead of in ShadowDOM by setting `this.root = this;` before `ready`.")}updateStyles(d){window.ShadyCSS&&window.ShadyCSS.styleSubtree(this,d)}resolveUrl(d,h){return!h&&this.importPath&&(h=Ar(this.importPath)),Ar(d,h)}static _parseTemplateContent(d,h,c){return h.dynamicFns=h.dynamicFns||this._properties,t._parseTemplateContent.call(this,d,h,c)}static _addTemplatePropertyEffect(d,h,c){return!jd||h in this._properties||c.info.part.signature&&c.info.part.signature.static||c.info.part.hostProp||d.nestedTemplate||console.warn(`Property '${h}' used in template but not declared in 'properties'; attribute will not be observed.`),t._addTemplatePropertyEffect.call(this,d,h,c)}}return a});class mh{constructor(t){this.value=t.toString()}toString(){return this.value}}function fm(i){if(i instanceof mh)return i.value;throw new Error(`non-literal value passed to Polymer's htmlLiteral function: ${i}`)}function mm(i){if(i instanceof HTMLTemplateElement)return i.innerHTML;if(i instanceof mh)return fm(i);throw new Error(`non-template value passed to Polymer's html function: ${i}`)}const Kr=function(i,...t){const e=document.createElement("template");return e.innerHTML=t.reduce((r,n,s)=>r+mm(n)+i[s+1],i[0]),e},Ve=ds(HTMLElement);class Rt{constructor(){this._asyncModule=null,this._callback=null,this._timer=null}setConfig(t,e){this._asyncModule=t,this._callback=e,this._timer=this._asyncModule.run(()=>{this._timer=null,Wr.delete(this),this._callback()})}cancel(){this.isActive()&&(this._cancelAsync(),Wr.delete(this))}_cancelAsync(){this.isActive()&&(this._asyncModule.cancel(this._timer),this._timer=null)}flush(){this.isActive()&&(this.cancel(),this._callback())}isActive(){return this._timer!=null}static debounce(t,e,r){return t instanceof Rt?t._cancelAsync():t=new Rt,t.setConfig(e,r),t}}let Wr=new Set;const hs=function(i){Wr.add(i)},_m=function(){const i=!!Wr.size;return Wr.forEach(t=>{try{t.flush()}catch(e){setTimeout(()=>{throw e})}}),i};let na=typeof document.head.style.touchAction=="string",Un="__polymerGestures",Tn="__polymerGesturesHandled",go="__polymerGesturesTouchAction",Cl=25,Al=5,gm=2,ym=2500,_h=["mousedown","mousemove","mouseup","click"],bm=[0,1,4,2],vm=function(){try{return new MouseEvent("test",{buttons:1}).buttons===1}catch{return!1}}();function sa(i){return _h.indexOf(i)>-1}let oa=!1;function gh(i){if(!sa(i)&&i!=="touchend")return na&&oa&&jp?{passive:!0}:void 0}(function(){try{let i=Object.defineProperty({},"passive",{get(){oa=!0}});window.addEventListener("test",null,i),window.removeEventListener("test",null,i)}catch{}})();let yh=navigator.userAgent.match(/iP(?:[oa]d|hone)|Android/);const yo=[],wm={button:!0,input:!0,keygen:!0,meter:!0,output:!0,textarea:!0,progress:!0,select:!0},Cm={button:!0,command:!0,fieldset:!0,input:!0,keygen:!0,optgroup:!0,option:!0,select:!0,textarea:!0};function Am(i){return wm[i.localName]||!1}function Sm(i){let t=Array.prototype.slice.call(i.labels||[]);if(!t.length){t=[];let e=i.getRootNode();if(i.id){let r=e.querySelectorAll(`label[for = ${i.id}]`);for(let n=0;n<r.length;n++)t.push(r[n])}}return t}let Sl=function(i){let t=i.sourceCapabilities;if((!t||t.firesTouchEvents)&&(i[Tn]={skip:!0},i.type==="click")){let e=!1,r=cs(i);for(let n=0;n<r.length;n++){if(r[n].nodeType===Node.ELEMENT_NODE){if(r[n].localName==="label")yo.push(r[n]);else if(Am(r[n])){let s=Sm(r[n]);for(let o=0;o<s.length;o++)e=e||yo.indexOf(s[o])>-1}}if(r[n]===Zt.mouse.target)return}if(e)return;i.preventDefault(),i.stopPropagation()}};function xl(i){let t=yh?["click"]:_h;for(let e,r=0;r<t.length;r++)e=t[r],i?(yo.length=0,document.addEventListener(e,Sl,!0)):document.removeEventListener(e,Sl,!0)}function xm(i){Zt.mouse.mouseIgnoreJob||xl(!0);let t=function(){xl(),Zt.mouse.target=null,Zt.mouse.mouseIgnoreJob=null};Zt.mouse.target=cs(i)[0],Zt.mouse.mouseIgnoreJob=Rt.debounce(Zt.mouse.mouseIgnoreJob,xe.after(ym),t)}function ci(i){let t=i.type;if(!sa(t))return!1;if(t==="mousemove"){let e=i.buttons===void 0?1:i.buttons;return i instanceof window.MouseEvent&&!vm&&(e=bm[i.which]||0),!!(1&e)}return(i.button===void 0?0:i.button)===0}function Em(i){if(i.type==="click"){if(i.detail===0)return!0;let t=Qe(i);if(!t.nodeType||t.nodeType!==Node.ELEMENT_NODE)return!0;let e=t.getBoundingClientRect(),r=i.pageX,n=i.pageY;return!(r>=e.left&&r<=e.right&&n>=e.top&&n<=e.bottom)}return!1}let Zt={mouse:{target:null,mouseIgnoreJob:null},touch:{x:0,y:0,id:-1,scrollDecided:!1}};function Im(i){let t="auto",e=cs(i);for(let r,n=0;n<e.length;n++)if(r=e[n],r[go]){t=r[go];break}return t}function El(i,t,e){i.movefn=t,i.upfn=e,document.addEventListener("mousemove",t),document.addEventListener("mouseup",e)}function Ci(i){document.removeEventListener("mousemove",i.movefn),document.removeEventListener("mouseup",i.upfn),i.movefn=null,i.upfn=null}document.addEventListener("touchend",xm,!!oa&&{passive:!0});const cs=window.ShadyDOM&&window.ShadyDOM.noPatch?window.ShadyDOM.composedPath:i=>i.composedPath&&i.composedPath()||[],Qr={},_i=[];function Tm(i,t){let e=document.elementFromPoint(i,t),r=e;for(;r&&r.shadowRoot&&!window.ShadyDOM;){let n=r;if(r=r.shadowRoot.elementFromPoint(i,t),n===r)break;r&&(e=r)}return e}function Qe(i){const t=cs(i);return t.length>0?t[0]:i.target}function bh(i){let t,e=i.type,r=i.currentTarget[Un];if(!r)return;let n=r[e];if(n){if(!i[Tn]&&(i[Tn]={},e.slice(0,5)==="touch")){let s=i.changedTouches[0];if(e==="touchstart"&&i.touches.length===1&&(Zt.touch.id=s.identifier),Zt.touch.id!==s.identifier)return;na||e!=="touchstart"&&e!=="touchmove"||Pm(i)}if(t=i[Tn],!t.skip){for(let s,o=0;o<_i.length;o++)s=_i[o],n[s.name]&&!t[s.name]&&s.flow&&s.flow.start.indexOf(i.type)>-1&&s.reset&&s.reset();for(let s,o=0;o<_i.length;o++)s=_i[o],n[s.name]&&!t[s.name]&&(t[s.name]=!0,s[e](i))}}}function Pm(i){let t=i.changedTouches[0],e=i.type;if(e==="touchstart")Zt.touch.x=t.clientX,Zt.touch.y=t.clientY,Zt.touch.scrollDecided=!1;else if(e==="touchmove"){if(Zt.touch.scrollDecided)return;Zt.touch.scrollDecided=!0;let r=Im(i),n=!1,s=Math.abs(Zt.touch.x-t.clientX),o=Math.abs(Zt.touch.y-t.clientY);i.cancelable&&(r==="none"?n=!0:r==="pan-x"?n=o>s:r==="pan-y"&&(n=s>o)),n?i.preventDefault():Vn("track")}}function aa(i,t,e){return!!Qr[t]&&(km(i,t,e),!0)}function Om(i,t,e){return!!Qr[t]&&(Dm(i,t,e),!0)}function km(i,t,e){let r=Qr[t],n=r.deps,s=r.name,o=i[Un];o||(i[Un]=o={});for(let a,l,d=0;d<n.length;d++)a=n[d],yh&&sa(a)&&a!=="click"||(l=o[a],l||(o[a]=l={_count:0}),l._count===0&&i.addEventListener(a,bh,gh(a)),l[s]=(l[s]||0)+1,l._count=(l._count||0)+1);i.addEventListener(t,e),r.touchAction&&vh(i,r.touchAction)}function Dm(i,t,e){let r=Qr[t],n=r.deps,s=r.name,o=i[Un];if(o)for(let a,l,d=0;d<n.length;d++)a=n[d],l=o[a],l&&l[s]&&(l[s]=(l[s]||1)-1,l._count=(l._count||1)-1,l._count===0&&i.removeEventListener(a,bh,gh(a)));i.removeEventListener(t,e)}function zs(i){_i.push(i);for(let t=0;t<i.emits.length;t++)Qr[i.emits[t]]=i}function Rm(i){for(let t,e=0;e<_i.length;e++){t=_i[e];for(let r,n=0;n<t.emits.length;n++)if(r=t.emits[n],r===i)return t}return null}function vh(i,t){na&&i instanceof HTMLElement&&be.run(()=>{i.style.touchAction=t}),i[go]=t}function la(i,t,e){let r=new Event(t,{bubbles:!0,cancelable:!0,composed:!0});if(r.detail=e,it(i).dispatchEvent(r),r.defaultPrevented){let n=e.preventer||e.sourceEvent;n&&n.preventDefault&&n.preventDefault()}}function Vn(i){let t=Rm(i);t.info&&(t.info.prevent=!0)}function nr(i,t,e,r){t&&la(t,i,{x:e.clientX,y:e.clientY,sourceEvent:e,preventer:r,prevent:function(n){return Vn(n)}})}function Il(i,t,e){if(i.prevent)return!1;if(i.started)return!0;let r=Math.abs(i.x-t),n=Math.abs(i.y-e);return r>=Al||n>=Al}function Ns(i,t,e){if(!t)return;let r,n=i.moves[i.moves.length-2],s=i.moves[i.moves.length-1],o=s.x-i.x,a=s.y-i.y,l=0;n&&(r=s.x-n.x,l=s.y-n.y),la(t,"track",{state:i.state,x:e.clientX,y:e.clientY,dx:o,dy:a,ddx:r,ddy:l,sourceEvent:e,hover:function(){return Tm(e.clientX,e.clientY)}})}function Tl(i,t,e){let r=Math.abs(t.clientX-i.x),n=Math.abs(t.clientY-i.y),s=Qe(e||t);!s||Cm[s.localName]&&s.hasAttribute("disabled")||(isNaN(r)||isNaN(n)||r<=Cl&&n<=Cl||Em(t))&&(i.prevent||la(s,"tap",{x:t.clientX,y:t.clientY,sourceEvent:t,preventer:e}))}zs({name:"downup",deps:["mousedown","touchstart","touchend"],flow:{start:["mousedown","touchstart"],end:["mouseup","touchend"]},emits:["down","up"],info:{movefn:null,upfn:null},reset:function(){Ci(this.info)},mousedown:function(i){if(!ci(i))return;let t=Qe(i),e=this,r=function(s){ci(s)||(nr("up",t,s),Ci(e.info))},n=function(s){ci(s)&&nr("up",t,s),Ci(e.info)};El(this.info,r,n),nr("down",t,i)},touchstart:function(i){nr("down",Qe(i),i.changedTouches[0],i)},touchend:function(i){nr("up",Qe(i),i.changedTouches[0],i)}}),zs({name:"track",touchAction:"none",deps:["mousedown","touchstart","touchmove","touchend"],flow:{start:["mousedown","touchstart"],end:["mouseup","touchend"]},emits:["track"],info:{x:0,y:0,state:"start",started:!1,moves:[],addMove:function(i){this.moves.length>gm&&this.moves.shift(),this.moves.push(i)},movefn:null,upfn:null,prevent:!1},reset:function(){this.info.state="start",this.info.started=!1,this.info.moves=[],this.info.x=0,this.info.y=0,this.info.prevent=!1,Ci(this.info)},mousedown:function(i){if(!ci(i))return;let t=Qe(i),e=this,r=function(s){let o=s.clientX,a=s.clientY;Il(e.info,o,a)&&(e.info.state=e.info.started?s.type==="mouseup"?"end":"track":"start",e.info.state==="start"&&Vn("tap"),e.info.addMove({x:o,y:a}),ci(s)||(e.info.state="end",Ci(e.info)),t&&Ns(e.info,t,s),e.info.started=!0)},n=function(s){e.info.started&&r(s),Ci(e.info)};El(this.info,r,n),this.info.x=i.clientX,this.info.y=i.clientY},touchstart:function(i){let t=i.changedTouches[0];this.info.x=t.clientX,this.info.y=t.clientY},touchmove:function(i){let t=Qe(i),e=i.changedTouches[0],r=e.clientX,n=e.clientY;Il(this.info,r,n)&&(this.info.state==="start"&&Vn("tap"),this.info.addMove({x:r,y:n}),Ns(this.info,t,e),this.info.state="track",this.info.started=!0)},touchend:function(i){let t=Qe(i),e=i.changedTouches[0];this.info.started&&(this.info.state="end",this.info.addMove({x:e.clientX,y:e.clientY}),Ns(this.info,t,e))}}),zs({name:"tap",deps:["mousedown","click","touchstart","touchend"],flow:{start:["mousedown","touchstart"],end:["click","touchend"]},emits:["tap"],info:{x:NaN,y:NaN,prevent:!1},reset:function(){this.info.x=NaN,this.info.y=NaN,this.info.prevent=!1},mousedown:function(i){ci(i)&&(this.info.x=i.clientX,this.info.y=i.clientY)},click:function(i){ci(i)&&Tl(this.info,i)},touchstart:function(i){const t=i.changedTouches[0];this.info.x=t.clientX,this.info.y=t.clientY},touchend:function(i){Tl(this.info,i.changedTouches[0],i)}});const tn=pe(i=>{class t extends i{_addEventListenerToNode(r,n,s){aa(r,n,s)||super._addEventListenerToNode(r,n,s)}_removeEventListenerFromNode(r,n,s){Om(r,n,s)||super._removeEventListenerFromNode(r,n,s)}}return t}),zm=i=>class extends i{static get properties(){return{theme:{type:String,readOnly:!0}}}attributeChangedCallback(t,e,r){super.attributeChangedCallback(t,e,r),t==="theme"&&this._setTheme(r)}},da=i=>class extends zm(i){static finalize(){super.finalize();const t=this.prototype._template,e=this.template&&this.template.parentElement&&this.template.parentElement.id===this.is,r=Object.getPrototypeOf(this.prototype)._template;r&&!e&&Array.from(r.content.querySelectorAll("style[include]")).forEach(n=>{this._includeStyle(n.getAttribute("include"),t)}),this._includeMatchingThemes(t)}static _includeMatchingThemes(t){const e=qi.prototype.modules;let r=!1;const n=this.is+"-default-theme";Object.keys(e).sort((s,o)=>{const a=s.indexOf("vaadin-")===0,l=o.indexOf("vaadin-")===0,d=["lumo-","material-"],h=d.filter(m=>s.indexOf(m)===0).length>0,c=d.filter(m=>o.indexOf(m)===0).length>0;return a!==l?a?-1:1:h!==c?h?-1:1:0}).forEach(s=>{if(s!==n){const o=e[s].getAttribute("theme-for");o&&o.split(" ").forEach(a=>{new RegExp("^"+a.split("*").join(".*")+"$").test(this.is)&&(r=!0,this._includeStyle(s,t))})}}),!r&&e[n]&&this._includeStyle(n,t)}static _includeStyle(t,e){if(e&&!e.content.querySelector(`style[include="${t}"]`)){const r=document.createElement("style");r.setAttribute("include",t),e.content.appendChild(r)}}};let Wn=!1;window.addEventListener("keydown",()=>{Wn=!0},{capture:!0}),window.addEventListener("mousedown",()=>{Wn=!1},{capture:!0});const Nm=i=>class extends i{static get properties(){var t={tabindex:{type:Number,value:0,reflectToAttribute:!0,observer:"_tabindexChanged"}};return window.ShadyDOM&&(t.tabIndex=t.tabindex),t}},Fm=i=>class extends Nm(i){static get properties(){return{autofocus:{type:Boolean},_previousTabIndex:{type:Number},disabled:{type:Boolean,observer:"_disabledChanged",reflectToAttribute:!0},_isShiftTabbing:{type:Boolean}}}get _keyboardActive(){return Wn}ready(){this.addEventListener("focusin",e=>{e.composedPath()[0]===this?this.contains(e.relatedTarget)||this._focus():e.composedPath().indexOf(this.focusElement)===-1||this.disabled||this._setFocused(!0)}),this.addEventListener("focusout",e=>this._setFocused(!1)),super.ready();const t=e=>{e.composed||e.target.dispatchEvent(new CustomEvent(e.type,{bubbles:!0,composed:!0,cancelable:!1}))};this.shadowRoot.addEventListener("focusin",t),this.shadowRoot.addEventListener("focusout",t),this.addEventListener("keydown",e=>{if(!e.defaultPrevented&&e.keyCode===9)if(e.shiftKey)this._isShiftTabbing=!0,HTMLElement.prototype.focus.apply(this),this._setFocused(!1),setTimeout(()=>this._isShiftTabbing=!1,0);else{const r=window.navigator.userAgent.match(/Firefox\/(\d\d\.\d)/);if(r&&parseFloat(r[1])>=63&&parseFloat(r[1])<66&&this.parentNode&&this.nextSibling){const n=document.createElement("input");n.style.position="absolute",n.style.opacity="0",n.tabIndex=this.tabIndex,this.parentNode.insertBefore(n,this.nextSibling),n.focus(),n.addEventListener("focusout",()=>this.parentNode.removeChild(n))}}}),this.autofocus&&!this.disabled&&window.requestAnimationFrame(()=>{this._focus(),this._setFocused(!0),this.setAttribute("focus-ring","")})}disconnectedCallback(){super.disconnectedCallback(),this.hasAttribute("focused")&&this._setFocused(!1)}_setFocused(t){t?this.setAttribute("focused",""):this.removeAttribute("focused"),t&&Wn?this.setAttribute("focus-ring",""):this.removeAttribute("focus-ring")}get focusElement(){return window.console.warn(`Please implement the 'focusElement' property in <${this.localName}>`),this}_focus(){this.focusElement&&!this._isShiftTabbing&&(this.focusElement.focus(),this._setFocused(!0))}focus(){this.focusElement&&!this.disabled&&(this.focusElement.focus(),this._setFocused(!0))}blur(){this.focusElement&&(this.focusElement.blur(),this._setFocused(!1))}_disabledChanged(t){this.focusElement.disabled=t,t?(this.blur(),this._previousTabIndex=this.tabindex,this.tabindex=-1,this.setAttribute("aria-disabled","true")):(this._previousTabIndex!==void 0&&(this.tabindex=this._previousTabIndex),this.removeAttribute("aria-disabled"))}_tabindexChanged(t){t!==void 0&&(this.focusElement.tabIndex=t),this.disabled&&this.tabindex&&(this.tabindex!==-1&&(this._previousTabIndex=this.tabindex),this.tabindex=t=void 0),window.ShadyDOM&&this.setProperties({tabIndex:t,tabindex:t})}click(){this.disabled||super.click()}},Yi=function(){let i,t;do i=window.ShadyDOM&&ShadyDOM.flush(),window.ShadyCSS&&window.ShadyCSS.ScopingShim&&window.ShadyCSS.ScopingShim.flush(),t=_m();while(i||t)};class Fs{static detectScrollType(){const t=document.createElement("div");t.textContent="ABCD",t.dir="rtl",t.style.fontSize="14px",t.style.width="4px",t.style.height="1px",t.style.position="absolute",t.style.top="-1000px",t.style.overflow="scroll",document.body.appendChild(t);let e="reverse";return t.scrollLeft>0?e="default":(t.scrollLeft=2,t.scrollLeft<2&&(e="negative")),document.body.removeChild(t),e}static getNormalizedScrollLeft(t,e,r){const{scrollLeft:n}=r;if(e!=="rtl"||!t)return n;switch(t){case"negative":return r.scrollWidth-r.clientWidth+n;case"reverse":return r.scrollWidth-r.clientWidth-n}return n}static setNormalizedScrollLeft(t,e,r,n){if(e==="rtl"&&t)switch(t){case"negative":r.scrollLeft=r.clientWidth-r.scrollWidth+n;break;case"reverse":r.scrollLeft=r.scrollWidth-r.clientWidth-n;break;default:r.scrollLeft=n}else r.scrollLeft=n}}const Je=[],Mm=function(){const i=ki();Je.forEach(t=>{bo(t,i)})};let _n;new MutationObserver(Mm).observe(document.documentElement,{attributes:!0,attributeFilter:["dir"]});const bo=function(i,t){t?i.setAttribute("dir",t):i.removeAttribute("dir")},ki=function(){return document.documentElement.getAttribute("dir")},ha=i=>class extends i{static get properties(){return{dir:{type:String,readOnly:!0}}}static finalize(){super.finalize(),_n||(_n=Fs.detectScrollType())}connectedCallback(){super.connectedCallback(),this.hasAttribute("dir")||(this.__subscribe(),bo(this,ki()))}attributeChangedCallback(t,e,r){if(super.attributeChangedCallback(t,e,r),t!=="dir")return;const n=r===ki()&&Je.indexOf(this)===-1,s=!r&&e&&Je.indexOf(this)===-1,o=r!==ki()&&e===ki();n||s?(this.__subscribe(),bo(this,ki())):o&&this.__subscribe(!1)}disconnectedCallback(){super.disconnectedCallback(),this.__subscribe(!1),this.removeAttribute("dir")}__subscribe(t=!0){t?Je.indexOf(this)===-1&&Je.push(this):Je.indexOf(this)>-1&&Je.splice(Je.indexOf(this),1)}__getNormalizedScrollLeft(t){return Fs.getNormalizedScrollLeft(_n,this.getAttribute("dir")||"ltr",t)}__setNormalizedScrollLeft(t,e){return Fs.setNormalizedScrollLeft(_n,this.getAttribute("dir")||"ltr",t,e)}},Lm=/\/\*\*\s+vaadin-dev-mode:start([\s\S]*)vaadin-dev-mode:end\s+\*\*\//i,Pn=window.Vaadin&&window.Vaadin.Flow&&window.Vaadin.Flow.clients;function $m(){function i(){return!0}return wh(i)}function Bm(){try{return!!Hm()||!!jm()&&(Pn?!Um():!$m())}catch{return!1}}function Hm(){return localStorage.getItem("vaadin.developmentmode.force")}function jm(){return["localhost","127.0.0.1"].indexOf(window.location.hostname)>=0}function Um(){return!!(Pn&&Object.keys(Pn).map(i=>Pn[i]).filter(i=>i.productionMode).length>0)}function wh(i,t){if(typeof i!="function")return;const e=Lm.exec(i.toString());if(e)try{i=new Function(e[1])}catch(r){console.log("vaadin-development-mode-detector: uncommentAndRun() failed",r)}return i(t)}window.Vaadin=window.Vaadin||{};const Pl=function(i,t){if(window.Vaadin.developmentMode)return wh(i,t)};function Vm(){}window.Vaadin.developmentMode===void 0&&(window.Vaadin.developmentMode=Bm());const Ol=function(){if(typeof Pl=="function")return Pl(Vm)};let Ms;window.Vaadin||(window.Vaadin={}),window.Vaadin.registrations=window.Vaadin.registrations||[],window.Vaadin.developmentModeCallback=window.Vaadin.developmentModeCallback||{},window.Vaadin.developmentModeCallback["vaadin-usage-statistics"]=function(){Ol&&Ol()};const kl=new Set,Ch=i=>class extends ha(i){static finalize(){super.finalize();const{is:t}=this;t&&!kl.has(t)&&(window.Vaadin.registrations.push(this),kl.add(t),window.Vaadin.developmentModeCallback&&(Ms=Rt.debounce(Ms,nh,()=>{window.Vaadin.developmentModeCallback["vaadin-usage-statistics"]()}),hs(Ms)))}constructor(){super(),document.doctype===null&&console.warn('Vaadin components require the "standards mode" declaration. Please add <!DOCTYPE html> to the HTML document.')}};class Dl extends Ch(Fm(da(tn(Ve)))){static get template(){return Kr`
      <style>
        :host {
          display: inline-block;
        }

        :host([hidden]) {
          display: none !important;
        }

        label {
          display: inline-flex;
          align-items: baseline;
          outline: none;
        }

        [part='checkbox'] {
          position: relative;
          display: inline-block;
          flex: none;
        }

        input[type='checkbox'] {
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          width: 100%;
          height: 100%;
          opacity: 0;
          cursor: inherit;
          margin: 0;
        }

        :host([disabled]) {
          -webkit-tap-highlight-color: transparent;
        }
      </style>

      <label>
        <span part="checkbox">
          <input
            type="checkbox"
            checked="{{checked::change}}"
            disabled$="[[disabled]]"
            indeterminate="{{indeterminate::change}}"
            role="presentation"
            tabindex="-1"
          />
        </span>

        <span part="label">
          <slot></slot>
        </span>
      </label>
    `}static get is(){return"vaadin-checkbox"}static get version(){return"3.0.0"}static get properties(){return{checked:{type:Boolean,value:!1,notify:!0,observer:"_checkedChanged",reflectToAttribute:!0},indeterminate:{type:Boolean,notify:!0,observer:"_indeterminateChanged",reflectToAttribute:!0,value:!1},value:{type:String,value:"on"},_nativeCheckbox:{type:Object}}}constructor(){super(),this.name}get name(){return this.checked?this._storedName:""}set name(t){this._storedName=t}ready(){super.ready(),this.setAttribute("role","checkbox"),this._nativeCheckbox=this.shadowRoot.querySelector('input[type="checkbox"]'),this.addEventListener("click",this._handleClick.bind(this)),this._addActiveListeners();const t=this.getAttribute("name");t&&(this.name=t),this.shadowRoot.querySelector('[part~="label"]').querySelector("slot").addEventListener("slotchange",this._updateLabelAttribute.bind(this)),this._updateLabelAttribute()}_updateLabelAttribute(){const t=this.shadowRoot.querySelector('[part~="label"]'),e=t.firstElementChild.assignedNodes();this._isAssignedNodesEmpty(e)?t.setAttribute("empty",""):t.removeAttribute("empty")}_isAssignedNodesEmpty(t){return t.length===0||t.length==1&&t[0].nodeType==Node.TEXT_NODE&&t[0].textContent.trim()===""}_checkedChanged(t){this.indeterminate?this.setAttribute("aria-checked","mixed"):this.setAttribute("aria-checked",!!t)}_indeterminateChanged(t){t?this.setAttribute("aria-checked","mixed"):this.setAttribute("aria-checked",this.checked)}_addActiveListeners(){this._addEventListenerToNode(this,"down",t=>{this.__interactionsAllowed(t)&&this.setAttribute("active","")}),this._addEventListenerToNode(this,"up",()=>this.removeAttribute("active")),this.addEventListener("keydown",t=>{this.__interactionsAllowed(t)&&t.keyCode===32&&(t.preventDefault(),this.setAttribute("active",""))}),this.addEventListener("keyup",t=>{this.__interactionsAllowed(t)&&t.keyCode===32&&(t.preventDefault(),this._toggleChecked(),this.removeAttribute("active"),this.indeterminate&&(this.indeterminate=!1))})}get focusElement(){return this.shadowRoot.querySelector("input")}__interactionsAllowed(t){return!this.disabled&&t.target.localName!=="a"}_handleClick(t){this.__interactionsAllowed(t)&&(this.indeterminate?(this.indeterminate=!1,t.preventDefault(),this._toggleChecked()):t.composedPath()[0]!==this._nativeCheckbox&&(t.preventDefault(),this._toggleChecked()))}_toggleChecked(){this.checked=!this.checked,this.dispatchEvent(new CustomEvent("change",{composed:!1,bubbles:!0}))}}customElements.define(Dl.is,Dl),Br("vaadin-grid",$r`
    :host {
      font-family: var(--lumo-font-family);
      font-size: var(--lumo-font-size-m);
      line-height: var(--lumo-line-height-s);
      color: var(--lumo-body-text-color);
      background-color: var(--lumo-base-color);
      box-sizing: border-box;
      -webkit-text-size-adjust: 100%;
      -webkit-tap-highlight-color: transparent;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;

      /* For internal use only */
      --_lumo-grid-border-color: var(--lumo-contrast-20pct);
      --_lumo-grid-secondary-border-color: var(--lumo-contrast-10pct);
      --_lumo-grid-border-width: 1px;
      --_lumo-grid-selected-row-color: var(--lumo-primary-color-10pct);
    }

    /* No (outer) border */

    :host(:not([theme~='no-border'])) {
      border: var(--_lumo-grid-border-width) solid var(--_lumo-grid-border-color);
    }

    /* Cell styles */

    [part~='cell'] {
      min-height: var(--lumo-size-m);
      background-color: var(--lumo-base-color);
    }

    [part~='cell'] ::slotted(vaadin-grid-cell-content) {
      cursor: default;
      padding: var(--lumo-space-xs) var(--lumo-space-m);
    }

    /* Apply row borders by default and introduce the "no-row-borders" variant */
    :host(:not([theme~='no-row-borders'])) [part~='cell']:not([part~='details-cell']) {
      border-top: var(--_lumo-grid-border-width) solid var(--_lumo-grid-secondary-border-color);
    }

    /* Hide first body row top border */
    :host(:not([theme~='no-row-borders'])) [part='row'][first] [part~='cell']:not([part~='details-cell']) {
      border-top: 0;
      min-height: calc(var(--lumo-size-m) - var(--_lumo-grid-border-width));
    }

    /* Focus-ring */

    [part~='cell']:focus {
      outline: none;
    }

    :host([navigating]) [part~='cell']:focus::before {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      pointer-events: none;
      box-shadow: inset 0 0 0 2px var(--lumo-primary-color-50pct);
    }

    /* Drag and Drop styles */
    :host([dragover])::after {
      content: '';
      position: absolute;
      z-index: 100;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      pointer-events: none;
      box-shadow: inset 0 0 0 2px var(--lumo-primary-color-50pct);
    }

    [part~='row'][dragover] {
      z-index: 100 !important;
    }

    [part~='row'][dragover] [part~='cell'] {
      overflow: visible;
    }

    [part~='row'][dragover] [part~='cell']::after {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      height: calc(var(--_lumo-grid-border-width) + 2px);
      pointer-events: none;
      background: var(--lumo-primary-color-50pct);
    }

    :host([theme~='no-row-borders']) [dragover] [part~='cell']::after {
      height: 2px;
    }

    [part~='row'][dragover='below'] [part~='cell']::after {
      top: 100%;
      bottom: auto;
      margin-top: -1px;
    }

    [part~='row'][dragover='above'] [part~='cell']::after {
      top: auto;
      bottom: 100%;
      margin-bottom: -1px;
    }

    [part~='row'][details-opened][dragover='below'] [part~='cell']:not([part~='details-cell'])::after,
    [part~='row'][details-opened][dragover='above'] [part~='details-cell']::after {
      display: none;
    }

    [part~='row'][dragover][dragover='on-top'] [part~='cell']::after {
      height: 100%;
    }

    [part~='row'][dragstart] {
      /* Add bottom-space to the row so the drag number doesn't get clipped. Needed for IE/Edge */
      border-bottom: 100px solid transparent;
      z-index: 100 !important;
      opacity: 0.9;
    }

    [part~='row'][dragstart] [part~='cell'] {
      border: none !important;
      box-shadow: none !important;
    }

    [part~='row'][dragstart] [part~='cell'][last-column] {
      border-radius: 0 var(--lumo-border-radius-s) var(--lumo-border-radius-s) 0;
    }

    [part~='row'][dragstart] [part~='cell'][first-column] {
      border-radius: var(--lumo-border-radius-s) 0 0 var(--lumo-border-radius-s);
    }

    [ios] [part~='row'][dragstart] [part~='cell'] {
      background: var(--lumo-primary-color-50pct);
    }

    #scroller:not([ios]) [part~='row'][dragstart]:not([dragstart=''])::after {
      display: block;
      position: absolute;
      left: var(--_grid-drag-start-x);
      top: var(--_grid-drag-start-y);
      z-index: 100;
      content: attr(dragstart);
      align-items: center;
      justify-content: center;
      box-sizing: border-box;
      padding: calc(var(--lumo-space-xs) * 0.8);
      color: var(--lumo-error-contrast-color);
      background-color: var(--lumo-error-color);
      border-radius: var(--lumo-border-radius-m);
      font-family: var(--lumo-font-family);
      font-size: var(--lumo-font-size-xxs);
      line-height: 1;
      font-weight: 500;
      text-transform: initial;
      letter-spacing: initial;
      min-width: calc(var(--lumo-size-s) * 0.7);
      text-align: center;
    }

    /* Headers and footers */

    [part~='header-cell'] ::slotted(vaadin-grid-cell-content),
    [part~='footer-cell'] ::slotted(vaadin-grid-cell-content),
    [part~='reorder-ghost'] {
      font-size: var(--lumo-font-size-s);
      font-weight: 500;
    }

    [part~='footer-cell'] ::slotted(vaadin-grid-cell-content) {
      font-weight: 400;
    }

    [part='row']:only-child [part~='header-cell'] {
      min-height: var(--lumo-size-xl);
    }

    /* Header borders */

    /* Hide first header row top border */
    :host(:not([theme~='no-row-borders'])) [part='row']:first-child [part~='header-cell'] {
      border-top: 0;
    }

    [part='row']:last-child [part~='header-cell'] {
      border-bottom: var(--_lumo-grid-border-width) solid transparent;
    }

    :host(:not([theme~='no-row-borders'])) [part='row']:last-child [part~='header-cell'] {
      border-bottom-color: var(--_lumo-grid-secondary-border-color);
    }

    /* Overflow uses a stronger border color */
    :host([overflow~='top']) [part='row']:last-child [part~='header-cell'] {
      border-bottom-color: var(--_lumo-grid-border-color);
    }

    /* Footer borders */

    [part='row']:first-child [part~='footer-cell'] {
      border-top: var(--_lumo-grid-border-width) solid transparent;
    }

    :host(:not([theme~='no-row-borders'])) [part='row']:first-child [part~='footer-cell'] {
      border-top-color: var(--_lumo-grid-secondary-border-color);
    }

    /* Overflow uses a stronger border color */
    :host([overflow~='bottom']) [part='row']:first-child [part~='footer-cell'] {
      border-top-color: var(--_lumo-grid-border-color);
    }

    /* Column reordering */

    :host([reordering]) [part~='cell'] {
      background: linear-gradient(var(--lumo-shade-20pct), var(--lumo-shade-20pct)) var(--lumo-base-color);
    }

    :host([reordering]) [part~='cell'][reorder-status='allowed'] {
      background: var(--lumo-base-color);
    }

    :host([reordering]) [part~='cell'][reorder-status='dragging'] {
      background: linear-gradient(var(--lumo-contrast-5pct), var(--lumo-contrast-5pct)) var(--lumo-base-color);
    }

    [part~='reorder-ghost'] {
      opacity: 0.85;
      box-shadow: var(--lumo-box-shadow-s);
      /* TODO Use the same styles as for the cell element (reorder-ghost copies styles from the cell element) */
      padding: var(--lumo-space-s) var(--lumo-space-m) !important;
    }

    /* Column resizing */

    [part='resize-handle'] {
      width: 3px;
      background-color: var(--lumo-primary-color-50pct);
      opacity: 0;
      transition: opacity 0.2s;
    }

    :host(:not([reordering])) *:not([column-resizing]) [part~='cell']:hover [part='resize-handle'],
    [part='resize-handle']:active {
      opacity: 1;
      transition-delay: 0.15s;
    }

    /* Column borders */

    :host([theme~='column-borders']) [part~='cell']:not([last-column]):not([part~='details-cell']) {
      border-right: var(--_lumo-grid-border-width) solid var(--_lumo-grid-secondary-border-color);
    }

    /* Frozen columns */

    [last-frozen] {
      border-right: var(--_lumo-grid-border-width) solid transparent;
      overflow: hidden;
    }

    :host([overflow~='left']) [part~='cell'][last-frozen]:not([part~='details-cell']) {
      border-right-color: var(--_lumo-grid-border-color);
    }

    /* Row stripes */

    :host([theme~='row-stripes']) [part~='row']:not([odd]) [part~='body-cell'],
    :host([theme~='row-stripes']) [part~='row']:not([odd]) [part~='details-cell'] {
      background-image: linear-gradient(var(--lumo-contrast-5pct), var(--lumo-contrast-5pct));
      background-repeat: repeat-x;
    }

    /* Selected row */

    /* Raise the selected rows above unselected rows (so that box-shadow can cover unselected rows) */
    :host(:not([reordering])) [part~='row'][selected] {
      z-index: 1;
    }

    :host(:not([reordering])) [part~='row'][selected] [part~='body-cell']:not([part~='details-cell']) {
      background-image: linear-gradient(var(--_lumo-grid-selected-row-color), var(--_lumo-grid-selected-row-color));
      background-repeat: repeat;
    }

    /* Cover the border of an unselected row */
    :host(:not([theme~='no-row-borders'])) [part~='row'][selected] [part~='cell']:not([part~='details-cell']) {
      box-shadow: 0 var(--_lumo-grid-border-width) 0 0 var(--_lumo-grid-selected-row-color);
    }

    /* Compact */

    :host([theme~='compact']) [part='row']:only-child [part~='header-cell'] {
      min-height: var(--lumo-size-m);
    }

    :host([theme~='compact']) [part~='cell'] {
      min-height: var(--lumo-size-s);
    }

    :host([theme~='compact']) [part='row'][first] [part~='cell']:not([part~='details-cell']) {
      min-height: calc(var(--lumo-size-s) - var(--_lumo-grid-border-width));
    }

    :host([theme~='compact']) [part~='cell'] ::slotted(vaadin-grid-cell-content) {
      padding: var(--lumo-space-xs) var(--lumo-space-s);
    }

    /* Wrap cell contents */

    :host([theme~='wrap-cell-content']) [part~='cell'] ::slotted(vaadin-grid-cell-content) {
      white-space: normal;
    }

    /* RTL specific styles */

    :host([dir='rtl']) [part~='row'][dragstart] [part~='cell'][last-column] {
      border-radius: var(--lumo-border-radius-s) 0 0 var(--lumo-border-radius-s);
    }

    :host([dir='rtl']) [part~='row'][dragstart] [part~='cell'][first-column] {
      border-radius: 0 var(--lumo-border-radius-s) var(--lumo-border-radius-s) 0;
    }

    :host([dir='rtl'][theme~='column-borders']) [part~='cell']:not([last-column]):not([part~='details-cell']) {
      border-right: none;
      border-left: var(--_lumo-grid-border-width) solid var(--_lumo-grid-secondary-border-color);
    }

    :host([dir='rtl']) [last-frozen] {
      border-right: none;
      border-left: var(--_lumo-grid-border-width) solid transparent;
    }

    :host([dir='rtl'][overflow~='right']) [part~='cell'][last-frozen]:not([part~='details-cell']) {
      border-left-color: var(--_lumo-grid-border-color);
    }
  `,{moduleId:"lumo-grid"}),Br("vaadin-checkbox",$r`
    :host(.vaadin-grid-select-all-checkbox) {
      font-size: var(--lumo-font-size-m);
    }
  `,{moduleId:"vaadin-grid-select-all-checkbox-lumo"});let Gn=!1,Ah=[],Sh=[];function xh(){Gn=!0,requestAnimationFrame(function(){Gn=!1,Wm(Ah),setTimeout(function(){Gm(Sh)})})}function Wm(i){for(;i.length;)Eh(i.shift())}function Gm(i){for(let t=0,e=i.length;t<e;t++)Eh(i.shift())}function Eh(i){const t=i[0],e=i[1],r=i[2];try{e.apply(t,r)}catch(n){setTimeout(()=>{throw n})}}function qm(i,t,e){Gn||xh(),Ah.push([i,t,e])}function Ym(i,t,e){Gn||xh(),Sh.push([i,t,e])}class Rl{constructor(){this.start=0,this.end=0,this.previous=null,this.parent=null,this.rules=null,this.parsedCssText="",this.cssText="",this.atRule=!1,this.type=0,this.keyframesName="",this.selector="",this.parsedSelector=""}}function Ih(i){return Th(Xm(i=Zm(i)),i)}function Zm(i){return i.replace(Le.comments,"").replace(Le.port,"")}function Xm(i){let t=new Rl;t.start=0,t.end=i.length;let e=t;for(let r=0,n=i.length;r<n;r++)if(i[r]===Oh){e.rules||(e.rules=[]);let s=e,o=s.rules[s.rules.length-1]||null;e=new Rl,e.start=r+1,e.parent=s,e.previous=o,s.rules.push(e)}else i[r]===kh&&(e.end=r+1,e=e.parent||t);return t}function Th(i,t){let e=t.substring(i.start,i.end-1);if(i.parsedCssText=i.cssText=e.trim(),i.parent){let n=i.previous?i.previous.end:i.parent.start;e=t.substring(n,i.start-1),e=Jm(e),e=e.replace(Le.multipleSpaces," "),e=e.substring(e.lastIndexOf(";")+1);let s=i.parsedSelector=i.selector=e.trim();i.atRule=s.indexOf(r_)===0,i.atRule?s.indexOf(i_)===0?i.type=ni.MEDIA_RULE:s.match(Le.keyframesRule)&&(i.type=ni.KEYFRAMES_RULE,i.keyframesName=i.selector.split(Le.multipleSpaces).pop()):s.indexOf(Dh)===0?i.type=ni.MIXIN_RULE:i.type=ni.STYLE_RULE}let r=i.rules;if(r)for(let n,s=0,o=r.length;s<o&&(n=r[s]);s++)Th(n,t);return i}function Jm(i){return i.replace(/\\([0-9a-f]{1,6})\s/gi,function(){let t=arguments[1],e=6-t.length;for(;e--;)t="0"+t;return"\\"+t})}function Ph(i,t,e=""){let r="";if(i.cssText||i.rules){let n=i.rules;if(n&&!Km(n))for(let s,o=0,a=n.length;o<a&&(s=n[o]);o++)r=Ph(s,t,r);else r=t?i.cssText:Qm(i.cssText),r=r.trim(),r&&(r="  "+r+`
`)}return r&&(i.selector&&(e+=i.selector+" "+Oh+`
`),e+=r,i.selector&&(e+=kh+`

`)),e}function Km(i){let t=i[0];return!!t&&!!t.selector&&t.selector.indexOf(Dh)===0}function Qm(i){return e_(i=t_(i))}function t_(i){return i.replace(Le.customProp,"").replace(Le.mixinProp,"")}function e_(i){return i.replace(Le.mixinApply,"").replace(Le.varApply,"")}const ni={STYLE_RULE:1,KEYFRAMES_RULE:7,MEDIA_RULE:4,MIXIN_RULE:1e3},Oh="{",kh="}",Le={comments:/\/\*[^*]*\*+([^/*][^*]*\*+)*\//gim,port:/@import[^;]*;/gim,customProp:/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?(?:[;\n]|$)/gim,mixinProp:/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?{[^}]*?}(?:[;\n]|$)?/gim,mixinApply:/@apply\s*\(?[^);]*\)?\s*(?:[;\n]|$)?/gim,varApply:/[^;:]*?:[^;]*?var\([^;]*\)(?:[;\n]|$)?/gim,keyframesRule:/^@[^\s]*keyframes/,multipleSpaces:/\s+/g},Dh="--",i_="@media",r_="@",zl=new Set,n_="shady-unscoped";function s_(i){const t=i.textContent;if(!zl.has(t)){zl.add(t);const e=document.createElement("style");e.setAttribute("shady-unscoped",""),e.textContent=t,document.head.appendChild(e)}}function o_(i){return i.hasAttribute(n_)}function vo(i,t){return i?(typeof i=="string"&&(i=Ih(i)),t&&xr(i,t),Ph(i,Wo)):""}function Nl(i){return!i.__cssRules&&i.textContent&&(i.__cssRules=Ih(i.textContent)),i.__cssRules||null}function xr(i,t,e,r){if(!i)return;let n=!1,s=i.type;if(r&&s===ni.MEDIA_RULE){let a=i.selector.match(Fp);a&&(window.matchMedia(a[1]).matches||(n=!0))}s===ni.STYLE_RULE?t(i):e&&s===ni.KEYFRAMES_RULE?e(i):s===ni.MIXIN_RULE&&(n=!0);let o=i.rules;if(o&&!n)for(let a,l=0,d=o.length;l<d&&(a=o[l]);l++)xr(a,t,e,r)}function a_(i,t){let e=0;for(let r=t,n=i.length;r<n;r++)if(i[r]==="(")e++;else if(i[r]===")"&&--e==0)return r;return-1}function Rh(i,t){let e=i.indexOf("var(");if(e===-1)return t(i,"","","");let r=a_(i,e+3),n=i.substring(e+4,r),s=i.substring(0,e),o=Rh(i.substring(r+1),t),a=n.indexOf(",");return a===-1?t(s,n.trim(),"",o):t(s,n.substring(0,a).trim(),n.substring(a+1).trim(),o)}function l_(i){let t=i.localName,e="",r="";return t?t.indexOf("-")>-1?e=t:(r=t,e=i.getAttribute&&i.getAttribute("is")||""):(e=i.is,r=i.extends),{is:e,typeExtension:r}}function d_(i){const t=[],e=i.querySelectorAll("style");for(let r=0;r<e.length;r++){const n=e[r];o_(n)?ss||(s_(n),n.parentNode.removeChild(n)):(t.push(n.textContent),n.parentNode.removeChild(n))}return t.join("").trim()}window.ShadyDOM&&window.ShadyDOM.wrap;const zh="css-build";function h_(i){if(Fr!==void 0)return Fr;if(i.__cssBuild===void 0){const t=i.getAttribute(zh);if(t)i.__cssBuild=t;else{const e=c_(i);e!==""&&u_(i),i.__cssBuild=e}}return i.__cssBuild||""}function Fl(i){return h_(i)!==""}function c_(i){const t=i.localName==="template"?i.content.firstChild:i.firstChild;if(t instanceof Comment){const e=t.textContent.trim().split(":");if(e[0]===zh)return e[1]}return""}function u_(i){const t=i.localName==="template"?i.content.firstChild:i.firstChild;t.parentNode.removeChild(t)}const p_=/;\s*/m,f_=/^\s*(initial)|(inherit)\s*$/,Ml=/\s*!important/,wo="_-_";class m_{constructor(){this._map={}}set(t,e){t=t.trim(),this._map[t]={properties:e,dependants:{}}}get(t){return t=t.trim(),this._map[t]||null}}let qn=null;class Jt{constructor(){this._currentElement=null,this._measureElement=null,this._map=new m_}detectMixin(t){return Mp(t)}gatherStyles(t){const e=d_(t.content);if(e){const r=document.createElement("style");return r.textContent=e,t.content.insertBefore(r,t.content.firstChild),r}return null}transformTemplate(t,e){t._gatheredStyle===void 0&&(t._gatheredStyle=this.gatherStyles(t));const r=t._gatheredStyle;return r?this.transformStyle(r,e):null}transformStyle(t,e=""){let r=Nl(t);return this.transformRules(r,e),t.textContent=vo(r),r}transformCustomStyle(t){let e=Nl(t);return xr(e,r=>{r.selector===":root"&&(r.selector="html"),this.transformRule(r)}),t.textContent=vo(e),e}transformRules(t,e){this._currentElement=e,xr(t,r=>{this.transformRule(r)}),this._currentElement=null}transformRule(t){t.cssText=this.transformCssText(t.parsedCssText,t),t.selector===":root"&&(t.selector=":host > *")}transformCssText(t,e){return t=t.replace(ro,(r,n,s,o)=>this._produceCssProperties(r,n,s,o,e)),this._consumeCssProperties(t,e)}_getInitialValueForProperty(t){return this._measureElement||(this._measureElement=document.createElement("meta"),this._measureElement.setAttribute("apply-shim-measure",""),this._measureElement.style.all="initial",document.head.appendChild(this._measureElement)),window.getComputedStyle(this._measureElement).getPropertyValue(t)}_fallbacksFromPreviousRules(t){let e=t;for(;e.parent;)e=e.parent;const r={};let n=!1;return xr(e,s=>{n=n||s===t,n||s.selector===t.selector&&Object.assign(r,this._cssTextToMap(s.parsedCssText))}),r}_consumeCssProperties(t,e){let r=null;for(;r=$n.exec(t);){let n=r[0],s=r[1],o=r.index,a=o+n.indexOf("@apply"),l=o+n.length,d=t.slice(0,a),h=t.slice(l),c=e?this._fallbacksFromPreviousRules(e):{};Object.assign(c,this._cssTextToMap(d));let m=this._atApplyToCssProperties(s,c);t=`${d}${m}${h}`,$n.lastIndex=o+m.length}return t}_atApplyToCssProperties(t,e){t=t.replace(p_,"");let r=[],n=this._map.get(t);if(n||(this._map.set(t,{}),n=this._map.get(t)),n){let s,o,a;this._currentElement&&(n.dependants[this._currentElement]=!0);const l=n.properties;for(s in l)a=e&&e[s],o=[s,": var(",t,wo,s],a&&o.push(",",a.replace(Ml,"")),o.push(")"),Ml.test(l[s])&&o.push(" !important"),r.push(o.join(""))}return r.join("; ")}_replaceInitialOrInherit(t,e){let r=f_.exec(e);return r&&(e=r[1]?this._getInitialValueForProperty(t):"apply-shim-inherit"),e}_cssTextToMap(t,e=!1){let r,n,s=t.split(";"),o={};for(let a,l,d=0;d<s.length;d++)a=s[d],a&&(l=a.split(":"),l.length>1&&(r=l[0].trim(),n=l.slice(1).join(":"),e&&(n=this._replaceInitialOrInherit(r,n)),o[r]=n));return o}_invalidateMixinEntry(t){if(qn)for(let e in t.dependants)e!==this._currentElement&&qn(e)}_produceCssProperties(t,e,r,n,s){if(r&&Rh(r,(b,y)=>{y&&this._map.get(y)&&(n=`@apply ${y};`)}),!n)return t;let o=this._consumeCssProperties(""+n,s),a=t.slice(0,t.indexOf("--")),l=this._cssTextToMap(o,!0),d=l,h=this._map.get(e),c=h&&h.properties;c?d=Object.assign(Object.create(c),l):this._map.set(e,d);let m,p,g=[],f=!1;for(m in d)p=l[m],p===void 0&&(p="initial"),c&&!(m in c)&&(f=!0),g.push(`${e}${wo}${m}: ${p}`);return f&&this._invalidateMixinEntry(h),h&&(h.properties=d),r&&(a=`${t};${a}`),`${a}${g.join("; ")};`}}Jt.prototype.detectMixin=Jt.prototype.detectMixin,Jt.prototype.transformStyle=Jt.prototype.transformStyle,Jt.prototype.transformCustomStyle=Jt.prototype.transformCustomStyle,Jt.prototype.transformRules=Jt.prototype.transformRules,Jt.prototype.transformRule=Jt.prototype.transformRule,Jt.prototype.transformTemplate=Jt.prototype.transformTemplate,Jt.prototype._separator=wo,Object.defineProperty(Jt.prototype,"invalidCallback",{get:()=>qn,set(i){qn=i}});const Co={},Yn="_applyShimCurrentVersion",Zi="_applyShimNextVersion",Zn="_applyShimValidatingVersion",__=Promise.resolve();function g_(i){let t=Co[i];t&&y_(t)}function y_(i){i[Yn]=i[Yn]||0,i[Zn]=i[Zn]||0,i[Zi]=(i[Zi]||0)+1}function Nh(i){return i[Yn]===i[Zi]}function b_(i){return!Nh(i)&&i[Zn]===i[Zi]}function v_(i){i[Zn]=i[Zi],i._validating||(i._validating=!0,__.then(function(){i[Yn]=i[Zi],i._validating=!1}))}const mr=new Jt;class w_{constructor(){this.customStyleInterface=null,mr.invalidCallback=g_}ensure(){this.customStyleInterface||window.ShadyCSS.CustomStyleInterface&&(this.customStyleInterface=window.ShadyCSS.CustomStyleInterface,this.customStyleInterface.transformCallback=t=>{mr.transformCustomStyle(t)},this.customStyleInterface.validateCallback=()=>{requestAnimationFrame(()=>{this.customStyleInterface.enqueued&&this.flushCustomStyles()})})}prepareTemplate(t,e){if(this.ensure(),Fl(t))return;Co[e]=t;let r=mr.transformTemplate(t,e);t._styleAst=r}flushCustomStyles(){if(this.ensure(),!this.customStyleInterface)return;let t=this.customStyleInterface.processStyles();if(this.customStyleInterface.enqueued){for(let e=0;e<t.length;e++){let r=t[e],n=this.customStyleInterface.getStyleForCustomStyle(r);n&&mr.transformCustomStyle(n)}this.customStyleInterface.enqueued=!1}}styleSubtree(t,e){if(this.ensure(),e&&no(t,e),t.shadowRoot){this.styleElement(t);let r=t.shadowRoot.children||t.shadowRoot.childNodes;for(let n=0;n<r.length;n++)this.styleSubtree(r[n])}else{let r=t.children||t.childNodes;for(let n=0;n<r.length;n++)this.styleSubtree(r[n])}}styleElement(t){this.ensure();let{is:e}=l_(t),r=Co[e];if((!r||!Fl(r))&&r&&!Nh(r)){b_(r)||(this.prepareTemplate(r,e),v_(r));let n=t.shadowRoot;if(n){let s=n.querySelector("style");s&&(s.__cssRules=r._styleAst,s.textContent=vo(r._styleAst))}}}styleDocument(t){this.ensure(),this.styleSubtree(document.body,t)}}if(!window.ShadyCSS||!window.ShadyCSS.ScopingShim){const i=new w_;let t=window.ShadyCSS&&window.ShadyCSS.CustomStyleInterface;window.ShadyCSS={prepareTemplate(e,r,n){i.flushCustomStyles(),i.prepareTemplate(e,r)},prepareTemplateStyles(e,r,n){window.ShadyCSS.prepareTemplate(e,r,n)},prepareTemplateDom(e,r){},styleSubtree(e,r){i.flushCustomStyles(),i.styleSubtree(e,r)},styleElement(e){i.flushCustomStyles(),i.styleElement(e)},styleDocument(e){i.flushCustomStyles(),i.styleDocument(e)},getComputedStyleValue:(e,r)=>Bd(e,r),flushCustomStyles(){i.flushCustomStyles()},nativeCss:Wo,nativeShadow:ss,cssBuild:Fr,disableRuntime:Hd},t&&(window.ShadyCSS.CustomStyleInterface=t)}window.ShadyCSS.ApplyShim=mr;const C_=/:host\(:dir\((ltr|rtl)\)\)/g,A_=':host([dir="$1"])',S_=/([\s\w-#\.\[\]\*]*):dir\((ltr|rtl)\)/g,x_=':host([dir="$2"]) $1',E_=/:dir\((?:ltr|rtl)\)/,Ll=!!(window.ShadyDOM&&window.ShadyDOM.inUse),Er=[];let Ir=null,ca="";function Fh(){ca=document.documentElement.getAttribute("dir")}function Mh(i){i.__autoDirOptOut||i.setAttribute("dir",ca)}function Lh(){Fh(),ca=document.documentElement.getAttribute("dir");for(let i=0;i<Er.length;i++)Mh(Er[i])}function I_(){Ir&&Ir.takeRecords().length&&Lh()}const T_=pe(i=>{Ll||Ir||(Fh(),Ir=new MutationObserver(Lh),Ir.observe(document.documentElement,{attributes:!0,attributeFilter:["dir"]}));const t=ah(i);class e extends t{static _processStyleText(n,s){return n=t._processStyleText.call(this,n,s),!Ll&&E_.test(n)&&(n=this._replaceDirInCssText(n),this.__activateDir=!0),n}static _replaceDirInCssText(n){let s=n;return s=s.replace(C_,A_),s=s.replace(S_,x_),s}constructor(){super(),this.__autoDirOptOut=!1}ready(){super.ready(),this.__autoDirOptOut=this.hasAttribute("dir")}connectedCallback(){t.prototype.connectedCallback&&super.connectedCallback(),this.constructor.__activateDir&&(I_(),Er.push(this),Mh(this))}disconnectedCallback(){if(t.prototype.disconnectedCallback&&super.disconnectedCallback(),this.constructor.__activateDir){const n=Er.indexOf(this);n>-1&&Er.splice(n,1)}}}return e.__activateDir=!1,e});function $l(){document.body.removeAttribute("unresolved")}function sr(i,t,e){return{index:i,removed:t,addedCount:e}}document.readyState==="interactive"||document.readyState==="complete"?$l():window.addEventListener("DOMContentLoaded",$l);const $h=0,Bh=1,Ao=2,So=3;function P_(i,t,e,r,n,s){let o=s-n+1,a=e-t+1,l=new Array(o);for(let d=0;d<o;d++)l[d]=new Array(a),l[d][0]=d;for(let d=0;d<a;d++)l[0][d]=d;for(let d=1;d<o;d++)for(let h=1;h<a;h++)if(ua(i[t+h-1],r[n+d-1]))l[d][h]=l[d-1][h-1];else{let c=l[d-1][h]+1,m=l[d][h-1]+1;l[d][h]=c<m?c:m}return l}function O_(i){let t=i.length-1,e=i[0].length-1,r=i[t][e],n=[];for(;t>0||e>0;){if(t==0){n.push(Ao),e--;continue}if(e==0){n.push(So),t--;continue}let s,o=i[t-1][e-1],a=i[t-1][e],l=i[t][e-1];s=a<l?a<o?a:o:l<o?l:o,s==o?(o==r?n.push($h):(n.push(Bh),r=o),t--,e--):s==a?(n.push(So),t--,r=a):(n.push(Ao),e--,r=l)}return n.reverse(),n}function k_(i,t,e,r,n,s){let o,a=0,l=0,d=Math.min(e-t,s-n);if(t==0&&n==0&&(a=D_(i,r,d)),e==i.length&&s==r.length&&(l=R_(i,r,d-a)),n+=a,s-=l,(e-=l)-(t+=a)==0&&s-n==0)return[];if(t==e){for(o=sr(t,[],0);n<s;)o.removed.push(r[n++]);return[o]}if(n==s)return[sr(t,[],e-t)];let h=O_(P_(i,t,e,r,n,s));o=void 0;let c=[],m=t,p=n;for(let g=0;g<h.length;g++)switch(h[g]){case $h:o&&(c.push(o),o=void 0),m++,p++;break;case Bh:o||(o=sr(m,[],0)),o.addedCount++,m++,o.removed.push(r[p]),p++;break;case Ao:o||(o=sr(m,[],0)),o.addedCount++,m++;break;case So:o||(o=sr(m,[],0)),o.removed.push(r[p]),p++}return o&&c.push(o),c}function D_(i,t,e){for(let r=0;r<e;r++)if(!ua(i[r],t[r]))return r;return e}function R_(i,t,e){let r=i.length,n=t.length,s=0;for(;s<e&&ua(i[--r],t[--n]);)s++;return s}function Hh(i,t){return k_(i,0,i.length,t,0,t.length)}function ua(i,t){return i===t}function Ai(i){return i.localName==="slot"}let $e=class{static getFlattenedNodes(i){const t=it(i);return Ai(i)?t.assignedNodes({flatten:!0}):Array.from(t.childNodes).map(e=>Ai(e)?it(e).assignedNodes({flatten:!0}):[e]).reduce((e,r)=>e.concat(r),[])}constructor(i,t){this._shadyChildrenObserver=null,this._nativeChildrenObserver=null,this._connected=!1,this._target=i,this.callback=t,this._effectiveNodes=[],this._observer=null,this._scheduled=!1,this._boundSchedule=()=>{this._schedule()},this.connect(),this._schedule()}connect(){Ai(this._target)?this._listenSlots([this._target]):it(this._target).children&&(this._listenSlots(it(this._target).children),window.ShadyDOM?this._shadyChildrenObserver=window.ShadyDOM.observeChildren(this._target,i=>{this._processMutations(i)}):(this._nativeChildrenObserver=new MutationObserver(i=>{this._processMutations(i)}),this._nativeChildrenObserver.observe(this._target,{childList:!0}))),this._connected=!0}disconnect(){Ai(this._target)?this._unlistenSlots([this._target]):it(this._target).children&&(this._unlistenSlots(it(this._target).children),window.ShadyDOM&&this._shadyChildrenObserver?(window.ShadyDOM.unobserveChildren(this._shadyChildrenObserver),this._shadyChildrenObserver=null):this._nativeChildrenObserver&&(this._nativeChildrenObserver.disconnect(),this._nativeChildrenObserver=null)),this._connected=!1}_schedule(){this._scheduled||(this._scheduled=!0,be.run(()=>this.flush()))}_processMutations(i){this._processSlotMutations(i),this.flush()}_processSlotMutations(i){if(i)for(let t=0;t<i.length;t++){let e=i[t];e.addedNodes&&this._listenSlots(e.addedNodes),e.removedNodes&&this._unlistenSlots(e.removedNodes)}}flush(){if(!this._connected)return!1;window.ShadyDOM&&ShadyDOM.flush(),this._nativeChildrenObserver?this._processSlotMutations(this._nativeChildrenObserver.takeRecords()):this._shadyChildrenObserver&&this._processSlotMutations(this._shadyChildrenObserver.takeRecords()),this._scheduled=!1;let i={target:this._target,addedNodes:[],removedNodes:[]},t=this.constructor.getFlattenedNodes(this._target),e=Hh(t,this._effectiveNodes);for(let n,s=0;s<e.length&&(n=e[s]);s++)for(let o,a=0;a<n.removed.length&&(o=n.removed[a]);a++)i.removedNodes.push(o);for(let n,s=0;s<e.length&&(n=e[s]);s++)for(let o=n.index;o<n.index+n.addedCount;o++)i.addedNodes.push(t[o]);this._effectiveNodes=t;let r=!1;return(i.addedNodes.length||i.removedNodes.length)&&(r=!0,this.callback.call(this._target,i)),r}_listenSlots(i){for(let t=0;t<i.length;t++){let e=i[t];Ai(e)&&e.addEventListener("slotchange",this._boundSchedule)}}_unlistenSlots(i){for(let t=0;t<i.length;t++){let e=i[t];Ai(e)&&e.removeEventListener("slotchange",this._boundSchedule)}}};const Si=Element.prototype,z_=Si.matches||Si.matchesSelector||Si.mozMatchesSelector||Si.msMatchesSelector||Si.oMatchesSelector||Si.webkitMatchesSelector,jh=function(i,t){return z_.call(i,t)};class Ct{constructor(t){window.ShadyDOM&&window.ShadyDOM.inUse&&window.ShadyDOM.patch(t),this.node=t}observeNodes(t){return new $e(this.node,t)}unobserveNodes(t){t.disconnect()}notifyObserver(){}deepContains(t){if(it(this.node).contains(t))return!0;let e=t,r=t.ownerDocument;for(;e&&e!==r&&e!==this.node;)e=it(e).parentNode||it(e).host;return e===this.node}getOwnerRoot(){return it(this.node).getRootNode()}getDistributedNodes(){return this.node.localName==="slot"?it(this.node).assignedNodes({flatten:!0}):[]}getDestinationInsertionPoints(){let t=[],e=it(this.node).assignedSlot;for(;e;)t.push(e),e=it(e).assignedSlot;return t}importNode(t,e){let r=this.node instanceof Document?this.node:this.node.ownerDocument;return it(r).importNode(t,e)}getEffectiveChildNodes(){return $e.getFlattenedNodes(this.node)}queryDistributedElements(t){let e=this.getEffectiveChildNodes(),r=[];for(let n,s=0,o=e.length;s<o&&(n=e[s]);s++)n.nodeType===Node.ELEMENT_NODE&&jh(n,t)&&r.push(n);return r}get activeElement(){let t=this.node;return t._activeElement!==void 0?t._activeElement:t.activeElement}}function N_(i,t){for(let e=0;e<t.length;e++){let r=t[e];i[r]=function(){return this.node[r].apply(this.node,arguments)}}}function Bl(i,t){for(let e=0;e<t.length;e++){let r=t[e];Object.defineProperty(i,r,{get:function(){return this.node[r]},configurable:!0})}}function F_(i,t){for(let e=0;e<t.length;e++){let r=t[e];Object.defineProperty(i,r,{get:function(){return this.node[r]},set:function(n){this.node[r]=n},configurable:!0})}}class xo{constructor(t){this.event=t}get rootTarget(){return this.path[0]}get localTarget(){return this.event.target}get path(){return this.event.composedPath()}}Ct.prototype.cloneNode,Ct.prototype.appendChild,Ct.prototype.insertBefore,Ct.prototype.removeChild,Ct.prototype.replaceChild,Ct.prototype.setAttribute,Ct.prototype.removeAttribute,Ct.prototype.querySelector,Ct.prototype.querySelectorAll,Ct.prototype.parentNode,Ct.prototype.firstChild,Ct.prototype.lastChild,Ct.prototype.nextSibling,Ct.prototype.previousSibling,Ct.prototype.firstElementChild,Ct.prototype.lastElementChild,Ct.prototype.nextElementSibling,Ct.prototype.previousElementSibling,Ct.prototype.childNodes,Ct.prototype.children,Ct.prototype.classList,Ct.prototype.textContent,Ct.prototype.innerHTML;let Eo=Ct;if(window.ShadyDOM&&window.ShadyDOM.inUse&&window.ShadyDOM.noPatch&&window.ShadyDOM.Wrapper){class i extends window.ShadyDOM.Wrapper{}Object.getOwnPropertyNames(Ct.prototype).forEach(t=>{t!="activeElement"&&(i.prototype[t]=Ct.prototype[t])}),Bl(i.prototype,["classList"]),Eo=i,Object.defineProperties(xo.prototype,{localTarget:{get(){const t=this.event.currentTarget,e=t&&si(t).getOwnerRoot(),r=this.path;for(let n=0;n<r.length;n++){const s=r[n];if(si(s).getOwnerRoot()===e)return s}},configurable:!0},path:{get(){return window.ShadyDOM.composedPath(this.event)},configurable:!0}})}else N_(Ct.prototype,["cloneNode","appendChild","insertBefore","removeChild","replaceChild","setAttribute","removeAttribute","querySelector","querySelectorAll"]),Bl(Ct.prototype,["parentNode","firstChild","lastChild","nextSibling","previousSibling","firstElementChild","lastElementChild","nextElementSibling","previousElementSibling","childNodes","children","classList"]),F_(Ct.prototype,["textContent","innerHTML","className"]);const si=function(i){if((i=i||document)instanceof Eo||i instanceof xo)return i;let t=i.__domApi;return t||(t=i instanceof Event?new xo(i):new Eo(i),i.__domApi=t),t},Ls=window.ShadyDOM,Hl=window.ShadyCSS;function jl(i,t){return it(i).getRootNode()===t}function M_(i,t=!1){if(!Ls||!Hl||!Ls.handlesDynamicScoping)return null;const e=Hl.ScopingShim;if(!e)return null;const r=e.scopeForNode(i),n=it(i).getRootNode(),s=o=>{if(!jl(o,n))return;const a=Array.from(Ls.nativeMethods.querySelectorAll.call(o,"*"));a.push(o);for(let l=0;l<a.length;l++){const d=a[l];if(!jl(d,n))continue;const h=e.currentScopeForNode(d);h!==r&&(h!==""&&e.unscopeNode(d,h),e.scopeNode(d,r))}};if(s(i),t){const o=new MutationObserver(a=>{for(let l=0;l<a.length;l++){const d=a[l];for(let h=0;h<d.addedNodes.length;h++){const c=d.addedNodes[h];c.nodeType===Node.ELEMENT_NODE&&s(c)}}});return o.observe(i,{childList:!0,subtree:!0}),o}return null}const $s="disable-upgrade",Uh=i=>{for(;i;){const t=Object.getOwnPropertyDescriptor(i,"observedAttributes");if(t)return t.get;i=Object.getPrototypeOf(i.prototype).constructor}return()=>[]};pe(i=>{const t=ds(i);let e=Uh(t);class r extends t{constructor(){super(),this.__isUpgradeDisabled}static get observedAttributes(){return e.call(this).concat($s)}_initializeProperties(){this.hasAttribute($s)?this.__isUpgradeDisabled=!0:super._initializeProperties()}_enableProperties(){this.__isUpgradeDisabled||super._enableProperties()}_canApplyPropertyDefault(s){return super._canApplyPropertyDefault(s)&&!(this.__isUpgradeDisabled&&this._isPropertyPending(s))}attributeChangedCallback(s,o,a,l){s==$s?this.__isUpgradeDisabled&&a==null&&(super._initializeProperties(),this.__isUpgradeDisabled=!1,it(this).isConnected&&super.connectedCallback()):super.attributeChangedCallback(s,o,a,l)}connectedCallback(){this.__isUpgradeDisabled||super.connectedCallback()}disconnectedCallback(){this.__isUpgradeDisabled||super.disconnectedCallback()}}return r});const gn="disable-upgrade";let L_=window.ShadyCSS;const Vh=pe(i=>{const t=tn(ds(i)),e=_o?t:T_(t),r=Uh(e),n={x:"pan-x",y:"pan-y",none:"none",all:"auto"};class s extends e{constructor(){super(),this.isAttached,this.__boundListeners,this._debouncers,this.__isUpgradeDisabled,this.__needsAttributesAtConnected,this._legacyForceObservedAttributes}static get importMeta(){return this.prototype.importMeta}created(){}__attributeReaction(a,l,d){(this.__dataAttributes&&this.__dataAttributes[a]||a===gn)&&this.attributeChangedCallback(a,l,d,null)}setAttribute(a,l){if(fn&&!this._legacyForceObservedAttributes){const d=this.getAttribute(a);super.setAttribute(a,l),this.__attributeReaction(a,d,String(l))}else super.setAttribute(a,l)}removeAttribute(a){if(fn&&!this._legacyForceObservedAttributes){const l=this.getAttribute(a);super.removeAttribute(a),this.__attributeReaction(a,l,null)}else super.removeAttribute(a)}static get observedAttributes(){return fn&&!this.prototype._legacyForceObservedAttributes?(this.hasOwnProperty(JSCompiler_renameProperty("__observedAttributes",this))||(this.__observedAttributes=[],this.prototype,void 0),this.__observedAttributes):r.call(this).concat(gn)}_enableProperties(){this.__isUpgradeDisabled||super._enableProperties()}_canApplyPropertyDefault(a){return super._canApplyPropertyDefault(a)&&!(this.__isUpgradeDisabled&&this._isPropertyPending(a))}connectedCallback(){this.__needsAttributesAtConnected&&this._takeAttributes(),this.__isUpgradeDisabled||(super.connectedCallback(),this.isAttached=!0,this.attached())}attached(){}disconnectedCallback(){this.__isUpgradeDisabled||(super.disconnectedCallback(),this.isAttached=!1,this.detached())}detached(){}attributeChangedCallback(a,l,d,h){l!==d&&(a==gn?this.__isUpgradeDisabled&&d==null&&(this._initializeProperties(),this.__isUpgradeDisabled=!1,it(this).isConnected&&this.connectedCallback()):(super.attributeChangedCallback(a,l,d,h),this.attributeChanged(a,l,d)))}attributeChanged(a,l,d){}_initializeProperties(){if(Mr&&this.hasAttribute(gn))this.__isUpgradeDisabled=!0;else{let a=Object.getPrototypeOf(this);a.hasOwnProperty(JSCompiler_renameProperty("__hasRegisterFinished",a))||(this._registered(),a.__hasRegisterFinished=!0),super._initializeProperties(),this.root=this,this.created(),fn&&!this._legacyForceObservedAttributes&&(this.hasAttributes()?this._takeAttributes():this.parentNode||(this.__needsAttributesAtConnected=!0)),this._applyListeners()}}_takeAttributes(){const a=this.attributes;for(let l=0,d=a.length;l<d;l++){const h=a[l];this.__attributeReaction(h.name,null,h.value)}}_registered(){}ready(){this._ensureAttributes(),super.ready()}_ensureAttributes(){}_applyListeners(){}serialize(a){return this._serializeValue(a)}deserialize(a,l){return this._deserializeValue(a,l)}reflectPropertyToAttribute(a,l,d){this._propertyToAttribute(a,l,d)}serializeValueToAttribute(a,l,d){this._valueToNodeAttribute(d||this,a,l)}extend(a,l){if(!a||!l)return a||l;let d=Object.getOwnPropertyNames(l);for(let h,c=0;c<d.length&&(h=d[c]);c++){let m=Object.getOwnPropertyDescriptor(l,h);m&&Object.defineProperty(a,h,m)}return a}mixin(a,l){for(let d in l)a[d]=l[d];return a}chainObject(a,l){return a&&l&&a!==l&&(a.__proto__=l),a}instanceTemplate(a){let l=this.constructor._contentForTemplate(a);return document.importNode(l,!0)}fire(a,l,d){d=d||{},l=l??{};let h=new Event(a,{bubbles:d.bubbles===void 0||d.bubbles,cancelable:!!d.cancelable,composed:d.composed===void 0||d.composed});h.detail=l;let c=d.node||this;return it(c).dispatchEvent(h),h}listen(a,l,d){a=a||this;let h=this.__boundListeners||(this.__boundListeners=new WeakMap),c=h.get(a);c||(c={},h.set(a,c));let m=l+d;c[m]||(c[m]=this._addMethodEventListenerToNode(a,l,d,this))}unlisten(a,l,d){a=a||this;let h=this.__boundListeners&&this.__boundListeners.get(a),c=l+d,m=h&&h[c];m&&(this._removeEventListenerFromNode(a,l,m),h[c]=null)}setScrollDirection(a,l){vh(l||this,n[a]||"auto")}$$(a){return this.root.querySelector(a)}get domHost(){let a=it(this).getRootNode();return a instanceof DocumentFragment?a.host:a}distributeContent(){const a=si(this);window.ShadyDOM&&a.shadowRoot&&ShadyDOM.flush()}getEffectiveChildNodes(){return si(this).getEffectiveChildNodes()}queryDistributedElements(a){return si(this).queryDistributedElements(a)}getEffectiveChildren(){return this.getEffectiveChildNodes().filter(function(a){return a.nodeType===Node.ELEMENT_NODE})}getEffectiveTextContent(){let a=this.getEffectiveChildNodes(),l=[];for(let d,h=0;d=a[h];h++)d.nodeType!==Node.COMMENT_NODE&&l.push(d.textContent);return l.join("")}queryEffectiveChildren(a){let l=this.queryDistributedElements(a);return l&&l[0]}queryAllEffectiveChildren(a){return this.queryDistributedElements(a)}getContentChildNodes(a){let l=this.root.querySelector(a||"slot");return l?si(l).getDistributedNodes():[]}getContentChildren(a){return this.getContentChildNodes(a).filter(function(l){return l.nodeType===Node.ELEMENT_NODE})}isLightDescendant(a){const l=this;return l!==a&&it(l).contains(a)&&it(l).getRootNode()===it(a).getRootNode()}isLocalDescendant(a){return this.root===it(a).getRootNode()}scopeSubtree(a,l=!1){return M_(a,l)}getComputedStyleValue(a){return L_.getComputedStyleValue(this,a)}debounce(a,l,d){return this._debouncers=this._debouncers||{},this._debouncers[a]=Rt.debounce(this._debouncers[a],d>0?xe.after(d):be,l.bind(this))}isDebouncerActive(a){this._debouncers=this._debouncers||{};let l=this._debouncers[a];return!(!l||!l.isActive())}flushDebouncer(a){this._debouncers=this._debouncers||{};let l=this._debouncers[a];l&&l.flush()}cancelDebouncer(a){this._debouncers=this._debouncers||{};let l=this._debouncers[a];l&&l.cancel()}async(a,l){return l>0?xe.run(a.bind(this),l):~be.run(a.bind(this))}cancelAsync(a){a<0?be.cancel(~a):xe.cancel(a)}create(a,l){let d=document.createElement(a);if(l)if(d.setProperties)d.setProperties(l);else for(let h in l)d[h]=l[h];return d}elementMatches(a,l){return jh(l||this,a)}toggleAttribute(a,l){let d=this;return arguments.length===3&&(d=arguments[2]),arguments.length==1&&(l=!d.hasAttribute(a)),l?(it(d).setAttribute(a,""),!0):(it(d).removeAttribute(a),!1)}toggleClass(a,l,d){d=d||this,arguments.length==1&&(l=!d.classList.contains(a)),l?d.classList.add(a):d.classList.remove(a)}transform(a,l){(l=l||this).style.webkitTransform=a,l.style.transform=a}translate3d(a,l,d,h){h=h||this,this.transform("translate3d("+a+","+l+","+d+")",h)}arrayDelete(a,l){let d;if(Array.isArray(a)){if(d=a.indexOf(l),d>=0)return a.splice(d,1)}else if(d=Qt(this,a).indexOf(l),d>=0)return this.splice(a,d,1);return null}_logger(a,l){switch(Array.isArray(l)&&l.length===1&&Array.isArray(l[0])&&(l=l[0]),a){case"log":case"warn":case"error":console[a](...l)}}_log(...a){this._logger("log",a)}_warn(...a){this._logger("warn",a)}_error(...a){this._logger("error",a)}_logf(a,...l){return["[%s::%s]",this.is,a,...l]}}return s.prototype.is="",s}),$_={attached:!0,detached:!0,ready:!0,created:!0,beforeRegister:!0,registered:!0,attributeChanged:!0,listeners:!0,hostAttributes:!0},Wh={attached:!0,detached:!0,ready:!0,created:!0,beforeRegister:!0,registered:!0,attributeChanged:!0,behaviors:!0,_noAccessors:!0},B_=Object.assign({listeners:!0,hostAttributes:!0,properties:!0,observers:!0},Wh);function H_(i,t,e){const r=i._noAccessors,n=Object.getOwnPropertyNames(i);for(let s=0;s<n.length;s++){let o=n[s];if(!(o in e))if(r)t[o]=i[o];else{let a=Object.getOwnPropertyDescriptor(i,o);a&&(a.configurable=!0,Object.defineProperty(t,o,a))}}}function j_(i,t,e){for(let r=0;r<t.length;r++)Gh(i,t[r],e,B_)}function Gh(i,t,e,r){H_(t,i,r);for(let n in $_)t[n]&&(e[n]=e[n]||[],e[n].push(t[n]))}function qh(i,t,e){t=t||[];for(let r=i.length-1;r>=0;r--){let n=i[r];n?Array.isArray(n)?qh(n,t):t.indexOf(n)<0&&(!e||e.indexOf(n)<0)&&t.unshift(n):console.warn("behavior is null, check for missing or 404 import")}return t}function Ul(i,t){for(const e in t){const r=i[e],n=t[e];i[e]=!("value"in n)&&r&&"value"in r?Object.assign({value:r.value},n):n}}const Vl=Vh(HTMLElement);function U_(i,t,e){let r;const n={};class s extends t{static _finalizeClass(){if(this.hasOwnProperty(JSCompiler_renameProperty("generatedFrom",this))){if(r)for(let l,d=0;d<r.length;d++)l=r[d],l.properties&&this.createProperties(l.properties),l.observers&&this.createObservers(l.observers,l.properties);i.properties&&this.createProperties(i.properties),i.observers&&this.createObservers(i.observers,i.properties),this._prepareTemplate()}else t._finalizeClass.call(this)}static get properties(){const l={};if(r)for(let d=0;d<r.length;d++)Ul(l,r[d].properties);return Ul(l,i.properties),l}static get observers(){let l=[];if(r)for(let d,h=0;h<r.length;h++)d=r[h],d.observers&&(l=l.concat(d.observers));return i.observers&&(l=l.concat(i.observers)),l}created(){super.created();const l=n.created;if(l)for(let d=0;d<l.length;d++)l[d].call(this)}_registered(){const l=s.prototype;if(!l.hasOwnProperty(JSCompiler_renameProperty("__hasRegisterFinished",l))){l.__hasRegisterFinished=!0,super._registered(),Mr&&o(l);const d=Object.getPrototypeOf(this);let h=n.beforeRegister;if(h)for(let c=0;c<h.length;c++)h[c].call(d);if(h=n.registered,h)for(let c=0;c<h.length;c++)h[c].call(d)}}_applyListeners(){super._applyListeners();const l=n.listeners;if(l)for(let d=0;d<l.length;d++){const h=l[d];if(h)for(let c in h)this._addMethodEventListenerToNode(this,c,h[c])}}_ensureAttributes(){const l=n.hostAttributes;if(l)for(let d=l.length-1;d>=0;d--){const h=l[d];for(let c in h)this._ensureAttribute(c,h[c])}super._ensureAttributes()}ready(){super.ready();let l=n.ready;if(l)for(let d=0;d<l.length;d++)l[d].call(this)}attached(){super.attached();let l=n.attached;if(l)for(let d=0;d<l.length;d++)l[d].call(this)}detached(){super.detached();let l=n.detached;if(l)for(let d=0;d<l.length;d++)l[d].call(this)}attributeChanged(l,d,h){super.attributeChanged();let c=n.attributeChanged;if(c)for(let m=0;m<c.length;m++)c[m].call(this,l,d,h)}}if(e){Array.isArray(e)||(e=[e]);let a=t.prototype.behaviors;r=qh(e,null,a),s.prototype.behaviors=a?a.concat(e):r}const o=a=>{r&&j_(a,r,n),Gh(a,i,n,Wh)};return Mr||o(s.prototype),s.generatedFrom=i,s}const V_=function(i,t){i||console.warn("Polymer.Class requires `info` argument");let e=t?t(Vl):Vl;return e=U_(i,e,i.behaviors),e.is=e.prototype.is=i.is,e};function pa(i,t,e,r,n){let s;n&&(s=typeof e=="object"&&e!==null,s&&(r=i.__dataTemp[t]));let o=r!==e&&(r==r||e==e);return s&&o&&(i.__dataTemp[t]=e),o}const fa=pe(i=>{class t extends i{_shouldPropertyChange(r,n,s){return pa(this,r,n,s,!0)}}return t}),Yh=pe(i=>{class t extends i{static get properties(){return{mutableData:Boolean}}_shouldPropertyChange(r,n,s){return pa(this,r,n,s,this.mutableData)}}return t});fa._mutablePropertyChange=pa;let Io=null;function To(){return Io}To.prototype=Object.create(HTMLTemplateElement.prototype,{constructor:{value:To,writable:!0}});const Zh=ls(To),W_=fa(Zh);function G_(i,t){Io=i,Object.setPrototypeOf(i,t.prototype),new t,Io=null}const q_=ls(class{});function Xh(i,t){for(let e=0;e<t.length;e++){let r=t[e];if(!!i!=!!r.__hideTemplateChildren__)if(r.nodeType===Node.TEXT_NODE)i?(r.__polymerTextContent__=r.textContent,r.textContent=""):r.textContent=r.__polymerTextContent__;else if(r.localName==="slot")if(i)r.__polymerReplaced__=document.createComment("hidden-slot"),it(it(r).parentNode).replaceChild(r.__polymerReplaced__,r);else{const n=r.__polymerReplaced__;n&&it(it(n).parentNode).replaceChild(r,n)}else r.style&&(i?(r.__polymerDisplay__=r.style.display,r.style.display="none"):r.style.display=r.__polymerDisplay__);r.__hideTemplateChildren__=i,r._showHideChildren&&r._showHideChildren(i)}}class ii extends q_{constructor(t){super(),this._configureProperties(t),this.root=this._stampTemplate(this.__dataHost);let e=[];this.children=e;for(let n=this.root.firstChild;n;n=n.nextSibling)e.push(n),n.__templatizeInstance=this;this.__templatizeOwner&&this.__templatizeOwner.__hideTemplateChildren__&&this._showHideChildren(!0);let r=this.__templatizeOptions;(t&&r.instanceProps||!r.instanceProps)&&this._enableProperties()}_configureProperties(t){if(this.__templatizeOptions.forwardHostProp)for(let e in this.__hostProps)this._setPendingProperty(e,this.__dataHost["_host_"+e]);for(let e in t)this._setPendingProperty(e,t[e])}forwardHostProp(t,e){this._setPendingPropertyOrPath(t,e,!1,!0)&&this.__dataHost._enqueueClient(this)}_addEventListenerToNode(t,e,r){if(this._methodHost&&this.__templatizeOptions.parentModel)this._methodHost._addEventListenerToNode(t,e,n=>{n.model=this,r(n)});else{let n=this.__dataHost.__dataHost;n&&n._addEventListenerToNode(t,e,r)}}_showHideChildren(t){Xh(t,this.children)}_setUnmanagedPropertyToNode(t,e,r){t.__hideTemplateChildren__&&t.nodeType==Node.TEXT_NODE&&e=="textContent"?t.__polymerTextContent__=r:super._setUnmanagedPropertyToNode(t,e,r)}get parentModel(){let t=this.__parentModel;if(!t){let e;t=this;do t=t.__dataHost.__dataHost;while((e=t.__templatizeOptions)&&!e.parentModel);this.__parentModel=t}return t}dispatchEvent(t){return!0}}ii.prototype.__dataHost,ii.prototype.__templatizeOptions,ii.prototype._methodHost,ii.prototype.__templatizeOwner,ii.prototype.__hostProps;const Y_=fa(ii);function Wl(i){let t=i.__dataHost;return t&&t._methodHost||t}function Z_(i,t,e){let r=e.mutableData?Y_:ii;Gr.mixin&&(r=Gr.mixin(r));let n=class extends r{};return n.prototype.__templatizeOptions=e,n.prototype._bindTemplate(i),K_(n,i,t,e),n}function X_(i,t,e,r){let n=e.forwardHostProp;if(n&&t.hasHostProps){const s=i.localName=="template";let o=t.templatizeTemplateClass;if(!o){if(s){let l=e.mutableData?W_:Zh;class d extends l{}o=t.templatizeTemplateClass=d}else{const l=i.constructor;class d extends l{}o=t.templatizeTemplateClass=d}let a=t.hostProps;for(let l in a)o.prototype._addPropertyEffect("_host_"+l,o.prototype.PROPERTY_EFFECT_TYPES.PROPAGATE,{fn:J_(l,n)}),o.prototype._createNotifyingProperty("_host_"+l);jd&&r&&eg(t,e,r)}if(i.__dataProto&&Object.assign(i.__data,i.__dataProto),s)G_(i,o),i.__dataTemp={},i.__dataPending=null,i.__dataOld=null,i._enableProperties();else{Object.setPrototypeOf(i,o.prototype);const a=t.hostProps;for(let l in a)if(l="_host_"+l,l in i){const d=i[l];delete i[l],i.__data[l]=d}}}}function J_(i,t){return function(e,r,n){t.call(e.__templatizeOwner,r.substring(6),n[r])}}function K_(i,t,e,r){let n=e.hostProps||{};for(let s in r.instanceProps){delete n[s];let o=r.notifyInstanceProp;o&&i.prototype._addPropertyEffect(s,i.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,{fn:Q_(s,o)})}if(r.forwardHostProp&&t.__dataHost)for(let s in n)e.hasHostProps||(e.hasHostProps=!0),i.prototype._addPropertyEffect(s,i.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,{fn:tg()})}function Q_(i,t){return function(e,r,n){t.call(e.__templatizeOwner,e,r,n[r])}}function tg(){return function(i,t,e){i.__dataHost._setPendingPropertyOrPath("_host_"+t,e[t],!0,!0)}}function Gr(i,t,e){if(Gi&&!Wl(i))throw new Error("strictTemplatePolicy: template owner not trusted");if(e=e||{},i.__templatizeOwner)throw new Error("A <template> can only be templatized once");i.__templatizeOwner=t;let r=(t?t.constructor:ii)._parseTemplate(i),n=r.templatizeInstanceClass;n||(n=Z_(i,r,e),r.templatizeInstanceClass=n);const s=Wl(i);X_(i,r,e,s);let o=class extends n{};return o.prototype._methodHost=s,o.prototype.__dataHost=i,o.prototype.__templatizeOwner=t,o.prototype.__hostProps=r.hostProps,o}function eg(i,t,e){const r=e.constructor._properties,{propertyEffects:n}=i,{instanceProps:s}=t;for(let o in n)if(!(r[o]||s&&s[o])){const a=n[o];for(let l=0;l<a.length;l++){const{part:d}=a[l].info;if(!d.signature||!d.signature.static){console.warn(`Property '${o}' used in template but not declared in 'properties'; attribute will not be observed.`);break}}}}function ig(i,t){let e;for(;t;)if(e=t.__dataHost?t:t.__templatizeInstance){if(e.__dataHost==i)return e;t=e.__dataHost}else t=it(t).parentNode;return null}let Gl=!1;function ma(){if(Mr&&!Yo){if(!Gl){Gl=!0;const i=document.createElement("style");i.textContent="dom-bind,dom-if,dom-repeat{display:none;}",document.head.appendChild(i)}return!0}return!1}const rg=tn(Yh(ls(HTMLElement)));class ng extends rg{static get observedAttributes(){return["mutable-data"]}constructor(){if(super(),Gi)throw new Error("strictTemplatePolicy: dom-bind not allowed");this.root=null,this.$=null,this.__children=null}attributeChangedCallback(t,e,r,n){this.mutableData=!0}connectedCallback(){ma()||(this.style.display="none"),this.render()}disconnectedCallback(){this.__removeChildren()}__insertChildren(){it(it(this).parentNode).insertBefore(this.root,this)}__removeChildren(){if(this.__children)for(let t=0;t<this.__children.length;t++)this.root.appendChild(this.__children[t])}render(){let t;if(!this.__children){if(t=t||this.querySelector("template"),!t){let e=new MutationObserver(()=>{if(t=this.querySelector("template"),!t)throw new Error("dom-bind requires a <template> child");e.disconnect(),this.render()});return void e.observe(this,{childList:!0})}this.root=this._stampTemplate(t),this.$=this.root.$,this.__children=[];for(let e=this.root.firstChild;e;e=e.nextSibling)this.__children[this.__children.length]=e;this._enableProperties()}this.__insertChildren(),this.dispatchEvent(new CustomEvent("dom-change",{bubbles:!0,composed:!0}))}}customElements.define("dom-bind",ng);const sg=Yh(Ve);class ql extends sg{static get is(){return"dom-repeat"}static get template(){return null}static get properties(){return{items:{type:Array},as:{type:String,value:"item"},indexAs:{type:String,value:"index"},itemsIndexAs:{type:String,value:"itemsIndex"},sort:{type:Function,observer:"__sortChanged"},filter:{type:Function,observer:"__filterChanged"},observe:{type:String,observer:"__observeChanged"},delay:Number,renderedItemCount:{type:Number,notify:!oo,readOnly:!0},initialCount:{type:Number},targetFramerate:{type:Number,value:20},_targetFrameTime:{type:Number,computed:"__computeFrameTime(targetFramerate)"},notifyDomChange:{type:Boolean},reuseChunkedInstances:{type:Boolean}}}static get observers(){return["__itemsChanged(items.*)"]}constructor(){super(),this.__instances=[],this.__renderDebouncer=null,this.__itemsIdxToInstIdx={},this.__chunkCount=null,this.__renderStartTime=null,this.__itemsArrayChanged=!1,this.__shouldMeasureChunk=!1,this.__shouldContinueChunking=!1,this.__chunkingId=0,this.__sortFn=null,this.__filterFn=null,this.__observePaths=null,this.__ctor=null,this.__isDetached=!0,this.template=null,this._templateInfo}disconnectedCallback(){super.disconnectedCallback(),this.__isDetached=!0;for(let t=0;t<this.__instances.length;t++)this.__detachInstance(t)}connectedCallback(){if(super.connectedCallback(),ma()||(this.style.display="none"),this.__isDetached){this.__isDetached=!1;let t=it(it(this).parentNode);for(let e=0;e<this.__instances.length;e++)this.__attachInstance(e,t)}}__ensureTemplatized(){if(!this.__ctor){const t=this;let e=this.template=t._templateInfo?t:this.querySelector("template");if(!e){let n=new MutationObserver(()=>{if(!this.querySelector("template"))throw new Error("dom-repeat requires a <template> child");n.disconnect(),this.__render()});return n.observe(this,{childList:!0}),!1}let r={};r[this.as]=!0,r[this.indexAs]=!0,r[this.itemsIndexAs]=!0,this.__ctor=Gr(e,this,{mutableData:this.mutableData,parentModel:!0,instanceProps:r,forwardHostProp:function(n,s){let o=this.__instances;for(let a,l=0;l<o.length&&(a=o[l]);l++)a.forwardHostProp(n,s)},notifyInstanceProp:function(n,s,o){if(xf(this.as,s)){let a=n[this.itemsIndexAs];s==this.as&&(this.items[a]=o);let l=jr(this.as,`${JSCompiler_renameProperty("items",this)}.${a}`,s);this.notifyPath(l,o)}}})}return!0}__getMethodHost(){return this.__dataHost._methodHost||this.__dataHost}__functionFromPropertyValue(t){if(typeof t=="string"){let e=t,r=this.__getMethodHost();return function(){return r[e].apply(r,arguments)}}return t}__sortChanged(t){this.__sortFn=this.__functionFromPropertyValue(t),this.items&&this.__debounceRender(this.__render)}__filterChanged(t){this.__filterFn=this.__functionFromPropertyValue(t),this.items&&this.__debounceRender(this.__render)}__computeFrameTime(t){return Math.ceil(1e3/t)}__observeChanged(){this.__observePaths=this.observe&&this.observe.replace(".*",".").split(" ")}__handleObservedPaths(t){if(this.__sortFn||this.__filterFn)if(t){if(this.__observePaths){let e=this.__observePaths;for(let r=0;r<e.length;r++)t.indexOf(e[r])===0&&this.__debounceRender(this.__render,this.delay)}}else this.__debounceRender(this.__render,this.delay)}__itemsChanged(t){this.items&&!Array.isArray(this.items)&&console.warn("dom-repeat expected array for `items`, found",this.items),this.__handleItemPath(t.path,t.value)||(t.path==="items"&&(this.__itemsArrayChanged=!0),this.__debounceRender(this.__render))}__debounceRender(t,e=0){this.__renderDebouncer=Rt.debounce(this.__renderDebouncer,e>0?xe.after(e):be,t.bind(this)),hs(this.__renderDebouncer)}render(){this.__debounceRender(this.__render),Yi()}__render(){if(!this.__ensureTemplatized())return;let t=this.items||[];const e=this.__sortAndFilterItems(t),r=this.__calculateLimit(e.length);this.__updateInstances(t,r,e),this.initialCount&&(this.__shouldMeasureChunk||this.__shouldContinueChunking)&&(cancelAnimationFrame(this.__chunkingId),this.__chunkingId=requestAnimationFrame(()=>this.__continueChunking())),this._setRenderedItemCount(this.__instances.length),oo&&!this.notifyDomChange||this.dispatchEvent(new CustomEvent("dom-change",{bubbles:!0,composed:!0}))}__sortAndFilterItems(t){let e=new Array(t.length);for(let r=0;r<t.length;r++)e[r]=r;return this.__filterFn&&(e=e.filter((r,n,s)=>this.__filterFn(t[r],n,s))),this.__sortFn&&e.sort((r,n)=>this.__sortFn(t[r],t[n])),e}__calculateLimit(t){let e=t;const r=this.__instances.length;if(this.initialCount){let n;!this.__chunkCount||this.__itemsArrayChanged&&!this.reuseChunkedInstances?(e=Math.min(t,this.initialCount),n=Math.max(e-r,0),this.__chunkCount=n||1):(n=Math.min(Math.max(t-r,0),this.__chunkCount),e=Math.min(r+n,t)),this.__shouldMeasureChunk=n===this.__chunkCount,this.__shouldContinueChunking=e<t,this.__renderStartTime=performance.now()}return this.__itemsArrayChanged=!1,e}__continueChunking(){if(this.__shouldMeasureChunk){const t=performance.now()-this.__renderStartTime,e=this._targetFrameTime/t;this.__chunkCount=Math.round(this.__chunkCount*e)||1}this.__shouldContinueChunking&&this.__debounceRender(this.__render)}__updateInstances(t,e,r){const n=this.__itemsIdxToInstIdx={};let s;for(s=0;s<e;s++){let o=this.__instances[s],a=r[s],l=t[a];n[a]=s,o?(o._setPendingProperty(this.as,l),o._setPendingProperty(this.indexAs,s),o._setPendingProperty(this.itemsIndexAs,a),o._flushProperties()):this.__insertInstance(l,s,a)}for(let o=this.__instances.length-1;o>=s;o--)this.__detachAndRemoveInstance(o)}__detachInstance(t){let e=this.__instances[t];const r=it(e.root);for(let n=0;n<e.children.length;n++){let s=e.children[n];r.appendChild(s)}return e}__attachInstance(t,e){let r=this.__instances[t];e.insertBefore(r.root,this)}__detachAndRemoveInstance(t){this.__detachInstance(t),this.__instances.splice(t,1)}__stampInstance(t,e,r){let n={};return n[this.as]=t,n[this.indexAs]=e,n[this.itemsIndexAs]=r,new this.__ctor(n)}__insertInstance(t,e,r){const n=this.__stampInstance(t,e,r);let s=this.__instances[e+1],o=s?s.children[0]:this;return it(it(this).parentNode).insertBefore(n.root,o),this.__instances[e]=n,n}_showHideChildren(t){for(let e=0;e<this.__instances.length;e++)this.__instances[e]._showHideChildren(t)}__handleItemPath(t,e){let r=t.slice(6),n=r.indexOf("."),s=n<0?r:r.substring(0,n);if(s==parseInt(s,10)){let o=n<0?"":r.substring(n+1);this.__handleObservedPaths(o);let a=this.__itemsIdxToInstIdx[s],l=this.__instances[a];if(l){let d=this.as+(o?"."+o:"");l._setPendingPropertyOrPath(d,e,!1,!0),l._flushProperties()}return!0}}itemForElement(t){let e=this.modelForElement(t);return e&&e[this.as]}indexForElement(t){let e=this.modelForElement(t);return e&&e[this.indexAs]}modelForElement(t){return ig(this.template,t)}}customElements.define(ql.is,ql);class Jh extends Ve{static get is(){return"dom-if"}static get template(){return null}static get properties(){return{if:{type:Boolean,observer:"__debounceRender"},restamp:{type:Boolean,observer:"__debounceRender"},notifyDomChange:{type:Boolean}}}constructor(){super(),this.__renderDebouncer=null,this._lastIf=!1,this.__hideTemplateChildren__=!1,this.__template,this._templateInfo}__debounceRender(){this.__renderDebouncer=Rt.debounce(this.__renderDebouncer,be,()=>this.__render()),hs(this.__renderDebouncer)}disconnectedCallback(){super.disconnectedCallback();const t=it(this).parentNode;t&&(t.nodeType!=Node.DOCUMENT_FRAGMENT_NODE||it(t).host)||this.__teardownInstance()}connectedCallback(){super.connectedCallback(),ma()||(this.style.display="none"),this.if&&this.__debounceRender()}__ensureTemplate(){if(!this.__template){const t=this;let e=t._templateInfo?t:it(t).querySelector("template");if(!e){let r=new MutationObserver(()=>{if(!it(this).querySelector("template"))throw new Error("dom-if requires a <template> child");r.disconnect(),this.__render()});return r.observe(this,{childList:!0}),!1}this.__template=e}return!0}__ensureInstance(){let t=it(this).parentNode;if(this.__hasInstance()){let e=this.__getInstanceNodes();if(e&&e.length&&it(this).previousSibling!==e[e.length-1])for(let r,n=0;n<e.length&&(r=e[n]);n++)it(t).insertBefore(r,this)}else{if(!t||!this.__ensureTemplate())return!1;this.__createAndInsertInstance(t)}return!0}render(){Yi()}__render(){if(this.if){if(!this.__ensureInstance())return}else this.restamp&&this.__teardownInstance();this._showHideChildren(),oo&&!this.notifyDomChange||this.if==this._lastIf||(this.dispatchEvent(new CustomEvent("dom-change",{bubbles:!0,composed:!0})),this._lastIf=this.if)}__hasInstance(){}__getInstanceNodes(){}__createAndInsertInstance(t){}__teardownInstance(){}_showHideChildren(){}}class og extends Jh{constructor(){super(),this.__instance=null,this.__syncInfo=null}__hasInstance(){return!!this.__instance}__getInstanceNodes(){return this.__instance.templateInfo.childNodes}__createAndInsertInstance(t){const e=this.__dataHost||this;if(Gi&&!this.__dataHost)throw new Error("strictTemplatePolicy: template owner not trusted");const r=e._bindTemplate(this.__template,!0);r.runEffects=(n,s,o)=>{let a=this.__syncInfo;if(this.if)a&&(this.__syncInfo=null,this._showHideChildren(),s=Object.assign(a.changedProps,s)),n(s,o);else if(this.__instance)if(a||(a=this.__syncInfo={runEffects:n,changedProps:{}}),o)for(const l in s){const d=Ue(l);a.changedProps[d]=this.__dataHost[d]}else Object.assign(a.changedProps,s)},this.__instance=e._stampTemplate(this.__template,r),it(t).insertBefore(this.__instance,this)}__syncHostProperties(){const t=this.__syncInfo;t&&(this.__syncInfo=null,t.runEffects(t.changedProps,!1))}__teardownInstance(){const t=this.__dataHost||this;this.__instance&&(t._removeBoundDom(this.__instance),this.__instance=null,this.__syncInfo=null)}_showHideChildren(){const t=this.__hideTemplateChildren__||!this.if;this.__instance&&!!this.__instance.__hidden!==t&&(this.__instance.__hidden=t,Xh(t,this.__instance.templateInfo.childNodes)),t||this.__syncHostProperties()}}class ag extends Jh{constructor(){super(),this.__ctor=null,this.__instance=null,this.__invalidProps=null}__hasInstance(){return!!this.__instance}__getInstanceNodes(){return this.__instance.children}__createAndInsertInstance(t){this.__ctor||(this.__ctor=Gr(this.__template,this,{mutableData:!0,forwardHostProp:function(e,r){this.__instance&&(this.if?this.__instance.forwardHostProp(e,r):(this.__invalidProps=this.__invalidProps||Object.create(null),this.__invalidProps[Ue(e)]=!0))}})),this.__instance=new this.__ctor,it(t).insertBefore(this.__instance.root,this)}__teardownInstance(){if(this.__instance){let t=this.__instance.children;if(t&&t.length){let e=it(t[0]).parentNode;if(e){e=it(e);for(let r,n=0;n<t.length&&(r=t[n]);n++)e.removeChild(r)}}this.__invalidProps=null,this.__instance=null}}__syncHostProperties(){let t=this.__invalidProps;if(t){this.__invalidProps=null;for(let e in t)this.__instance._setPendingProperty(e,this.__dataHost[e]);this.__instance._flushProperties()}}_showHideChildren(){const t=this.__hideTemplateChildren__||!this.if;this.__instance&&!!this.__instance.__hidden!==t&&(this.__instance.__hidden=t,this.__instance._showHideChildren(t)),t||this.__syncHostProperties()}}const Yl=Ud?og:ag;customElements.define(Yl.is,Yl);let lg=pe(i=>{let t=ds(i);class e extends t{static get properties(){return{items:{type:Array},multi:{type:Boolean,value:!1},selected:{type:Object,notify:!0},selectedItem:{type:Object,notify:!0},toggle:{type:Boolean,value:!1}}}static get observers(){return["__updateSelection(multi, items.*)"]}constructor(){super(),this.__lastItems=null,this.__lastMulti=null,this.__selectedMap=null}__updateSelection(n,s){let o=s.path;if(o==JSCompiler_renameProperty("items",this)){let a=s.base||[],l=this.__lastItems;if(n!==this.__lastMulti&&this.clearSelection(),l){let d=Hh(a,l);this.__applySplices(d)}this.__lastItems=a,this.__lastMulti=n}else if(s.path==`${JSCompiler_renameProperty("items",this)}.splices`)this.__applySplices(s.value.indexSplices);else{let a=o.slice(`${JSCompiler_renameProperty("items",this)}.`.length),l=parseInt(a,10);a.indexOf(".")<0&&a==l&&this.__deselectChangedIdx(l)}}__applySplices(n){let s=this.__selectedMap;for(let a=0;a<n.length;a++){let l=n[a];s.forEach((d,h)=>{d<l.index||(d>=l.index+l.removed.length?s.set(h,d+l.addedCount-l.removed.length):s.set(h,-1))});for(let d=0;d<l.addedCount;d++){let h=l.index+d;s.has(this.items[h])&&s.set(this.items[h],h)}}this.__updateLinks();let o=0;s.forEach((a,l)=>{a<0?(this.multi?this.splice(JSCompiler_renameProperty("selected",this),o,1):this.selected=this.selectedItem=null,s.delete(l)):o++})}__updateLinks(){if(this.__dataLinkedPaths={},this.multi){let n=0;this.__selectedMap.forEach(s=>{s>=0&&this.linkPaths(`${JSCompiler_renameProperty("items",this)}.${s}`,`${JSCompiler_renameProperty("selected",this)}.${n++}`)})}else this.__selectedMap.forEach(n=>{this.linkPaths(JSCompiler_renameProperty("selected",this),`${JSCompiler_renameProperty("items",this)}.${n}`),this.linkPaths(JSCompiler_renameProperty("selectedItem",this),`${JSCompiler_renameProperty("items",this)}.${n}`)})}clearSelection(){this.__dataLinkedPaths={},this.__selectedMap=new Map,this.selected=this.multi?[]:null,this.selectedItem=null}isSelected(n){return this.__selectedMap.has(n)}isIndexSelected(n){return this.isSelected(this.items[n])}__deselectChangedIdx(n){let s=this.__selectedIndexForItemIndex(n);if(s>=0){let o=0;this.__selectedMap.forEach((a,l)=>{s==o++&&this.deselect(l)})}}__selectedIndexForItemIndex(n){let s=this.__dataLinkedPaths[`${JSCompiler_renameProperty("items",this)}.${n}`];if(s)return parseInt(s.slice(`${JSCompiler_renameProperty("selected",this)}.`.length),10)}deselect(n){let s=this.__selectedMap.get(n);if(s>=0){let o;this.__selectedMap.delete(n),this.multi&&(o=this.__selectedIndexForItemIndex(s)),this.__updateLinks(),this.multi?this.splice(JSCompiler_renameProperty("selected",this),o,1):this.selected=this.selectedItem=null}}deselectIndex(n){this.deselect(this.items[n])}select(n){this.selectIndex(this.items.indexOf(n))}selectIndex(n){let s=this.items[n];this.isSelected(s)?this.toggle&&this.deselectIndex(n):(this.multi||this.__selectedMap.clear(),this.__selectedMap.set(s,n),this.__updateLinks(),this.multi?this.push(JSCompiler_renameProperty("selected",this),s):this.selected=this.selectedItem=s)}}return e})(Ve);class Zl extends lg{static get is(){return"array-selector"}static get template(){return null}}customElements.define(Zl.is,Zl);const xi=Vh(HTMLElement).prototype;var yn=new Set;const dg={properties:{_parentResizable:{type:Object,observer:"_parentResizableChanged"},_notifyingDescendant:{type:Boolean,value:!1}},listeners:{"iron-request-resize-notifications":"_onIronRequestResizeNotifications"},created:function(){this._interestedResizables=[],this._boundNotifyResize=this.notifyResize.bind(this),this._boundOnDescendantIronResize=this._onDescendantIronResize.bind(this)},attached:function(){this._requestResizeNotifications()},detached:function(){this._parentResizable?this._parentResizable.stopResizeNotificationsFor(this):(yn.delete(this),window.removeEventListener("resize",this._boundNotifyResize)),this._parentResizable=null},notifyResize:function(){this.isAttached&&(this._interestedResizables.forEach(function(i){this.resizerShouldNotify(i)&&this._notifyDescendant(i)},this),this._fireResize())},assignParentResizable:function(i){this._parentResizable&&this._parentResizable.stopResizeNotificationsFor(this),this._parentResizable=i,i&&i._interestedResizables.indexOf(this)===-1&&(i._interestedResizables.push(this),i._subscribeIronResize(this))},stopResizeNotificationsFor:function(i){var t=this._interestedResizables.indexOf(i);t>-1&&(this._interestedResizables.splice(t,1),this._unsubscribeIronResize(i))},_subscribeIronResize:function(i){i.addEventListener("iron-resize",this._boundOnDescendantIronResize)},_unsubscribeIronResize:function(i){i.removeEventListener("iron-resize",this._boundOnDescendantIronResize)},resizerShouldNotify:function(i){return!0},_onDescendantIronResize:function(i){this._notifyingDescendant?i.stopPropagation():Yo||this._fireResize()},_fireResize:function(){this.fire("iron-resize",null,{node:this,bubbles:!1})},_onIronRequestResizeNotifications:function(i){var t=si(i).rootTarget;t!==this&&(t.assignParentResizable(this),this._notifyDescendant(t),i.stopPropagation())},_parentResizableChanged:function(i){i&&window.removeEventListener("resize",this._boundNotifyResize)},_notifyDescendant:function(i){this.isAttached&&(this._notifyingDescendant=!0,i.notifyResize(),this._notifyingDescendant=!1)},_requestResizeNotifications:function(){if(this.isAttached)if(document.readyState==="loading"){var i=this._requestResizeNotifications.bind(this);document.addEventListener("readystatechange",function t(){document.removeEventListener("readystatechange",t),i()})}else this._findParent(),this._parentResizable?this._parentResizable._interestedResizables.forEach(function(t){t!==this&&t._findParent()},this):(yn.forEach(function(t){t!==this&&t._findParent()},this),window.addEventListener("resize",this._boundNotifyResize),this.notifyResize())},_findParent:function(){this.assignParentResizable(null),this.fire("iron-request-resize-notifications",null,{node:this,bubbles:!0,cancelable:!0}),this._parentResizable?yn.delete(this):yn.add(this)}},hg={properties:{scrollTarget:{type:HTMLElement,value:function(){return this._defaultScrollTarget}}},observers:["_scrollTargetChanged(scrollTarget, isAttached)"],_shouldHaveListener:!0,_scrollTargetChanged:function(i,t){if(this._oldScrollTarget&&(this._toggleScrollListener(!1,this._oldScrollTarget),this._oldScrollTarget=null),t)if(i==="document")this.scrollTarget=this._doc;else if(typeof i=="string"){var e=this.domHost;this.scrollTarget=e&&e.$?e.$[i]:si(this.ownerDocument).querySelector("#"+i)}else this._isValidScrollTarget()&&(this._oldScrollTarget=i,this._toggleScrollListener(this._shouldHaveListener,i))},_scrollHandler:function(){},get _defaultScrollTarget(){return this._doc},get _doc(){return this.ownerDocument.documentElement},get _scrollTop(){return this._isValidScrollTarget()?this.scrollTarget===this._doc?window.pageYOffset:this.scrollTarget.scrollTop:0},get _scrollLeft(){return this._isValidScrollTarget()?this.scrollTarget===this._doc?window.pageXOffset:this.scrollTarget.scrollLeft:0},set _scrollTop(i){this.scrollTarget===this._doc?window.scrollTo(window.pageXOffset,i):this._isValidScrollTarget()&&(this.scrollTarget.scrollTop=i)},set _scrollLeft(i){this.scrollTarget===this._doc?window.scrollTo(i,window.pageYOffset):this._isValidScrollTarget()&&(this.scrollTarget.scrollLeft=i)},scroll:function(i,t){var e;typeof i=="object"?(e=i.left,t=i.top):e=i,e=e||0,t=t||0,this.scrollTarget===this._doc?window.scrollTo(e,t):this._isValidScrollTarget()&&(this.scrollTarget.scrollLeft=e,this.scrollTarget.scrollTop=t)},get _scrollTargetWidth(){return this._isValidScrollTarget()?this.scrollTarget===this._doc?window.innerWidth:this.scrollTarget.offsetWidth:0},get _scrollTargetHeight(){return this._isValidScrollTarget()?this.scrollTarget===this._doc?window.innerHeight:this.scrollTarget.offsetHeight:0},_isValidScrollTarget:function(){return this.scrollTarget instanceof HTMLElement},_toggleScrollListener:function(i,t){var e=t===this._doc?window:t;i?this._boundScrollHandler||(this._boundScrollHandler=this._scrollHandler.bind(this),e.addEventListener("scroll",this._boundScrollHandler)):this._boundScrollHandler&&(e.removeEventListener("scroll",this._boundScrollHandler),this._boundScrollHandler=null)},toggleScrollListener:function(i){this._shouldHaveListener=i,this._toggleScrollListener(i,this.scrollTarget)}},Xl=navigator.userAgent.match(/iP(?:hone|ad;(?: U;)? CPU) OS (\d+)/),cg=Xl&&Xl[1]>=8,Jl=3,ug=V_({behaviors:[dg,hg],_ratio:.5,_scrollerPaddingTop:0,_scrollPosition:0,_physicalSize:0,_physicalAverage:0,_physicalAverageCount:0,_physicalTop:0,_virtualCount:0,_estScrollHeight:0,_scrollHeight:0,_viewportHeight:0,_viewportWidth:0,_physicalItems:null,_physicalSizes:null,_firstVisibleIndexVal:null,_lastVisibleIndexVal:null,_maxPages:2,_focusedVirtualIndex:-1,_templateCost:0,get _physicalBottom(){return this._physicalTop+this._physicalSize},get _scrollBottom(){return this._scrollPosition+this._viewportHeight},get _virtualEnd(){return this._virtualStart+this._physicalCount-1},get _hiddenContentSize(){return this._physicalSize-this._viewportHeight},get _maxScrollTop(){return this._estScrollHeight-this._viewportHeight+this._scrollOffset},get _maxVirtualStart(){return Math.max(0,this._virtualCount-this._physicalCount)},set _virtualStart(i){i=this._clamp(i,0,this._maxVirtualStart),this._virtualStartVal=i},get _virtualStart(){return this._virtualStartVal||0},set _physicalStart(i){(i%=this._physicalCount)<0&&(i=this._physicalCount+i),this._physicalStartVal=i},get _physicalStart(){return this._physicalStartVal||0},get _physicalEnd(){return(this._physicalStart+this._physicalCount-1)%this._physicalCount},set _physicalCount(i){this._physicalCountVal=i},get _physicalCount(){return this._physicalCountVal||0},get _optPhysicalSize(){return this._viewportHeight===0?1/0:this._viewportHeight*this._maxPages},get _isVisible(){return!!(this.offsetWidth||this.offsetHeight)},get firstVisibleIndex(){let i=this._firstVisibleIndexVal;if(i==null){let t=this._physicalTop+this._scrollOffset;i=this._iterateItems(function(e,r){if(t+=this._physicalSizes[e],t>this._scrollPosition)return r})||0,this._firstVisibleIndexVal=i}return i},get lastVisibleIndex(){let i=this._lastVisibleIndexVal;if(i==null){let t=this._physicalTop+this._scrollOffset;this._iterateItems(function(e,r){t<this._scrollBottom&&(i=r),t+=this._physicalSizes[e]}),this._lastVisibleIndexVal=i}return i},get _scrollOffset(){return this._scrollerPaddingTop},attached:function(){this._debounce("_render",this._render,Me),this.listen(this,"iron-resize","_resizeHandler")},detached:function(){this.unlisten(this,"iron-resize","_resizeHandler")},updateViewportBoundaries:function(){const i=window.getComputedStyle(this);this._scrollerPaddingTop=this.scrollTarget===this?0:parseInt(i["padding-top"],10),this._isRTL=i.direction==="rtl",this._viewportWidth=this.$.items.offsetWidth,this._viewportHeight=this._scrollTargetHeight},_scrollHandler:function(){const i=Math.max(0,Math.min(this._maxScrollTop,this._scrollTop));let t=i-this._scrollPosition;const e=t>=0;if(this._scrollPosition=i,this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null,Math.abs(t)>this._physicalSize&&this._physicalSize>0){t-=this._scrollOffset;const r=Math.round(t/this._physicalAverage);this._virtualStart=this._virtualStart+r,this._physicalStart=this._physicalStart+r,this._physicalTop=Math.floor(this._virtualStart)*this._physicalAverage,this._update()}else if(this._physicalCount>0){const{physicalTop:r,indexes:n}=this._getReusables(e);e?(this._physicalTop=r,this._virtualStart=this._virtualStart+n.length,this._physicalStart=this._physicalStart+n.length):(this._virtualStart=this._virtualStart-n.length,this._physicalStart=this._physicalStart-n.length),this._update(n,e?null:n),this._debounce("_increasePoolIfNeeded",this._increasePoolIfNeeded.bind(this,0),be)}},_getReusables:function(i){let t,e,r;const n=[],s=this._hiddenContentSize*this._ratio,o=this._virtualStart,a=this._virtualEnd,l=this._physicalCount;let d=this._physicalTop+this._scrollOffset;const h=this._physicalBottom+this._scrollOffset,c=this._scrollTop,m=this._scrollBottom;for(i?(t=this._physicalStart,e=c-d):(t=this._physicalEnd,e=h-m);r=this._physicalSizes[t],e-=r,!(n.length>=l||e<=s);)if(i){if(a+n.length+1>=this._virtualCount||d+r>=c-this._scrollOffset)break;n.push(t),d+=r,t=(t+1)%l}else{if(o-n.length<=0||d+this._physicalSize-r<=m)break;n.push(t),d-=r,t=t===0?l-1:t-1}return{indexes:n,physicalTop:d-this._scrollOffset}},_update:function(i,t){if(!(i&&i.length===0||this._physicalCount===0)){if(this._assignModels(i),this._updateMetrics(i),t)for(;t.length;){const e=t.pop();this._physicalTop-=this._physicalSizes[e]}this._positionItems(),this._updateScrollerSize()}},_isClientFull:function(){return this._scrollBottom!=0&&this._physicalBottom-1>=this._scrollBottom&&this._physicalTop<=this._scrollPosition},_increasePoolIfNeeded:function(i){const t=this._clamp(this._physicalCount+i,Jl,this._virtualCount-this._virtualStart)-this._physicalCount;let e=Math.round(.5*this._physicalCount);if(!(t<0)){if(t>0){const r=window.performance.now();[].push.apply(this._physicalItems,this._createPool(t));for(let n=0;n<t;n++)this._physicalSizes.push(0);this._physicalCount=this._physicalCount+t,this._physicalStart>this._physicalEnd&&this._isIndexRendered(this._focusedVirtualIndex)&&this._getPhysicalIndex(this._focusedVirtualIndex)<this._physicalEnd&&(this._physicalStart=this._physicalStart+t),this._update(),this._templateCost=(window.performance.now()-r)/t,e=Math.round(.5*this._physicalCount)}this._virtualEnd>=this._virtualCount-1||e===0||(this._isClientFull()?this._physicalSize<this._optPhysicalSize&&this._debounce("_increasePoolIfNeeded",this._increasePoolIfNeeded.bind(this,this._clamp(Math.round(50/this._templateCost),1,e)),nh):this._debounce("_increasePoolIfNeeded",this._increasePoolIfNeeded.bind(this,e),be))}},_render:function(){if(this.isAttached&&this._isVisible)if(this._physicalCount!==0){const{physicalTop:i,indexes:t}=this._getReusables(!0);this._physicalTop=i,this._virtualStart=this._virtualStart+t.length,this._physicalStart=this._physicalStart+t.length,this._update(t),this._update(),this._increasePoolIfNeeded(0)}else this._virtualCount>0&&(this.updateViewportBoundaries(),this._increasePoolIfNeeded(Jl))},_itemsChanged:function(i){i.path==="items"&&(this._virtualStart=0,this._physicalTop=0,this._virtualCount=this.items?this.items.length:0,this._physicalIndexForKey={},this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null,this._physicalCount=this._physicalCount||0,this._physicalItems=this._physicalItems||[],this._physicalSizes=this._physicalSizes||[],this._physicalStart=0,this._scrollTop>this._scrollOffset&&this._resetScrollPosition(0),this._debounce("_render",this._render,Me))},_iterateItems:function(i,t){let e,r,n,s;if(arguments.length===2&&t){for(s=0;s<t.length;s++)if(e=t[s],r=this._computeVidx(e),(n=i.call(this,e,r))!=null)return n}else{for(e=this._physicalStart,r=this._virtualStart;e<this._physicalCount;e++,r++)if((n=i.call(this,e,r))!=null)return n;for(e=0;e<this._physicalStart;e++,r++)if((n=i.call(this,e,r))!=null)return n}},_computeVidx:function(i){return i>=this._physicalStart?this._virtualStart+(i-this._physicalStart):this._virtualStart+(this._physicalCount-this._physicalStart)+i},_updateMetrics:function(i){Yi();let t=0,e=0;const r=this._physicalAverageCount,n=this._physicalAverage;this._iterateItems(function(s){e+=this._physicalSizes[s],this._physicalSizes[s]=this._physicalItems[s].offsetHeight,t+=this._physicalSizes[s],this._physicalAverageCount+=this._physicalSizes[s]?1:0},i),this._physicalSize=this._physicalSize+t-e,this._physicalAverageCount!==r&&(this._physicalAverage=Math.round((n*r+t)/this._physicalAverageCount))},_positionItems:function(){this._adjustScrollPosition();let i=this._physicalTop;this._iterateItems(function(t){this.translate3d(0,i+"px",0,this._physicalItems[t]),i+=this._physicalSizes[t]})},_adjustScrollPosition:function(){const i=this._virtualStart===0?this._physicalTop:Math.min(this._scrollPosition+this._physicalTop,0);if(i!==0){this._physicalTop=this._physicalTop-i;const t=this._scrollTop;!cg&&t>0&&this._resetScrollPosition(t-i)}},_resetScrollPosition:function(i){this.scrollTarget&&i>=0&&(this._scrollTop=i,this._scrollPosition=this._scrollTop)},_updateScrollerSize:function(i){this._estScrollHeight=this._physicalBottom+Math.max(this._virtualCount-this._physicalCount-this._virtualStart,0)*this._physicalAverage,((i=(i=i||this._scrollHeight===0)||this._scrollPosition>=this._estScrollHeight-this._physicalSize)||Math.abs(this._estScrollHeight-this._scrollHeight)>=this._viewportHeight)&&(this.$.items.style.height=this._estScrollHeight+"px",this._scrollHeight=this._estScrollHeight)},scrollToIndex:function(i){if(typeof i!="number"||i<0||i>this.items.length-1||(Yi(),this._physicalCount===0))return;i=this._clamp(i,0,this._virtualCount-1),(!this._isIndexRendered(i)||i>=this._maxVirtualStart)&&(this._virtualStart=i-1),this._assignModels(),this._updateMetrics(),this._physicalTop=Math.floor(this._virtualStart)*this._physicalAverage;let t=this._physicalStart,e=this._virtualStart,r=0;const n=this._hiddenContentSize;for(;e<i&&r<=n;)r+=this._physicalSizes[t],t=(t+1)%this._physicalCount,e++;this._updateScrollerSize(!0),this._positionItems(),this._resetScrollPosition(this._physicalTop+this._scrollOffset+r),this._increasePoolIfNeeded(0),this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null},_resetAverage:function(){this._physicalAverage=0,this._physicalAverageCount=0},_resizeHandler:function(){this._debounce("_render",function(){this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null,this.updateViewportBoundaries(),this._isVisible?(this.toggleScrollListener(!0),this._resetAverage(),this._render()):this.toggleScrollListener(!1)},Me)},_isIndexRendered:function(i){return i>=this._virtualStart&&i<=this._virtualEnd},_getPhysicalIndex:function(i){return(this._physicalStart+(i-this._virtualStart))%this._physicalCount},_clamp:function(i,t,e){return Math.min(e,Math.max(t,i))},_debounce:function(i,t,e){this._debouncers=this._debouncers||{},this._debouncers[i]=Rt.debounce(this._debouncers[i],e,t.bind(this)),hs(this._debouncers[i])}});class pg extends ug{static get properties(){return{size:{type:Number,notify:!0},_vidxOffset:{type:Number,value:0}}}static get observers(){return["_effectiveSizeChanged(_effectiveSize)"]}connectedCallback(){super.connectedCallback(),this._scrollHandler()}_updateScrollerItem(){}_afterScroll(){}_getRowTarget(){}_createScrollerRows(){}_canPopulate(){}scrollToIndex(t){this._warnPrivateAPIAccess("scrollToIndex"),this._scrollingToIndex=!0,t=Math.min(Math.max(t,0),this._effectiveSize-1),this.$.table.scrollTop=t/this._effectiveSize*(this.$.table.scrollHeight-this.$.table.offsetHeight),this._scrollHandler(),this._accessIronListAPI(()=>this._maxScrollTop)&&this._virtualCount<this._effectiveSize&&this._adjustVirtualIndexOffset(1e6),this._accessIronListAPI(()=>super.scrollToIndex(t-this._vidxOffset)),this._scrollHandler();const e=Array.from(this.$.items.children).filter(r=>r.index===t)[0];if(e){const r=e.getBoundingClientRect().top-this.$.header.getBoundingClientRect().bottom;Math.abs(r)>1&&(this.$.table.scrollTop+=r,this._scrollHandler())}this._scrollingToIndex=!1}_effectiveSizeChanged(t){let e,r=0;this._iterateItems((n,s)=>{if(s===this._firstVisibleIndex){const o=this._physicalItems[n];e=o.index,r=o.getBoundingClientRect().top}}),this.items&&t<this.items.length&&(this._scrollTop=0),!Array.isArray(this.items)&&(this.items={length:Math.min(t,1e5)}),this._accessIronListAPI(()=>super._itemsChanged({path:"items"})),this._virtualCount=Math.min(this.items.length,t)||0,this._scrollTop===0&&(this._accessIronListAPI(()=>this._scrollToIndex(Math.min(t-1,e))),this._iterateItems(n=>{const s=this._physicalItems[n];if(s.index===e&&(this.$.table.scrollTop+=Math.round(s.getBoundingClientRect().top-r)),s.index===this._focusedItemIndex&&this._itemsFocusable&&this.$.items.contains(this.shadowRoot.activeElement)){const o=Array.from(this._itemsFocusable.parentElement.children).indexOf(this._itemsFocusable);s.children[o].focus()}})),this._assignModels(),requestAnimationFrame(()=>this._update()),this.__updateFooterPositioning()}_positionItems(){let t;this._adjustScrollPosition(),isNaN(this._physicalTop)&&(t=!0,this._physicalTop=0);let e=this._physicalTop;this._iterateItems(r=>{this._physicalItems[r].style.transform=`translateY(${e}px)`,e+=this._physicalSizes[r]}),t&&this._scrollToIndex(0)}_increasePoolIfNeeded(t){t===0&&this._scrollingToIndex||!this._canPopulate()||!this._effectiveSize||(this._initialPoolCreated?this._optPhysicalSize!==1/0&&(this._debounceIncreasePool=Rt.debounce(this._debounceIncreasePool,Me,()=>{this._updateMetrics();const e=this._optPhysicalSize-this._physicalSize;let r=Math.ceil(e/this._physicalAverage);this._physicalCount+r>this._effectiveSize&&(r=Math.max(0,this._effectiveSize-this._physicalCount)),this._physicalSize&&r>0&&this._optPhysicalSize!==1/0&&(super._increasePoolIfNeeded(r),this.__reorderChildNodes())})):(this._initialPoolCreated=!0,super._increasePoolIfNeeded(25)))}__reorderChildNodes(){const t=Array.from(this.$.items.childNodes);t.reduce((e,r,n,s)=>{if(n===0||s[n-1].index===r.index-1)return e},!0)||t.sort((e,r)=>e.index-r.index).forEach(e=>this.$.items.appendChild(e))}_createPool(t){const e=document.createDocumentFragment(),r=this._createScrollerRows(t);r.forEach(s=>e.appendChild(s)),this._getRowTarget().appendChild(e);const n=this.querySelector("[slot]");if(n){const s=n.getAttribute("slot");n.setAttribute("slot","foo-bar"),n.setAttribute("slot",s)}return Ym(this,()=>this.notifyResize()),r}_assignModels(t){this._iterateItems((e,r)=>{const n=this._physicalItems[e];this._toggleAttribute("hidden",r>=this._effectiveSize,n),this._updateScrollerItem(n,r+(this._vidxOffset||0))},t)}_scrollHandler(){const t=this.$.table.scrollTop-this._scrollPosition;this._accessIronListAPI(super._scrollHandler);const e=this._vidxOffset;this._accessIronListAPI(()=>this._maxScrollTop)&&this._virtualCount<this._effectiveSize?this._adjustVirtualIndexOffset(t):this._vidxOffset=0,this._vidxOffset!==e&&this._update(),this._afterScroll()}_adjustVirtualIndexOffset(t){if(Math.abs(t)>1e4){if(this._noScale)return void(this._noScale=!1);const e=this.$.table.scrollTop/(this.$.table.scrollHeight-this.$.table.offsetHeight),r=e*this._effectiveSize;this._vidxOffset=Math.round(r-e*this._virtualCount)}else{const e=this._vidxOffset||0,r=1e3,n=100;this._scrollTop===0?(this._vidxOffset=0,e!==this._vidxOffset&&super.scrollToIndex(0)):this.firstVisibleIndex<r&&this._vidxOffset>0&&(this._vidxOffset-=Math.min(this._vidxOffset,n),e!==this._vidxOffset&&super.scrollToIndex(this.firstVisibleIndex+(e-this._vidxOffset)),this._noScale=!0);const s=this._effectiveSize-this._virtualCount;this._scrollTop>=this._maxScrollTop&&this._maxScrollTop>0?(this._vidxOffset=s,e!==this._vidxOffset&&super.scrollToIndex(this._virtualCount)):this.firstVisibleIndex>this._virtualCount-r&&this._vidxOffset<s&&(this._vidxOffset+=Math.min(s-this._vidxOffset,n),e!==this._vidxOffset&&super.scrollToIndex(this.firstVisibleIndex-(this._vidxOffset-e)),this._noScale=!0)}}_accessIronListAPI(t){this._warnPrivateAPIAccessAsyncEnabled=!1;const e=t.apply(this);return this._debouncerWarnPrivateAPIAccess=Rt.debounce(this._debouncerWarnPrivateAPIAccess,Me,()=>this._warnPrivateAPIAccessAsyncEnabled=!0),e}_debounceRender(t,e){super._debounceRender(()=>this._accessIronListAPI(t),e)}_warnPrivateAPIAccess(t){this._warnPrivateAPIAccessAsyncEnabled&&console.warn(`Accessing private API (${t})!`)}_render(){this._accessIronListAPI(super._render)}_itemsChanged(){}get _firstVisibleIndex(){return this._accessIronListAPI(()=>super.firstVisibleIndex)}get _lastVisibleIndex(){return this._accessIronListAPI(()=>super.lastVisibleIndex)}_scrollToIndex(t){this._accessIronListAPI(()=>this.scrollToIndex(t))}get firstVisibleIndex(){return this._warnPrivateAPIAccess("firstVisibleIndex"),super.firstVisibleIndex}set firstVisibleIndex(t){this._warnPrivateAPIAccess("firstVisibleIndex"),super.firstVisibleIndex=t}get lastVisibleIndex(){return this._warnPrivateAPIAccess("lastVisibleIndex"),super.lastVisibleIndex}set lastVisibleIndex(t){this._warnPrivateAPIAccess("lastVisibleIndex"),super.lastVisibleIndex=t}updateViewportBoundaries(){this._warnPrivateAPIAccess("updateViewportBoundaries"),super.updateViewportBoundaries.apply(this,arguments)}_resizeHandler(){super._resizeHandler(),Yi()}}const fg=i=>class extends i{static get observers(){return["_a11yUpdateGridSize(size, _columnTree, _columnTree.*)"]}_a11yGetHeaderRowCount(t){return t.filter(e=>e.some(r=>r._headerTemplate||r.headerRenderer||r.path||r.header)).length}_a11yGetFooterRowCount(t){return t.filter(e=>e.some(r=>r._headerTemplate||r.headerRenderer)).length}_a11yUpdateGridSize(t,e){if(t===void 0||e===void 0)return;const r=e[e.length-1];this.$.table.setAttribute("aria-rowcount",t+this._a11yGetHeaderRowCount(e)+this._a11yGetFooterRowCount(e)),this.$.table.setAttribute("aria-colcount",r&&r.length||0),this._a11yUpdateHeaderRows(),this._a11yUpdateFooterRows()}_a11yUpdateHeaderRows(){Array.from(this.$.header.children).forEach((t,e)=>t.setAttribute("aria-rowindex",e+1))}_a11yUpdateFooterRows(){Array.from(this.$.footer.children).forEach((t,e)=>t.setAttribute("aria-rowindex",this._a11yGetHeaderRowCount(this._columnTree)+this.size+e+1))}_a11yUpdateRowRowindex(t,e){t.setAttribute("aria-rowindex",e+this._a11yGetHeaderRowCount(this._columnTree)+1)}_a11yUpdateRowSelected(t,e){t.setAttribute("aria-selected",!!e),Array.from(t.children).forEach(r=>r.setAttribute("aria-selected",!!e))}_a11yUpdateRowLevel(t,e){t.setAttribute("aria-level",e+1)}_a11yUpdateRowDetailsOpened(t,e){Array.from(t.children).forEach(r=>{typeof e=="boolean"?r.setAttribute("aria-expanded",e):r.hasAttribute("aria-expanded")&&r.removeAttribute("aria-expanded")})}_a11ySetRowDetailsCell(t,e){Array.from(t.children).forEach(r=>{r!==e&&r.setAttribute("aria-controls",e.id)})}_a11yUpdateCellColspan(t,e){t.setAttribute("aria-colspan",Number(e))}_a11yUpdateSorters(){Array.from(this.querySelectorAll("vaadin-grid-sorter")).forEach(t=>{let e=t.parentNode;for(;e&&e.localName!=="vaadin-grid-cell-content";)e=e.parentNode;e&&e.assignedSlot&&e.assignedSlot.parentNode.setAttribute("aria-sort",{asc:"ascending",desc:"descending"}[String(t.direction)]||"none")})}},mg=i=>class extends i{static get properties(){return{activeItem:{type:Object,notify:!0,value:null}}}ready(){super.ready(),this.$.scroller.addEventListener("click",this._onClick.bind(this)),this.addEventListener("cell-activate",this._activateItem.bind(this))}_activateItem(t){const e=t.detail.model,r=e?e.item:null;r&&(this.activeItem=this._itemsEqual(this.activeItem,r)?null:r)}_onClick(t){if(t.defaultPrevented)return;const e=t.composedPath(),r=e[e.indexOf(this.$.table)-3];if(!r||r.getAttribute("part").indexOf("details-cell")>-1)return;const n=r._content,s=this.getRootNode().activeElement;n.contains(s)||this._isFocusable(t.target)||this.dispatchEvent(new CustomEvent("cell-activate",{detail:{model:this.__getRowModel(r.parentElement)}}))}_isFocusable(t){return _g(t)}},_g=i=>{if(!i.parentNode)return!1;const t=Array.from(i.parentNode.querySelectorAll("[tabindex], button, input, select, textarea, object, iframe, label, a[href], area[href]")).filter(e=>e.getAttribute("part")!=="cell body-cell").indexOf(i)!==-1;return!i.disabled&&t},gg=i=>class extends i{static get properties(){return{items:Array}}static get observers(){return["_itemsChanged(items, items.*, isAttached)"]}_itemsChanged(t,e,r){if(r){if(!Array.isArray(t))return t==null&&(this.size=0),void(this.dataProvider===this._arrayDataProvider&&(this.dataProvider=void 0));this.size=t.length,this.dataProvider=this.dataProvider||this._arrayDataProvider,this.clearCache(),this._ensureFirstPageLoaded()}}_arrayDataProvider(t,e){let r=(Array.isArray(this.items)?this.items:[]).slice(0);this._filters&&this._checkPaths(this._filters,"filtering",r)&&(r=this._filter(r)),this.size=r.length,t.sortOrders.length&&this._checkPaths(this._sorters,"sorting",r)&&(r=r.sort(this._multiSort.bind(this)));const n=t.page*t.pageSize,s=n+t.pageSize;e(r.slice(n,s),r.length)}_checkPaths(t,e,r){if(!r.length)return!1;let n=!0;for(let s in t){const o=t[s].path;if(!o||o.indexOf(".")===-1)continue;const a=o.replace(/\.[^.]*$/,"");xi.get(a,r[0])===void 0&&(console.warn(`Path "${o}" used for ${e} does not exist in all of the items, ${e} is disabled.`),n=!1)}return n}_multiSort(t,e){return this._sorters.map(r=>r.direction==="asc"?this._compare(xi.get(r.path,t),xi.get(r.path,e)):r.direction==="desc"?this._compare(xi.get(r.path,e),xi.get(r.path,t)):0).reduce((r,n)=>r||n,0)}_normalizeEmptyValue(t){return[void 0,null].indexOf(t)>=0?"":isNaN(t)?t.toString():t}_compare(t,e){return(t=this._normalizeEmptyValue(t))<(e=this._normalizeEmptyValue(e))?-1:t>e?1:0}_filter(t){return t.filter(e=>this._filters.filter(r=>{const n=this._normalizeEmptyValue(xi.get(r.path,e)),s=this._normalizeEmptyValue(r.value).toString().toLowerCase();return n.toString().toLowerCase().indexOf(s)===-1}).length===0)}},yg=i=>class extends tn(i){ready(){super.ready();const t=this.$.scroller;aa(t,"track",this._onHeaderTrack.bind(this)),t.addEventListener("touchmove",e=>t.hasAttribute("column-resizing")&&e.preventDefault()),t.addEventListener("contextmenu",e=>e.target.getAttribute("part")=="resize-handle"&&e.preventDefault()),t.addEventListener("mousedown",e=>e.target.getAttribute("part")==="resize-handle"&&e.preventDefault())}_onHeaderTrack(t){const e=t.target;if(e.getAttribute("part")==="resize-handle"){let r=e.parentElement._column;for(this._toggleAttribute("column-resizing",!0,this.$.scroller);r.localName==="vaadin-grid-column-group";)r=Array.prototype.slice.call(r._childColumns,0).sort(function(o,a){return o._order-a._order}).filter(function(o){return!o.hidden}).pop();const n=Array.from(this.$.header.querySelectorAll('[part~="row"]:last-child [part~="cell"]')),s=n.filter(o=>o._column===r)[0];if(s.offsetWidth){const o=window.getComputedStyle(s),a=10+parseInt(o.paddingLeft)+parseInt(o.paddingRight)+parseInt(o.borderLeftWidth)+parseInt(o.borderRightWidth)+parseInt(o.marginLeft)+parseInt(o.marginRight),l=s.offsetWidth+(this.__isRTL?s.getBoundingClientRect().left-t.detail.x:t.detail.x-s.getBoundingClientRect().right);r.width=Math.max(a,l)+"px",r.flexGrow=0}n.sort(function(o,a){return o._column._order-a._column._order}).forEach(function(o,a,l){a<l.indexOf(s)&&(o._column.width=o.offsetWidth+"px",o._column.flexGrow=0)}),t.detail.state==="end"&&(this._toggleAttribute("column-resizing",!1,this.$.scroller),this.dispatchEvent(new CustomEvent("column-resize",{detail:{resizedColumn:r}}))),this._resizeHandler()}}},Kl=class Kh{constructor(t,e,r){this.grid=t,this.parentCache=e,this.parentItem=r,this.itemCaches={},this.items={},this.effectiveSize=0,this.size=0,this.pendingRequests={}}isLoading(){return!!(Object.keys(this.pendingRequests).length||Object.keys(this.itemCaches).filter(t=>this.itemCaches[t].isLoading())[0])}getItemForIndex(t){const{cache:e,scaledIndex:r}=this.getCacheAndIndex(t);return e.items[r]}updateSize(){this.effectiveSize=!this.parentItem||this.grid._isExpanded(this.parentItem)?this.size+Object.keys(this.itemCaches).reduce((t,e)=>{const r=this.itemCaches[e];return r.updateSize(),t+r.effectiveSize},0):0}ensureSubCacheForScaledIndex(t){if(!this.itemCaches[t]){const e=new Kh(this.grid,this,this.items[t]);this.itemCaches[t]=e,this.grid._loadPage(0,e)}}getCacheAndIndex(t){let e=t;const r=Object.keys(this.itemCaches);for(let n=0;n<r.length;n++){const s=Number(r[n]),o=this.itemCaches[s];if(e<=s)return{cache:this,scaledIndex:e};if(e<=s+o.effectiveSize)return o.getCacheAndIndex(e-s-1);e-=o.effectiveSize}return{cache:this,scaledIndex:e}}},bg=i=>class extends i{static get properties(){return{pageSize:{type:Number,value:50,observer:"_pageSizeChanged"},dataProvider:{type:Object,notify:!0,observer:"_dataProviderChanged"},loading:{type:Boolean,notify:!0,readOnly:!0,reflectToAttribute:!0},_cache:{type:Object,value:function(){return new Kl(this)}},itemIdPath:{type:String,value:null},expandedItems:{type:Object,notify:!0,value:()=>[]}}}static get observers(){return["_sizeChanged(size)","_itemIdPathChanged(itemIdPath)","_expandedItemsChanged(expandedItems.*)"]}_sizeChanged(t){const e=t-this._cache.size;this._cache.size+=e,this._cache.effectiveSize+=e,this._effectiveSize=this._cache.effectiveSize,this._increasePoolIfNeeded(0),this._debounceIncreasePool&&this._debounceIncreasePool.flush()}_getItem(t,e){if(t>=this._effectiveSize)return;e.index=t;const{cache:r,scaledIndex:n}=this._cache.getCacheAndIndex(t),s=r.items[n];s?(this._toggleAttribute("loading",!1,e),this._updateItem(e,s),this._isExpanded(s)&&r.ensureSubCacheForScaledIndex(n)):(this._toggleAttribute("loading",!0,e),this._loadPage(this._getPageForIndex(n),r))}_expandedInstanceChangedCallback(t,e){t.item!==void 0&&(e?this.expandItem(t.item):this.collapseItem(t.item))}getItemId(t){return this.itemIdPath?this.get(this.itemIdPath,t):t}_isExpanded(t){return this.__expandedKeys.has(this.getItemId(t))}_expandedItemsChanged(){this.__cacheExpandedKeys(),this._cache.updateSize(),this._effectiveSize=this._cache.effectiveSize,this._assignModels()}_itemIdPathChanged(){this.__cacheExpandedKeys()}__cacheExpandedKeys(){this.expandedItems&&(this.__expandedKeys=new Set,this.expandedItems.forEach(t=>{this.__expandedKeys.add(this.getItemId(t))}))}expandItem(t){this._isExpanded(t)||this.push("expandedItems",t)}collapseItem(t){this._isExpanded(t)&&this.splice("expandedItems",this._getItemIndexInArray(t,this.expandedItems),1)}_getIndexLevel(t){let{cache:e}=this._cache.getCacheAndIndex(t),r=0;for(;e.parentCache;)e=e.parentCache,r++;return r}_canPopulate(){return!!(this._hasData&&this._columnTree)}_loadPage(t,e){if(!e.pendingRequests[t]&&this.dataProvider){this._setLoading(!0),e.pendingRequests[t]=!0;const r={page:t,pageSize:this.pageSize,sortOrders:this._mapSorters(),filters:this._mapFilters(),parentItem:e.parentItem};this._debounceIncreasePool&&this._debounceIncreasePool.flush(),this.dataProvider(r,(n,s)=>{s!==void 0?e.size=s:r.parentItem&&(e.size=n.length);const o=Array.from(this.$.items.children).map(a=>a._item);n.forEach((a,l)=>{const d=t*this.pageSize+l;e.items[d]=a,this._isExpanded(a)&&o.indexOf(a)>-1&&e.ensureSubCacheForScaledIndex(d)}),this._hasData=!0,delete e.pendingRequests[t],this._debouncerApplyCachedData=Rt.debounce(this._debouncerApplyCachedData,xe.after(0),()=>{this._setLoading(!1),this._cache.updateSize(),this._effectiveSize=this._cache.effectiveSize,Array.from(this.$.items.children).filter(a=>!a.hidden).forEach(a=>{this._cache.getItemForIndex(a.index)&&this._getItem(a.index,a)}),this._increasePoolIfNeeded(0),this.__scrollToPendingIndex()}),this._cache.isLoading()||this._debouncerApplyCachedData.flush(),this.__itemsReceived()})}}_getPageForIndex(t){return Math.floor(t/this.pageSize)}clearCache(){this._cache=new Kl(this),Array.from(this.$.items.children).forEach(t=>{Array.from(t.children).forEach(e=>{e._instance&&e._instance._setPendingProperty("item",{},!1)})}),this._cache.size=this.size||0,this._cache.updateSize(),this._hasData=!1,this._assignModels(),this._effectiveSize&&this._initialPoolCreated||this._loadPage(0,this._cache)}_pageSizeChanged(t,e){e!==void 0&&t!==e&&this.clearCache()}_checkSize(){this.size===void 0&&this._effectiveSize===0&&console.warn("The <vaadin-grid> needs the total number of items in order to display rows. Set the total number of items to the `size` property, or provide the total number of items in the second argument of the `dataProvider`’s `callback` call.")}_dataProviderChanged(t,e){e!==void 0&&this.clearCache(),t&&this.items&&this.items.length&&this._scrollToIndex(this._firstVisibleIndex),this._ensureFirstPageLoaded(),this._debouncerCheckSize=Rt.debounce(this._debouncerCheckSize,xe.after(2e3),this._checkSize.bind(this)),this._scrollHandler()}_ensureFirstPageLoaded(){this._hasData||this._loadPage(0,this._cache)}_itemsEqual(t,e){return this.getItemId(t)===this.getItemId(e)}_getItemIndexInArray(t,e){let r=-1;return e.forEach((n,s)=>{this._itemsEqual(n,t)&&(r=s)}),r}scrollToIndex(t){super.scrollToIndex(t),isNaN(t)||!this._cache.isLoading()&&this.clientHeight||(this.__pendingScrollToIndex=t)}__scrollToPendingIndex(){if(this.__pendingScrollToIndex&&this.$.items.children.length){const t=this.__pendingScrollToIndex;delete this.__pendingScrollToIndex,this._debounceIncreasePool&&this._debounceIncreasePool.flush(),this.scrollToIndex(t)}}},vg=i=>class extends i{ready(){super.ready(),this._addNodeObserver()}_hasColumnGroups(t){for(let e=0;e<t.length;e++)if(t[e].localName==="vaadin-grid-column-group")return!0;return!1}_getChildColumns(t){return $e.getFlattenedNodes(t).filter(this._isColumnElement)}_flattenColumnGroups(t){return t.map(e=>e.localName==="vaadin-grid-column-group"?this._getChildColumns(e):[e]).reduce((e,r)=>e.concat(r),[])}_getColumnTree(){const t=[];for(let e=$e.getFlattenedNodes(this).filter(this._isColumnElement);t.push(e),this._hasColumnGroups(e);)e=this._flattenColumnGroups(e);return t}_updateColumnTree(){const t=this._getColumnTree();this._arrayEquals(t,this._columnTree)||(this._columnTree=t)}_addNodeObserver(){this._observer=new $e(this,t=>{const e=t.addedNodes.filter(n=>n.localName==="template"&&n.classList.contains("row-details"))[0];e&&this._rowDetailsTemplate!==e&&(this._rowDetailsTemplate=e);const r=n=>n.filter(this._isColumnElement).length>0;if(r(t.addedNodes)||r(t.removedNodes)){const n=t.removedNodes.flatMap(o=>o._allCells),s=o=>n.filter(a=>a._content.contains(o)).length;this.__removeSorters(this._sorters.filter(s)),this.__removeFilters(this._filters.filter(s)),this._updateColumnTree()}this._debouncerCheckImports=Rt.debounce(this._debouncerCheckImports,xe.after(2e3),this._checkImports.bind(this)),this._ensureFirstPageLoaded()})}_arrayEquals(t,e){if(!t||!e||t.length!=e.length)return!1;for(let r=0,n=t.length;r<n;r++)if(t[r]instanceof Array&&e[r]instanceof Array){if(!this._arrayEquals(t[r],e[r]))return!1}else if(t[r]!=e[r])return!1;return!0}_checkImports(){["vaadin-grid-column-group","vaadin-grid-filter","vaadin-grid-filter-column","vaadin-grid-tree-toggle","vaadin-grid-selection-column","vaadin-grid-sort-column","vaadin-grid-sorter"].forEach(t=>{const e=this.querySelector(t);!e||e instanceof Ve||console.warn(`Make sure you have imported the required module for <${t}> element.`)})}_updateFirstAndLastColumn(){Array.from(this.shadowRoot.querySelectorAll("tr")).forEach(t=>this._updateFirstAndLastColumnForRow(t))}_updateFirstAndLastColumnForRow(t){Array.from(t.querySelectorAll('[part~="cell"]:not([part~="details-cell"])')).sort((e,r)=>e._column._order-r._column._order).forEach((e,r,n)=>{this._toggleAttribute("first-column",r===0,e),this._toggleAttribute("last-column",r===n.length-1,e)})}_isColumnElement(t){return t.nodeType===Node.ELEMENT_NODE&&/\bcolumn\b/.test(t.localName)}},wg=i=>class extends i{getEventContext(t){const e={},r=t.composedPath(),n=r[r.indexOf(this.$.table)-3];return n&&(e.section=["body","header","footer","details"].filter(s=>n.getAttribute("part").indexOf(s)>-1)[0],n._column&&(e.column=n._column),e.section!=="body"&&e.section!=="details"||Object.assign(e,this.__getRowModel(n.parentElement))),e}},Cg=i=>class extends i{static get properties(){return{_filters:{type:Array,value:function(){return[]}}}}ready(){super.ready(),this.addEventListener("filter-changed",this._filterChanged.bind(this))}_filterChanged(t){t.stopPropagation(),this.__addFilter(t.target),this.__applyFilters()}__removeFilters(t){t.length!=0&&(this._filters=this._filters.filter(e=>t.indexOf(e)<0),this.__applyFilters())}__addFilter(t){this._filters.indexOf(t)===-1&&this._filters.push(t)}__applyFilters(){this.dataProvider&&this.isAttached&&this.clearCache()}_mapFilters(){return this._filters.map(t=>({path:t.path,value:t.value}))}};class Xn extends Ve{static get is(){return"vaadin-grid-templatizer"}static get properties(){return{dataHost:Object,template:Object,_templateInstances:{type:Array,value:function(){return[]}},_parentPathValues:{value:function(){return{}}},_grid:Object}}static get observers(){return["_templateInstancesChanged(_templateInstances.*, _parentPathValues.*)"]}constructor(){super(),this._instanceProps={detailsOpened:!0,index:!0,item:!0,selected:!0,expanded:!0,level:!0}}createInstance(){this._ensureTemplatized();const t=new this._TemplateClass({});return this.addInstance(t),t}addInstance(t){this._templateInstances.indexOf(t)===-1&&(this._templateInstances.push(t),requestAnimationFrame(()=>this.notifyPath("_templateInstances.*",this._templateInstances)))}removeInstance(t){const e=this._templateInstances.indexOf(t);this.splice("_templateInstances",e,1)}_ensureTemplatized(){this._TemplateClass||(this._TemplateClass=Gr(this.template,this,{instanceProps:this._instanceProps,parentModel:!0,forwardHostProp:function(t,e){this._forwardParentProp(t,e),this._templateInstances&&this._templateInstances.forEach(r=>r.notifyPath(t,e))},notifyInstanceProp:function(t,e,r){if(e==="index"||e==="item")return;const n=`__${e}__`;if(t[n]===r)return;t[n]=r;const s=Array.from(this._grid.$.items.children).filter(l=>this._grid._itemsEqual(l._item,t.item))[0];s&&Array.from(s.children).forEach(l=>{l._instance&&(l._instance[n]=r,l._instance.notifyPath(e,r))});const o="item.";if(Array.isArray(this._grid.items)&&e.indexOf(o)===0){const l=this._grid.items.indexOf(t.item),d=e.slice(o.length);this._grid.notifyPath(`items.${l}.${d}`,r)}const a=`_${e}InstanceChangedCallback`;this._grid&&this._grid[a]&&this._grid[a](t,r)}}))}_forwardParentProp(t,e){this._parentPathValues[t]=e,this._templateInstances.forEach(r=>r.notifyPath(t,e))}_templateInstancesChanged(t){let e,r;if(t.path==="_templateInstances")e=0,r=this._templateInstances.length;else{if(t.path!=="_templateInstances.splices")return;e=t.value.index,r=t.value.addedCount}Object.keys(this._parentPathValues||{}).forEach(n=>{for(let s=e;s<e+r;s++)this._templateInstances[s].set(n,this._parentPathValues[n])})}}customElements.define(Xn.is,Xn);const Ag=i=>class extends i{static get properties(){return{detailsOpenedItems:{type:Array,value:function(){return[]}},_rowDetailsTemplate:Object,rowDetailsRenderer:Function,_detailsCells:{type:Array}}}static get observers(){return["_detailsOpenedItemsChanged(detailsOpenedItems.*, _rowDetailsTemplate, rowDetailsRenderer)","_rowDetailsTemplateOrRendererChanged(_rowDetailsTemplate, rowDetailsRenderer)"]}_rowDetailsTemplateOrRendererChanged(t,e){if(t&&e)throw new Error("You should only use either a renderer or a template for row details");if(t||e){if(t&&!t.templatizer){const r=new Xn;r._grid=this,r.dataHost=this.dataHost,r.template=t,t.templatizer=r}this._columnTree&&Array.from(this.$.items.children).forEach(r=>{r.querySelector("[part~=details-cell]")||(this._updateRow(r,this._columnTree[this._columnTree.length-1]),this._a11yUpdateRowDetailsOpened(r,!1)),delete r.querySelector("[part~=details-cell]")._instance}),this.detailsOpenedItems.length&&(Array.from(this.$.items.children).forEach(this._toggleDetailsCell,this),this._update())}}_detailsOpenedItemsChanged(t){t.path!=="detailsOpenedItems.length"&&t.value&&Array.from(this.$.items.children).forEach(e=>{this._toggleDetailsCell(e,e._item),this._a11yUpdateRowDetailsOpened(e,this._isDetailsOpened(e._item)),this._toggleAttribute("details-opened",this._isDetailsOpened(e._item),e)})}_configureDetailsCell(t){t.setAttribute("part","cell details-cell"),this._toggleAttribute("frozen",!0,t)}_toggleDetailsCell(t,e){const r=t.querySelector('[part~="details-cell"]');if(!r)return;const n=!this._isDetailsOpened(e),s=!!r.hidden!==n;(r._instance||r._renderer)&&r.hidden===n||(r.hidden=n,n?t.style.removeProperty("padding-bottom"):(this.rowDetailsRenderer?(r._renderer=this.rowDetailsRenderer,r._renderer.call(this,r._content,this,{index:t.index,item:e})):this._rowDetailsTemplate&&!r._instance&&(r._instance=this._rowDetailsTemplate.templatizer.createInstance(),r._content.innerHTML="",r._content.appendChild(r._instance.root),this._updateItem(t,e)),Yi(),t.style.setProperty("padding-bottom",`${r.offsetHeight}px`),requestAnimationFrame(()=>this.notifyResize()))),s&&(this._updateMetrics(),this._positionItems())}_updateDetailsCellHeights(){Array.from(this.$.items.querySelectorAll('[part~="details-cell"]:not([hidden])')).forEach(t=>{t.parentElement.style.setProperty("padding-bottom",`${t.offsetHeight}px`)})}_isDetailsOpened(t){return this.detailsOpenedItems&&this._getItemIndexInArray(t,this.detailsOpenedItems)!==-1}openItemDetails(t){this._isDetailsOpened(t)||this.push("detailsOpenedItems",t)}closeItemDetails(t){this._isDetailsOpened(t)&&this.splice("detailsOpenedItems",this._getItemIndexInArray(t,this.detailsOpenedItems),1)}_detailsOpenedInstanceChangedCallback(t,e){e?this.openItemDetails(t.item):this.closeItemDetails(t.item)}},Bs={SCROLLING:500,IGNORE_WHEEL:500},Sg=i=>class extends i{static get properties(){return{_frozenCells:{type:Array,value:()=>[]},_rowWithFocusedElement:Element,_deltaYAcc:{type:Number,value:0},_useSticky:{type:Boolean,value:window.CSS&&window.CSS.supports&&(window.CSS.supports("position","sticky")||window.CSS.supports("position","-webkit-sticky"))}}}static get observers(){return["_scrollViewportHeightUpdated(_viewportHeight)"]}set _scrollTop(t){this.$.table.scrollTop=t}get _scrollTop(){return this.$.table.scrollTop}constructor(){super(),this._scrollLineHeight=this._getScrollLineHeight()}_getScrollLineHeight(){const t=document.createElement("div");t.style.fontSize="initial",t.style.display="none",document.body.appendChild(t);const e=window.getComputedStyle(t).fontSize;return document.body.removeChild(t),e?window.parseInt(e):void 0}_scrollViewportHeightUpdated(t){this._scrollPageHeight=t-this.$.header.clientHeight-this.$.footer.clientHeight-this._scrollLineHeight}ready(){super.ready(),this.$.outerscroller=document.createElement("div"),this.scrollTarget=this.$.table,this.addEventListener("wheel",this._onWheel),this.$.items.addEventListener("focusin",t=>{const e=t.composedPath().indexOf(this.$.items);this._rowWithFocusedElement=t.composedPath()[e-1]}),this.$.items.addEventListener("focusout",()=>this._rowWithFocusedElement=void 0),this.scrollTarget.addEventListener("mousedown",()=>this.__mouseDown=!0),this.scrollTarget.addEventListener("mouseup",()=>{this.__mouseDown=!1,this.__pendingReorder&&(this.__pendingReorder=!1,setTimeout(()=>this._reorderRows(),Bs.SCROLLING))})}scrollToIndex(t){this._accessIronListAPI(()=>super.scrollToIndex(t))}_onWheel(t){if(t.ctrlKey||this._hasScrolledAncestor(t.target,t.deltaX,t.deltaY))return;const e=this.$.table;let r=t.deltaY;if(t.deltaMode===WheelEvent.DOM_DELTA_LINE?r*=this._scrollLineHeight:t.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(r*=this._scrollPageHeight),this._wheelAnimationFrame)return this._deltaYAcc+=r,void t.preventDefault();r+=this._deltaYAcc,this._deltaYAcc=0,this._wheelAnimationFrame=!0,this._debouncerWheelAnimationFrame=Rt.debounce(this._debouncerWheelAnimationFrame,Me,()=>this._wheelAnimationFrame=!1);const n=Math.abs(t.deltaX)+Math.abs(r);this._canScroll(e,t.deltaX,r)?(t.preventDefault(),e.scrollTop+=r,e.scrollLeft+=t.deltaX,this._scrollHandler(),this._hasResidualMomentum=!0,this._ignoreNewWheel=!0,this._debouncerIgnoreNewWheel=Rt.debounce(this._debouncerIgnoreNewWheel,xe.after(Bs.IGNORE_WHEEL),()=>this._ignoreNewWheel=!1)):this._hasResidualMomentum&&n<=this._previousMomentum||this._ignoreNewWheel?t.preventDefault():n>this._previousMomentum&&(this._hasResidualMomentum=!1),this._previousMomentum=n}_hasScrolledAncestor(t,e,r){return t.localName!=="vaadin-grid-cell-content"&&(!(!this._canScroll(t,e,r)||["auto","scroll"].indexOf(getComputedStyle(t).overflow)===-1)||(t!==this&&t.parentElement?this._hasScrolledAncestor(t.parentElement,e,r):void 0))}_canScroll(t,e,r){return r>0&&t.scrollTop<t.scrollHeight-t.offsetHeight||r<0&&t.scrollTop>0||e>0&&t.scrollLeft<t.scrollWidth-t.offsetWidth||e<0&&t.scrollLeft>0}_scheduleScrolling(){this._scrollingFrame||(this._scrollingFrame=requestAnimationFrame(()=>this._toggleAttribute("scrolling",!0,this.$.scroller))),this._debounceScrolling=Rt.debounce(this._debounceScrolling,xe.after(Bs.SCROLLING),()=>{cancelAnimationFrame(this._scrollingFrame),delete this._scrollingFrame,this._toggleAttribute("scrolling",!1,this.$.scroller),this._reorderRows()})}_afterScroll(){this._translateStationaryElements(),this.hasAttribute("reordering")||this._scheduleScrolling(),this._updateOverflow()}_updateOverflow(){let t="";const e=this.$.table;e.scrollTop<e.scrollHeight-e.clientHeight&&(t+=" bottom"),e.scrollTop>0&&(t+=" top"),e.scrollLeft<e.scrollWidth-e.clientWidth&&(t+=" right"),e.scrollLeft>0&&(t+=" left"),this._debounceOverflow=Rt.debounce(this._debounceOverflow,Me,()=>{const r=t.trim();r.length>0&&this.getAttribute("overflow")!==r?this.setAttribute("overflow",r):r.length==0&&this.hasAttribute("overflow")&&this.removeAttribute("overflow")})}_reorderRows(){if(this.__mouseDown)return void(this.__pendingReorder=!0);const t=this.$.items,e=t.querySelectorAll("tr");if(!e.length)return;const r=this._virtualStart+this._vidxOffset,n=this._rowWithFocusedElement||Array.from(e).filter(a=>!a.hidden)[0];if(!n)return;const s=n.index-r,o=Array.from(e).indexOf(n)-s;if(o>0)for(let a=0;a<o;a++)t.appendChild(e[a]);else if(o<0)for(let a=e.length+o;a<e.length;a++)t.insertBefore(e[a],e[0]);if(this._safari){const{transform:a}=this.$.header.style;this.$.header.style.transform="",setTimeout(()=>this.$.header.style.transform=a)}}_frozenCellsChanged(){this._debouncerCacheElements=Rt.debounce(this._debouncerCacheElements,be,()=>{Array.from(this.shadowRoot.querySelectorAll('[part~="cell"]')).forEach(function(t){t.style.transform=""}),this._frozenCells=Array.prototype.slice.call(this.$.table.querySelectorAll("[frozen]")),this._updateScrollerMeasurements(),this._translateStationaryElements()}),this._updateLastFrozen()}_updateScrollerMeasurements(){this._frozenCells.length>0&&this.__isRTL&&(this.__scrollerMetrics={scrollWidth:this.$.table.scrollWidth,clientWidth:this.$.table.clientWidth})}_updateLastFrozen(){if(!this._columnTree)return;const t=this._columnTree[this._columnTree.length-1].slice(0);t.sort((r,n)=>r._order-n._order);const e=t.reduce((r,n,s)=>(n._lastFrozen=!1,n.frozen&&!n.hidden?s:r),void 0);e!==void 0&&(t[e]._lastFrozen=!0)}_translateStationaryElements(){const t=Math.max(0,this._scrollLeft),e=Math.max(0,this._scrollTop);let r=0,n=0,s=0;if(this._useSticky||(r=t,n=e,s=this.$.table.clientHeight-this.$.footer.offsetHeight-this.$.footer.offsetTop),this.$.header.style.transform=this._getTranslate(-t+r,n),this.$.footer.style.transform=this._getTranslate(-t+r,n+s),this.$.items.style.transform=this._getTranslate(-t+r,0),this._frozenCells.length>0){const o=this.__isRTL?this.__getNormalizedScrollLeft(this.$.table)+this.__scrollerMetrics.clientWidth-this.__scrollerMetrics.scrollWidth:this._scrollLeft,a=this._getTranslate(o,0);for(let l=0;l<this._frozenCells.length;l++)this._frozenCells[l].style.transform=a}}_getTranslate(t,e){return`translate(${t}px, ${e}px)`}},xg=i=>class extends i{static get properties(){return{selectedItems:{type:Object,notify:!0,value:()=>[]}}}static get observers(){return["_selectedItemsChanged(selectedItems.*)"]}_isSelected(t){return this.selectedItems&&this._getItemIndexInArray(t,this.selectedItems)>-1}selectItem(t){this._isSelected(t)||this.push("selectedItems",t)}deselectItem(t){const e=this._getItemIndexInArray(t,this.selectedItems);e>-1&&this.splice("selectedItems",e,1)}_toggleItem(t){this._getItemIndexInArray(t,this.selectedItems)===-1?this.selectItem(t):this.deselectItem(t)}_selectedItemsChanged(t){!this.$.items.children.length||t.path!=="selectedItems"&&t.path!=="selectedItems.splices"||Array.from(this.$.items.children).forEach(e=>{this._updateItem(e,e._item)})}_selectedInstanceChangedCallback(t,e){e?this.selectItem(t.item):this.deselectItem(t.item)}},Eg=i=>class extends i{static get properties(){return{multiSort:{type:Boolean,value:!1},_sorters:{type:Array,value:function(){return[]}},_previousSorters:{type:Array,value:function(){return[]}}}}ready(){super.ready(),this.addEventListener("sorter-changed",this._onSorterChanged)}_onSorterChanged(t){const e=t.target;t.stopPropagation(),this.__updateSorter(e),this.__applySorters()}__removeSorters(t){t.length!=0&&(this._sorters=this._sorters.filter(e=>t.indexOf(e)<0),this.multiSort&&this.__updateSortOrders(),this.__applySorters())}__updateSortOrders(){this._sorters.forEach((t,e)=>t._order=this._sorters.length>1?e:null,this)}__updateSorter(t){if(t.direction||this._sorters.indexOf(t)!==-1){if(t._order=null,this.multiSort)this._removeArrayItem(this._sorters,t),t.direction&&this._sorters.unshift(t),this.__updateSortOrders();else if(t.direction){const e=this._sorters.filter(r=>r!=t);this._sorters=[t],e.forEach(r=>{r._order=null,r.direction=null})}}}__applySorters(){this.dataProvider&&this.isAttached&&JSON.stringify(this._previousSorters)!==JSON.stringify(this._mapSorters())&&this.clearCache(),this._a11yUpdateSorters(),this._previousSorters=this._mapSorters()}_mapSorters(){return this._sorters.map(t=>({path:t.path,direction:t.direction}))}_removeArrayItem(t,e){const r=t.indexOf(e);r>-1&&t.splice(r,1)}},Ig=i=>class extends i{static get properties(){return{cellClassNameGenerator:Function}}static get observers(){return["__cellClassNameGeneratorChanged(cellClassNameGenerator)"]}__cellClassNameGeneratorChanged(){this.generateCellClassNames()}generateCellClassNames(){Array.from(this.$.items.children).filter(t=>!t.hidden).forEach(t=>this._generateCellClassNames(t,this.__getRowModel(t)))}_generateCellClassNames(t,e){Array.from(t.children).forEach(r=>{if(r.__generatedClasses&&r.__generatedClasses.forEach(n=>r.classList.remove(n)),this.cellClassNameGenerator){const n=this.cellClassNameGenerator(r._column,e);r.__generatedClasses=n&&n.split(" ").filter(s=>s.length>0),r.__generatedClasses&&r.__generatedClasses.forEach(s=>r.classList.add(s))}})}},or={BETWEEN:"between",ON_TOP:"on-top",ON_TOP_OR_BETWEEN:"on-top-or-between",ON_GRID:"on-grid"},Ge={ON_TOP:"on-top",ABOVE:"above",BELOW:"below",EMPTY:"empty"},Tg=i=>class extends i{static get properties(){return{dropMode:String,rowsDraggable:Boolean,dragFilter:Function,dropFilter:Function,__dndAutoScrollThreshold:{value:50}}}static get observers(){return["_dragDropAccessChanged(rowsDraggable, dropMode, dragFilter, dropFilter)"]}ready(){super.ready(),this.$.table.addEventListener("dragstart",this._onDragStart.bind(this)),this.$.table.addEventListener("dragend",this._onDragEnd.bind(this)),this.$.table.addEventListener("dragover",this._onDragOver.bind(this)),this.$.table.addEventListener("dragleave",this._onDragLeave.bind(this)),this.$.table.addEventListener("drop",this._onDrop.bind(this)),this.$.table.addEventListener("dragenter",t=>{this.dropMode&&(t.preventDefault(),t.stopPropagation())})}_onDragStart(t){if(this.rowsDraggable){let e=t.target;if(e.localName==="vaadin-grid-cell-content"&&(e=e.assignedSlot.parentNode.parentNode),e.parentNode!==this.$.items)return;if(t.stopPropagation(),this._toggleAttribute("dragging-rows",!0,this),this._safari){const o=e.style.transform;e.style.top=/translateY\((.*)\)/.exec(o)[1],e.style.transform="none",requestAnimationFrame(()=>{e.style.top="",e.style.transform=o})}const r=e.getBoundingClientRect();this._ios?t.dataTransfer.setDragImage(e):t.dataTransfer.setDragImage(e,t.clientX-r.left,t.clientY-r.top);let n=[e];this._isSelected(e._item)&&(n=this.__getViewportRows().filter(o=>this._isSelected(o._item)).filter(o=>!this.dragFilter||this.dragFilter(this.__getRowModel(o)))),t.dataTransfer.setData("text",this.__formatDefaultTransferData(n)),e.setAttribute("dragstart",n.length>1?n.length:""),this.updateStyles({"--_grid-drag-start-x":t.clientX-r.left+20+"px","--_grid-drag-start-y":t.clientY-r.top+10+"px"}),requestAnimationFrame(()=>{e.removeAttribute("dragstart"),this.updateStyles({"--_grid-drag-start-x":"","--_grid-drag-start-y":""})});const s=new CustomEvent("grid-dragstart",{detail:{draggedItems:n.map(o=>o._item),setDragData:(o,a)=>t.dataTransfer.setData(o,a),setDraggedItemsCount:o=>e.setAttribute("dragstart",o)}});s.originalEvent=t,this.dispatchEvent(s)}}_onDragEnd(t){this._toggleAttribute("dragging-rows",!1,this),t.stopPropagation();const e=new CustomEvent("grid-dragend");e.originalEvent=t,this.dispatchEvent(e)}_onDragLeave(t){t.stopPropagation(),this._clearDragStyles()}_onDragOver(t){if(this.dropMode){if(this._dropLocation=void 0,this._dragOverItem=void 0,this.__dndAutoScroll(t.clientY))return void this._clearDragStyles();let e=t.composedPath().filter(r=>r.localName==="tr")[0];if(this._effectiveSize&&this.dropMode!==or.ON_GRID)if(e&&e.parentNode===this.$.items){const r=e.getBoundingClientRect();if(this._dropLocation=Ge.ON_TOP,this.dropMode===or.BETWEEN){const n=t.clientY-r.top<r.bottom-t.clientY;this._dropLocation=n?Ge.ABOVE:Ge.BELOW}else this.dropMode===or.ON_TOP_OR_BETWEEN&&(t.clientY-r.top<r.height/3?this._dropLocation=Ge.ABOVE:t.clientY-r.top>r.height/3*2&&(this._dropLocation=Ge.BELOW))}else{if(e||this.dropMode!==or.BETWEEN&&this.dropMode!==or.ON_TOP_OR_BETWEEN)return;e=Array.from(this.$.items.children).filter(r=>!r.hidden).pop(),this._dropLocation=Ge.BELOW}else this._dropLocation=Ge.EMPTY;if(e&&e.hasAttribute("drop-disabled"))return void(this._dropLocation=void 0);t.stopPropagation(),t.preventDefault(),this._dropLocation===Ge.EMPTY?this._toggleAttribute("dragover",!0,this):e?(this._dragOverItem=e._item,e.getAttribute("dragover")!==this._dropLocation&&e.setAttribute("dragover",this._dropLocation)):this._clearDragStyles()}}__dndAutoScroll(t){if(this.__dndAutoScrolling)return!0;const e=this.$.header.getBoundingClientRect().bottom,r=this.$.footer.getBoundingClientRect().top,n=e-t+this.__dndAutoScrollThreshold,s=t-r+this.__dndAutoScrollThreshold;let o=0;if(s>0?o=2*s:n>0&&(o=2*-n),o){const a=this.$.table.scrollTop;if(this.$.table.scrollTop+=o,a!==this.$.table.scrollTop)return this.__dndAutoScrolling=!0,setTimeout(()=>this.__dndAutoScrolling=!1,20),this._scrollHandler(),!0}}__getViewportRows(){const t=this.$.header.getBoundingClientRect().bottom,e=this.$.footer.getBoundingClientRect().top;return Array.from(this.$.items.children).filter(r=>{const n=r.getBoundingClientRect();return n.bottom>t&&n.top<e})}_clearDragStyles(){this.removeAttribute("dragover"),Array.from(this.$.items.children).forEach(t=>t.removeAttribute("dragover"))}_onDrop(t){if(this.dropMode){t.stopPropagation(),t.preventDefault();const e=t.dataTransfer.types&&Array.from(t.dataTransfer.types).map(n=>({type:n,data:t.dataTransfer.getData(n)}));this._clearDragStyles();const r=new CustomEvent("grid-drop",{bubbles:t.bubbles,cancelable:t.cancelable,detail:{dropTargetItem:this._dragOverItem,dropLocation:this._dropLocation,dragData:e}});r.originalEvent=t,this.dispatchEvent(r)}}__formatDefaultTransferData(t){return t.map(e=>Array.from(e.children).filter(r=>!r.hidden&&r.getAttribute("part").indexOf("details-cell")===-1).sort((r,n)=>r._column._order>n._column._order?1:-1).map(r=>r._content.textContent.trim()).filter(r=>r).join("	")).join(`
`)}_dragDropAccessChanged(){this.filterDragAndDrop()}filterDragAndDrop(){Array.from(this.$.items.children).filter(t=>!t.hidden).forEach(t=>{this._filterDragAndDrop(t,this.__getRowModel(t))})}_filterDragAndDrop(t,e){const r=!this.rowsDraggable||this.dragFilter&&!this.dragFilter(e),n=!this.dropMode||this.dropFilter&&!this.dropFilter(e);Array.from(t.children).map(s=>s._content).forEach(s=>{r?s.removeAttribute("draggable"):s.setAttribute("draggable",!0)}),this._toggleAttribute("drag-disabled",r,t),this._toggleAttribute("drop-disabled",n,t)}},Pg=i=>class extends i{static get properties(){return{_headerFocusable:{type:Object,observer:"_focusableChanged"},_itemsFocusable:{type:Object,observer:"_focusableChanged"},_footerFocusable:{type:Object,observer:"_focusableChanged"},_navigatingIsHidden:Boolean,_focusedItemIndex:{type:Number,value:0},_focusedColumnOrder:Number}}ready(){super.ready(),this._ios||this._android||(this.addEventListener("keydown",this._onKeyDown),this.addEventListener("keyup",this._onKeyUp),this.addEventListener("focusin",this._onFocusIn),this.addEventListener("focusout",this._onFocusOut),this.$.table.addEventListener("focusin",this._onCellFocusIn.bind(this)),this.$.table.addEventListener("focusout",this._onCellFocusOut.bind(this)),this.addEventListener("mousedown",()=>{this._toggleAttribute("navigating",!1,this),this._isMousedown=!0}),this.addEventListener("mouseup",()=>this._isMousedown=!1))}_focusableChanged(t,e){e&&e.setAttribute("tabindex","-1"),t&&t.setAttribute("tabindex","0")}_onKeyDown(t){const e=t.key;let r;switch(e){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"PageUp":case"PageDown":case"Home":case"End":r="Navigation";break;case"Enter":case"Escape":case"F2":r="Interaction";break;case"Tab":r="Tab";break;case" ":r="Space"}this._detectInteracting(t),this.hasAttribute("interacting")&&r!=="Interaction"&&(r=void 0),r&&this[`_on${r}KeyDown`](t,e)}_ensureScrolledToIndex(t){Array.from(this.$.items.children).filter(e=>e.index===t)[0]||this._scrollToIndex(t)}_onNavigationKeyDown(t,e){function r(M){return Array.prototype.indexOf.call(M.parentNode.children,M)}this._scrollHandler(),t.preventDefault();const n=this._lastVisibleIndex-this._firstVisibleIndex-1;let s=0,o=0;switch(e){case"ArrowRight":s=this.__isRTL?-1:1;break;case"ArrowLeft":s=this.__isRTL?1:-1;break;case"Home":s=-1/0,t.ctrlKey&&(o=-1/0);break;case"End":s=1/0,t.ctrlKey&&(o=1/0);break;case"ArrowDown":o=1;break;case"ArrowUp":o=-1;break;case"PageDown":o=n;break;case"PageUp":o=-n}const a=t.composedPath()[0],l=r(a),d=this._elementMatches(a,'[part~="details-cell"]'),h=a.parentNode,c=h.parentNode,m=(c===this.$.items?this._effectiveSize:c.children.length)-1,p=c===this.$.items?this._focusedItemIndex!==void 0?this._focusedItemIndex:h.index:r(h);let g=Math.max(0,Math.min(p+o,m)),f=!1;if(c===this.$.items){const M=h._item,O=this._cache.getItemForIndex(g);f=d?o===0:o===1&&this._isDetailsOpened(M)||o===-1&&g!==p&&this._isDetailsOpened(O),f!==d&&(o===1&&f||o===-1&&!f)&&(g=p)}if(c!==this.$.items){if(g>p)for(;g<m&&c.children[g].hidden;)g++;else if(g<p)for(;g>0&&c.children[g].hidden;)g--}this._focusedColumnOrder===void 0&&(this._focusedColumnOrder=d?0:this._getColumns(c,p).filter(M=>!M.hidden)[l]._order);const b=this._getColumns(c,g).filter(M=>!M.hidden),y=b.map(M=>M._order).sort((M,O)=>M-O),v=y.length-1,S=y.indexOf(y.slice(0).sort((M,O)=>Math.abs(M-this._focusedColumnOrder)-Math.abs(O-this._focusedColumnOrder))[0]),I=o===0&&d?S:Math.max(0,Math.min(S+s,v));I!==S&&(this._focusedColumnOrder=void 0),c===this.$.items&&this._ensureScrolledToIndex(g),this._toggleAttribute("navigating",!0,this);const T=b.reduce((M,O,H)=>(M[O._order]=H,M),{})[y[I]],D=c===this.$.items?Array.from(c.children).filter(M=>M.index===g)[0]:c.children[g];if(!D)return;const R=f?Array.from(D.children).filter(M=>this._elementMatches(M,'[part~="details-cell"]'))[0]:D.children[T];if(this._scrollHorizontallyToCell(R),c===this.$.items&&(this._focusedItemIndex=g),c===this.$.items){const M=R.getBoundingClientRect(),O=this.$.footer.getBoundingClientRect().top,H=this.$.header.getBoundingClientRect().bottom;M.bottom>O?(this.$.table.scrollTop+=M.bottom-O,this._scrollHandler()):M.top<H&&(this.$.table.scrollTop-=H-M.top,this._scrollHandler())}R.focus()}_parseEventPath(t){const e=t.indexOf(this.$.table);return{rowGroup:t[e-1],row:t[e-2],cell:t[e-3]}}_onInteractionKeyDown(t,e){const r=t.composedPath()[0],n=r.localName==="input"&&!/^(button|checkbox|color|file|image|radio|range|reset|submit)$/i.test(r.type);let s;switch(e){case"Enter":s=!this.hasAttribute("interacting")||!n;break;case"Escape":s=!1;break;case"F2":s=!this.hasAttribute("interacting")}const{cell:o}=this._parseEventPath(t.composedPath());if(this.hasAttribute("interacting")!==s)if(s){const a=o._content.querySelector("[focus-target]")||o._content.firstElementChild;a&&(t.preventDefault(),a.focus(),this._toggleAttribute("interacting",!0,this),this._toggleAttribute("navigating",!1,this))}else t.preventDefault(),this._focusedColumnOrder=void 0,o.focus(),this._toggleAttribute("interacting",!1,this),this._toggleAttribute("navigating",!0,this)}_predictFocusStepTarget(t,e){const r=[this.$.table,this._headerFocusable,this._itemsFocusable,this._footerFocusable,this.$.focusexit];let n=r.indexOf(t);for(n+=e;n>=0&&n<=r.length-1&&(!r[n]||r[n].parentNode.hidden);)n+=e;return r[n]}_onTabKeyDown(t){const e=this._predictFocusStepTarget(t.composedPath()[0],t.shiftKey?-1:1);if(e===this.$.table)this.$.table.focus();else if(e===this.$.focusexit)this.$.focusexit.focus();else if(e===this._itemsFocusable){let r=e;const n=this._itemsFocusable.parentNode;if(this._ensureScrolledToIndex(this._focusedItemIndex),n.index!==this._focusedItemIndex){const s=Array.from(n.children).indexOf(this._itemsFocusable),o=Array.from(this.$.items.children).filter(a=>a.index===this._focusedItemIndex)[0];o&&(r=o.children[s])}t.preventDefault(),r.focus()}else t.preventDefault(),e.focus();this._toggleAttribute("navigating",!0,this)}_onSpaceKeyDown(t){t.preventDefault();const e=t.composedPath()[0];e._content&&e._content.firstElementChild||this.dispatchEvent(new CustomEvent("cell-activate",{detail:{model:this.__getRowModel(e.parentElement)}}))}_onKeyUp(t){if(!/^( |SpaceBar)$/.test(t.key))return;t.preventDefault();const e=t.composedPath()[0];if(e._content&&e._content.firstElementChild){const r=this.hasAttribute("navigating");e._content.firstElementChild.click(),this._toggleAttribute("navigating",r,this)}}_onFocusIn(t){this._isMousedown||this._toggleAttribute("navigating",!0,this);const e=t.composedPath()[0];e===this.$.table||e===this.$.focusexit?(this._predictFocusStepTarget(e,e===this.$.table?1:-1).focus(),this._toggleAttribute("interacting",!1,this)):this._detectInteracting(t)}_onFocusOut(t){this._toggleAttribute("navigating",!1,this),this._detectInteracting(t)}_onCellFocusIn(t){if(this._detectInteracting(t),t.composedPath().indexOf(this.$.table)===3){const e=t.composedPath()[0];this._activeRowGroup=e.parentNode.parentNode,this._activeRowGroup===this.$.header?this._headerFocusable=e:this._activeRowGroup===this.$.items?this._itemsFocusable=e:this._activeRowGroup===this.$.footer&&(this._footerFocusable=e),e._content.dispatchEvent(new CustomEvent("cell-focusin",{bubbles:!1}))}this._detectFocusedItemIndex(t)}_onCellFocusOut(t){t.composedPath().indexOf(this.$.table)===3&&t.composedPath()[0]._content.dispatchEvent(new CustomEvent("cell-focusout",{bubbles:!1}))}_detectInteracting(t){this._toggleAttribute("interacting",t.composedPath().some(e=>e.localName==="vaadin-grid-cell-content"),this)}_detectFocusedItemIndex(t){const{rowGroup:e,row:r}=this._parseEventPath(t.composedPath());e===this.$.items&&(this._focusedItemIndex=r.index)}_preventScrollerRotatingCellFocus(t,e){t.index===this._focusedItemIndex&&this.hasAttribute("navigating")&&this._activeRowGroup===this.$.items&&(this._navigatingIsHidden=!0,this._toggleAttribute("navigating",!1,this)),e===this._focusedItemIndex&&this._navigatingIsHidden&&(this._navigatingIsHidden=!1,this._toggleAttribute("navigating",!0,this))}_getColumns(t,e){let r=this._columnTree.length-1;return t===this.$.header?r=e:t===this.$.footer&&(r=this._columnTree.length-1-e),this._columnTree[r]}_resetKeyboardNavigation(){if(this.$.header.firstElementChild&&(this._headerFocusable=Array.from(this.$.header.firstElementChild.children).filter(t=>!t.hidden)[0]),this.$.items.firstElementChild){const t=this._iterateItems((e,r)=>{if(this._firstVisibleIndex===r)return this.$.items.children[e]});t&&(this._itemsFocusable=Array.from(t.children).filter(e=>!e.hidden)[0])}this.$.footer.firstElementChild&&(this._footerFocusable=Array.from(this.$.footer.firstElementChild.children).filter(t=>!t.hidden)[0])}_scrollHorizontallyToCell(t){if(t.hasAttribute("frozen")||this._elementMatches(t,'[part~="details-cell"]'))return;const e=t.getBoundingClientRect(),r=t.parentNode,n=Array.from(r.children).indexOf(t),s=this.$.table.getBoundingClientRect();let o=s.left,a=s.right;for(let l=n-1;l>=0;l--){const d=r.children[l];if(!d.hasAttribute("hidden")&&!this._elementMatches(d,'[part~="details-cell"]')&&d.hasAttribute("frozen")){o=d.getBoundingClientRect().right;break}}for(let l=n+1;l<r.children.length;l++){const d=r.children[l];if(!d.hasAttribute("hidden")&&!this._elementMatches(d,'[part~="details-cell"]')&&d.hasAttribute("frozen")){a=d.getBoundingClientRect().left;break}}e.left<o&&(this.$.table.scrollLeft+=Math.round(e.left-o)),e.right>a&&(this.$.table.scrollLeft+=Math.round(e.right-a))}_elementMatches(t,e){return t.matches?t.matches(e):Array.from(t.parentNode.querySelectorAll(e)).indexOf(t)!==-1}},Og=i=>class extends tn(i){static get properties(){return{columnReorderingAllowed:{type:Boolean,value:!1},_orderBaseScope:{type:Number,value:1e7}}}static get observers(){return["_updateOrders(_columnTree, _columnTree.*)"]}ready(){super.ready(),aa(this,"track",this._onTrackEvent),this._reorderGhost=this.shadowRoot.querySelector('[part="reorder-ghost"]'),this.addEventListener("touchstart",this._onTouchStart.bind(this)),this.addEventListener("touchmove",this._onTouchMove.bind(this)),this.addEventListener("touchend",this._onTouchEnd.bind(this)),this.addEventListener("contextmenu",this._onContextMenu.bind(this))}_onContextMenu(t){this.hasAttribute("reordering")&&t.preventDefault()}_onTouchStart(t){this._startTouchReorderTimeout=setTimeout(()=>{this._onTrackStart({detail:{x:t.touches[0].clientX,y:t.touches[0].clientY}})},100)}_onTouchMove(t){this._draggedColumn&&t.preventDefault(),clearTimeout(this._startTouchReorderTimeout)}_onTouchEnd(){clearTimeout(this._startTouchReorderTimeout),this._onTrackEnd()}_onTrackEvent(t){if(t.detail.state==="start"){const e=t.composedPath(),r=e[e.indexOf(this.$.header)-2];if(!r||!r._content||r._content.contains(this.getRootNode().activeElement)||this.$.scroller.hasAttribute("column-resizing"))return;this._touchDevice||this._onTrackStart(t)}else t.detail.state==="track"?this._onTrack(t):t.detail.state==="end"&&this._onTrackEnd(t)}_onTrackStart(t){if(!this.columnReorderingAllowed)return;const e=t.composedPath&&t.composedPath();if(e&&e.filter(n=>n.hasAttribute&&n.hasAttribute("draggable"))[0])return;const r=this._cellFromPoint(t.detail.x,t.detail.y);if(r&&r.getAttribute("part").indexOf("header-cell")!==-1){for(this._toggleAttribute("reordering",!0,this),this._draggedColumn=r._column;this._draggedColumn.parentElement.childElementCount===1;)this._draggedColumn=this._draggedColumn.parentElement;this._setSiblingsReorderStatus(this._draggedColumn,"allowed"),this._draggedColumn._reorderStatus="dragging",this._updateGhost(r),this._reorderGhost.style.visibility="visible",this._updateGhostPosition(t.detail.x,this._touchDevice?t.detail.y-50:t.detail.y),this._autoScroller()}}_onTrack(t){if(!this._draggedColumn)return;const e=this._cellFromPoint(t.detail.x,t.detail.y);if(!e)return;const r=this._getTargetColumn(e,this._draggedColumn);this._isSwapAllowed(this._draggedColumn,r)&&this._isSwappableByPosition(r,t.detail.x)&&this._swapColumnOrders(this._draggedColumn,r),this._updateGhostPosition(t.detail.x,this._touchDevice?t.detail.y-50:t.detail.y),this._lastDragClientX=t.detail.x}_onTrackEnd(){this._draggedColumn&&(this._toggleAttribute("reordering",!1,this),this._draggedColumn._reorderStatus="",this._setSiblingsReorderStatus(this._draggedColumn,""),this._draggedColumn=null,this._lastDragClientX=null,this._reorderGhost.style.visibility="hidden",this.dispatchEvent(new CustomEvent("column-reorder",{detail:{columns:this._getColumnsInOrder()}})))}_getColumnsInOrder(){return this._columnTree.slice(0).pop().filter(t=>!t.hidden).sort((t,e)=>t._order-e._order)}_cellFromPoint(t,e){t=t||0,e=e||0,this._draggedColumn||this._toggleAttribute("no-content-pointer-events",!0,this.$.scroller);const r=this.shadowRoot.elementFromPoint(t,e);if(this._toggleAttribute("no-content-pointer-events",!1,this.$.scroller),r&&r._column)return r}_updateGhostPosition(t,e){const r=this._reorderGhost.getBoundingClientRect(),n=t-r.width/2,s=e-r.height/2,o=parseInt(this._reorderGhost._left||0),a=parseInt(this._reorderGhost._top||0);this._reorderGhost._left=o-(r.left-n),this._reorderGhost._top=a-(r.top-s),this._reorderGhost.style.transform=`translate(${this._reorderGhost._left}px, ${this._reorderGhost._top}px)`}_updateGhost(t){const e=this._reorderGhost;e.textContent=t._content.innerText;const r=window.getComputedStyle(t);return["boxSizing","display","width","height","background","alignItems","padding","border","flex-direction","overflow"].forEach(n=>e.style[n]=r[n]),e}_updateOrders(t,e){t!==void 0&&e!==void 0&&(t[0].forEach(r=>r._order=0),t[0].forEach((r,n)=>r._order=(n+1)*this._orderBaseScope))}_setSiblingsReorderStatus(t,e){Array.from(t.parentNode.children).filter(r=>/column/.test(r.localName)&&this._isSwapAllowed(r,t)).forEach(r=>r._reorderStatus=e)}_autoScroller(){if(this._lastDragClientX){const t=this._lastDragClientX-this.getBoundingClientRect().right+50,e=this.getBoundingClientRect().left-this._lastDragClientX+50;t>0?this.$.table.scrollLeft+=t/10:e>0&&(this.$.table.scrollLeft-=e/10),this._scrollHandler()}this._draggedColumn&&this.async(this._autoScroller,10)}_isSwapAllowed(t,e){if(t&&e){const r=t!==e,n=t.parentElement===e.parentElement,s=t.frozen===e.frozen;return r&&n&&s}}_isSwappableByPosition(t,e){const r=Array.from(this.$.header.querySelectorAll('tr:not([hidden]) [part~="cell"]')).filter(o=>t.contains(o._column))[0],n=this.$.header.querySelector("tr:not([hidden]) [reorder-status=dragging]").getBoundingClientRect(),s=r.getBoundingClientRect();return s.left>n.left?e>s.right-n.width:e<s.left+n.width}_swapColumnOrders(t,e){const r=t._order;t._order=e._order,e._order=r,this._updateLastFrozen(),this._updateFirstAndLastColumn()}_getTargetColumn(t,e){if(t&&e){let r=t._column;for(;r.parentElement!==e.parentElement&&r!==this;)r=r.parentElement;return r.parentElement===e.parentElement?r:t._column}}},Qh=i=>class extends i{static get properties(){return{resizable:{type:Boolean,value:function(){if(this.localName==="vaadin-grid-column-group")return;const t=this.parentNode;return t&&t.localName==="vaadin-grid-column-group"&&t.resizable||!1}},_headerTemplate:{type:Object},_footerTemplate:{type:Object},frozen:{type:Boolean,value:!1},hidden:{type:Boolean},header:{type:String},textAlign:{type:String},_lastFrozen:{type:Boolean,value:!1},_order:Number,_reorderStatus:Boolean,_emptyCells:Array,_headerCell:Object,_footerCell:Object,_grid:Object,headerRenderer:Function,footerRenderer:Function}}static get observers(){return["_widthChanged(width, _headerCell, _footerCell, _cells.*)","_frozenChanged(frozen, _headerCell, _footerCell, _cells.*)","_flexGrowChanged(flexGrow, _headerCell, _footerCell, _cells.*)","_pathOrHeaderChanged(path, header, _headerCell, _footerCell, _cells.*, renderer, headerRenderer, _bodyTemplate, _headerTemplate)","_textAlignChanged(textAlign, _cells.*, _headerCell, _footerCell)","_orderChanged(_order, _headerCell, _footerCell, _cells.*)","_lastFrozenChanged(_lastFrozen)","_setBodyTemplateOrRenderer(_bodyTemplate, renderer, _cells, _cells.*)","_setHeaderTemplateOrRenderer(_headerTemplate, headerRenderer, _headerCell)","_setFooterTemplateOrRenderer(_footerTemplate, footerRenderer, _footerCell)","_resizableChanged(resizable, _headerCell)","_reorderStatusChanged(_reorderStatus, _headerCell, _footerCell, _cells.*)","_hiddenChanged(hidden, _headerCell, _footerCell, _cells.*)"]}connectedCallback(){super.connectedCallback(),this._bodyTemplate&&(this._bodyTemplate.templatizer._grid=this._grid),this._headerTemplate&&(this._headerTemplate.templatizer._grid=this._grid),this._footerTemplate&&(this._footerTemplate.templatizer._grid=this._grid),this._templateObserver.flush(),this._bodyTemplate||this._templateObserver.callback(),requestAnimationFrame(()=>{this._allCells.forEach(t=>{t._content.parentNode||this._grid&&this._grid.appendChild(t._content)})})}disconnectedCallback(){super.disconnectedCallback(),requestAnimationFrame(()=>{this._findHostGrid()||this._allCells.forEach(t=>{t._content.parentNode&&t._content.parentNode.removeChild(t._content)})}),this._gridValue=void 0}_findHostGrid(){let t=this;for(;t&&!/^vaadin.*grid(-pro)?$/.test(t.localName);)t=t.assignedSlot?t.assignedSlot.parentNode:t.parentNode;return t||void 0}get _grid(){return this._gridValue||(this._gridValue=this._findHostGrid()),this._gridValue}get _allCells(){return[].concat(this._cells||[]).concat(this._emptyCells||[]).concat(this._headerCell).concat(this._footerCell).filter(t=>t)}constructor(){super(),this._templateObserver=new $e(this,()=>{this._headerTemplate=this._prepareHeaderTemplate(),this._footerTemplate=this._prepareFooterTemplate(),this._bodyTemplate=this._prepareBodyTemplate()})}_prepareHeaderTemplate(){return this._prepareTemplatizer(this._findTemplate(!0)||null,{})}_prepareFooterTemplate(){return this._prepareTemplatizer(this._findTemplate(!1,!0)||null,{})}_prepareBodyTemplate(){return this._prepareTemplatizer(this._findTemplate()||null)}_prepareTemplatizer(t,e){if(t&&!t.templatizer){const r=new Xn;r._grid=this._grid,r.dataHost=this.dataHost,r._instanceProps=e||r._instanceProps,r.template=t,t.templatizer=r}return t}_renderHeaderAndFooter(){this.headerRenderer&&this._headerCell&&this.__runRenderer(this.headerRenderer,this._headerCell),this.footerRenderer&&this._footerCell&&this.__runRenderer(this.footerRenderer,this._footerCell)}__runRenderer(t,e,r){const n=[e._content,this];r&&r.item&&n.push(r),t.apply(this,n)}__setColumnTemplateOrRenderer(t,e,r){if(!this.hidden){if(t&&e)throw new Error("You should only use either a renderer or a template");r.forEach(n=>{const s=this._grid.__getRowModel(n.parentElement);if(e)n._renderer=e,(s.item||e===this.headerRenderer||e===this.footerRenderer)&&this.__runRenderer(e,n,s);else if(n._template!==t){n._template=t,n._content.innerHTML="",t.templatizer._grid=t.templatizer._grid||this._grid;const o=t.templatizer.createInstance();n._content.appendChild(o.root),n._instance=o,s.item&&n._instance.setProperties(s)}})}}_setBodyTemplateOrRenderer(t,e,r){(t||e)&&r&&this.__setColumnTemplateOrRenderer(t,e,r)}_setHeaderTemplateOrRenderer(t,e,r){(t||e)&&r&&this.__setColumnTemplateOrRenderer(t,e,[r])}_setFooterTemplateOrRenderer(t,e,r){(t||e)&&r&&(this.__setColumnTemplateOrRenderer(t,e,[r]),this._grid.__updateHeaderFooterRowVisibility(r.parentElement))}_selectFirstTemplate(t=!1,e=!1){return $e.getFlattenedNodes(this).filter(r=>r.localName==="template"&&r.classList.contains("header")===t&&r.classList.contains("footer")===e)[0]}_findTemplate(t,e){const r=this._selectFirstTemplate(t,e);return r&&this.dataHost&&(r._rootDataHost=this.dataHost._rootDataHost||this.dataHost),r}_flexGrowChanged(t){this.parentElement&&this.parentElement._columnPropChanged&&this.parentElement._columnPropChanged("flexGrow"),this._allCells.forEach(e=>e.style.flexGrow=t)}_orderChanged(t){this._allCells.forEach(e=>e.style.order=t)}_widthChanged(t){this.parentElement&&this.parentElement._columnPropChanged&&this.parentElement._columnPropChanged("width"),this._allCells.forEach(e=>e.style.width=t),this._grid&&this._grid.__forceReflow&&this._grid.__forceReflow()}_frozenChanged(t){this.parentElement&&this.parentElement._columnPropChanged&&this.parentElement._columnPropChanged("frozen",t),this._allCells.forEach(e=>this._toggleAttribute("frozen",t,e)),this._grid&&this._grid._frozenCellsChanged&&this._grid._frozenCellsChanged()}_lastFrozenChanged(t){this._allCells.forEach(e=>this._toggleAttribute("last-frozen",t,e)),this.parentElement&&this.parentElement._columnPropChanged&&(this.parentElement._lastFrozen=t)}_pathOrHeaderChanged(t,e,r,n,s,o,a,l,d){const h=e!==void 0;if(!a&&!d&&h&&r&&this.__setTextContent(r._content,e),t&&s.value){if(!o&&!l){const c=(m,p,{item:g})=>this.__setTextContent(m,this.get(t,g));this.__setColumnTemplateOrRenderer(void 0,c,s.value)}a||d||h||!r||e===null||this.__setTextContent(r._content,this._generateHeader(t))}r&&this._grid.__updateHeaderFooterRowVisibility(r.parentElement)}__setTextContent(t,e){t.textContent!==e&&(t.textContent=e)}_generateHeader(t){return t.substr(t.lastIndexOf(".")+1).replace(/([A-Z])/g,"-$1").toLowerCase().replace(/-/g," ").replace(/^./,e=>e.toUpperCase())}_toggleAttribute(t,e,r){r.hasAttribute(t)===!e&&(e?r.setAttribute(t,""):r.removeAttribute(t))}_reorderStatusChanged(t){this._allCells.forEach(e=>e.setAttribute("reorder-status",t))}_resizableChanged(t,e){t!==void 0&&e!==void 0&&e&&[e].concat(this._emptyCells).forEach(r=>{if(r){const n=r.querySelector('[part~="resize-handle"]');if(n&&r.removeChild(n),t){const s=document.createElement("div");s.setAttribute("part","resize-handle"),r.appendChild(s)}}})}_textAlignChanged(t){if(t===void 0)return;if(["start","end","center"].indexOf(t)===-1)return void console.warn('textAlign can only be set as "start", "end" or "center"');let e;getComputedStyle(this._grid).direction==="ltr"?t==="start"?e="left":t==="end"&&(e="right"):t==="start"?e="right":t==="end"&&(e="left"),this._allCells.forEach(r=>{r._content.style.textAlign=t,getComputedStyle(r._content).textAlign!==t&&(r._content.style.textAlign=e)})}_hiddenChanged(t){this.parentElement&&this.parentElement._columnPropChanged&&this.parentElement._columnPropChanged("hidden",t),!!t!=!!this._previousHidden&&this._grid&&(t===!0&&this._allCells.forEach(e=>{e._content.parentNode&&e._content.parentNode.removeChild(e._content)}),this._grid._debouncerHiddenChanged=Rt.debounce(this._grid._debouncerHiddenChanged,Me,()=>{this._grid&&this._grid._renderColumnTree&&this._grid._renderColumnTree(this._grid._columnTree)}),this._grid._updateLastFrozen&&this._grid._updateLastFrozen(),this._grid.notifyResize&&this._grid.notifyResize(),this._grid._resetKeyboardNavigation&&this._grid._resetKeyboardNavigation()),this._previousHidden=t}};class Jn extends Qh(ha(Ve)){static get is(){return"vaadin-grid-column"}static get properties(){return{width:{type:String,value:"100px"},flexGrow:{type:Number,value:1},renderer:Function,path:{type:String},autoWidth:{type:Boolean,value:!1},_bodyTemplate:{type:Object},_cells:Array}}}customElements.define(Jn.is,Jn),Br("vaadin-grid",$r`
    @keyframes vaadin-grid-appear {
      to {
        opacity: 1;
      }
    }

    :host {
      display: block;
      animation: 1ms vaadin-grid-appear;
      height: 400px;
      flex: 1 1 auto;
      align-self: stretch;
      position: relative;
    }

    :host([hidden]) {
      display: none !important;
    }

    #scroller {
      display: block;
      transform: translateY(0);
      width: auto;
      height: auto;
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
    }

    :host([height-by-rows]) {
      height: auto;
      align-self: flex-start;
      flex-grow: 0;
      width: 100%;
    }

    :host([height-by-rows]) #scroller {
      width: 100%;
      height: 100%;
      position: relative;
    }

    #table {
      display: flex;
      flex-direction: column;
      width: 100%;
      height: 100%;
      overflow: auto;
      position: relative;
      outline: none;
      /* Workaround for a Desktop Safari bug: new stacking context here prevents the scrollbar from getting hidden */
      z-index: 0;
    }

    #header,
    #footer {
      display: block;
      position: -webkit-sticky;
      position: sticky;
      left: 0;
      overflow: visible;
      width: 100%;
      z-index: 1;
    }

    #header {
      top: 0;
    }

    th {
      text-align: inherit;
    }

    /* Safari doesn't work with "inherit" */
    [safari] th {
      text-align: initial;
    }

    #footer {
      bottom: 0;
    }

    #items {
      flex-grow: 1;
      flex-shrink: 0;
      display: block;
      position: -webkit-sticky;
      position: sticky;
      width: 100%;
      left: 0;
      overflow: visible;
    }

    [part~='row'] {
      display: flex;
      width: 100%;
      box-sizing: border-box;
      margin: 0;
    }

    [part~='row'][loading] [part~='body-cell'] ::slotted(vaadin-grid-cell-content) {
      opacity: 0;
    }

    #items [part~='row'] {
      position: absolute;
    }

    #items [part~='row']:empty {
      height: 1em;
    }

    [part~='cell']:not([part~='details-cell']) {
      flex-shrink: 0;
      flex-grow: 1;
      box-sizing: border-box;
      display: flex;
      width: 100%;
      position: relative;
      align-items: center;
      padding: 0;
      white-space: nowrap;
    }

    [part~='details-cell'] {
      position: absolute;
      bottom: 0;
      width: 100%;
      box-sizing: border-box;
      padding: 0;
    }

    [part~='cell'] ::slotted(vaadin-grid-cell-content) {
      display: block;
      width: 100%;
      box-sizing: border-box;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    [hidden] {
      display: none !important;
    }

    [frozen] {
      z-index: 2;
      will-change: transform;
    }

    [no-scrollbars][safari] #table,
    [no-scrollbars][firefox] #table {
      overflow: hidden;
    }

    /* Reordering styles */
    :host([reordering]) [part~='cell'] ::slotted(vaadin-grid-cell-content),
    :host([reordering]) [part~='resize-handle'],
    #scroller[no-content-pointer-events] [part~='cell'] ::slotted(vaadin-grid-cell-content) {
      pointer-events: none;
    }

    [part~='reorder-ghost'] {
      visibility: hidden;
      position: fixed;
      pointer-events: none;
      opacity: 0.5;

      /* Prevent overflowing the grid in Firefox */
      top: 0;
      left: 0;
    }

    :host([reordering]) {
      -moz-user-select: none;
      -webkit-user-select: none;
      user-select: none;
    }

    /* Resizing styles */
    [part~='resize-handle'] {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
      cursor: col-resize;
      z-index: 1;
    }

    [part~='resize-handle']::before {
      position: absolute;
      content: '';
      height: 100%;
      width: 35px;
      transform: translateX(-50%);
    }

    [last-column] [part~='resize-handle']::before,
    [last-frozen] [part~='resize-handle']::before {
      width: 18px;
      transform: none;
      right: 0;
    }

    #scroller[column-resizing] {
      -ms-user-select: none;
      -moz-user-select: none;
      -webkit-user-select: none;
      user-select: none;
    }

    /* Sizer styles */
    #sizer {
      display: flex;
      position: absolute;
      visibility: hidden;
    }

    #sizer [part~='details-cell'] {
      display: none !important;
    }

    #sizer [part~='cell'][hidden] {
      display: none !important;
    }

    #sizer [part~='cell'] {
      display: block;
      flex-shrink: 0;
      line-height: 0;
      height: 0 !important;
      min-height: 0 !important;
      max-height: 0 !important;
      padding: 0 !important;
      border: none !important;
    }

    #sizer [part~='cell']::before {
      content: '-';
    }

    #sizer [part~='cell'] ::slotted(vaadin-grid-cell-content) {
      display: none !important;
    }

    /* RTL specific styles */

    :host([dir='rtl']) #items,
    :host([dir='rtl']) #header,
    :host([dir='rtl']) #footer {
      left: auto;
    }

    :host([dir='rtl']) [part~='reorder-ghost'] {
      left: auto;
      right: 0;
    }

    :host([dir='rtl']) [part~='resize-handle'] {
      left: 0;
      right: auto;
    }

    :host([dir='rtl']) [part~='resize-handle']::before {
      transform: translateX(50%);
    }

    :host([dir='rtl']) [last-column] [part~='resize-handle']::before,
    :host([dir='rtl']) [last-frozen] [part~='resize-handle']::before {
      left: 0;
      right: auto;
    }
  `,{moduleId:"vaadin-grid-styles"});const kg=(()=>{try{return document.createEvent("TouchEvent"),!0}catch{return!1}})();class Ql extends Ch(da(bg(gg(vg(mg(Sg(xg(Eg(Ag(Pg(fg(Cg(Og(yg(wg(Tg(Ig(pg)))))))))))))))))){static get template(){return Kr`
      <div
        id="scroller"
        safari$="[[_safari]]"
        ios$="[[_ios]]"
        loading$="[[loading]]"
        column-reordering-allowed$="[[columnReorderingAllowed]]"
      >
        <table id="table" role="grid" aria-multiselectable="true" tabindex="0">
          <caption id="sizer" part="row"></caption>
          <thead id="header" role="rowgroup"></thead>
          <tbody id="items" role="rowgroup"></tbody>
          <tfoot id="footer" role="rowgroup"></tfoot>
        </table>

        <div part="reorder-ghost"></div>
      </div>

      <div id="focusexit" tabindex="0"></div>
    `}static get is(){return"vaadin-grid"}static get version(){return"6.0.2"}static get observers(){return["_columnTreeChanged(_columnTree, _columnTree.*)"]}static get properties(){return{_safari:{type:Boolean,value:/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},_ios:{type:Boolean,value:/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1},_firefox:{type:Boolean,value:navigator.userAgent.toLowerCase().indexOf("firefox")>-1},_android:{type:Boolean,value:/android/i.test(navigator.userAgent)},_touchDevice:{type:Boolean,value:kg},heightByRows:{type:Boolean,value:!1,reflectToAttribute:!0,observer:"_heightByRowsChanged"},_recalculateColumnWidthOnceLoadingFinished:{type:Boolean,value:!0}}}constructor(){super(),this.addEventListener("animationend",this._onAnimationEnd)}connectedCallback(){super.connectedCallback(),this.recalculateColumnWidths()}attributeChangedCallback(t,e,r){super.attributeChangedCallback(t,e,r),t==="dir"&&(this.__isRTL=r==="rtl",this._updateScrollerMeasurements())}__hasRowsWithClientHeight(){return!!Array.from(this.$.items.children).filter(t=>t.clientHeight).length}__itemsReceived(){this._recalculateColumnWidthOnceLoadingFinished&&!this._cache.isLoading()&&this.__hasRowsWithClientHeight()&&(this._recalculateColumnWidthOnceLoadingFinished=!1,this.recalculateColumnWidths())}_recalculateColumnWidths(t){t.forEach(e=>{e.width="auto",e._origFlexGrow=e.flexGrow,e.flexGrow=0}),t.forEach(e=>{e._currentWidth=0,e._allCells.forEach(r=>{const n=r.offsetWidth+1;e._currentWidth=Math.max(e._currentWidth,n)})}),t.forEach(e=>{e.width=`${e._currentWidth}px`,e.flexGrow=e._origFlexGrow,e._currentWidth=void 0,e._origFlexGrow=void 0})}recalculateColumnWidths(){if(this._columnTree)if(this._cache.isLoading())this._recalculateColumnWidthOnceLoadingFinished=!0;else{const t=this._getColumns().filter(e=>!e.hidden&&e.autoWidth);this._recalculateColumnWidths(t)}}_createScrollerRows(t){const e=[];for(let r=0;r<t;r++){const n=document.createElement("tr");n.setAttribute("part","row"),n.setAttribute("role","row"),this._columnTree&&this._updateRow(n,this._columnTree[this._columnTree.length-1],"body",!1,!0),e.push(n)}return this._columnTree&&this._columnTree[this._columnTree.length-1].forEach(r=>r.isConnected&&r.notifyPath&&r.notifyPath("_cells.*",r._cells)),qm(this,()=>{this._updateFirstAndLastColumn(),this._resetKeyboardNavigation()}),e}_getRowTarget(){return this.$.items}_createCell(t){const e="vaadin-grid-cell-content-"+(this._contentIndex=this._contentIndex+1||0),r=document.createElement("vaadin-grid-cell-content");r.setAttribute("slot",e);const n=document.createElement(t);n.id=e.replace("-content-","-"),n.setAttribute("tabindex","-1"),n.setAttribute("role",t==="td"?"gridcell":"columnheader");const s=document.createElement("slot");return s.setAttribute("name",e),n.appendChild(s),n._content=r,r.addEventListener("mousedown",()=>{if(window.chrome){const o=()=>{r.contains(this.getRootNode().activeElement)||n.focus(),document.removeEventListener("mouseup",o,!0)};document.addEventListener("mouseup",o,!0)}else setTimeout(()=>{r.contains(this.getRootNode().activeElement)||n.focus()})}),n}_updateRow(t,e,r,n,s){r=r||"body";const o=document.createDocumentFragment();Array.from(t.children).forEach(a=>a._vacant=!0),t.innerHTML="",t.id!=="sizer"&&(t.hidden=!0),e.filter(a=>!a.hidden).forEach((a,l,d)=>{let h;if(r==="body"){if(a._cells=a._cells||[],h=a._cells.filter(c=>c._vacant)[0],h||(h=this._createCell("td"),a._cells.push(h)),h.setAttribute("part","cell body-cell"),t.appendChild(h),l===d.length-1&&(this._rowDetailsTemplate||this.rowDetailsRenderer)){this._detailsCells=this._detailsCells||[];const c=this._detailsCells.filter(m=>m._vacant)[0]||this._createCell("td");this._detailsCells.indexOf(c)===-1&&this._detailsCells.push(c),c._content.parentElement||o.appendChild(c._content),this._configureDetailsCell(c),t.appendChild(c),this._a11ySetRowDetailsCell(t,c),c._vacant=!1}a.notifyPath&&!s&&a.notifyPath("_cells.*",a._cells)}else{const c=r==="header"?"th":"td";n||a.localName==="vaadin-grid-column-group"?(h=a[`_${r}Cell`]||this._createCell(c),h._column=a,t.appendChild(h),a[`_${r}Cell`]=h):(a._emptyCells=a._emptyCells||[],h=a._emptyCells.filter(m=>m._vacant)[0]||this._createCell(c),h._column=a,t.appendChild(h),a._emptyCells.indexOf(h)===-1&&a._emptyCells.push(h)),h.setAttribute("part",`cell ${r}-cell`),this.__updateHeaderFooterRowVisibility(t)}h._content.parentElement||o.appendChild(h._content),h._vacant=!1,h._column=a}),this.appendChild(o),this._frozenCellsChanged(),this._updateFirstAndLastColumnForRow(t)}__updateHeaderFooterRowVisibility(t){if(!t)return;const e=Array.from(t.children).filter(r=>{const n=r._column;if(n._emptyCells&&n._emptyCells.indexOf(r)>-1)return!1;if(t.parentElement===this.$.header){if(n.headerRenderer||n._headerTemplate)return!0;if(n.header===null)return!1;if(n.path||n.header!==void 0)return!0}else if(n.footerRenderer||n._footerTemplate)return!0});t.hidden!==!e.length&&(t.hidden=!e.length,this.notifyResize())}_updateScrollerItem(t,e){this._preventScrollerRotatingCellFocus(t,e),this._columnTree&&(this._toggleAttribute("first",e===0,t),this._toggleAttribute("odd",e%2,t),this._a11yUpdateRowRowindex(t,e),this._getItem(e,t))}_columnTreeChanged(t){this._renderColumnTree(t),this.recalculateColumnWidths()}_renderColumnTree(t){for(Array.from(this.$.items.children).forEach(e=>this._updateRow(e,t[t.length-1],null,!1,!0));this.$.header.children.length<t.length;){const e=document.createElement("tr");e.setAttribute("part","row"),e.setAttribute("role","row"),this.$.header.appendChild(e);const r=document.createElement("tr");r.setAttribute("part","row"),r.setAttribute("role","row"),this.$.footer.appendChild(r)}for(;this.$.header.children.length>t.length;)this.$.header.removeChild(this.$.header.firstElementChild),this.$.footer.removeChild(this.$.footer.firstElementChild);Array.from(this.$.header.children).forEach((e,r)=>this._updateRow(e,t[r],"header",r===t.length-1)),Array.from(this.$.footer.children).forEach((e,r)=>this._updateRow(e,t[t.length-1-r],"footer",r===0)),this._updateRow(this.$.sizer,t[t.length-1]),this._resizeHandler(),this._frozenCellsChanged(),this._updateFirstAndLastColumn(),this._resetKeyboardNavigation(),this._a11yUpdateHeaderRows(),this._a11yUpdateFooterRows(),this.__updateFooterPositioning()}__updateFooterPositioning(){this._firefox&&(this.$.items.style.paddingBottom=0,this.heightByRows||(this.$.items.style.paddingBottom=`${this.$.footer.offsetHeight}px`)),this._ios&&!window.CSS.supports("position","sticky")&&(this.$.table.style.height="",this.$.table.style.minHeight="100%",this.$.table.style.maxHeight="100%",setTimeout(()=>this.$.table.style.height=`${this.$.scroller.offsetHeight}px`))}_updateItem(t,e){t._item=e;const r=this.__getRowModel(t);this._toggleAttribute("selected",r.selected,t),this._a11yUpdateRowSelected(t,r.selected),this._a11yUpdateRowLevel(t,r.level),this._toggleAttribute("expanded",r.expanded,t),this._toggleAttribute("details-opened",this._isDetailsOpened(e),t),(this._rowDetailsTemplate||this.rowDetailsRenderer)&&this._toggleDetailsCell(t,e),this._generateCellClassNames(t,r),this._filterDragAndDrop(t,r),Array.from(t.children).forEach(n=>{if(n._renderer){const s=n._column||this;n._renderer.call(s,n._content,s,r)}else n._instance&&(n._instance.__detailsOpened__=r.detailsOpened,n._instance.__selected__=r.selected,n._instance.__level__=r.level,n._instance.__expanded__=r.expanded,n._instance.setProperties(r))}),this._debouncerUpdateHeights=Rt.debounce(this._debouncerUpdateHeights,xe.after(1),()=>{this._updateMetrics(),this._positionItems(),this._updateScrollerSize()})}_resizeHandler(){this._updateDetailsCellHeights(),this._accessIronListAPI(super._resizeHandler,!0),this._updateScrollerMeasurements(),this.__updateFooterPositioning()}_onAnimationEnd(t){t.animationName.indexOf("vaadin-grid-appear")===0&&(this._render(),t.stopPropagation(),this.notifyResize(),this.__itemsReceived(),requestAnimationFrame(()=>{this.__scrollToPendingIndex(),this.$.table.style.webkitOverflowScrolling="touch"}))}_toggleAttribute(t,e,r){r.hasAttribute(t)===!e&&(e?r.setAttribute(t,""):r.removeAttribute(t))}__getRowModel(t){return{index:t.index,item:t._item,level:this._getIndexLevel(t.index),expanded:this._isExpanded(t._item),selected:this._isSelected(t._item),detailsOpened:!(!this._rowDetailsTemplate&&!this.rowDetailsRenderer)&&this._isDetailsOpened(t._item)}}render(){this._columnTree&&(this._columnTree.forEach(t=>{t.forEach(e=>e._renderHeaderAndFooter())}),this._update())}notifyResize(){super.notifyResize()}_heightByRowsChanged(t,e){(t||e)&&this.notifyResize()}__forceReflow(){this._debouncerForceReflow=Rt.debounce(this._debouncerForceReflow,Me,()=>{this.$.scroller.style.overflow="hidden",setTimeout(()=>this.$.scroller.style.overflow="")})}}customElements.define(Ql.is,Ql);class td extends Qh(Ve){static get is(){return"vaadin-grid-column-group"}static get properties(){return{_childColumns:{value:function(){return this._getChildColumns(this)}},flexGrow:{type:Number,readOnly:!0},width:{type:String,readOnly:!0},_visibleChildColumns:Array,_colSpan:Number,_rootColumns:Array}}static get observers(){return["_updateVisibleChildColumns(_childColumns)","_childColumnsChanged(_childColumns)","_groupFrozenChanged(frozen, _rootColumns)","_groupHiddenChanged(hidden, _rootColumns)","_visibleChildColumnsChanged(_visibleChildColumns)","_colSpanChanged(_colSpan, _headerCell, _footerCell)","_groupOrderChanged(_order, _rootColumns)","_groupReorderStatusChanged(_reorderStatus, _rootColumns)","_groupResizableChanged(resizable, _rootColumns)"]}connectedCallback(){super.connectedCallback(),this._addNodeObserver(),this._updateFlexAndWidth()}disconnectedCallback(){super.disconnectedCallback(),this._observer&&this._observer.disconnect()}_columnPropChanged(t,e){t==="hidden"&&(this._preventHiddenCascade=!0,this._updateVisibleChildColumns(this._childColumns),this._preventHiddenCascade=!1),/flexGrow|width|hidden|_childColumns/.test(t)&&this._updateFlexAndWidth(),t==="frozen"&&(this.frozen=this.frozen||e),t==="lastFrozen"&&(this._lastFrozen=this._lastFrozen||e)}_groupOrderChanged(t,e){if(e){const r=e.slice(0);if(!t)return void r.forEach(a=>a._order=0);const n=/(0+)$/.exec(t).pop().length,s=1+~~(Math.log(e.length)/Math.log(Math.LN10)),o=Math.pow(10,n-s);r[0]&&r[0]._order&&r.sort((a,l)=>a._order-l._order),r.forEach((a,l)=>a._order=t+(l+1)*o)}}_groupReorderStatusChanged(t,e){t!==void 0&&e!==void 0&&e.forEach(r=>r._reorderStatus=t)}_groupResizableChanged(t,e){t!==void 0&&e!==void 0&&e.forEach(r=>r.resizable=t)}_updateVisibleChildColumns(t){this._visibleChildColumns=Array.prototype.filter.call(t,e=>!e.hidden)}_childColumnsChanged(t){!this._autoHidden&&this.hidden&&(Array.prototype.forEach.call(t,e=>e.hidden=!0),this._updateVisibleChildColumns(t))}_updateFlexAndWidth(){this._visibleChildColumns&&(this._visibleChildColumns.length?this._setWidth("calc("+Array.prototype.reduce.call(this._visibleChildColumns,(t,e)=>t+" + "+(e.width||"0px").replace("calc",""),"").substring(3)+")"):this._setWidth("0px"),this._setFlexGrow(Array.prototype.reduce.call(this._visibleChildColumns,(t,e)=>t+e.flexGrow,0)))}_groupFrozenChanged(t,e){e!==void 0&&t!==void 0&&t!==!1&&Array.from(e).forEach(r=>r.frozen=t)}_groupHiddenChanged(t,e){e&&!this._preventHiddenCascade&&(this._ignoreVisibleChildColumns=!0,e.forEach(r=>r.hidden=t),this._ignoreVisibleChildColumns=!1),this._columnPropChanged("hidden")}_visibleChildColumnsChanged(t){this._colSpan=t.length,this._ignoreVisibleChildColumns||(t.length===0?this._autoHidden=this.hidden=!0:this.hidden&&this._autoHidden&&(this._autoHidden=this.hidden=!1))}_colSpanChanged(t,e,r){e&&(e.setAttribute("colspan",t),this._grid&&this._grid._a11yUpdateCellColspan(e,t)),r&&(r.setAttribute("colspan",t),this._grid&&this._grid._a11yUpdateCellColspan(r,t))}_getChildColumns(t){return $e.getFlattenedNodes(t).filter(this._isColumnElement)}_addNodeObserver(){this._observer=new $e(this,t=>{(t.addedNodes.filter(this._isColumnElement).length>0||t.removedNodes.filter(this._isColumnElement).length>0)&&(this._preventHiddenCascade=!0,this._rootColumns=this._getChildColumns(this),this._childColumns=this._rootColumns,this._preventHiddenCascade=!1,be.run(()=>{this._grid&&this._grid._updateColumnTree&&this._grid._updateColumnTree()}))}),this._observer.flush()}_isColumnElement(t){return t.nodeType===Node.ELEMENT_NODE&&/\bcolumn\b/.test(t.localName)}}customElements.define(td.is,td);class ed extends Jn{static get template(){return Kr`
      <template class="header" id="defaultHeaderTemplate">
        <vaadin-checkbox
          class="vaadin-grid-select-all-checkbox"
          aria-label="Select All"
          hidden$="[[_selectAllHidden]]"
          on-checked-changed="_onSelectAllCheckedChanged"
          checked="[[_isChecked(selectAll, _indeterminate)]]"
          indeterminate="[[_indeterminate]]"
        ></vaadin-checkbox>
      </template>
      <template id="defaultBodyTemplate">
        <vaadin-checkbox aria-label="Select Row" checked="{{selected}}"></vaadin-checkbox>
      </template>
    `}static get is(){return"vaadin-grid-selection-column"}static get properties(){return{width:{type:String,value:"58px"},flexGrow:{type:Number,value:0},selectAll:{type:Boolean,value:!1,notify:!0},autoSelect:{type:Boolean,value:!1},_indeterminate:Boolean,_previousActiveItem:Object,_selectAllHidden:Boolean}}static get observers(){return["_onSelectAllChanged(selectAll)"]}_pathOrHeaderChanged(t,e,r,n,s,o,a,l,d){!s.value||t===void 0&&o===void 0||(this._bodyTemplate=l=void 0,this.__cleanCellsOfTemplateProperties(s.value)),!r||e===void 0&&a===void 0||(this._headerTemplate=d=void 0,this.__cleanCellsOfTemplateProperties([r])),super._pathOrHeaderChanged(t,e,r,n,s,o,a,l,d)}__cleanCellsOfTemplateProperties(t){t.forEach(e=>{e._content.innerHTML="",delete e._instance,delete e._template})}_prepareHeaderTemplate(){const t=this._prepareTemplatizer(this._findTemplate(!0)||this.$.defaultHeaderTemplate);return t.templatizer.dataHost=t===this.$.defaultHeaderTemplate?this:this.dataHost,t}_prepareBodyTemplate(){const t=this._prepareTemplatizer(this._findTemplate()||this.$.defaultBodyTemplate);return t.templatizer.dataHost=t===this.$.defaultBodyTemplate?this:this.dataHost,t}constructor(){super(),this._boundOnActiveItemChanged=this._onActiveItemChanged.bind(this),this._boundOnDataProviderChanged=this._onDataProviderChanged.bind(this),this._boundOnSelectedItemsChanged=this._onSelectedItemsChanged.bind(this)}disconnectedCallback(){this._grid.removeEventListener("active-item-changed",this._boundOnActiveItemChanged),this._grid.removeEventListener("data-provider-changed",this._boundOnDataProviderChanged),this._grid.removeEventListener("filter-changed",this._boundOnSelectedItemsChanged),this._grid.removeEventListener("selected-items-changed",this._boundOnSelectedItemsChanged),super.disconnectedCallback()}connectedCallback(){super.connectedCallback(),this._grid&&(this._grid.addEventListener("active-item-changed",this._boundOnActiveItemChanged),this._grid.addEventListener("data-provider-changed",this._boundOnDataProviderChanged),this._grid.addEventListener("filter-changed",this._boundOnSelectedItemsChanged),this._grid.addEventListener("selected-items-changed",this._boundOnSelectedItemsChanged))}_onSelectAllChanged(t){t!==void 0&&this._grid&&(this._selectAllChangeLock||(this._grid.selectedItems=t&&Array.isArray(this._grid.items)?this._grid._filter(this._grid.items):[]))}_arrayContains(t,e){for(var r=0;t&&e&&e[r]&&t.indexOf(e[r])>=0;r++);return r==e.length}_onSelectAllCheckedChanged(t){this.selectAll=this._indeterminate||t.target.checked}_isChecked(t,e){return e||t}_onActiveItemChanged(t){const e=t.detail.value;if(this.autoSelect){const r=e||this._previousActiveItem;r&&this._grid._toggleItem(r)}this._previousActiveItem=e}_onSelectedItemsChanged(){this._selectAllChangeLock=!0,Array.isArray(this._grid.items)&&(this._grid.selectedItems.length?this._arrayContains(this._grid.selectedItems,this._grid._filter(this._grid.items))?(this.selectAll=!0,this._indeterminate=!1):(this.selectAll=!1,this._indeterminate=!0):(this.selectAll=!1,this._indeterminate=!1)),this._selectAllChangeLock=!1}_onDataProviderChanged(){this._selectAllHidden=!Array.isArray(this._grid.items)}}customElements.define(ed.is,ed),Br("vaadin-grid-sorter",$r`
    :host {
      justify-content: flex-start;
      align-items: baseline;
      -webkit-user-select: none;
      -moz-user-select: none;
      user-select: none;
    }

    [part='content'] {
      display: inline-block;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    [part='indicators'] {
      margin-left: var(--lumo-space-s);
    }

    :host(:not([direction])) [part='indicators']::before {
      opacity: 0.2;
    }

    :host([direction]) {
      color: var(--lumo-primary-text-color);
    }

    [part='order'] {
      font-size: var(--lumo-font-size-xxs);
      line-height: 1;
    }

    /* RTL specific styles */

    :host([dir='rtl']) [part='indicators'] {
      margin-right: var(--lumo-space-s);
      margin-left: 0;
    }
  `,{moduleId:"lumo-grid-sorter"});const id=document.createElement("template");id.innerHTML=`
  <style>
    @font-face {
      font-family: 'vaadin-grid-sorter-icons';
      src: url(data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAQwAA0AAAAABuwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABGRlRNAAAEFAAAABkAAAAcfep+mUdERUYAAAP4AAAAHAAAAB4AJwAOT1MvMgAAAZgAAAA/AAAAYA8TBPpjbWFwAAAB7AAAAFUAAAFeF1fZ4mdhc3AAAAPwAAAACAAAAAgAAAAQZ2x5ZgAAAlgAAABcAAAAnMvguMloZWFkAAABMAAAAC8AAAA2C5Ap72hoZWEAAAFgAAAAHQAAACQGbQPHaG10eAAAAdgAAAAUAAAAHAoAAABsb2NhAAACRAAAABIAAAASAIwAYG1heHAAAAGAAAAAFgAAACAACwAKbmFtZQAAArQAAAECAAACZxWCgKhwb3N0AAADuAAAADUAAABZCrApUXicY2BkYGAA4rDECVrx/DZfGbhZGEDgyqNPOxH0/wNMq5kPALkcDEwgUQBWRA0dAHicY2BkYGA+8P8AAwMLAwgwrWZgZEAFbABY4QM8AAAAeJxjYGRgYOAAQiYGEICQSAAAAi8AFgAAeJxjYGY6yziBgZWBgWkm0xkGBoZ+CM34msGYkZMBFTAKoAkwODAwvmRiPvD/AIMDMxCD1CDJKjAwAgBktQsXAHicY2GAAMZQCM0EwqshbAALxAEKeJxjYGBgZoBgGQZGBhCIAPIYwXwWBhsgzcXAwcAEhIwMCi+Z/v/9/x+sSuElA4T9/4k4K1gHFwMMMILMY2QDYmaoABOQYGJABUA7WBiGNwAAJd4NIQAAAAAAAAAACAAIABAAGAAmAEAATgAAeJyNjLENgDAMBP9tIURJwQCMQccSZgk2i5fIYBDAidJjycXr7x5EPwE2wY8si7jmyBNXGo/bNBerxJNrpxhbO3/fEFpx8ZICpV+ghxJ74fAMe+h7Ox14AbrsHB14nK2QQWrDMBRER4mTkhQK3ZRQKOgCNk7oGQqhhEIX2WSlWEI1BAlkJ5CDdNsj5Ey9Rncdi38ES+jzNJo/HwTgATcoDEthhY3wBHc4CE+pfwsX5F/hGe7Vo/AcK/UhvMSz+mGXKhZU6pww8ISz3oWn1BvhgnwTnuEJf8Jz1OpFeIlX9YULDLdFi4ASHolkSR0iuYdjLak1vAequBhj21D61Nqyi6l3qWybGPjySbPHGScGJl6dP58MYcQRI0bts7mjebBqrFENH7t3qWtj0OuqHnXcW7b0HOTZFnKryRGW2hFX1m0O2vEM3opNMfTau+CS6Z3Vx6veNnEXY6jwDxhsc2gAAHicY2BiwA84GBgYmRiYGJkZmBlZGFkZ2djScyoLMgzZS/MyDQwMwLSrpYEBlIbxjQDrzgsuAAAAAAEAAf//AA94nGNgZGBg4AFiMSBmYmAEQnYgZgHzGAAD6wA2eJxjYGBgZACCKyoz1cD0o087YTQATOcIewAAAA==) format('woff');
      font-weight: normal;
      font-style: normal;
    }
  </style>
`,document.head.appendChild(id.content);class rd extends da(ha(Ve)){static get template(){return Kr`
      <style>
        :host {
          display: inline-flex;
          cursor: pointer;
          max-width: 100%;
        }

        [part='content'] {
          flex: 1 1 auto;
        }

        [part='indicators'] {
          position: relative;
          align-self: center;
          flex: none;
        }

        [part='order'] {
          display: inline;
          vertical-align: super;
        }

        [part='indicators']::before {
          font-family: 'vaadin-grid-sorter-icons';
          display: inline-block;
        }

        :host(:not([direction])) [part='indicators']::before {
          content: '\\e901';
        }

        :host([direction='asc']) [part='indicators']::before {
          content: '\\e900';
        }

        :host([direction='desc']) [part='indicators']::before {
          content: '\\e902';
        }
      </style>

      <div part="content">
        <slot></slot>
      </div>
      <div part="indicators">
        <span part="order">[[_getDisplayOrder(_order)]]</span>
      </div>
    `}static get is(){return"vaadin-grid-sorter"}static get properties(){return{path:String,direction:{type:String,reflectToAttribute:!0,notify:!0,value:null},_order:{type:Number,value:null},_isConnected:{type:Boolean,observer:"__isConnectedChanged"}}}static get observers(){return["_pathOrDirectionChanged(path, direction)"]}ready(){super.ready(),this.addEventListener("click",this._onClick.bind(this))}connectedCallback(){super.connectedCallback(),this._isConnected=!0}disconnectedCallback(){super.disconnectedCallback(),this._isConnected=!1}_pathOrDirectionChanged(){this.__dispatchSorterChangedEvenIfPossible()}__isConnectedChanged(t,e){e!==!1&&this.__dispatchSorterChangedEvenIfPossible()}__dispatchSorterChangedEvenIfPossible(){this.path!==void 0&&this.direction!==void 0&&this._isConnected&&this.dispatchEvent(new CustomEvent("sorter-changed",{bubbles:!0,composed:!0}))}_getDisplayOrder(t){return t===null?"":t+1}_onClick(t){const e=this.getRootNode().activeElement;this!==e&&this.contains(e)||(t.preventDefault(),this.direction==="asc"?this.direction="desc":this.direction==="desc"?this.direction=null:this.direction="asc")}}customElements.define(rd.is,rd);class nd extends Jn{static get template(){return Kr`
      <template class="header" id="headerTemplate">
        <vaadin-grid-sorter path="[[path]]" direction="{{direction}}">[[_getHeader(header, path)]]</vaadin-grid-sorter>
      </template>
    `}static get is(){return"vaadin-grid-sort-column"}static get properties(){return{path:String,direction:{type:String,notify:!0}}}_prepareHeaderTemplate(){const t=this._prepareTemplatizer(this.$.headerTemplate);return t.templatizer.dataHost=this,t}_getHeader(t,e){return t||this._generateHeader(e)}}customElements.define(nd.is,nd);const sd={selectionColumn:!0,columnMenus:!0},bn="esri-grid",Dg="compact column-borders",ar={base:bn,content:`${bn}__content`,grid:`${bn}__grid`,noColumnMenu:`${bn}--no-column-menu`,widget:"esri-widget"};let Ot=class extends Zr(vi){constructor(i,t){super(i,t),this._grid=null,this._columnElements=[],this._isDataLoaded=!1,this.itemIdPath=null,this.messages=null,this.viewModel=new $d,this.visibleElements={...sd}}initialize(){this.handles.add([this.columns.on("change",()=>this.onColumnChange()),At(()=>this.viewModel?.size,()=>this._updateGridSize()),At(()=>this.store?.state,(i,t)=>{i!=="ready"||t!=="loaded"&&t!=="error"||this.refreshPageCache()}),ai(()=>this.highlightIds,"change",i=>{const{added:t,removed:e}=i,r=t.map(s=>this.store?.getLocalItemByKey(s)||{objectId:s}),n=e.map(s=>this.store?.getLocalItemByKey(s)||{objectId:s});this._deselectRows(n),this._selectRows(r)}),ai(()=>this._grid?.$?.table,"scroll",()=>this.viewModel?.closeColumnMenus())])}destroy(){this.handles.removeAll(),this.resetColumns(),this.columns?.destroy()}resetColumns(){this.columns.items.forEach(i=>i.destroy()),this.columns.removeAll()}get cellClassNameGenerator(){return this.viewModel.cellClassNameGenerator}set cellClassNameGenerator(i){this.viewModel.cellClassNameGenerator=i}get columns(){return this.viewModel.columns}set columns(i){this.viewModel.columns=i}get columnReorderingEnabled(){return this.viewModel.columnReorderingEnabled}set columnReorderingEnabled(i){this.viewModel.columnReorderingEnabled=i}get dataProvider(){return this.viewModel.dataProvider}set dataProvider(i){this.viewModel.dataProvider=i}get highlightIds(){return this.viewModel.highlightIds}set highlightIds(i){this.viewModel.highlightIds=i}get label(){return this.messages?.widgetLabel??""}set label(i){this._overrideIfSome("label",i)}get multiSortEnabled(){return this.viewModel.multiSortEnabled}set multiSortEnabled(i){this.viewModel.multiSortEnabled=i}get pageSize(){return this.viewModel.pageSize}set pageSize(i){this.viewModel.pageSize=i}get rowDetailsRenderer(){return this.viewModel.rowDetailsRenderer}set rowDetailsRenderer(i){this.viewModel.rowDetailsRenderer=i}get size(){return this.viewModel.size}get sortOrders(){return this._grid?._sorters?this._grid._sorters.filter(i=>!!i).map(({direction:i,path:t})=>({direction:i,path:t})):[]}get store(){return this.viewModel.store}set store(i){this.viewModel.store=i}castVisibleElements(i){return{...sd,...i}}render(){const{columnMenus:i}=this.visibleElements;return G("div",{bind:this,class:this.classes(ar.base,ar.widget,{[ar.noColumnMenu]:!i})},G("div",{bind:this,class:ar.content},this.renderGrid()))}renderGrid(){return G("vaadin-grid",{_safari:!1,afterCreate:this._afterGridCreate,afterUpdate:this._afterGridUpdate,bind:this,cellClassNameGenerator:this.cellClassNameGenerator,class:ar.grid,columnReorderingAllowed:this.columnReorderingEnabled,dataProvider:this.dataProvider,id:`${this.id}_grid`,itemIdPath:this.itemIdPath,multiSort:this.multiSortEnabled,pageSize:this.pageSize,ref:"grid",rowDetailsRenderer:this.rowDetailsRenderer,size:this.size},this.renderAllColumns())}renderAllColumns(){return this.viewModel.state!=="disabled"&&this.columns?.length?[this.renderSelectionColumn(),this.renderColumns()]:null}renderSelectionColumn(){return G("vaadin-grid-selection-column",{_selectAllHidden:!0,selectAll:!1,bind:this,hidden:!this.visibleElements.selectionColumn,sortable:!1,frozen:!Ro(this.container)})}renderColumns(){return this.columns.items.map((i,t)=>"columns"in i?this.renderGroupColumn(i,t):G("vaadin-grid-column",{...this.getColumnProps(i,t)})).filter(wd)}renderGroupColumn(i,t){const e=this.getColumnProps(i,t);if(e.hidden||!i.columns)return null;const r=i.columns.filter(({hidden:n})=>!n);return r.length?G("vaadin-grid-column-group",{...e},r.map(n=>G("vaadin-grid-column",{...this.getColumnProps(n,t)}))):null}getColumnProps(i,t){const{id:e}=this,{autoWidth:r,direction:n,flexGrow:s,frozen:o,header:a,hidden:l,path:d,resizable:h,textAlign:c,width:m}=i;return{autoWidth:r,direction:n,flexGrow:s,frozen:o,header:a,hidden:l,key:`${e}_${a}_${t??d}`,path:d,resizable:h,"text-align":c,width:typeof m=="number"?`${m}px`:m,bind:this,afterCreate:this._afterColumnCreate,afterRemoved:this._afterColumnRemoved}}clearSelection(){this._clearSelection(),this.scheduleRender()}clearSort(){let i=!1;this._grid&&(this._grid._sorters?.length&&(this._grid._sorters.forEach(t=>{t._order=null,t.direction=null}),i=!0),this.columns?.length&&this.columns.some(t=>!!t.direction)&&(this.columns.forEach(t=>t.direction=null),i=!0),i&&(this.notifyChange("sortOrders"),this.scheduleRender()))}findColumn(i){this.viewModel.findColumn(i)}generateCellClassNames(){this._grid?.generateCellClassNames()}getSlotElementByName(i){return this._grid?.shadowRoot?.querySelector(`slot[name='${i}']`)??null}hideColumn(i){this.viewModel?.hideColumn(i),this.scheduleRender()}notifyResize(){this._grid?.notifyResize()}recalculateColumnWidths(){this._grid?.recalculateColumnWidths()}async reset(){this._isDataLoaded=!1,this._clearSelection(),await this.store?.reset(),this.scrollToTop()}refreshPageCache(){this._grid?.clearCache()}selectRows(i){const t=i?.filter(r=>!this.highlightIds.includes(r.objectId)),e=t.map(r=>r.objectId);e.length&&(this.highlightIds.addMany(e),this._selectRows(t))}deselectRows(i){const t=i?.map(e=>e.objectId)||[];t.length&&(this.highlightIds.removeMany(t),this._deselectRows(i))}showColumn(i){this.viewModel?.showColumn(i),this.scheduleRender()}sort({path:i,direction:t}){this.viewModel?.sortColumn(i,t),this.notifyChange("sortOrders")}scrollToIndex(i){this._grid?.scrollToIndex(i)}scrollToTop(){this._grid?.scrollToIndex(0)}isEditingActive(){return!!this._getActiveEditInfo().length}onColumnChange(){this._syncColumnRenderers()}_afterGridCreate(i){const t=this._grid=i;t.setAttribute("theme",Dg),customElements.whenDefined("vaadin-grid").then(()=>this._addGridEventListeners()),t.__updateSorter=e=>{const r=t._sorters,n=!r.includes(e);if(e.direction||!n){if(e._order=null,t.multiSort)t._removeArrayItem(r,e),e.direction&&(e._initialOrder!=null?(n?r[e._initialOrder]=e:r.splice(e._initialOrder,0,e),e._initialOrder=null):r.unshift(e)),t.__updateSortOrders();else if(e.direction){const s=r.filter(o=>o!==e);t._sorters=[e],s.forEach(o=>{o._order=null,o.direction=null})}}}}_afterGridUpdate(i){this._grid||(this._grid=i)}_afterColumnCreate(i){this._applyRenderersToColumnElement(i),this._columnElements.push(i)}_afterColumnRemoved(i){const t=this._columnElements.indexOf(i,0);t>-1&&this._columnElements.splice(t,1)}_syncColumnRenderers(){this._columnElements.forEach(i=>{this._applyRenderersToColumnElement(i)})}_updateGridSize(){this._grid&&(this._grid.size=this.size||0,this.scheduleRender())}_getActiveEditInfo(){return!this.columns||this.columns.length?[]:this.columns.filter(i=>"activeEditInfo"in i).map(i=>i.activeEditInfo).items}_addGridEventListeners(){const i=this._grid;Nn(i),this.handles.add([ln(i,"click",t=>this._onRowClick(t)),ln(i,"selected-items-changed",t=>this._onSelectionChange(t)),ln(i,"sorter-changed",()=>this.notifyChange("sortOrders")),ln(i,"loading-changed",t=>{this._isDataLoaded||t.detail.value===!1&&(this._isDataLoaded=!0,this._selectRowsOnLoad())})])}_onRowClick(i){const t=this._grid;Nn(t);const e=t.getEventContext(i),{item:r,section:n}=e;r&&n&&n!=="details"&&n!=="header"&&this.emit("row-click",{context:e,native:i})}_clearSelection(){this._grid&&(this.highlightIds.removeAll(),this._grid.selectedItems=[],this._grid.render())}_selectRowsOnLoad(){const i=this._grid;if(!i)return;const t=i.selectedItems.slice();(this.highlightIds?.filter(r=>t.findIndex(n=>n.objectId===r)<0)).forEach(r=>i.selectedItems.push(this.store?.getLocalItemByKey(r)||{objectId:r})),i.render()}_selectRows(i){const t=this._grid;if(!t)return;const e=t.selectedItems.slice();i.filter(r=>e.findIndex(n=>n.objectId===r.objectId)<0).forEach(r=>t.selectedItems.push(r)),t.render()}_deselectRows(i){const t=this._grid;if(!t)return;const e=t.selectedItems.slice();i.forEach(r=>{const n=e.findIndex(s=>s.objectId===r.objectId);n>-1&&e.splice(n,1)}),t.selectedItems=e,t.render()}_onSelectionChange(i){const t=i;if(t.detail.path==="selectedItems.splices"){const{removed:e,object:r}=t.detail.value.indexSplices[0],n=r.filter(o=>!this.highlightIds.includes(o.objectId)).map(o=>o.objectId),s=e.filter(o=>this.highlightIds.includes(o.objectId)).map(o=>o.objectId);this.highlightIds.removeMany(s),this.highlightIds.addMany(n)}}_applyRenderersToColumnElement(i){const t=i?.path,e=t!=null?this.viewModel.findColumn(t):void 0;if(e)try{const{renderFunction:r,footerRenderFunction:n,headerRenderFunction:s}=e;r&&"renderer"in i&&(i.renderer=(o,a,l)=>r({root:o,column:a,rowData:l})),n&&(i.footerRenderer=(o,a)=>n({root:o,column:a})),s&&(i.headerRenderer=(o,a)=>s({root:o,column:a}))}catch{}}};w([x()],Ot.prototype,"_grid",void 0),w([x()],Ot.prototype,"_isDataLoaded",void 0),w([x()],Ot.prototype,"cellClassNameGenerator",null),w([x()],Ot.prototype,"columns",null),w([x()],Ot.prototype,"columnReorderingEnabled",null),w([x()],Ot.prototype,"dataProvider",null),w([x()],Ot.prototype,"highlightIds",null),w([x()],Ot.prototype,"itemIdPath",void 0),w([x()],Ot.prototype,"label",null),w([x(),Pe("esri/widgets/FeatureTable/t9n/FeatureTable")],Ot.prototype,"messages",void 0),w([x()],Ot.prototype,"multiSortEnabled",null),w([x()],Ot.prototype,"pageSize",null),w([x()],Ot.prototype,"rowDetailsRenderer",null),w([x()],Ot.prototype,"size",null),w([x({readOnly:!0})],Ot.prototype,"sortOrders",null),w([x()],Ot.prototype,"store",null),w([x()],Ot.prototype,"viewModel",void 0),w([x()],Ot.prototype,"visibleElements",void 0),w([qr("visibleElements")],Ot.prototype,"castVisibleElements",null),Ot=w([$t("esri.widgets.FeatureTable.Grid.Grid")],Ot);const Rg=Ot;let Di=class extends ns{constructor(i){super(i),this.columns=null,this.sortable=!1}get path(){return this.header}set path(i){this.header=i}};w([x()],Di.prototype,"columns",void 0),w([x()],Di.prototype,"path",null),w([x({readOnly:!0})],Di.prototype,"sortable",void 0),Di=w([$t("esri.widgets.FeatureTable.Grid.GroupColumn")],Di);const zg=Di,tc="esri.widgets.FeatureTable.support.FeatureStore",Ng=zo.getLogger(tc);function Hs(i,t,e){Ng.error(new mi(i,t,e))}let Ut=class extends Yr{constructor(i){super(i),this._loaded=!1,this._loadError=!1,this._loading=!1,this._editOperationQueue=[],this._queryOperationQueue=[],this._objectIdCache=new he,this._hasStaleCache=!1,this.count=0,this.failures=new he,this.itemCache=new he,this.relatedRecordsEnabled=!1}destroy(){this.layer=null,this.itemCache?.destroy(),this.failures?.destroy(),this._set("itemCache",null)}set attachmentsEnabled(i){this._reset(),this._set("attachmentsEnabled",i),this.notifyChange("state")}set filterGeometry(i){this._reset(),this._set("filterGeometry",i),this.notifyChange("state")}set layer(i){this._reset(),this._set("layer",i),this.notifyChange("state")}set objectIds(i){this._reset(),this._set("objectIds",i||null),this.notifyChange("state")}get orderByFields(){return this._get("orderByFields")||[]}set orderByFields(i){const t=this.orderByFields;Nc(i,t)||(this.itemCache.removeAll(),this._hasStaleCache=!0,this._set("orderByFields",i))}get querying(){return this._queryOperationQueue.length>0}set returnGeometry(i){this._reset(),this._set("returnGeometry",i),this.notifyChange("state")}get state(){const{layer:i,_loaded:t,_loadError:e,_loading:r}=this;return e?"error":!i||this.get("layer.loadError")?"disabled":r?"loading":this.get("layer.loadStatus")==="loaded"&&t?"loaded":"ready"}get syncing(){return this._editOperationQueue.length>0}set timeExtent(i){this._reset(),this._set("timeExtent",i),this.notifyChange("state")}get where(){return this._get("where")||null}set where(i){this._reset(),this._set("where",i),this.notifyChange("state")}async load(){this._reset();const{layer:i}=this;if(i){this._loading=!0,this.notifyChange("state");try{await i.when(),await this._syncLayerInfo(),this._loading=!1,this._loaded=!0,this.notifyChange("state")}catch(t){throw this._reset(),this._loadError=!0,this.notifyChange("state"),Hs("store:load-error","An error ocurred.",{error:t}),t}}}async refreshLayerInfo(){return this._syncLayerInfo()}async addItems(i){}async fetchItems(i){const{page:t,pageSize:e}=i,r=t*e,n=r+e,{layer:s,state:o}=this;if(!s||o!=="loaded")return[];this.notifyChange("querying");const a=await this._query({start:r,num:n,page:t,pageSize:e});return this.notifyChange("state"),a}async verifyFeaturesByObjectId(i){const{layer:t,state:e}=this;if(!t||e!=="loaded")return[];const{features:r}=await this._verifyFeaturesByObjectId(i);return i.map(n=>r.some(s=>s?.getObjectId()===n))}async query(i){const{layer:t,state:e}=this;if(!t||e!=="loaded")return[];this.notifyChange("querying");const r=await this._query(i);return this.notifyChange("state"),r}async removeItemAt(i){}async reset(){this._reset()}async updateItem(i){return this._update(i).then(()=>{})}async deleteRowsByObjectId(i){return this._delete({objectIds:i})}getLocalItemByKey(i){return this.getItemByObjectId(i)}getItemByObjectId(i){const{itemCache:t,layer:{objectIdField:e}}=this;return t.find(r=>r.feature?.attributes[e]===i)}getLocalItemAt(i){return this.itemCache.at(i)}at(i){return Promise.resolve(this.itemCache.at(i))}getObjectIdIndex(i){const{itemCache:t,layer:{objectIdField:e}}=this;return t.findIndex(r=>r.feature?.attributes[e]===i)}_reset(){this.itemCache.removeAll(),this.failures.removeAll(),this._editOperationQueue=[],this._queryOperationQueue=[],this._hasStaleCache=!1,this._loading=!1,this._loaded=!1,this._loadError=!1,this._set("count",0),this._objectIdCache.removeAll(),this.notifyChange("querying"),this.notifyChange("syncing"),this.notifyChange("state")}_getIdsFromFeatures(i){return i.map(t=>t.attributes[this.layer.objectIdField])}_toFeatureData(i,t){const{layer:{objectIdField:e}}=this;return i.map(r=>{const{attributes:n}=r,s=n[e];return{objectId:s,feature:r,attachments:t?t[s]:null,relatedRecords:null}})}async _update(i){const{layer:t}=this,{operations:e}=hr(t);if(!e.supportsUpdate||!("applyEdits"in t))throw new mi("store:update-error","Update is not supported.");const{index:r,name:n,value:s}=i,o=await this.at(r);if(!o||!o.feature)throw new mi("store:update-error","Feature with provided 'objectId' not found.");const{feature:a}=o,l=Fc(a.attributes);l[n]=s;const d=new Fo({attributes:l}),h=t.applyEdits({updateFeatures:[d]}).then(c=>{const{updateFeatureResults:m}=c,p=m.find(g=>!!g.error);if(p)throw p.error;return m.length&&(a.attributes=l),c});return this._queueEditOperation(()=>h)}async _delete(i){const{layer:t}=this,{operations:e}=hr(t);if(!e.supportsDelete||!("applyEdits"in t))throw new mi("store:delete-error","Delete is not supported.");const{objectIds:r}=i,n=r.map(s=>this.getItemByObjectId(s)?.feature).filter(wd);return this._queueEditOperation(()=>t.applyEdits({deleteFeatures:n}))}async _query(i){const{refresh:t}=i;return t===!0?(this.itemCache.removeAll(),this._syncLayerInfo().then(()=>this._queryFeatureData(i))):(this._hasStaleCache&&(await this._updateIds(),this._hasStaleCache=!1),this._queryFeatureData(i))}async _queryFeatureData(i){return this._queueQueryOperation(async()=>{const{features:t}=await this._queryFeatures(i),e=this._getIdsFromFeatures(t),r=await this._queryAttachments(e);return this._toFeatureData(t,r)||[]})}async _syncLayerInfo(){await this._updateCount(),await this._updateIds()}async _updateCount(){await this._queryCount().then(i=>this._set("count",i))}async _updateIds(){this.layer?.capabilities?.query?.supportsPagination||(this._objectIdCache.removeAll(),await this._queryForObjectIds().then(i=>this._objectIdCache.addMany(i)))}_queryCount(){const{filterGeometry:i,layer:t}=this,e=t.capabilities?.query?.supportsCacheHint,r=t.createQuery();return r.geometry=i,r.returnGeometry=!1,r.where=this._getWhere(),r.timeExtent=this._getTimeExtent(),r.objectIds=this.objectIds,e&&(r.cacheHint=!0),t.queryFeatureCount(r)}_queryForObjectIds(){const{filterGeometry:i,layer:t,orderByFields:e}=this,r=t.capabilities?.query,n=r?.supportsCacheHint,s=r?.supportsOrderBy,o=t.createQuery();return o.geometry=i,o.outFields=[t.objectIdField],o.returnGeometry=!1,o.where=this._getWhere(),o.timeExtent=this._getTimeExtent(),o.objectIds=this.objectIds,s&&(o.orderByFields=e),n&&(o.cacheHint=!0),t.queryObjectIds(o)}async _queryFeatures(i){const{layer:t}=this;if(!hr(t)?.operations.supportsQuery)throw new mi("store:query-error","Layer does not support query operation.");const{filterGeometry:e,orderByFields:r,returnGeometry:n}=this,s=this.layer?.capabilities?.query,{start:o,pageSize:a}=i,l=t.createQuery();return l.returnGeometry=n,s?.supportsPagination?(l.start=o,l.num=a,l.where=this._getWhere(),l.timeExtent=this._getTimeExtent(),l.objectIds=this.objectIds):l.objectIds=this.objectIds||this._getObjectIdsForPage(o,a??0),s?.supportsOrderBy&&(l.orderByFields=r),e&&(l.geometry=e),s?.supportsCacheHint&&(l.cacheHint=!0),t.queryFeatures(l)}async _verifyFeaturesByObjectId(i){const{layer:t}=this;if(!hr(t)?.operations.supportsQuery)throw new mi("store:query-error","Layer does not support query operation.");const{filterGeometry:e,orderByFields:r}=this,n=this.layer?.capabilities?.query,s=t.createQuery();return s.where=this._getWhere(),s.timeExtent=this._getTimeExtent(),s.returnGeometry=!1,s.objectIds=i,s.outFields=[t.objectIdField],n?.supportsOrderBy&&(s.orderByFields=r),e&&(s.geometry=e),n?.supportsCacheHint&&(s.cacheHint=!0),t.queryFeatures(s)}_getObjectIdsForPage(i,t){const e=this._objectIdCache.toArray();return e.length>=i+t?e.slice(i,i+t):e.slice(i)}_queryAttachments(i){const{attachmentsEnabled:t,layer:e}=this,{capabilities:r}=e,n=r?.data.supportsAttachment,s=r?.operations?.supportsQueryAttachments;return t&&n&&s&&"queryAttachments"in e?e.queryAttachments(new Mc({objectIds:i,where:this._getWhere()})):Promise.resolve(null)}_syncLocalCache(i){i.forEach(t=>{if(t.feature){const e=t.feature.getObjectId();if(e!=null){const r=this.getObjectIdIndex(e);r===-1?this.itemCache.add(t):this.itemCache.splice(r,1,t)}}})}_queueQueryOperation(i){return this._queryOperationQueue.push(i),this.notifyChange("querying"),i().then(t=>this._queryOperationQueue.includes(i)?(this._syncLocalCache(t),t):[]).catch(t=>{Hs("store:query-error","An error ocurred.",{error:t});const e={error:t,retry:()=>{this.failures.remove(e),this._queueQueryOperation(i)},cancel:()=>this.failures.remove(e)};return this.failures.add(e),[]}).then(t=>(fs(this._queryOperationQueue,i),this.notifyChange("querying"),t))}_queueEditOperation(i){return this._editOperationQueue.push(i),this.notifyChange("syncing"),i().then(t=>(fs(this._editOperationQueue,i),this.notifyChange("syncing"),t)).catch(t=>{Hs("store:edit-error","An error ocurred.",{error:t});const e={error:t,retry:()=>{this.failures.remove(e),this._queueEditOperation(i)},cancel:()=>this.failures.remove(e)};throw this.failures.add(e),fs(this._editOperationQueue,i),this.notifyChange("syncing"),t})}_getWhere(){return this.where||this.layer?.definitionExpression||"1=1"}_getTimeExtent(){const i=this.layer;return this.timeExtent||i&&"timeExtent"in i&&i.timeExtent||null}};w([x()],Ut.prototype,"attachmentsEnabled",null),w([x({readOnly:!0})],Ut.prototype,"count",void 0),w([x({readOnly:!0})],Ut.prototype,"failures",void 0),w([x()],Ut.prototype,"filterGeometry",null),w([x({readOnly:!0})],Ut.prototype,"itemCache",void 0),w([x({value:null})],Ut.prototype,"layer",null),w([x({value:null})],Ut.prototype,"objectIds",null),w([x()],Ut.prototype,"orderByFields",null),w([x({readOnly:!0})],Ut.prototype,"querying",null),w([x()],Ut.prototype,"relatedRecordsEnabled",void 0),w([x({value:!1})],Ut.prototype,"returnGeometry",null),w([x({readOnly:!0})],Ut.prototype,"state",null),w([x({readOnly:!0})],Ut.prototype,"syncing",null),w([x()],Ut.prototype,"timeExtent",null),w([x()],Ut.prototype,"where",null),Ut=w([$t(tc)],Ut);const ec=Ut;let gt=class extends Zr($d){constructor(i){super(i),this._debounceRefresh=Lc(()=>this._refresh()),this._highlights=new $c,this.activeFilters=new he,this.autoRefreshEnabled=!0,this.cellClassNameGenerator=(t,e)=>t.path||null,this.columns=new he,this.dataProvider=async(t,e)=>{const{store:r}=this,{page:n,pageSize:s,sortOrders:o}=t,a=this._sortOrdersToLayerOrderByFields(o);e&&(r?(await r.set({orderByFields:a}),r.state!=="loaded"&&r.state!=="loading"&&await r.load(),e&&e(await r.fetchItems({page:n,pageSize:s}))):e&&e([]))},this.editingEnabled=!1,this.fieldConfigs=null,this.grid=null,this.highlightEnabled=!0,this.itemIdPath="objectId",this.messagesCommon=null,this.messagesURIUtils=null,this.relatedRecordsEnabled=!1,this.returnGeometryEnabled=!1,this.store=null,this.tableTemplate=null,this.view=null,this._onLayerRefresh=this._onLayerRefresh.bind(this),this._set("store",new ec),this._set("grid",new Rg({itemIdPath:this.itemIdPath,viewModel:this}))}initialize(){const i=async()=>{this.messages=await ms("esri/widgets/FeatureTable/t9n/FeatureTable"),this.messagesCommon=await ms("esri/t9n/common"),this.messagesURIUtils=await ms("esri/widgets/support/t9n/uriUtils")};i(),this.handles.add([Bc(()=>{i(),this._generateColumns()}),ai(()=>this.highlightIds,"change",t=>this._onHighlightIdsChange(t),{onListenerAdd:()=>{this.highlightIds.forEach(t=>this._highlight(t))},onListenerRemove:()=>{this.highlightIds.forEach(t=>this._unhighlight(t))}}),At(()=>this.layerView,()=>{this._highlights.removeAll(),this.layerView&&this.highlightEnabled&&this.highlightIds?.forEach(t=>this._highlight(t))}),At(()=>this.highlightEnabled,()=>{this._highlights.removeAll(),this.highlightEnabled&&this.highlightIds?.forEach(t=>this._highlight(t))}),At(()=>this.relatedRecordsEnabled,t=>this.store.relatedRecordsEnabled=t),At(()=>this.returnGeometryEnabled,t=>this.store.returnGeometry=t),At(()=>this.layer?.loaded,t=>t&&this._onLayerLoad()),At(()=>this.store.state,t=>{t==="loaded"&&this.grid?.scrollToTop()}),At(()=>[this.messages,this.tableTemplate,this.fieldConfigs],()=>this.layer?.loaded&&this._generateColumns()),At(()=>this.editingEnabled,t=>{this.columns.forEach(e=>{"editingEnabled"in e&&(e.editingEnabled=t)}),this.grid?.onColumnChange()}),At(()=>this.layer?.definitionExpression,(t,e)=>(t||e)&&this.store.state==="loaded"&&this.reset()),At(()=>this.layer&&"timeExtent"in this.layer&&this.layer.timeExtent,(t,e)=>(t||e)&&!this.timeExtent&&this.store.state==="loaded"&&this.reset()),ai(()=>this.layer,"refresh",t=>this._onLayerRefresh(t))])}destroy(){this._resetColumns(),this.handles.removeAll(),this._highlights.removeAll(),this._highlights.destroy(),this.grid?.destroy(),this.columns?.destroy(),this.layer=null,this.view=null}get _defaultHiddenFields(){return Hc(this.layer)}get activeSortOrders(){return this.grid?.sortOrders?this.grid.sortOrders.map(({path:i,direction:t})=>({fieldName:i,direction:t})):[]}set attachmentsEnabled(i){this.attachmentsEnabled!==i&&(this._set("attachmentsEnabled",i),this._generateColumns(),this.store.attachmentsEnabled=i)}set filterGeometry(i){if(!this.filterGeometry&&!i)return;const t=this.activeFilters.find(e=>e.type==="geometry");t&&this.activeFilters.remove(t),this._set("filterGeometry",i),this.store.filterGeometry=i,i&&this.activeFilters.add({type:"geometry",geometry:i})}get hiddenFields(){return this._get("hiddenFields")??new he}set hiddenFields(i){Array.isArray(i)?this._set("hiddenFields",new he(i)):this._set("hiddenFields",i)}get highlightOnRowSelectEnabled(){return this.highlightEnabled}set highlightOnRowSelectEnabled(i){this.highlightEnabled=i}set layer(i){this._set("layer",i),this.grid?.clearSort(),this._resetColumns(),this.store.layer=i,i&&(i.loaded?this._onLayerLoad():i.load()),this.notifyChange("state")}get layerView(){return this.view?.allLayerViews.find(i=>i.layer===this.layer)||null}set messages(i){this.grid?.set("messages",i),this._set("messages",i)}get state(){const{store:i}=this;return i&&i.state!=="disabled"?i.state==="loading"?"loading":i.state==="loaded"?"loaded":"ready":"disabled"}set timeExtent(i){this._set("timeExtent",i),this.store.timeExtent=i}clearHighlights(){this._highlights.removeAll()}clearSelection(){this.grid?.clearSelection()}async deleteSelection(){const i=this.highlightIds.toArray();if(!i?.length)return;const{deleteFeatureResults:t}=await this.store.deleteRowsByObjectId(i),e=t.filter(r=>!r.error).map(r=>r.objectId);e.length&&(this.deselectRows(e),await this.refresh())}deselectRows(i){const t=this._getStoreItemsFromSelectionParams(i);this.grid?.deselectRows(t)}filterBySelection(){const i=this.highlightIds.toArray();i.length&&(this.clearSelectionFilter(),this.store.objectIds=i,this.activeFilters.add({type:"selection",objectIds:i}))}getObjectIdIndex(i){return this.store?.getObjectIdIndex(i)}getValue(i,t){return this.store.getItemByObjectId(i)?.feature?.attributes[t]}get highlightIds(){return this._get("highlightIds")||new he}set highlightIds(i){Array.isArray(i)?this._set("highlightIds",new he(i)):this._set("highlightIds",i)}async refresh(){return jc(this._debounceRefresh())}reset(){this.grid?.reset()}selectRows(i){const t=this._getStoreItemsFromSelectionParams(i);return this.grid?.selectRows(t)}scrollToIndex(i){this.grid?.scrollToIndex(i)}clearSelectionFilter(){this.store.objectIds=null;const i=this.activeFilters.find(t=>t.type==="selection");i&&this.activeFilters.remove(i)}zoomToSelection(){const{layer:i,view:t}=this,e=this.highlightIds.toArray();if(!i||!t||!e.length)return;const r=i.createQuery();r.objectIds=e,r.returnGeometry=!0,i.queryFeatures(r).then(n=>{t.goTo(n.features).catch(s=>{s.name!=="AbortError"&&console.error(s)})})}async _refresh(){await this.store.refreshLayerInfo();const i=this.highlightIds.toArray();i.length&&(await this.store.verifyFeaturesByObjectId(i)).forEach((t,e)=>{t||this.deselectRows(i[e])}),this.grid?.refreshPageCache()}_onLayerLoad(){const i=this.layer.capabilities?.query.maxRecordCount;i&&i<this.pageSize&&this.grid&&(this.grid.pageSize=i),this._generateColumns()}_onLayerRefresh(i){this.autoRefreshEnabled&&i.dataChanged&&this.refresh()}_generateColumns(){this._resetColumns();const i=[],t=this.tableTemplate?.columnTemplates?this._generateColumnsFromTemplates(this.tableTemplate.columnTemplates):this.fieldConfigs?.length?this._generateColumnsFromConfigs():this._generateDefaultFieldColumns();i.push(...t),i.length&&this.attachmentsEnabled&&i.push(this._generateDefaultAttachmentColumn()),this.columns.addMany([...i])}_generateColumnsFromTemplates(i){const{editingEnabled:t,grid:e,layer:r,messages:n,messagesCommon:s,messagesURIUtils:o,store:a,tableTemplate:l}=this,d=this.layer?.fields??[],h=c=>{const m="fieldName"in c&&c.fieldName?.toLowerCase();return d.find(p=>m===p.name?.toLowerCase())};return i.filter(c=>h(c)!=null||c.type==="group"&&"columnTemplates"in c).map(c=>{if("fieldName"in c){const m=h(c),p=c.visible===!1||c.visible!==!0&&this._isFieldHidden(m?.name),{direction:g,formatFunction:f,initialSortPriority:b,menuConfig:y,textAlign:v}=c;return new ws({direction:g,editingEnabled:t,expressionInfos:l?.expressionInfos||null,field:m,formatFunction:f,grid:e,hidden:p,initialSortPriority:b,layer:r,messages:n,messagesCommon:s,messagesURIUtils:o,menuConfig:y,store:a,template:c,textAlign:v})}if(c.type==="group"&&"columnTemplates"in c){const m=this._generateColumnsFromTemplates(c.columnTemplates),p=c.visible===!1||c.visible!==!0&&this._isFieldHidden(c.label),{label:g}=c;return new zg({header:g,columns:m,hidden:p})}return new ns({...c})})}_generateColumnsFromConfigs(){const{editingEnabled:i,fieldConfigs:t,grid:e,layer:r,messages:n,messagesCommon:s,messagesURIUtils:o,store:a}=this;if(!t)return[];const l=this.layer?.fields??[],d=h=>{const c=h.name?.toLocaleLowerCase();return l.find(m=>c===m.name?.toLowerCase())};return t.filter(d).map(h=>{const c=h.direction||null,m=h.formatFunction||null,p=h.textAlign||null,g=h.initialSortPriority!=null?h.initialSortPriority:null,f=d(h),b=h.visible===!1||h.visible!==!0&&this._isFieldHidden(f?.name),y=h.menuConfig||null;return new ws({config:h,direction:c,editingEnabled:i,field:f,formatFunction:m,grid:e,hidden:b,layer:r,store:a,messages:n,messagesCommon:s,messagesURIUtils:o,menuConfig:y,textAlign:p,initialSortPriority:g})})}_generateDefaultFieldColumns(){const{editingEnabled:i,grid:t,layer:e,messages:r,messagesCommon:n,messagesURIUtils:s,store:o}=this;return(this.layer?.fields??[]).map(a=>new ws({editingEnabled:i,field:a,grid:t,hidden:this._isFieldHidden(a.name),layer:e,store:o,messages:r,messagesCommon:n,messagesURIUtils:s}))}_generateDefaultAttachmentColumn(){return new Cp({header:this.messages?.attachments})}_sortOrdersToLayerOrderByFields(i){return i&&i.length?i.filter((t,e,r)=>r.map(n=>n.path).indexOf(t.path)===e).filter(({direction:t})=>!!t).map(({direction:t,path:e})=>e+" "+t?.toUpperCase()):[]}_isFieldHidden(i){const t=i?.toLowerCase();return(this.hiddenFields??this._defaultHiddenFields).some(e=>e.toLowerCase()===t)}_highlight(i){this.layerView&&Uc(this.layerView)&&this._highlights.add(this.layerView.highlight(i),i)}_unhighlight(i){this._highlights.remove(i)}_getStoreItemsFromSelectionParams(i){const t=[];return(i=i instanceof Array?i:[i]).forEach(e=>{let r=e instanceof Fo?e:null;const n=r?r.getObjectId():e;if(typeof n=="number"||typeof n=="string"){if(!r){const s=this.store.getItemByObjectId(n);s&&(r=s.feature)}t.push({objectId:n,feature:r})}}),t}_onHighlightIdsChange(i){const{highlightEnabled:t}=this,{added:e,removed:r}=i;t&&(e.forEach(n=>this._highlight(n)),r.forEach(n=>this._unhighlight(n)))}_resetColumns(){this.columns.items.forEach(i=>i.destroy()),this.columns.removeAll()}};w([x()],gt.prototype,"_defaultHiddenFields",null),w([x({readOnly:!0})],gt.prototype,"activeFilters",void 0),w([x({readOnly:!0})],gt.prototype,"activeSortOrders",null),w([x()],gt.prototype,"attachmentsEnabled",null),w([x()],gt.prototype,"autoRefreshEnabled",void 0),w([x()],gt.prototype,"cellClassNameGenerator",void 0),w([x({readOnly:!0})],gt.prototype,"columns",void 0),w([x()],gt.prototype,"dataProvider",void 0),w([x()],gt.prototype,"editingEnabled",void 0),w([x()],gt.prototype,"fieldConfigs",void 0),w([x()],gt.prototype,"filterGeometry",null),w([x({readOnly:!0})],gt.prototype,"grid",void 0),w([x()],gt.prototype,"hiddenFields",null),w([x()],gt.prototype,"highlightEnabled",void 0),w([x()],gt.prototype,"highlightOnRowSelectEnabled",null),w([x({readOnly:!0})],gt.prototype,"itemIdPath",void 0),w([x()],gt.prototype,"layer",null),w([x()],gt.prototype,"layerView",null),w([x()],gt.prototype,"messages",null),w([x(),Pe("esri/t9n/common")],gt.prototype,"messagesCommon",void 0),w([x(),Pe("esri/widgets/support/t9n/uriUtils")],gt.prototype,"messagesURIUtils",void 0),w([x()],gt.prototype,"relatedRecordsEnabled",void 0),w([x()],gt.prototype,"returnGeometryEnabled",void 0),w([x({readOnly:!0})],gt.prototype,"state",null),w([x({readOnly:!0,type:ec})],gt.prototype,"store",void 0),w([x()],gt.prototype,"tableTemplate",void 0),w([x()],gt.prototype,"timeExtent",null),w([x()],gt.prototype,"view",void 0),w([x()],gt.prototype,"highlightIds",null),gt=w([$t("esri.widgets.FeatureTable.FeatureTableViewModel")],gt);const Fg=gt,od={header:!0,menu:!0,menuItems:{clearSelection:!0,refreshData:!0,toggleColumns:!0,selectedRecordsShowAllToggle:!0,selectedRecordsShowSelectedToggle:!0,zoomToSelection:!0,deleteSelection:!0},selectionColumn:!0,columnMenus:!0},Ke="esri-feature-table",Ei=`${Ke}__prompt`,Bt={base:Ke,header:`${Ke}__header`,title:`${Ke}__title`,content:`${Ke}__content`,loader:`${Ke}__loader`,loaderContainer:`${Ke}__loader-container`,menuContainer:`${Ke}__menu`,menuIcon:"esri-icon-handle-horizontal",menuItemGroupOpenedIcon:"esri-icon-down",menuItemGroupClosedIcon:"esri-icon-right",checkmarkIcon:"esri-icon-check-mark",promptContainer:Ei,promptHeader:`${Ei}__header`,promptHeading:`${Ei}__header__heading`,promptMessage:`${Ei}__message`,promptDivider:`${Ei}__divider`,promptActions:`${Ei}__actions`,widget:"esri-widget"},ad=zo.getLogger("esri.widgets.FeatureTable");let pt=class extends Zr(vi){constructor(t,e){super(t,e),this._prompt=null,this.menu=null,this.menuConfig=null,this.viewModel=new Fg,this.visibleElements={...od},this._showDeletePrompt=this._showDeletePrompt.bind(this),this._onDeleteSelectionClick=this._onDeleteSelectionClick.bind(this)}initialize(){this.handles.add([ai(()=>this.viewModel.columns,"change",()=>this._syncMenuConfig()),ai(()=>this.viewModel.activeFilters,"change",()=>this._syncMenuConfig()),ai(()=>this.highlightIds,"change",r=>{this._syncMenuConfig(),this._onSelectionChange(r)}),At(()=>[this.viewModel.store.querying,this.viewModel.store.syncing,this.editingEnabled],()=>this.scheduleRender()),At(()=>[this.menuConfig,this.editingEnabled],()=>this._syncMenuConfig()),At(()=>this.messages,()=>{this.menu&&(this.menu.label=this.messages?.options),this._syncMenuConfig()})]),this._set("menu",new zd({label:this.messages?.options,iconClass:Bt.menuIcon,...this.menuConfig}));const{attachmentsEnabled:t,relatedRecordsEnabled:e}=this;this.viewModel?.store?.set({attachmentsEnabled:t,relatedRecordsEnabled:e})}loadDependencies(){return Cd({button:()=>br(()=>import("./calcite-button-d9045173.js"),["./calcite-button-d9045173.js","./button-a95c5efa.js","./main-79e5ed80.js","./main-7772480e.css","./form-9c9dba1f.js","./interactive-1607c36d.js","./label2-890d1a34.js","./loadable-7d140904.js","./t9n-460cb030.js","./key-89f6acdc.js","./observers-7949b362.js","./icon-3b706e0b.js","./loader-142f20e1.js","./guid-4f97587b.js"],import.meta.url),icon:()=>br(()=>import("./calcite-icon-b3dbf1c9.js"),["./calcite-icon-b3dbf1c9.js","./icon-3b706e0b.js","./main-79e5ed80.js","./main-7772480e.css","./observers-7949b362.js"],import.meta.url),scrim:()=>br(()=>import("./calcite-scrim-5c6fad96.js"),["./calcite-scrim-5c6fad96.js","./scrim-13194b98.js","./main-79e5ed80.js","./main-7772480e.css","./t9n-460cb030.js","./key-89f6acdc.js","./observers-7949b362.js","./loader-142f20e1.js","./guid-4f97587b.js"],import.meta.url)})}destroy(){this._prompt=null,this.handles.removeAll(),this.menu?.destroy()}get activeFilters(){return this.viewModel.activeFilters}get activeSortOrders(){return this.viewModel.activeSortOrders}get attachmentsEnabled(){return this.viewModel.attachmentsEnabled}set attachmentsEnabled(t){this.viewModel.attachmentsEnabled=t}get autoRefreshEnabled(){return this.viewModel.autoRefreshEnabled}set autoRefreshEnabled(t){this.viewModel.autoRefreshEnabled=t}get columnReorderingEnabled(){return this.viewModel.columnReorderingEnabled}set columnReorderingEnabled(t){this.viewModel.columnReorderingEnabled=t}get columns(){return this.viewModel.columns}get editingEnabled(){return this.viewModel.editingEnabled}set editingEnabled(t){this.viewModel.editingEnabled=t}get fieldConfigs(){return this.viewModel.fieldConfigs??[]}set fieldConfigs(t){this.viewModel.fieldConfigs=t}get filterGeometry(){return this.viewModel.filterGeometry}set filterGeometry(t){this.viewModel.filterGeometry=t}get grid(){return this.viewModel.grid}get hiddenFields(){return this.viewModel.hiddenFields}set hiddenFields(t){this.viewModel.hiddenFields=t}get highlightEnabled(){return this.viewModel.highlightEnabled}set highlightEnabled(t){this.viewModel.highlightEnabled=t}get highlightIds(){return this.viewModel.highlightIds}set highlightIds(t){this.viewModel.highlightIds=t}get highlightOnRowSelectEnabled(){return this.viewModel.highlightEnabled}set highlightOnRowSelectEnabled(t){this.viewModel.highlightEnabled=t}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}get layer(){return this.viewModel.layer}set layer(t){this.viewModel.layer=t}get messages(){return this.viewModel.messages}set messages(t){this.viewModel.messages=t}get messagesCommon(){return this.viewModel.messagesCommon}set messagesCommon(t){this.viewModel.messagesCommon=t}get messagesURIUtils(){return this.viewModel.messagesURIUtils}set messagesURIUtils(t){this.viewModel.messagesURIUtils=t}get multiSortEnabled(){return this.viewModel.multiSortEnabled}set multiSortEnabled(t){this.viewModel.multiSortEnabled=t}get pageSize(){return this.viewModel.pageSize}set pageSize(t){this.viewModel.pageSize=t}get relatedRecordsEnabled(){return this.viewModel.relatedRecordsEnabled}set relatedRecordsEnabled(t){this.viewModel.relatedRecordsEnabled=t}get state(){return this.viewModel.state}get tableTemplate(){return this.viewModel.tableTemplate}set tableTemplate(t){this.viewModel.tableTemplate=t}get timeExtent(){return this.viewModel.timeExtent}set timeExtent(t){this.viewModel.timeExtent=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}castVisibleElements(t){const e={...od,...t};return this.grid?.set("visibleElements",{...this.grid.visibleElements,selectionColumn:e.selectionColumn,columnMenus:e.columnMenus}),e}clearHighlights(){return wa(ad,"`FeatureTable.clearHighlights` is deprecated in favor of FeatureTable.highlightIds'",{replacement:"FeatureTable.highlightIds",version:"4.25",see:"https://developers.arcgis.com/javascript/latest/api-reference/esri-widgets-FeatureTable.html#highlightIds"}),this.viewModel.clearHighlights()}clearSelection(){return wa(ad,"`FeatureTable.clearSelection` is deprecated in favor of FeatureTable.highlightIds'",{replacement:"FeatureTable.highlightIds",version:"4.25",see:"https://developers.arcgis.com/javascript/latest/api-reference/esri-widgets-FeatureTable.html#highlightIds"}),this.viewModel.clearSelection()}clearSelectionFilter(){return this.viewModel.clearSelectionFilter()}deleteSelection(t){return this.highlightIds.length?t?(this._showDeletePrompt(),this.scheduleRender(),Promise.resolve()):this.viewModel.deleteSelection():Promise.resolve()}deselectRows(t){return this.viewModel.deselectRows(t)}filterBySelection(){return this.viewModel.filterBySelection()}findColumn(t){return this.viewModel.findColumn(t)}hideColumn(t){this.grid?.hideColumn(t),this._syncMenuConfig()}refresh(){return this.viewModel.refresh()}get returnGeometryEnabled(){return this.viewModel.returnGeometryEnabled}set returnGeometryEnabled(t){this.viewModel.returnGeometryEnabled=t}showAllColumns(){return this.viewModel.showAllColumns()}showColumn(t){this.grid?.showColumn(t),this._syncMenuConfig()}sortColumn(t,e){return this.viewModel.sortColumn(t,e)}selectRows(t){return this.viewModel.selectRows(t)}scrollToIndex(t){return this.viewModel.scrollToIndex(t)}zoomToSelection(){return this.viewModel.zoomToSelection()}render(){const{_prompt:t}=this,e=t!=null?G("calcite-scrim",null,this.renderPrompt(t)):null;return G("div",{bind:this,class:this.classes(Bt.base,Bt.widget)},this.visibleElements.header?this._renderHeader():null,G("div",{class:Bt.content},this.state!=="disabled"&&this.grid?.render()),e)}renderPrompt({title:t,message:e,context:r,actions:n}){const s=G("calcite-button",{appearance:"solid",kind:r==="danger"?"danger":"brand",width:n.secondary?"half":"full",onclick:n.primary.action,key:"prompt-primary-button"},n.primary.label),o=n.secondary?G("calcite-button",{appearance:"outline",kind:r==="danger"?"danger":"brand",width:"half",onclick:n.secondary.action,key:"prompt-secondary-button"},n.secondary.label):null;return G("div",{class:`${Bt.promptContainer}--${r}`},G("div",{class:Bt.promptHeader},G("calcite-icon",{icon:"exclamation-mark-triangle"}),G(su,{class:Bt.promptHeading,level:2},t)),G("div",{class:Bt.promptMessage},e),G("div",{class:Bt.promptDivider}),G("div",{class:Bt.promptActions},o,s))}_renderHeader(){return G("div",{key:"header",class:Bt.header},this._renderLoader(),this._renderTitle(),this.visibleElements.menu?this._renderMenu():null)}_renderTitle(){return G("div",{class:Bt.title,key:"title"},this._getTitle())}_getTitle(){const{grid:t,highlightIds:e,layer:r,messages:n,viewModel:{size:s}}=this;return t&&r?Ca(n.header,{title:r.title,count:s,selected:e.length||0}):""}_renderLoader(){const{state:t,store:e}=this.viewModel,r=t==="loading"||e.syncing||e.querying;return G("div",{class:Bt.loaderContainer},r?G("div",{class:Bt.loader,key:"loader"}):null)}_renderMenu(){return G("div",{class:Bt.menuContainer},this.menu?.render())}_onSelectionChange(t){const{added:e,removed:r}=t,n=e.map(o=>this.viewModel.store.getLocalItemByKey(o)||{objectId:o,feature:null,attachments:null,relatedRecords:null}),s=r.map(o=>this.viewModel.store.getLocalItemByKey(o)||{objectId:o,feature:null,attachments:null,relatedRecords:null});this.emit("selection-change",{added:n,removed:s})}_syncMenuConfig(){this.menu?.set({...this.menuConfig,items:this._getMenuItems()})}_getMenuItems(){const t=this.menuConfig?.items,e=this._getDefaultMenuItems(),r=[];return e?.length&&r.push(...e),t?.length&&r.push(...t),r}_getDefaultMenuItems(){const{highlightIds:t,messages:e,viewModel:r,visibleElements:n}=this,{menuItems:s}=n,o=[];if(s?.refreshData&&o.push(new ne({selectionEnabled:!1,label:e?.refreshData,clickFunction:()=>this.refresh()})),t.length){const a=this._getSelectionFilter();if(s?.clearSelection&&o.push(new ne({selectionEnabled:!1,label:e?.clearSelection,clickFunction:()=>this.highlightIds?.removeAll()})),s?.zoomToSelection&&this.view&&o.push(new ne({selectionEnabled:!1,label:e?.zoomToSelection,clickFunction:()=>this.viewModel.zoomToSelection()})),s?.selectedRecordsShowSelectedToggle&&(!a||t.length!==a.objectIds.length)){const l=e.showSelected,d=new ne({selectionEnabled:!1,label:l,clickFunction:()=>{this.filterBySelection(),d.set("label",l)}});o.push(d)}s?.deleteSelection&&this.editingEnabled&&this.layer?.capabilities?.operations?.supportsDelete&&o.push(new ne({selectionEnabled:!1,label:e.deleteSelection,clickFunction:this._showDeletePrompt}))}if(s?.selectedRecordsShowAllToggle&&this._hasSelectionFilter()){const a=e.showAllRecords,l=new ne({selectionEnabled:!1,label:a,clickFunction:()=>{this.clearSelectionFilter(),l.set("label",a)}});o.push(l)}return s?.toggleColumns&&o.push(new ne({iconClass:Bt.menuItemGroupClosedIcon,label:e?.toggleColumns,clickFunction:this._toggleMenuItemSelectedIcon,items:r?.columns?.items.map(({header:a,hidden:l,path:d})=>new ne({label:a||d,selected:!l,selectionEnabled:!0,iconClass:Bt.checkmarkIcon,clickFunction:()=>this._toggleColumnFromMenuItem(d)}))})),o.length?o:null}_toggleMenuItemSelectedIcon({item:t}){t?.set("iconClass",t?.selected?Bt.menuItemGroupOpenedIcon:Bt.menuItemGroupClosedIcon)}_toggleColumnFromMenuItem(t){const{grid:e,viewModel:r}=this;r.findColumn(t)?.hidden?e?.showColumn(t):e?.hideColumn(t)}_showDeletePrompt(){const{messages:t,messagesCommon:e}=this,r=this.highlightIds.length||0,n=Ca(t.deleteSelectionCount,{count:r});this.menu&&(this.menu.open=!1),this._prompt={title:n,message:t.deleteRecordsRemoved,context:"danger",actions:{primary:{label:e.delete,action:this._onDeleteSelectionClick},secondary:{label:t.keepRecords,action:()=>this._prompt=null}}}}async _onDeleteSelectionClick(){await this.viewModel.deleteSelection(),this._prompt=null}_getSelectionFilter(){return this.viewModel.activeFilters?.find(t=>t.type==="selection")}_hasSelectionFilter(){return!!this._getSelectionFilter()}};w([x({readOnly:!0})],pt.prototype,"activeFilters",null),w([x({readOnly:!0})],pt.prototype,"activeSortOrders",null),w([x()],pt.prototype,"attachmentsEnabled",null),w([x()],pt.prototype,"autoRefreshEnabled",null),w([x()],pt.prototype,"columnReorderingEnabled",null),w([x({readOnly:!0})],pt.prototype,"columns",null),w([x()],pt.prototype,"editingEnabled",null),w([x()],pt.prototype,"fieldConfigs",null),w([x()],pt.prototype,"filterGeometry",null),w([x({readOnly:!0})],pt.prototype,"grid",null),w([x()],pt.prototype,"hiddenFields",null),w([x()],pt.prototype,"highlightEnabled",null),w([x()],pt.prototype,"highlightIds",null),w([x()],pt.prototype,"highlightOnRowSelectEnabled",null),w([x()],pt.prototype,"label",null),w([x()],pt.prototype,"layer",null),w([x(),Pe("esri/widgets/FeatureTable/t9n/FeatureTable")],pt.prototype,"messages",null),w([x(),Pe("esri/t9n/common")],pt.prototype,"messagesCommon",null),w([x(),Pe("esri/widgets/support/t9n/uriUtils")],pt.prototype,"messagesURIUtils",null),w([x({readOnly:!0})],pt.prototype,"menu",void 0),w([x()],pt.prototype,"menuConfig",void 0),w([x()],pt.prototype,"multiSortEnabled",null),w([x()],pt.prototype,"pageSize",null),w([x()],pt.prototype,"relatedRecordsEnabled",null),w([x({readOnly:!0})],pt.prototype,"state",null),w([x()],pt.prototype,"tableTemplate",null),w([x()],pt.prototype,"timeExtent",null),w([x()],pt.prototype,"view",null),w([x()],pt.prototype,"viewModel",void 0),w([x()],pt.prototype,"visibleElements",void 0),w([qr("visibleElements")],pt.prototype,"castVisibleElements",null),w([x()],pt.prototype,"returnGeometryEnabled",null),pt=w([$t("esri.widgets.FeatureTable")],pt);const Mg=pt;/**!
 * Sortable 1.15.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function ld(i,t){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),e.push.apply(e,r)}return e}function Re(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?ld(Object(e),!0).forEach(function(r){Lg(i,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):ld(Object(e)).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(e,r))})}return i}function On(i){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?On=function(t){return typeof t}:On=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},On(i)}function Lg(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}function je(){return je=Object.assign||function(i){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r])}return i},je.apply(this,arguments)}function $g(i,t){if(i==null)return{};var e={},r=Object.keys(i),n,s;for(s=0;s<r.length;s++)n=r[s],!(t.indexOf(n)>=0)&&(e[n]=i[n]);return e}function Bg(i,t){if(i==null)return{};var e=$g(i,t),r,n;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);for(n=0;n<s.length;n++)r=s[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(i,r)&&(e[r]=i[r])}return e}var Hg="1.15.0";function Be(i){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(i)}var We=Be(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),en=Be(/Edge/i),dd=Be(/firefox/i),Tr=Be(/safari/i)&&!Be(/chrome/i)&&!Be(/android/i),ic=Be(/iP(ad|od|hone)/i),rc=Be(/chrome/i)&&Be(/android/i),nc={capture:!1,passive:!1};function vt(i,t,e){i.addEventListener(t,e,!We&&nc)}function mt(i,t,e){i.removeEventListener(t,e,!We&&nc)}function Kn(i,t){if(t){if(t[0]===">"&&(t=t.substring(1)),i)try{if(i.matches)return i.matches(t);if(i.msMatchesSelector)return i.msMatchesSelector(t);if(i.webkitMatchesSelector)return i.webkitMatchesSelector(t)}catch{return!1}return!1}}function jg(i){return i.host&&i!==document&&i.host.nodeType?i.host:i.parentNode}function Te(i,t,e,r){if(i){e=e||document;do{if(t!=null&&(t[0]===">"?i.parentNode===e&&Kn(i,t):Kn(i,t))||r&&i===e)return i;if(i===e)break}while(i=jg(i))}return null}var hd=/\s+/g;function le(i,t,e){if(i&&t)if(i.classList)i.classList[e?"add":"remove"](t);else{var r=(" "+i.className+" ").replace(hd," ").replace(" "+t+" "," ");i.className=(r+(e?" "+t:"")).replace(hd," ")}}function at(i,t,e){var r=i&&i.style;if(r){if(e===void 0)return document.defaultView&&document.defaultView.getComputedStyle?e=document.defaultView.getComputedStyle(i,""):i.currentStyle&&(e=i.currentStyle),t===void 0?e:e[t];!(t in r)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),r[t]=e+(typeof e=="string"?"":"px")}}function Hi(i,t){var e="";if(typeof i=="string")e=i;else do{var r=at(i,"transform");r&&r!=="none"&&(e=r+" "+e)}while(!t&&(i=i.parentNode));var n=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return n&&new n(e)}function sc(i,t,e){if(i){var r=i.getElementsByTagName(t),n=0,s=r.length;if(e)for(;n<s;n++)e(r[n],n);return r}return[]}function ke(){var i=document.scrollingElement;return i||document.documentElement}function Ht(i,t,e,r,n){if(!(!i.getBoundingClientRect&&i!==window)){var s,o,a,l,d,h,c;if(i!==window&&i.parentNode&&i!==ke()?(s=i.getBoundingClientRect(),o=s.top,a=s.left,l=s.bottom,d=s.right,h=s.height,c=s.width):(o=0,a=0,l=window.innerHeight,d=window.innerWidth,h=window.innerHeight,c=window.innerWidth),(t||e)&&i!==window&&(n=n||i.parentNode,!We))do if(n&&n.getBoundingClientRect&&(at(n,"transform")!=="none"||e&&at(n,"position")!=="static")){var m=n.getBoundingClientRect();o-=m.top+parseInt(at(n,"border-top-width")),a-=m.left+parseInt(at(n,"border-left-width")),l=o+s.height,d=a+s.width;break}while(n=n.parentNode);if(r&&i!==window){var p=Hi(n||i),g=p&&p.a,f=p&&p.d;p&&(o/=f,a/=g,c/=g,h/=f,l=o+h,d=a+c)}return{top:o,left:a,bottom:l,right:d,width:c,height:h}}}function cd(i,t,e){for(var r=oi(i,!0),n=Ht(i)[t];r;){var s=Ht(r)[e],o=void 0;if(e==="top"||e==="left"?o=n>=s:o=n<=s,!o)return r;if(r===ke())break;r=oi(r,!1)}return!1}function Xi(i,t,e,r){for(var n=0,s=0,o=i.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==lt.ghost&&(r||o[s]!==lt.dragged)&&Te(o[s],e.draggable,i,!1)){if(n===t)return o[s];n++}s++}return null}function _a(i,t){for(var e=i.lastElementChild;e&&(e===lt.ghost||at(e,"display")==="none"||t&&!Kn(e,t));)e=e.previousElementSibling;return e||null}function ge(i,t){var e=0;if(!i||!i.parentNode)return-1;for(;i=i.previousElementSibling;)i.nodeName.toUpperCase()!=="TEMPLATE"&&i!==lt.clone&&(!t||Kn(i,t))&&e++;return e}function ud(i){var t=0,e=0,r=ke();if(i)do{var n=Hi(i),s=n.a,o=n.d;t+=i.scrollLeft*s,e+=i.scrollTop*o}while(i!==r&&(i=i.parentNode));return[t,e]}function Ug(i,t){for(var e in i)if(i.hasOwnProperty(e)){for(var r in t)if(t.hasOwnProperty(r)&&t[r]===i[e][r])return Number(e)}return-1}function oi(i,t){if(!i||!i.getBoundingClientRect)return ke();var e=i,r=!1;do if(e.clientWidth<e.scrollWidth||e.clientHeight<e.scrollHeight){var n=at(e);if(e.clientWidth<e.scrollWidth&&(n.overflowX=="auto"||n.overflowX=="scroll")||e.clientHeight<e.scrollHeight&&(n.overflowY=="auto"||n.overflowY=="scroll")){if(!e.getBoundingClientRect||e===document.body)return ke();if(r||t)return e;r=!0}}while(e=e.parentNode);return ke()}function Vg(i,t){if(i&&t)for(var e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);return i}function js(i,t){return Math.round(i.top)===Math.round(t.top)&&Math.round(i.left)===Math.round(t.left)&&Math.round(i.height)===Math.round(t.height)&&Math.round(i.width)===Math.round(t.width)}var Pr;function oc(i,t){return function(){if(!Pr){var e=arguments,r=this;e.length===1?i.call(r,e[0]):i.apply(r,e),Pr=setTimeout(function(){Pr=void 0},t)}}}function Wg(){clearTimeout(Pr),Pr=void 0}function ac(i,t,e){i.scrollLeft+=t,i.scrollTop+=e}function lc(i){var t=window.Polymer,e=window.jQuery||window.Zepto;return t&&t.dom?t.dom(i).cloneNode(!0):e?e(i).clone(!0)[0]:i.cloneNode(!0)}var ce="Sortable"+new Date().getTime();function Gg(){var i=[],t;return{captureAnimationState:function(){if(i=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(n){if(!(at(n,"display")==="none"||n===lt.ghost)){i.push({target:n,rect:Ht(n)});var s=Re({},i[i.length-1].rect);if(n.thisAnimationDuration){var o=Hi(n,!0);o&&(s.top-=o.f,s.left-=o.e)}n.fromRect=s}})}},addAnimationState:function(r){i.push(r)},removeAnimationState:function(r){i.splice(Ug(i,{target:r}),1)},animateAll:function(r){var n=this;if(!this.options.animation){clearTimeout(t),typeof r=="function"&&r();return}var s=!1,o=0;i.forEach(function(a){var l=0,d=a.target,h=d.fromRect,c=Ht(d),m=d.prevFromRect,p=d.prevToRect,g=a.rect,f=Hi(d,!0);f&&(c.top-=f.f,c.left-=f.e),d.toRect=c,d.thisAnimationDuration&&js(m,c)&&!js(h,c)&&(g.top-c.top)/(g.left-c.left)===(h.top-c.top)/(h.left-c.left)&&(l=Yg(g,m,p,n.options)),js(c,h)||(d.prevFromRect=h,d.prevToRect=c,l||(l=n.options.animation),n.animate(d,g,c,l)),l&&(s=!0,o=Math.max(o,l),clearTimeout(d.animationResetTimer),d.animationResetTimer=setTimeout(function(){d.animationTime=0,d.prevFromRect=null,d.fromRect=null,d.prevToRect=null,d.thisAnimationDuration=null},l),d.thisAnimationDuration=l)}),clearTimeout(t),s?t=setTimeout(function(){typeof r=="function"&&r()},o):typeof r=="function"&&r(),i=[]},animate:function(r,n,s,o){if(o){at(r,"transition",""),at(r,"transform","");var a=Hi(this.el),l=a&&a.a,d=a&&a.d,h=(n.left-s.left)/(l||1),c=(n.top-s.top)/(d||1);r.animatingX=!!h,r.animatingY=!!c,at(r,"transform","translate3d("+h+"px,"+c+"px,0)"),this.forRepaintDummy=qg(r),at(r,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),at(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){at(r,"transition",""),at(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},o)}}}}function qg(i){return i.offsetWidth}function Yg(i,t,e,r){return Math.sqrt(Math.pow(t.top-i.top,2)+Math.pow(t.left-i.left,2))/Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))*r.animation}var Ii=[],Us={initializeByDefault:!0},rn={mount:function(t){for(var e in Us)Us.hasOwnProperty(e)&&!(e in t)&&(t[e]=Us[e]);Ii.forEach(function(r){if(r.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),Ii.push(t)},pluginEvent:function(t,e,r){var n=this;this.eventCanceled=!1,r.cancel=function(){n.eventCanceled=!0};var s=t+"Global";Ii.forEach(function(o){e[o.pluginName]&&(e[o.pluginName][s]&&e[o.pluginName][s](Re({sortable:e},r)),e.options[o.pluginName]&&e[o.pluginName][t]&&e[o.pluginName][t](Re({sortable:e},r)))})},initializePlugins:function(t,e,r,n){Ii.forEach(function(a){var l=a.pluginName;if(!(!t.options[l]&&!a.initializeByDefault)){var d=new a(t,e,t.options);d.sortable=t,d.options=t.options,t[l]=d,je(r,d.defaults)}});for(var s in t.options)if(t.options.hasOwnProperty(s)){var o=this.modifyOption(t,s,t.options[s]);typeof o<"u"&&(t.options[s]=o)}},getEventProperties:function(t,e){var r={};return Ii.forEach(function(n){typeof n.eventProperties=="function"&&je(r,n.eventProperties.call(e[n.pluginName],t))}),r},modifyOption:function(t,e,r){var n;return Ii.forEach(function(s){t[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[e]=="function"&&(n=s.optionListeners[e].call(t[s.pluginName],r))}),n}};function Zg(i){var t=i.sortable,e=i.rootEl,r=i.name,n=i.targetEl,s=i.cloneEl,o=i.toEl,a=i.fromEl,l=i.oldIndex,d=i.newIndex,h=i.oldDraggableIndex,c=i.newDraggableIndex,m=i.originalEvent,p=i.putSortable,g=i.extraEventProperties;if(t=t||e&&e[ce],!!t){var f,b=t.options,y="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!We&&!en?f=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(f=document.createEvent("Event"),f.initEvent(r,!0,!0)),f.to=o||e,f.from=a||e,f.item=n||e,f.clone=s,f.oldIndex=l,f.newIndex=d,f.oldDraggableIndex=h,f.newDraggableIndex=c,f.originalEvent=m,f.pullMode=p?p.lastPutMode:void 0;var v=Re(Re({},g),rn.getEventProperties(r,t));for(var S in v)f[S]=v[S];e&&e.dispatchEvent(f),b[y]&&b[y].call(t,f)}}var Xg=["evt"],ie=function(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=r.evt,s=Bg(r,Xg);rn.pluginEvent.bind(lt)(t,e,Re({dragEl:X,parentEl:kt,ghostEl:ht,rootEl:Tt,nextEl:fi,lastDownEl:kn,cloneEl:Pt,cloneHidden:ri,dragStarted:_r,putSortable:Wt,activeSortable:lt.active,originalEvent:n,oldIndex:Fi,oldDraggableIndex:Or,newIndex:de,newDraggableIndex:ti,hideGhostForTarget:uc,unhideGhostForTarget:pc,cloneNowHidden:function(){ri=!0},cloneNowShown:function(){ri=!1},dispatchSortableEvent:function(a){Kt({sortable:e,name:a,originalEvent:n})}},s))};function Kt(i){Zg(Re({putSortable:Wt,cloneEl:Pt,targetEl:X,rootEl:Tt,oldIndex:Fi,oldDraggableIndex:Or,newIndex:de,newDraggableIndex:ti},i))}var X,kt,ht,Tt,fi,kn,Pt,ri,Fi,de,Or,ti,vn,Wt,Ri=!1,Qn=!1,ts=[],ui,Ae,Vs,Ws,pd,fd,_r,Ti,kr,Dr=!1,wn=!1,Dn,qt,Gs=[],Po=!1,es=[],us=typeof document<"u",Cn=ic,md=en||We?"cssFloat":"float",Jg=us&&!rc&&!ic&&"draggable"in document.createElement("div"),dc=function(){if(us){if(We)return!1;var i=document.createElement("x");return i.style.cssText="pointer-events:auto",i.style.pointerEvents==="auto"}}(),hc=function(t,e){var r=at(t),n=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),s=Xi(t,0,e),o=Xi(t,1,e),a=s&&at(s),l=o&&at(o),d=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+Ht(s).width,h=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Ht(o).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&a.float&&a.float!=="none"){var c=a.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===c)?"vertical":"horizontal"}return s&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||d>=n&&r[md]==="none"||o&&r[md]==="none"&&d+h>n)?"vertical":"horizontal"},Kg=function(t,e,r){var n=r?t.left:t.top,s=r?t.right:t.bottom,o=r?t.width:t.height,a=r?e.left:e.top,l=r?e.right:e.bottom,d=r?e.width:e.height;return n===a||s===l||n+o/2===a+d/2},Qg=function(t,e){var r;return ts.some(function(n){var s=n[ce].options.emptyInsertThreshold;if(!(!s||_a(n))){var o=Ht(n),a=t>=o.left-s&&t<=o.right+s,l=e>=o.top-s&&e<=o.bottom+s;if(a&&l)return r=n}}),r},cc=function(t){function e(s,o){return function(a,l,d,h){var c=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(s==null&&(o||c))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return e(s(a,l,d,h),o)(a,l,d,h);var m=(o?a:l).options.group.name;return s===!0||typeof s=="string"&&s===m||s.join&&s.indexOf(m)>-1}}var r={},n=t.group;(!n||On(n)!="object")&&(n={name:n}),r.name=n.name,r.checkPull=e(n.pull,!0),r.checkPut=e(n.put),r.revertClone=n.revertClone,t.group=r},uc=function(){!dc&&ht&&at(ht,"display","none")},pc=function(){!dc&&ht&&at(ht,"display","")};us&&!rc&&document.addEventListener("click",function(i){if(Qn)return i.preventDefault(),i.stopPropagation&&i.stopPropagation(),i.stopImmediatePropagation&&i.stopImmediatePropagation(),Qn=!1,!1},!0);var pi=function(t){if(X){t=t.touches?t.touches[0]:t;var e=Qg(t.clientX,t.clientY);if(e){var r={};for(var n in t)t.hasOwnProperty(n)&&(r[n]=t[n]);r.target=r.rootEl=e,r.preventDefault=void 0,r.stopPropagation=void 0,e[ce]._onDragOver(r)}}},ty=function(t){X&&X.parentNode[ce]._isOutsideThisEl(t.target)};function lt(i,t){if(!(i&&i.nodeType&&i.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(i));this.el=i,this.options=t=je({},t),i[ce]=this;var e={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(i.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return hc(i,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,a){o.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:lt.supportPointer!==!1&&"PointerEvent"in window&&!Tr,emptyInsertThreshold:5};rn.initializePlugins(this,i,e);for(var r in e)!(r in t)&&(t[r]=e[r]);cc(t);for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));this.nativeDraggable=t.forceFallback?!1:Jg,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?vt(i,"pointerdown",this._onTapStart):(vt(i,"mousedown",this._onTapStart),vt(i,"touchstart",this._onTapStart)),this.nativeDraggable&&(vt(i,"dragover",this),vt(i,"dragenter",this)),ts.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),je(this,Gg())}lt.prototype={constructor:lt,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(Ti=null)},_getDirection:function(t,e){return typeof this.options.direction=="function"?this.options.direction.call(this,t,e,X):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,r=this.el,n=this.options,s=n.preventOnFilter,o=t.type,a=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,l=(a||t).target,d=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||l,h=n.filter;if(ly(r),!X&&!(/mousedown|pointerdown/.test(o)&&t.button!==0||n.disabled)&&!d.isContentEditable&&!(!this.nativeDraggable&&Tr&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=Te(l,n.draggable,r,!1),!(l&&l.animated)&&kn!==l)){if(Fi=ge(l),Or=ge(l,n.draggable),typeof h=="function"){if(h.call(this,t,l,this)){Kt({sortable:e,rootEl:d,name:"filter",targetEl:l,toEl:r,fromEl:r}),ie("filter",e,{evt:t}),s&&t.cancelable&&t.preventDefault();return}}else if(h&&(h=h.split(",").some(function(c){if(c=Te(d,c.trim(),r,!1),c)return Kt({sortable:e,rootEl:c,name:"filter",targetEl:l,fromEl:r,toEl:r}),ie("filter",e,{evt:t}),!0}),h)){s&&t.cancelable&&t.preventDefault();return}n.handle&&!Te(d,n.handle,r,!1)||this._prepareDragStart(t,a,l)}}},_prepareDragStart:function(t,e,r){var n=this,s=n.el,o=n.options,a=s.ownerDocument,l;if(r&&!X&&r.parentNode===s){var d=Ht(r);if(Tt=s,X=r,kt=X.parentNode,fi=X.nextSibling,kn=r,vn=o.group,lt.dragged=X,ui={target:X,clientX:(e||t).clientX,clientY:(e||t).clientY},pd=ui.clientX-d.left,fd=ui.clientY-d.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,X.style["will-change"]="all",l=function(){if(ie("delayEnded",n,{evt:t}),lt.eventCanceled){n._onDrop();return}n._disableDelayedDragEvents(),!dd&&n.nativeDraggable&&(X.draggable=!0),n._triggerDragStart(t,e),Kt({sortable:n,name:"choose",originalEvent:t}),le(X,o.chosenClass,!0)},o.ignore.split(",").forEach(function(h){sc(X,h.trim(),qs)}),vt(a,"dragover",pi),vt(a,"mousemove",pi),vt(a,"touchmove",pi),vt(a,"mouseup",n._onDrop),vt(a,"touchend",n._onDrop),vt(a,"touchcancel",n._onDrop),dd&&this.nativeDraggable&&(this.options.touchStartThreshold=4,X.draggable=!0),ie("delayStart",this,{evt:t}),o.delay&&(!o.delayOnTouchOnly||e)&&(!this.nativeDraggable||!(en||We))){if(lt.eventCanceled){this._onDrop();return}vt(a,"mouseup",n._disableDelayedDrag),vt(a,"touchend",n._disableDelayedDrag),vt(a,"touchcancel",n._disableDelayedDrag),vt(a,"mousemove",n._delayedDragTouchMoveHandler),vt(a,"touchmove",n._delayedDragTouchMoveHandler),o.supportPointer&&vt(a,"pointermove",n._delayedDragTouchMoveHandler),n._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){X&&qs(X),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;mt(t,"mouseup",this._disableDelayedDrag),mt(t,"touchend",this._disableDelayedDrag),mt(t,"touchcancel",this._disableDelayedDrag),mt(t,"mousemove",this._delayedDragTouchMoveHandler),mt(t,"touchmove",this._delayedDragTouchMoveHandler),mt(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||t.pointerType=="touch"&&t,!this.nativeDraggable||e?this.options.supportPointer?vt(document,"pointermove",this._onTouchMove):e?vt(document,"touchmove",this._onTouchMove):vt(document,"mousemove",this._onTouchMove):(vt(X,"dragend",this),vt(Tt,"dragstart",this._onDragStart));try{document.selection?Rn(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,e){if(Ri=!1,Tt&&X){ie("dragStarted",this,{evt:e}),this.nativeDraggable&&vt(document,"dragover",ty);var r=this.options;!t&&le(X,r.dragClass,!1),le(X,r.ghostClass,!0),lt.active=this,t&&this._appendGhost(),Kt({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(Ae){this._lastX=Ae.clientX,this._lastY=Ae.clientY,uc();for(var t=document.elementFromPoint(Ae.clientX,Ae.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(Ae.clientX,Ae.clientY),t!==e);)e=t;if(X.parentNode[ce]._isOutsideThisEl(t),e)do{if(e[ce]){var r=void 0;if(r=e[ce]._onDragOver({clientX:Ae.clientX,clientY:Ae.clientY,target:t,rootEl:e}),r&&!this.options.dragoverBubble)break}t=e}while(e=e.parentNode);pc()}},_onTouchMove:function(t){if(ui){var e=this.options,r=e.fallbackTolerance,n=e.fallbackOffset,s=t.touches?t.touches[0]:t,o=ht&&Hi(ht,!0),a=ht&&o&&o.a,l=ht&&o&&o.d,d=Cn&&qt&&ud(qt),h=(s.clientX-ui.clientX+n.x)/(a||1)+(d?d[0]-Gs[0]:0)/(a||1),c=(s.clientY-ui.clientY+n.y)/(l||1)+(d?d[1]-Gs[1]:0)/(l||1);if(!lt.active&&!Ri){if(r&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<r)return;this._onDragStart(t,!0)}if(ht){o?(o.e+=h-(Vs||0),o.f+=c-(Ws||0)):o={a:1,b:0,c:0,d:1,e:h,f:c};var m="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");at(ht,"webkitTransform",m),at(ht,"mozTransform",m),at(ht,"msTransform",m),at(ht,"transform",m),Vs=h,Ws=c,Ae=s}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!ht){var t=this.options.fallbackOnBody?document.body:Tt,e=Ht(X,!0,Cn,!0,t),r=this.options;if(Cn){for(qt=t;at(qt,"position")==="static"&&at(qt,"transform")==="none"&&qt!==document;)qt=qt.parentNode;qt!==document.body&&qt!==document.documentElement?(qt===document&&(qt=ke()),e.top+=qt.scrollTop,e.left+=qt.scrollLeft):qt=ke(),Gs=ud(qt)}ht=X.cloneNode(!0),le(ht,r.ghostClass,!1),le(ht,r.fallbackClass,!0),le(ht,r.dragClass,!0),at(ht,"transition",""),at(ht,"transform",""),at(ht,"box-sizing","border-box"),at(ht,"margin",0),at(ht,"top",e.top),at(ht,"left",e.left),at(ht,"width",e.width),at(ht,"height",e.height),at(ht,"opacity","0.8"),at(ht,"position",Cn?"absolute":"fixed"),at(ht,"zIndex","100000"),at(ht,"pointerEvents","none"),lt.ghost=ht,t.appendChild(ht),at(ht,"transform-origin",pd/parseInt(ht.style.width)*100+"% "+fd/parseInt(ht.style.height)*100+"%")}},_onDragStart:function(t,e){var r=this,n=t.dataTransfer,s=r.options;if(ie("dragStart",this,{evt:t}),lt.eventCanceled){this._onDrop();return}ie("setupClone",this),lt.eventCanceled||(Pt=lc(X),Pt.removeAttribute("id"),Pt.draggable=!1,Pt.style["will-change"]="",this._hideClone(),le(Pt,this.options.chosenClass,!1),lt.clone=Pt),r.cloneId=Rn(function(){ie("clone",r),!lt.eventCanceled&&(r.options.removeCloneOnHide||Tt.insertBefore(Pt,X),r._hideClone(),Kt({sortable:r,name:"clone"}))}),!e&&le(X,s.dragClass,!0),e?(Qn=!0,r._loopId=setInterval(r._emulateDragOver,50)):(mt(document,"mouseup",r._onDrop),mt(document,"touchend",r._onDrop),mt(document,"touchcancel",r._onDrop),n&&(n.effectAllowed="move",s.setData&&s.setData.call(r,n,X)),vt(document,"drop",r),at(X,"transform","translateZ(0)")),Ri=!0,r._dragStartId=Rn(r._dragStarted.bind(r,e,t)),vt(document,"selectstart",r),_r=!0,Tr&&at(document.body,"user-select","none")},_onDragOver:function(t){var e=this.el,r=t.target,n,s,o,a=this.options,l=a.group,d=lt.active,h=vn===l,c=a.sort,m=Wt||d,p,g=this,f=!1;if(Po)return;function b(ot,W){ie(ot,g,Re({evt:t,isOwner:h,axis:p?"vertical":"horizontal",revert:o,dragRect:n,targetRect:s,canSort:c,fromSortable:m,target:r,completed:v,onMove:function(F,z){return An(Tt,e,X,n,F,Ht(F),t,z)},changed:S},W))}function y(){b("dragOverAnimationCapture"),g.captureAnimationState(),g!==m&&m.captureAnimationState()}function v(ot){return b("dragOverCompleted",{insertion:ot}),ot&&(h?d._hideClone():d._showClone(g),g!==m&&(le(X,Wt?Wt.options.ghostClass:d.options.ghostClass,!1),le(X,a.ghostClass,!0)),Wt!==g&&g!==lt.active?Wt=g:g===lt.active&&Wt&&(Wt=null),m===g&&(g._ignoreWhileAnimating=r),g.animateAll(function(){b("dragOverAnimationComplete"),g._ignoreWhileAnimating=null}),g!==m&&(m.animateAll(),m._ignoreWhileAnimating=null)),(r===X&&!X.animated||r===e&&!r.animated)&&(Ti=null),!a.dragoverBubble&&!t.rootEl&&r!==document&&(X.parentNode[ce]._isOutsideThisEl(t.target),!ot&&pi(t)),!a.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),f=!0}function S(){de=ge(X),ti=ge(X,a.draggable),Kt({sortable:g,name:"change",toEl:e,newIndex:de,newDraggableIndex:ti,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),r=Te(r,a.draggable,e,!0),b("dragOver"),lt.eventCanceled)return f;if(X.contains(t.target)||r.animated&&r.animatingX&&r.animatingY||g._ignoreWhileAnimating===r)return v(!1);if(Qn=!1,d&&!a.disabled&&(h?c||(o=kt!==Tt):Wt===this||(this.lastPutMode=vn.checkPull(this,d,X,t))&&l.checkPut(this,d,X,t))){if(p=this._getDirection(t,r)==="vertical",n=Ht(X),b("dragOverValid"),lt.eventCanceled)return f;if(o)return kt=Tt,y(),this._hideClone(),b("revert"),lt.eventCanceled||(fi?Tt.insertBefore(X,fi):Tt.appendChild(X)),v(!0);var I=_a(e,a.draggable);if(!I||ny(t,p,this)&&!I.animated){if(I===X)return v(!1);if(I&&e===t.target&&(r=I),r&&(s=Ht(r)),An(Tt,e,X,n,r,s,t,!!r)!==!1)return y(),I&&I.nextSibling?e.insertBefore(X,I.nextSibling):e.appendChild(X),kt=e,S(),v(!0)}else if(I&&ry(t,p,this)){var T=Xi(e,0,a,!0);if(T===X)return v(!1);if(r=T,s=Ht(r),An(Tt,e,X,n,r,s,t,!1)!==!1)return y(),e.insertBefore(X,T),kt=e,S(),v(!0)}else if(r.parentNode===e){s=Ht(r);var D=0,R,M=X.parentNode!==e,O=!Kg(X.animated&&X.toRect||n,r.animated&&r.toRect||s,p),H=p?"top":"left",J=cd(r,"top","top")||cd(X,"top","top"),E=J?J.scrollTop:void 0;Ti!==r&&(R=s[H],Dr=!1,wn=!O&&a.invertSwap||M),D=sy(t,r,s,p,O?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,wn,Ti===r);var N;if(D!==0){var _=ge(X);do _-=D,N=kt.children[_];while(N&&(at(N,"display")==="none"||N===ht))}if(D===0||N===r)return v(!1);Ti=r,kr=D;var $=r.nextElementSibling,et=!1;et=D===1;var U=An(Tt,e,X,n,r,s,t,et);if(U!==!1)return(U===1||U===-1)&&(et=U===1),Po=!0,setTimeout(iy,30),y(),et&&!$?e.appendChild(X):r.parentNode.insertBefore(X,et?$:r),J&&ac(J,0,E-J.scrollTop),kt=X.parentNode,R!==void 0&&!wn&&(Dn=Math.abs(R-Ht(r)[H])),S(),v(!0)}if(e.contains(X))return v(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){mt(document,"mousemove",this._onTouchMove),mt(document,"touchmove",this._onTouchMove),mt(document,"pointermove",this._onTouchMove),mt(document,"dragover",pi),mt(document,"mousemove",pi),mt(document,"touchmove",pi)},_offUpEvents:function(){var t=this.el.ownerDocument;mt(t,"mouseup",this._onDrop),mt(t,"touchend",this._onDrop),mt(t,"pointerup",this._onDrop),mt(t,"touchcancel",this._onDrop),mt(document,"selectstart",this)},_onDrop:function(t){var e=this.el,r=this.options;if(de=ge(X),ti=ge(X,r.draggable),ie("drop",this,{evt:t}),kt=X&&X.parentNode,de=ge(X),ti=ge(X,r.draggable),lt.eventCanceled){this._nulling();return}Ri=!1,wn=!1,Dr=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Oo(this.cloneId),Oo(this._dragStartId),this.nativeDraggable&&(mt(document,"drop",this),mt(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Tr&&at(document.body,"user-select",""),at(X,"transform",""),t&&(_r&&(t.cancelable&&t.preventDefault(),!r.dropBubble&&t.stopPropagation()),ht&&ht.parentNode&&ht.parentNode.removeChild(ht),(Tt===kt||Wt&&Wt.lastPutMode!=="clone")&&Pt&&Pt.parentNode&&Pt.parentNode.removeChild(Pt),X&&(this.nativeDraggable&&mt(X,"dragend",this),qs(X),X.style["will-change"]="",_r&&!Ri&&le(X,Wt?Wt.options.ghostClass:this.options.ghostClass,!1),le(X,this.options.chosenClass,!1),Kt({sortable:this,name:"unchoose",toEl:kt,newIndex:null,newDraggableIndex:null,originalEvent:t}),Tt!==kt?(de>=0&&(Kt({rootEl:kt,name:"add",toEl:kt,fromEl:Tt,originalEvent:t}),Kt({sortable:this,name:"remove",toEl:kt,originalEvent:t}),Kt({rootEl:kt,name:"sort",toEl:kt,fromEl:Tt,originalEvent:t}),Kt({sortable:this,name:"sort",toEl:kt,originalEvent:t})),Wt&&Wt.save()):de!==Fi&&de>=0&&(Kt({sortable:this,name:"update",toEl:kt,originalEvent:t}),Kt({sortable:this,name:"sort",toEl:kt,originalEvent:t})),lt.active&&((de==null||de===-1)&&(de=Fi,ti=Or),Kt({sortable:this,name:"end",toEl:kt,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){ie("nulling",this),Tt=X=kt=ht=fi=Pt=kn=ri=ui=Ae=_r=de=ti=Fi=Or=Ti=kr=Wt=vn=lt.dragged=lt.ghost=lt.clone=lt.active=null,es.forEach(function(t){t.checked=!0}),es.length=Vs=Ws=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":X&&(this._onDragOver(t),ey(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],e,r=this.el.children,n=0,s=r.length,o=this.options;n<s;n++)e=r[n],Te(e,o.draggable,this.el,!1)&&t.push(e.getAttribute(o.dataIdAttr)||ay(e));return t},sort:function(t,e){var r={},n=this.el;this.toArray().forEach(function(s,o){var a=n.children[o];Te(a,this.options.draggable,n,!1)&&(r[s]=a)},this),e&&this.captureAnimationState(),t.forEach(function(s){r[s]&&(n.removeChild(r[s]),n.appendChild(r[s]))}),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return Te(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var r=this.options;if(e===void 0)return r[t];var n=rn.modifyOption(this,t,e);typeof n<"u"?r[t]=n:r[t]=e,t==="group"&&cc(r)},destroy:function(){ie("destroy",this);var t=this.el;t[ce]=null,mt(t,"mousedown",this._onTapStart),mt(t,"touchstart",this._onTapStart),mt(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(mt(t,"dragover",this),mt(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),ts.splice(ts.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!ri){if(ie("hideClone",this),lt.eventCanceled)return;at(Pt,"display","none"),this.options.removeCloneOnHide&&Pt.parentNode&&Pt.parentNode.removeChild(Pt),ri=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(ri){if(ie("showClone",this),lt.eventCanceled)return;X.parentNode==Tt&&!this.options.group.revertClone?Tt.insertBefore(Pt,X):fi?Tt.insertBefore(Pt,fi):Tt.appendChild(Pt),this.options.group.revertClone&&this.animate(X,Pt),at(Pt,"display",""),ri=!1}}};function ey(i){i.dataTransfer&&(i.dataTransfer.dropEffect="move"),i.cancelable&&i.preventDefault()}function An(i,t,e,r,n,s,o,a){var l,d=i[ce],h=d.options.onMove,c;return window.CustomEvent&&!We&&!en?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=t,l.from=i,l.dragged=e,l.draggedRect=r,l.related=n||t,l.relatedRect=s||Ht(t),l.willInsertAfter=a,l.originalEvent=o,i.dispatchEvent(l),h&&(c=h.call(d,l,o)),c}function qs(i){i.draggable=!1}function iy(){Po=!1}function ry(i,t,e){var r=Ht(Xi(e.el,0,e.options,!0)),n=10;return t?i.clientX<r.left-n||i.clientY<r.top&&i.clientX<r.right:i.clientY<r.top-n||i.clientY<r.bottom&&i.clientX<r.left}function ny(i,t,e){var r=Ht(_a(e.el,e.options.draggable)),n=10;return t?i.clientX>r.right+n||i.clientX<=r.right&&i.clientY>r.bottom&&i.clientX>=r.left:i.clientX>r.right&&i.clientY>r.top||i.clientX<=r.right&&i.clientY>r.bottom+n}function sy(i,t,e,r,n,s,o,a){var l=r?i.clientY:i.clientX,d=r?e.height:e.width,h=r?e.top:e.left,c=r?e.bottom:e.right,m=!1;if(!o){if(a&&Dn<d*n){if(!Dr&&(kr===1?l>h+d*s/2:l<c-d*s/2)&&(Dr=!0),Dr)m=!0;else if(kr===1?l<h+Dn:l>c-Dn)return-kr}else if(l>h+d*(1-n)/2&&l<c-d*(1-n)/2)return oy(t)}return m=m||o,m&&(l<h+d*s/2||l>c-d*s/2)?l>h+d/2?1:-1:0}function oy(i){return ge(X)<ge(i)?1:-1}function ay(i){for(var t=i.tagName+i.className+i.src+i.href+i.textContent,e=t.length,r=0;e--;)r+=t.charCodeAt(e);return r.toString(36)}function ly(i){es.length=0;for(var t=i.getElementsByTagName("input"),e=t.length;e--;){var r=t[e];r.checked&&es.push(r)}}function Rn(i){return setTimeout(i,0)}function Oo(i){return clearTimeout(i)}us&&vt(document,"touchmove",function(i){(lt.active||Ri)&&i.cancelable&&i.preventDefault()});lt.utils={on:vt,off:mt,css:at,find:sc,is:function(t,e){return!!Te(t,e,t,!1)},extend:Vg,throttle:oc,closest:Te,toggleClass:le,clone:lc,index:ge,nextTick:Rn,cancelNextTick:Oo,detectDirection:hc,getChild:Xi};lt.get=function(i){return i[ce]};lt.mount=function(){for(var i=arguments.length,t=new Array(i),e=0;e<i;e++)t[e]=arguments[e];t[0].constructor===Array&&(t=t[0]),t.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(lt.utils=Re(Re({},lt.utils),r.utils)),rn.mount(r)})};lt.create=function(i,t){return new lt(i,t)};lt.version=Hg;var Lt=[],gr,ko,Do=!1,Ys,Zs,is,yr;function dy(){function i(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return i.prototype={dragStarted:function(e){var r=e.originalEvent;this.sortable.nativeDraggable?vt(document,"dragover",this._handleAutoScroll):this.options.supportPointer?vt(document,"pointermove",this._handleFallbackAutoScroll):r.touches?vt(document,"touchmove",this._handleFallbackAutoScroll):vt(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var r=e.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?mt(document,"dragover",this._handleAutoScroll):(mt(document,"pointermove",this._handleFallbackAutoScroll),mt(document,"touchmove",this._handleFallbackAutoScroll),mt(document,"mousemove",this._handleFallbackAutoScroll)),_d(),zn(),Wg()},nulling:function(){is=ko=gr=Do=yr=Ys=Zs=null,Lt.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,r){var n=this,s=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,a=document.elementFromPoint(s,o);if(is=e,r||this.options.forceAutoScrollFallback||en||We||Tr){Xs(e,this.options,a,r);var l=oi(a,!0);Do&&(!yr||s!==Ys||o!==Zs)&&(yr&&_d(),yr=setInterval(function(){var d=oi(document.elementFromPoint(s,o),!0);d!==l&&(l=d,zn()),Xs(e,n.options,d,r)},10),Ys=s,Zs=o)}else{if(!this.options.bubbleScroll||oi(a,!0)===ke()){zn();return}Xs(e,this.options,oi(a,!1),!1)}}},je(i,{pluginName:"scroll",initializeByDefault:!0})}function zn(){Lt.forEach(function(i){clearInterval(i.pid)}),Lt=[]}function _d(){clearInterval(yr)}var Xs=oc(function(i,t,e,r){if(t.scroll){var n=(i.touches?i.touches[0]:i).clientX,s=(i.touches?i.touches[0]:i).clientY,o=t.scrollSensitivity,a=t.scrollSpeed,l=ke(),d=!1,h;ko!==e&&(ko=e,zn(),gr=t.scroll,h=t.scrollFn,gr===!0&&(gr=oi(e,!0)));var c=0,m=gr;do{var p=m,g=Ht(p),f=g.top,b=g.bottom,y=g.left,v=g.right,S=g.width,I=g.height,T=void 0,D=void 0,R=p.scrollWidth,M=p.scrollHeight,O=at(p),H=p.scrollLeft,J=p.scrollTop;p===l?(T=S<R&&(O.overflowX==="auto"||O.overflowX==="scroll"||O.overflowX==="visible"),D=I<M&&(O.overflowY==="auto"||O.overflowY==="scroll"||O.overflowY==="visible")):(T=S<R&&(O.overflowX==="auto"||O.overflowX==="scroll"),D=I<M&&(O.overflowY==="auto"||O.overflowY==="scroll"));var E=T&&(Math.abs(v-n)<=o&&H+S<R)-(Math.abs(y-n)<=o&&!!H),N=D&&(Math.abs(b-s)<=o&&J+I<M)-(Math.abs(f-s)<=o&&!!J);if(!Lt[c])for(var _=0;_<=c;_++)Lt[_]||(Lt[_]={});(Lt[c].vx!=E||Lt[c].vy!=N||Lt[c].el!==p)&&(Lt[c].el=p,Lt[c].vx=E,Lt[c].vy=N,clearInterval(Lt[c].pid),(E!=0||N!=0)&&(d=!0,Lt[c].pid=setInterval(function(){r&&this.layer===0&&lt.active._onTouchMove(is);var $=Lt[this.layer].vy?Lt[this.layer].vy*a:0,et=Lt[this.layer].vx?Lt[this.layer].vx*a:0;typeof h=="function"&&h.call(lt.dragged.parentNode[ce],et,$,i,is,Lt[this.layer].el)!=="continue"||ac(Lt[this.layer].el,et,$)}.bind({layer:c}),24))),c++}while(t.bubbleScroll&&m!==l&&(m=oi(m,!1)));Do=d}},30),fc=function(t){var e=t.originalEvent,r=t.putSortable,n=t.dragEl,s=t.activeSortable,o=t.dispatchSortableEvent,a=t.hideGhostForTarget,l=t.unhideGhostForTarget;if(e){var d=r||s;a();var h=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,c=document.elementFromPoint(h.clientX,h.clientY);l(),d&&!d.el.contains(c)&&(o("spill"),this.onSpill({dragEl:n,putSortable:r}))}};function ga(){}ga.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,r=t.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var n=Xi(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(e,n):this.sortable.el.appendChild(e),this.sortable.animateAll(),r&&r.animateAll()},drop:fc};je(ga,{pluginName:"revertOnSpill"});function ya(){}ya.prototype={onSpill:function(t){var e=t.dragEl,r=t.putSortable,n=r||this.sortable;n.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),n.animateAll()},drop:fc};je(ya,{pluginName:"removeOnSpill"});lt.mount(new dy);lt.mount(ya,ga);function gd(i,t,e){i.splice(e,0,i.splice(t,1)[0])}const hy="esri-layerlist-new-ui",cy=he.ofType(lu),yd="data-sort-filter",bd="data-layer-uid",uy="layerUid",Dt="esri-layer-list",It=`${Dt}__item`,K={base:`${Dt} esri-widget esri-widget--panel`,newUI:`${Dt}--new-ui`,noItems:`${Dt}__no-items`,list:`${Dt}__list`,listRoot:`${Dt}__list--root`,listExclusive:`${Dt}__list--exclusive`,listInherited:`${Dt}__list--inherited`,listIndependent:`${Dt}__list--independent`,item:It,itemContent:`${It}-content`,itemMessage:`${It}--has-message`,itemInvisible:`${It}--invisible`,itemInvisibleAtScale:`${It}--invisible-at-scale`,itemChildren:`${It}--has-children`,itemSelectable:`${It}--selectable`,itemContainer:`${It}-container`,actionsMenu:`${It}-actions-menu`,actionsMenuItem:`${It}-actions-menu-item`,actionsMenuItemActive:`${It}-actions-menu-item--active`,actions:`${It}-actions`,actionsList:`${It}-actions-list`,action:`${It}-action`,actionIcon:`${It}-action-icon`,actionImage:`${It}-action-image`,actionTitle:`${It}-action-title`,actionToggle:`${Dt}__action-toggle`,actionToggleOn:`${Dt}__action-toggle--on`,label:`${It}-label`,message:`${It}-message`,title:`${It}-title`,statusIndicator:`${Dt}__status-indicator`,publishing:`${Dt}__publishing`,updating:`${Dt}__updating`,connectionStatus:`${Dt}__connection-status`,connectionStatusConnected:`${Dt}__connection-status--connected`,toggleVisible:`${It}-toggle`,toggleVisibleIcon:`${It}-toggle-icon`,toggleIcon:`${It}-toggle-icon`,radioIcon:`${It}-radio-icon`,childToggle:`${Dt}__child-toggle`,childToggleOpen:`${Dt}__child-toggle--open`,childOpened:`${Dt}__child-toggle-icon--opened`,childClosed:`${Dt}__child-toggle-icon--closed`,childClosed_RTL:`${Dt}__child-toggle-icon--closed-rtl`,sortableChosen:`${Dt}--chosen`,disabled:"esri-disabled",disabledElement:"esri-disabled-element",hidden:"esri-hidden",rotating:"esri-rotating",iconEllipses:"esri-icon-handle-horizontal",iconVisible:"esri-icon-visible",iconInvisible:"esri-icon-non-visible",iconRadioSelected:"esri-icon-radio-checked",iconRadioUnselected:"esri-icon-radio-unchecked",iconNoticeTriangle:"esri-icon-notice-triangle",iconChildrenOpen:"esri-icon-down-arrow",iconDownArrow:"esri-icon-down-arrow",iconRightArrow:"esri-icon-right-triangle-arrow",iconLeftArrow:"esri-icon-left-triangle-arrow",iconLoading:"esri-icon-loading-indicator",iconDefaultAction:"esri-icon-default-action",widgetIcon:"esri-icon-layers"},qe={actions:"actions",actionSection:"action-section",items:"items"},lr={exclusive:"exclusive",inherited:"inherited",independent:"independent"};function mc(i){const{actionsOpen:t,children:e}=i;t&&(i.actionsOpen=!1),e.forEach(r=>mc(r))}const Js="root",vd={statusIndicators:!0,errors:!1};let xt=class extends vi{constructor(i,t){super(i,t),this._sortableNodes=new Map,this._sortableMap=new Map,this._focusSortUid=null,this._newUI=Vc(hy),this._tooltipReferenceMap=new Map,this.visibleItems=null,this.iconClass=K.widgetIcon,this.icon=null,this.listItemCanGiveFunction=null,this.listItemCanReceiveFunction=null,this.messages=null,this.messagesCommon=null,this.multipleSelectionEnabled=!1,this.selectionEnabled=!1,this.selectedItems=new cy,this.viewModel=new Ad,this.visibleElements={...vd},this._onSortableSort=({to:e,from:r,item:n,newIndex:s})=>{r&&e&&(r===e?this._sortLayers(this._sortableMap.get(r.dataset.group)):this._moveLayerFromChildList({to:e,from:r,item:n,newIndex:s}))},this._sortableCanSort=(e,r)=>!(!e.el.dataset.group||!r.el.dataset.group),this._sortableCanPull=(e,r,n)=>{const{listItemCanGiveFunction:s}=this,o={selected:jt(n),from:jt(r.el),to:jt(e.el)};return!this._sortableCanSort(e,r)||typeof s!="function"||s.call(null,o)},this._sortableCanPut=(e,r,n)=>{const{listItemCanReceiveFunction:s}=this,o={selected:jt(n),from:jt(r.el),to:jt(e.el)};return!this._sortableCanSort(e,r)||typeof s!="function"||s.call(null,o)},this._onSortableEnd=({oldIndex:e,from:r,to:n,item:s})=>{r!==n&&r.insertBefore(s,r.children[e])}}initialize(){const i=this.operationalItems;this._setVisibleItems(i),this.addHandles([ai(()=>this.operationalItems,"change",()=>this._itemsChanged(i)),At(()=>this.visibleElements,()=>this._itemsChanged(i)),At(()=>this.selectionEnabled,()=>this._toggleAllSorting(),zi)])}loadDependencies(){return Cd({icon:()=>br(()=>import("./calcite-icon-b3dbf1c9.js"),["./calcite-icon-b3dbf1c9.js","./icon-3b706e0b.js","./main-79e5ed80.js","./main-7772480e.css","./observers-7949b362.js"],import.meta.url),tooltip:()=>br(()=>import("./calcite-tooltip-b1da9ddb.js"),["./calcite-tooltip-b1da9ddb.js","./tooltip-256c087d.js","./main-79e5ed80.js","./main-7772480e.css","./openCloseComponent-2d424455.js","./debounce-c198f28b.js","./guid-4f97587b.js","./FloatingArrow-52fee7c7.js"],import.meta.url)})}destroy(){this.removeAllHandles(),this._destroySortables(),this._tooltipReferenceMap.clear()}get label(){return this.messages?.widgetLabel??""}set label(i){this._overrideIfSome("label",i)}get listItemCreatedFunction(){return this.viewModel.listItemCreatedFunction}set listItemCreatedFunction(i){this.viewModel.listItemCreatedFunction=i}get operationalItems(){return this.viewModel.operationalItems}set operationalItems(i){this.viewModel.operationalItems=i}get view(){return this.viewModel.view}set view(i){this.viewModel.view=i}castVisibleElements(i){return{...vd,...i}}triggerAction(i,t){return this.viewModel.triggerAction(i,t)}render(){const{visibleItems:i,_newUI:t}=this,e=this.viewModel?.state,r={[K.newUI]:t,[K.hidden]:e==="loading",[K.disabled]:e==="disabled"},n=this.renderItemTooltips(),s=this.renderItems();return G("div",{class:this.classes(K.base,r)},i.length?[n,s]:this.renderNoItems())}renderItemTooltip(i){const{_tooltipReferenceMap:t,messages:e}=this;return i?G("calcite-tooltip",{label:e.layerIncompatible,referenceElement:t.get(i.uid)},e.layerIncompatibleTooltip):null}renderItemTooltipNodes(i){const{incompatible:t,children:e}=i;return[t?this.renderItemTooltip(i):null,...!t&&e?e.toArray().map(r=>this.renderItemTooltipNodes(r)):[]]}renderItemTooltips(){return this.visibleItems.toArray().map(i=>this.renderItemTooltipNodes(i))??[]}renderNoItems(){return G("div",{class:K.noItems},this.messages.noItemsToDisplay)}renderItems(){const{visibleItems:i,selectionEnabled:t,messages:e}=this;return G("ul",{"aria-label":e.widgetLabel,role:t?"listbox":void 0,afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,"data-group":Js,bind:this,class:this.classes(K.list,K.listRoot,K.listIndependent)},i.map(r=>this.renderItem(r,null)).toArray())}renderActionsMenuIcon(i,t){const{messagesCommon:e}=this,r={[K.actionsMenuItemActive]:i.actionsOpen};return G("div",{key:"actions-menu-toggle","data-item":i,bind:this,onclick:this._toggleActionsOpen,onkeydown:this._toggleActionsOpen,class:this.classes(K.actionsMenuItem,r),tabindex:"0",role:"button","aria-controls":t,"aria-label":e.options,title:e.options},G("span",{"aria-hidden":"true",class:K.iconEllipses}))}renderActionsMenu(i,t,e,r){const{panel:n}=i,s=n&&n.visible?this.renderPanelButton(n):null,o=e===1&&this._getSingleActionButton(t),a=o?this.renderAction({item:i,action:o,singleAction:!0}):null,l=!o&&e?this.renderActionsMenuIcon(i,r):null;return l||s||o?G("div",{key:"actions-menu",class:K.actionsMenu},s,a,l):null}renderChildList(i,t){const{selectionEnabled:e}=this,{visibilityMode:r,children:n}=i,s=this._hasChildren(i),o=!s&&e&&i.layer?.type==="group",{exclusive:a,inherited:l}=lr,d={[K.listExclusive]:r===a,[K.listInherited]:r===l,[K.listIndependent]:r!==l&&r!==a};return s||o?G("ul",{bind:this,key:"list-items",id:t,"data-group":i.uid,"data-item":i,afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,class:this.classes(K.list,d),"aria-expanded":i.open?"true":"false",role:e?"listbox":r===a?"radiogroup":"group",hidden:!i.open&&!o||null},n?.map(h=>this.renderItem(h,i)).toArray()):null}renderChildrenToggle(i,t){const{messagesCommon:e}=this,r=this._hasChildren(i),n={[K.childToggleOpen]:i.open},s=i.open?e.collapse:e.expand;return r?G("span",{onclick:this._toggleChildrenClick,onkeydown:this._toggleChildrenClick,"data-item":i,key:"toggle-children",class:this.classes(K.childToggle,n),tabindex:"0",role:"button","aria-controls":t,"aria-label":s,title:s},G("span",{"aria-hidden":"true",class:this.classes(K.childClosed,K.iconRightArrow)}),G("span",{"aria-hidden":"true",class:this.classes(K.childOpened,K.iconDownArrow)}),G("span",{"aria-hidden":"true",class:this.classes(K.childClosed_RTL,K.iconLeftArrow)})):null}renderItemMessage(i){return i.error?G("div",{key:"esri-layer-list__error",class:K.message,role:"alert"},G("span",{"aria-hidden":"true",class:K.iconNoticeTriangle}),this.messages.layerError):i.incompatible?G("div",{key:"esri-layer-list__incompatible",class:K.message,role:"alert"},G("span",{bind:this,tabIndex:0,"aria-hidden":"true",class:K.iconNoticeTriangle,afterCreate:t=>this._setTooltipReference(t,i)}),this.messages.layerIncompatible):null}renderItemContent(i,t,e){const{id:r}=this,n=`${r}_${i.uid}`,s=`${n}_actions`,o=`${n}__list`,{panel:a}=i,l=this._filterActions(i.actionsSections),d=this._countActions(l);return[G("div",{key:"list-item-container",class:K.itemContainer},this.renderChildrenToggle(i,o),this.renderLabel(i,t,e),this.renderActionsMenu(i,l,d,s)),this.renderItemMessage(i),d?this.renderActionsSections(i,l,s):null,a&&a.open&&!a.disabled?a.render():null,this.renderChildList(i,o)]}renderItem(i,t){const{_newUI:e,id:r,selectionEnabled:n,selectedItems:s}=this,o=`${`${r}_${i.uid}`}__title`,a=this._hasMessage(i),l=this._hasChildren(i),d={[K.itemChildren]:l,[K.itemMessage]:!!a,[K.itemInvisible]:e&&!i.visible,[K.itemInvisibleAtScale]:!i.visibleAtCurrentScale,[K.itemSelectable]:n};if(n){const h={[bd]:i.layer?.uid,[yd]:(!i.sortable).toString()};return G("li",{key:`item-with-selection-${i.uid}`,bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes(K.item,d),"aria-labelledby":o,onclick:this._toggleSelection,onkeydown:this._selectionKeydown,"data-item":i,"data-group":t?t.uid:Js,tabIndex:0,"aria-selected":_s(i,s)?"true":"false",role:"option",...h},this.renderItemContent(i,t,o))}return G("li",{key:`item-no-selection-${i.uid}`,bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes(K.item,d),"aria-labelledby":o},this.renderItemContent(i,t,o))}renderConnectionIcon(i){const{connectionStatus:t}=i;return t!=null?G("calcite-icon",{icon:t==="connected"?"beacon":"offline",scale:"s"}):null}renderItemStatus(i,t){const{visibleElements:e}=this;if(!e.statusIndicators)return null;const{connectionStatus:r,publishing:n,updating:s}=i,o=s&&!t,a=!!r;return G("span",{class:this.classes({[K.statusIndicator]:!0,[K.publishing]:n,[K.updating]:o,[K.connectionStatus]:a,[K.connectionStatusConnected]:a&&r==="connected"}),key:"layer-item-status"},this.renderConnectionIcon(i))}renderItemTitle(i,t){const{messages:e}=this;if(!i)return null;const r=i.title||e.untitledLayer,n=i.visibleAtCurrentScale?r:`${r} (${e.layerInvisibleAtScale})`;return G("span",{key:"layer-title-container",id:t,title:n,"aria-label":n,class:K.title},r)}renderItemToggleIcon(i,t){const{_newUI:e}=this,{exclusive:r}=lr,n=t?.visibilityMode,s={[K.toggleVisibleIcon]:e,[K.toggleIcon]:e&&n!==r,[K.radioIcon]:e&&n===r,[K.iconRadioSelected]:n===r&&i.visible,[K.iconRadioUnselected]:n===r&&!i.visible,[K.iconVisible]:n!==r&&i.visible,[K.iconInvisible]:n!==r&&!i.visible};return G("span",{key:"item-toggle-icon",class:this.classes(s),"aria-hidden":"true"})}renderItemToggle(i,t,e){const{selectionEnabled:r,messages:n}=this,{exclusive:s}=lr,o=t?.visibilityMode,a=o===s?"radio":"switch";return G("span",r?{key:"item-toggle-selection-enabled",class:K.toggleVisible,bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":i,"data-parent-visibility":o,tabIndex:0,title:n.layerVisibility,"aria-checked":i.visible?"true":"false",role:a,"aria-labelledby":e}:{key:"item-toggle",class:K.toggleVisible},this.renderItemToggleIcon(i,t))}renderLabel(i,t,e){const{selectionEnabled:r,_newUI:n,messages:s}=this,{inherited:o,exclusive:a}=lr,l=t?.visibilityMode,d=l===a?"radio":"switch",h=n?[this.renderItemTitle(i,e),this.renderItemStatus(i,t),this.renderItemToggle(i,t,e)]:[this.renderItemToggle(i,t,e),this.renderItemTitle(i,e),this.renderItemStatus(i,t)],c=G("div",r?{key:`item-label-no-selection-${i.uid}`,class:K.label}:{key:`item-label-with-selection-${i.uid}`,class:K.label,bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":i,"data-parent-visibility":l,tabIndex:0,"aria-checked":i.visible?"true":"false",title:s.layerVisibility,role:d,"aria-labelledby":e},h);return l===o||i.error?G("div",{key:`item-label-container-${i.uid}`,class:K.label},this.renderItemTitle(i,e),this.renderItemStatus(i,t)):c}renderPanelButton(i){const{className:t,open:e,title:r,image:n,disabled:s}=i,o=n||t?t:K.iconDefaultAction,a=this._getIconImageStyles(i),l={[K.actionsMenuItemActive]:e&&!s},d={[K.actionImage]:!!a["background-image"],[K.disabledElement]:i.disabled};return o&&(d[o]=!!o),G("div",{"aria-disabled":i.disabled.toString(),key:`panel-${i.uid}`,bind:this,"data-panel":i,onclick:this._triggerPanel,onkeydown:this._triggerPanel,class:this.classes(K.actionsMenuItem,l),role:"button",tabindex:i.disabled?null:0,title:r,"aria-label":r},G("span",{class:this.classes(d),styles:a}))}renderActionsSections(i,t,e){const r=t.toArray().map((n,s)=>G("ul",{key:`${i}-action-section-${s}`,class:K.actionsList},this.renderActionSection(i,n)));return G("div",{role:"group","aria-expanded":i.actionsOpen?"true":"false",key:"actions-section",id:e,class:K.actions,hidden:!i.actionsOpen||null},r)}renderActionSection(i,t){return(t&&t.toArray()).map(e=>this.renderAction({item:i,action:e}))}renderActionIcon(i){const{active:t,className:e}=i,r=this._getIconImageStyles(i),n=i.type!=="button"||i.image||e?e:K.iconDefaultAction,s={[K.actionImage]:!t&&!!r["background-image"],[K.iconLoading]:t,[K.rotating]:t};return n&&!t&&(s[n]=!0),G("span",{key:"action-icon","aria-hidden":"true",class:this.classes(K.actionIcon,s),styles:r})}renderActionTitle(i,t){return t?null:G("span",{key:"action-title",class:K.actionTitle},i)}renderAction(i){const{item:t,action:e,singleAction:r}=i,{active:n,disabled:s,title:o}=e,a={[K.actionsMenuItem]:r&&e.type==="button",[K.action]:n||!r&&e.type!=="toggle",[K.actionToggle]:!n&&e.type==="toggle",[K.actionToggleOn]:!n&&e.type==="toggle"&&e.value,[K.disabledElement]:s},l=[this.renderActionIcon(e),this.renderActionTitle(o,r)];return r?G("div",{bind:this,"data-item":t,"data-action":e,role:"button",key:`single-action-${e.uid}`,onclick:this._triggerAction,onkeydown:this._triggerAction,classes:a,tabindex:"0",title:o??void 0,"aria-label":o??void 0},l):G("li",{bind:this,"data-item":t,"data-action":e,key:`action-${e.uid}`,onclick:this._triggerAction,onkeydown:this._triggerAction,classes:a,tabindex:"0",role:"button",title:o??void 0,"aria-label":o??void 0},l)}_setTooltipReference(i,t){this._tooltipReferenceMap.set(t.uid,i),this.scheduleRender()}_hasMessage(i){return!!i.error||i.incompatible}_hasChildren(i){return!!i.children.length&&!this._hasMessage(i)}_sortNodeRemoved(i){const{_sortableMap:t}=this,e=i.dataset.group,r=t.get(e);r&&r.destroy(),t.delete(e)}_destroySortables(){const{_sortableMap:i,_sortableNodes:t}=this;i.forEach(e=>e&&e.destroy()),i.clear(),t.clear()}_moveLayerFromChildList({to:i,from:t,item:e,newIndex:r}){const n=jt(e),s=jt(i),o=jt(t);this.viewModel.moveListItem(n,o,s,r)}_sortLayers(i){if(!i)return;const t=jt(i.el),e=i.toArray();t?du(t,e):hu(this.view?.map?.layers,e)}_toggleSorting(i,t){const{_sortableMap:e,selectionEnabled:r}=this,n=e.get(t),s=jt(i),o=(t===Js||s?.childrenSortable&&cu(s))&&r;if(n)n.option("disabled",!o);else if(o){const a=lt.create(i,{dataIdAttr:bd,group:{name:t,pull:this._sortableCanPull,put:this._sortableCanPut},filter:`[${yd}="true"]`,fallbackTolerance:4,onSort:this._onSortableSort,onEnd:this._onSortableEnd,disabled:!o,chosenClass:K.sortableChosen});e.set(t,a)}}_toggleAllSorting(){this._sortableNodes.forEach((i,t)=>this._toggleSorting(i,t))}_sortNodeCreated(i){const t=i.dataset.group;t&&(this._sortableNodes.set(t,i),this._toggleSorting(i,t))}_setVisibleItems(i){this.visibleItems=i.filter(t=>!t.hidden&&(this.visibleElements.errors||!t.error))}_getSingleActionButton(i){return i.reduce(t=>t).filter(t=>t&&t.type==="button").at(0)}_focusListItem(i){const{_focusSortUid:t}=this;if(!i||!t)return;jt(i)?.layer?.uid===t&&(i.focus(),this._focusSortUid=null)}_watchActionSectionChanges(i){this.addHandles(i.on("change",this.scheduleRender.bind(this)),qe.actionSection),i.forEach(t=>this._renderOnActionChanges(t))}_renderOnActionChanges(i){i.type!=="toggle"?i.type!=="slider"?this.addHandles(At(()=>[i?.className,i?.image,i?.id,i?.title,i?.visible],()=>this.scheduleRender(),zi),qe.actions):this.addHandles(At(()=>[i?.className,i?.id,i?.title,i?.visible,i?.value,i?.displayValueEnabled,i?.max,i?.min,i?.step],()=>this.scheduleRender(),zi),qe.actions):this.addHandles(At(()=>[i?.className,i?.image,i?.id,i?.title,i?.visible,i?.value],()=>this.scheduleRender(),zi),qe.actions)}_renderOnItemChanges(i){this.addHandles([At(()=>[i?.actionsOpen,i?.visible,i?.open,i?.updating,i?.connectionStatus,i?.publishing,i?.title,i?.visibleAtCurrentScale,i?.error,i?.visibilityMode,i?.panel,i?.panel?.title,i?.panel?.content,i?.panel?.className,i?.sortable,i?.childrenSortable],()=>this.scheduleRender(),Wc),At(()=>[i?.hidden,i?.error],()=>this._setVisibleItems(this.operationalItems)),i.actionsSections.on("change",()=>this.scheduleRender()),i.children.on("change",()=>this.scheduleRender())],qe.items),i.children.forEach(t=>this._renderOnItemChanges(t)),i.actionsSections.forEach(t=>this._watchActionSectionChanges(t))}_itemsChanged(i){this.removeHandles(qe.items),this.removeHandles(qe.actions),this.removeHandles(qe.actionSection),i.forEach(t=>this._renderOnItemChanges(t)),this._tooltipReferenceMap.clear(),this._setVisibleItems(i),this.scheduleRender()}_filterActions(i){return i.map(t=>t.filter(e=>e.visible))}_countActions(i){return i.reduce((t,e)=>t+e.length,0)}_getIconImageStyles(i){const t=i.declaredClass==="esri.widgets.LayerList.ListItemPanel"||i.declaredClass==="esri.support.Action.ActionButton"||i.declaredClass==="esri.support.Action.ActionToggle"?i.image:null;return{"background-image":t?`url("${t}")`:void 0}}_selectionKeydown(i){const t=["ArrowDown","ArrowUp"],e=Rr(i);if(!t.includes(e))return void this._toggleSelection(i);i.stopPropagation();const r=i.currentTarget,n=jt(r),{_sortableMap:s,selectedItems:o}=this,a=r.dataset.group,l=s.get(a);if(!l||!n)return;const d=_s(n,o),h=l.toArray(),c=i.target,m=h.indexOf(c.dataset[uy]);if(m!==-1){if(e==="ArrowDown"){const p=m+1;if(p>=h.length)return;d?(gd(h,m,p),l.sort(h),this._sortLayers(l),this._focusSortUid=n.layer?.uid):(this._focusSortUid=n.layer?.uid,this.scheduleRender())}if(e==="ArrowUp"){const p=m-1;if(p<=-1)return;d?(gd(h,m,p),l.sort(h),this._sortLayers(l),this._focusSortUid=n.layer?.uid):(this._focusSortUid=n.layer?.uid,this.scheduleRender())}}}_toggleActionsOpen(i){const t=jt(i.currentTarget);if(!t)return;const{actionsOpen:e}=t,r=!e;r&&this.operationalItems.forEach(n=>mc(n)),t.actionsOpen=r,i.stopPropagation()}_triggerPanel(i){const t=py(i.currentTarget);i.stopPropagation(),t&&!t.disabled&&(t.open=!t.open)}_triggerAction(i){const t=i.currentTarget,e=fy(t),r=jt(t);e&&r&&(e.type==="toggle"&&(e.value=!e.value),this.triggerAction(e,r),i.stopPropagation())}_toggleVisibility(i){const t=i.currentTarget,e=t.getAttribute("data-parent-visibility"),r=jt(t);r&&(e===lr.exclusive&&r.visible||(r.visible=!r.visible),i.stopPropagation())}_toggleChildrenClick(i){const t=jt(i.currentTarget);t&&(t.open=!t.open,i.stopPropagation())}_toggleSelection(i){i.stopPropagation();const{multipleSelectionEnabled:t,selectedItems:e}=this,r=jt(i.currentTarget);if(!r)return;const n=_s(r,e),{length:s}=e;if(!t)return s&&!(n&&s===1)?(e.removeAll(),void e.add(r)):void(n?e.remove?.(n):e.add(r));n?e.remove?.(n):e.add(r)}get test(){return{visibleItems:this.visibleItems}}};function jt(i){return i?.["data-item"]}function py(i){return i?.["data-panel"]}function fy(i){return i?.["data-action"]}w([x()],xt.prototype,"visibleItems",void 0),w([x()],xt.prototype,"iconClass",void 0),w([x()],xt.prototype,"icon",void 0),w([x()],xt.prototype,"label",null),w([x()],xt.prototype,"listItemCanGiveFunction",void 0),w([x()],xt.prototype,"listItemCanReceiveFunction",void 0),w([x()],xt.prototype,"listItemCreatedFunction",null),w([x(),Pe("esri/widgets/LayerList/t9n/LayerList")],xt.prototype,"messages",void 0),w([x(),Pe("esri/t9n/common")],xt.prototype,"messagesCommon",void 0),w([x()],xt.prototype,"multipleSelectionEnabled",void 0),w([x()],xt.prototype,"operationalItems",null),w([x()],xt.prototype,"selectionEnabled",void 0),w([x()],xt.prototype,"selectedItems",void 0),w([x()],xt.prototype,"view",null),w([ou("trigger-action"),x({type:Ad})],xt.prototype,"viewModel",void 0),w([x()],xt.prototype,"visibleElements",void 0),w([qr("visibleElements")],xt.prototype,"castVisibleElements",null),w([Ne()],xt.prototype,"_toggleActionsOpen",null),w([Ne()],xt.prototype,"_triggerPanel",null),w([Ne()],xt.prototype,"_triggerAction",null),w([Ne()],xt.prototype,"_toggleVisibility",null),w([Ne()],xt.prototype,"_toggleChildrenClick",null),w([Ne()],xt.prototype,"_toggleSelection",null),xt=w([$t("esri.widgets.LayerList")],xt);const my=xt;var Sn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _y(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function xn(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var _c={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(i,t){(function(e){i.exports=e()})(function(){return function e(r,n,s){function o(d,h){if(!n[d]){if(!r[d]){var c=typeof xn=="function"&&xn;if(!h&&c)return c(d,!0);if(a)return a(d,!0);var m=new Error("Cannot find module '"+d+"'");throw m.code="MODULE_NOT_FOUND",m}var p=n[d]={exports:{}};r[d][0].call(p.exports,function(g){var f=r[d][1][g];return o(f||g)},p,p.exports,e,r,n,s)}return n[d].exports}for(var a=typeof xn=="function"&&xn,l=0;l<s.length;l++)o(s[l]);return o}({1:[function(e,r,n){var s=e("./utils"),o=e("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(l){for(var d,h,c,m,p,g,f,b=[],y=0,v=l.length,S=v,I=s.getTypeOf(l)!=="string";y<l.length;)S=v-y,c=I?(d=l[y++],h=y<v?l[y++]:0,y<v?l[y++]:0):(d=l.charCodeAt(y++),h=y<v?l.charCodeAt(y++):0,y<v?l.charCodeAt(y++):0),m=d>>2,p=(3&d)<<4|h>>4,g=1<S?(15&h)<<2|c>>6:64,f=2<S?63&c:64,b.push(a.charAt(m)+a.charAt(p)+a.charAt(g)+a.charAt(f));return b.join("")},n.decode=function(l){var d,h,c,m,p,g,f=0,b=0,y="data:";if(l.substr(0,y.length)===y)throw new Error("Invalid base64 input, it looks like a data url.");var v,S=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===a.charAt(64)&&S--,l.charAt(l.length-2)===a.charAt(64)&&S--,S%1!=0)throw new Error("Invalid base64 input, bad content length.");for(v=o.uint8array?new Uint8Array(0|S):new Array(0|S);f<l.length;)d=a.indexOf(l.charAt(f++))<<2|(m=a.indexOf(l.charAt(f++)))>>4,h=(15&m)<<4|(p=a.indexOf(l.charAt(f++)))>>2,c=(3&p)<<6|(g=a.indexOf(l.charAt(f++))),v[b++]=d,p!==64&&(v[b++]=h),g!==64&&(v[b++]=c);return v}},{"./support":30,"./utils":32}],2:[function(e,r,n){var s=e("./external"),o=e("./stream/DataWorker"),a=e("./stream/Crc32Probe"),l=e("./stream/DataLengthProbe");function d(h,c,m,p,g){this.compressedSize=h,this.uncompressedSize=c,this.crc32=m,this.compression=p,this.compressedContent=g}d.prototype={getContentWorker:function(){var h=new o(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),c=this;return h.on("end",function(){if(this.streamInfo.data_length!==c.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),h},getCompressedWorker:function(){return new o(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},d.createWorkerFrom=function(h,c,m){return h.pipe(new a).pipe(new l("uncompressedSize")).pipe(c.compressWorker(m)).pipe(new l("compressedSize")).withStreamInfo("compression",c)},r.exports=d},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,r,n){var s=e("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},n.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,r,n){var s=e("./utils"),o=function(){for(var a,l=[],d=0;d<256;d++){a=d;for(var h=0;h<8;h++)a=1&a?3988292384^a>>>1:a>>>1;l[d]=a}return l}();r.exports=function(a,l){return a!==void 0&&a.length?s.getTypeOf(a)!=="string"?function(d,h,c,m){var p=o,g=m+c;d^=-1;for(var f=m;f<g;f++)d=d>>>8^p[255&(d^h[f])];return-1^d}(0|l,a,a.length,0):function(d,h,c,m){var p=o,g=m+c;d^=-1;for(var f=m;f<g;f++)d=d>>>8^p[255&(d^h.charCodeAt(f))];return-1^d}(0|l,a,a.length,0):0}},{"./utils":32}],5:[function(e,r,n){n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(e,r,n){var s=null;s=typeof Promise<"u"?Promise:e("lie"),r.exports={Promise:s}},{lie:37}],7:[function(e,r,n){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=e("pako"),a=e("./utils"),l=e("./stream/GenericWorker"),d=s?"uint8array":"array";function h(c,m){l.call(this,"FlateWorker/"+c),this._pako=null,this._pakoAction=c,this._pakoOptions=m,this.meta={}}n.magic="\b\0",a.inherits(h,l),h.prototype.processChunk=function(c){this.meta=c.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(d,c.data),!1)},h.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},h.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},h.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var c=this;this._pako.onData=function(m){c.push({data:m,meta:c.meta})}},n.compressWorker=function(c){return new h("Deflate",c)},n.uncompressWorker=function(){return new h("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,r,n){function s(p,g){var f,b="";for(f=0;f<g;f++)b+=String.fromCharCode(255&p),p>>>=8;return b}function o(p,g,f,b,y,v){var S,I,T=p.file,D=p.compression,R=v!==d.utf8encode,M=a.transformTo("string",v(T.name)),O=a.transformTo("string",d.utf8encode(T.name)),H=T.comment,J=a.transformTo("string",v(H)),E=a.transformTo("string",d.utf8encode(H)),N=O.length!==T.name.length,_=E.length!==H.length,$="",et="",U="",ot=T.dir,W=T.date,st={crc32:0,compressedSize:0,uncompressedSize:0};g&&!f||(st.crc32=p.crc32,st.compressedSize=p.compressedSize,st.uncompressedSize=p.uncompressedSize);var F=0;g&&(F|=8),R||!N&&!_||(F|=2048);var z=0,rt=0;ot&&(z|=16),y==="UNIX"?(rt=798,z|=function(Z,St){var zt=Z;return Z||(zt=St?16893:33204),(65535&zt)<<16}(T.unixPermissions,ot)):(rt=20,z|=function(Z){return 63&(Z||0)}(T.dosPermissions)),S=W.getUTCHours(),S<<=6,S|=W.getUTCMinutes(),S<<=5,S|=W.getUTCSeconds()/2,I=W.getUTCFullYear()-1980,I<<=4,I|=W.getUTCMonth()+1,I<<=5,I|=W.getUTCDate(),N&&(et=s(1,1)+s(h(M),4)+O,$+="up"+s(et.length,2)+et),_&&(U=s(1,1)+s(h(J),4)+E,$+="uc"+s(U.length,2)+U);var Q="";return Q+=`
\0`,Q+=s(F,2),Q+=D.magic,Q+=s(S,2),Q+=s(I,2),Q+=s(st.crc32,4),Q+=s(st.compressedSize,4),Q+=s(st.uncompressedSize,4),Q+=s(M.length,2),Q+=s($.length,2),{fileRecord:c.LOCAL_FILE_HEADER+Q+M+$,dirRecord:c.CENTRAL_FILE_HEADER+s(rt,2)+Q+s(J.length,2)+"\0\0\0\0"+s(z,4)+s(b,4)+M+$+J}}var a=e("../utils"),l=e("../stream/GenericWorker"),d=e("../utf8"),h=e("../crc32"),c=e("../signature");function m(p,g,f,b){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=g,this.zipPlatform=f,this.encodeFileName=b,this.streamFiles=p,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(m,l),m.prototype.push=function(p){var g=p.meta.percent||0,f=this.entriesCount,b=this._sources.length;this.accumulate?this.contentBuffer.push(p):(this.bytesWritten+=p.data.length,l.prototype.push.call(this,{data:p.data,meta:{currentFile:this.currentFile,percent:f?(g+100*(f-b-1))/f:100}}))},m.prototype.openedSource=function(p){this.currentSourceOffset=this.bytesWritten,this.currentFile=p.file.name;var g=this.streamFiles&&!p.file.dir;if(g){var f=o(p,g,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:f.fileRecord,meta:{percent:0}})}else this.accumulate=!0},m.prototype.closedSource=function(p){this.accumulate=!1;var g=this.streamFiles&&!p.file.dir,f=o(p,g,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(f.dirRecord),g)this.push({data:function(b){return c.DATA_DESCRIPTOR+s(b.crc32,4)+s(b.compressedSize,4)+s(b.uncompressedSize,4)}(p),meta:{percent:100}});else for(this.push({data:f.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},m.prototype.flush=function(){for(var p=this.bytesWritten,g=0;g<this.dirRecords.length;g++)this.push({data:this.dirRecords[g],meta:{percent:100}});var f=this.bytesWritten-p,b=function(y,v,S,I,T){var D=a.transformTo("string",T(I));return c.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(y,2)+s(y,2)+s(v,4)+s(S,4)+s(D.length,2)+D}(this.dirRecords.length,f,p,this.zipComment,this.encodeFileName);this.push({data:b,meta:{percent:100}})},m.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},m.prototype.registerPrevious=function(p){this._sources.push(p);var g=this;return p.on("data",function(f){g.processChunk(f)}),p.on("end",function(){g.closedSource(g.previous.streamInfo),g._sources.length?g.prepareNextSource():g.end()}),p.on("error",function(f){g.error(f)}),this},m.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},m.prototype.error=function(p){var g=this._sources;if(!l.prototype.error.call(this,p))return!1;for(var f=0;f<g.length;f++)try{g[f].error(p)}catch{}return!0},m.prototype.lock=function(){l.prototype.lock.call(this);for(var p=this._sources,g=0;g<p.length;g++)p[g].lock()},r.exports=m},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,r,n){var s=e("../compressions"),o=e("./ZipFileWorker");n.generateWorker=function(a,l,d){var h=new o(l.streamFiles,d,l.platform,l.encodeFileName),c=0;try{a.forEach(function(m,p){c++;var g=function(v,S){var I=v||S,T=s[I];if(!T)throw new Error(I+" is not a valid compression method !");return T}(p.options.compression,l.compression),f=p.options.compressionOptions||l.compressionOptions||{},b=p.dir,y=p.date;p._compressWorker(g,f).withStreamInfo("file",{name:m,dir:b,date:y,comment:p.comment||"",unixPermissions:p.unixPermissions,dosPermissions:p.dosPermissions}).pipe(h)}),h.entriesCount=c}catch(m){h.error(m)}return h}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,r,n){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new s;for(var a in this)typeof this[a]!="function"&&(o[a]=this[a]);return o}}(s.prototype=e("./object")).loadAsync=e("./load"),s.support=e("./support"),s.defaults=e("./defaults"),s.version="3.10.1",s.loadAsync=function(o,a){return new s().loadAsync(o,a)},s.external=e("./external"),r.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,r,n){var s=e("./utils"),o=e("./external"),a=e("./utf8"),l=e("./zipEntries"),d=e("./stream/Crc32Probe"),h=e("./nodejsUtils");function c(m){return new o.Promise(function(p,g){var f=m.decompressed.getContentWorker().pipe(new d);f.on("error",function(b){g(b)}).on("end",function(){f.streamInfo.crc32!==m.decompressed.crc32?g(new Error("Corrupted zip : CRC32 mismatch")):p()}).resume()})}r.exports=function(m,p){var g=this;return p=s.extend(p||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),h.isNode&&h.isStream(m)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",m,!0,p.optimizedBinaryString,p.base64).then(function(f){var b=new l(p);return b.load(f),b}).then(function(f){var b=[o.Promise.resolve(f)],y=f.files;if(p.checkCRC32)for(var v=0;v<y.length;v++)b.push(c(y[v]));return o.Promise.all(b)}).then(function(f){for(var b=f.shift(),y=b.files,v=0;v<y.length;v++){var S=y[v],I=S.fileNameStr,T=s.resolve(S.fileNameStr);g.file(T,S.decompressed,{binary:!0,optimizedBinaryString:!0,date:S.date,dir:S.dir,comment:S.fileCommentStr.length?S.fileCommentStr:null,unixPermissions:S.unixPermissions,dosPermissions:S.dosPermissions,createFolders:p.createFolders}),S.dir||(g.file(T).unsafeOriginalName=I)}return b.zipComment.length&&(g.comment=b.zipComment),g})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,r,n){var s=e("../utils"),o=e("../stream/GenericWorker");function a(l,d){o.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(d)}s.inherits(a,o),a.prototype._bindStream=function(l){var d=this;(this._stream=l).pause(),l.on("data",function(h){d.push({data:h,meta:{percent:0}})}).on("error",function(h){d.isPaused?this.generatedError=h:d.error(h)}).on("end",function(){d.isPaused?d._upstreamEnded=!0:d.end()})},a.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,r,n){var s=e("readable-stream").Readable;function o(a,l,d){s.call(this,l),this._helper=a;var h=this;a.on("data",function(c,m){h.push(c)||h._helper.pause(),d&&d(m)}).on("error",function(c){h.emit("error",c)}).on("end",function(){h.push(null)})}e("../utils").inherits(o,s),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(e,r,n){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,o);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,o)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var o=new Buffer(s);return o.fill(0),o},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(e,r,n){function s(T,D,R){var M,O=a.getTypeOf(D),H=a.extend(R||{},h);H.date=H.date||new Date,H.compression!==null&&(H.compression=H.compression.toUpperCase()),typeof H.unixPermissions=="string"&&(H.unixPermissions=parseInt(H.unixPermissions,8)),H.unixPermissions&&16384&H.unixPermissions&&(H.dir=!0),H.dosPermissions&&16&H.dosPermissions&&(H.dir=!0),H.dir&&(T=y(T)),H.createFolders&&(M=b(T))&&v.call(this,M,!0);var J=O==="string"&&H.binary===!1&&H.base64===!1;R&&R.binary!==void 0||(H.binary=!J),(D instanceof c&&D.uncompressedSize===0||H.dir||!D||D.length===0)&&(H.base64=!1,H.binary=!0,D="",H.compression="STORE",O="string");var E=null;E=D instanceof c||D instanceof l?D:g.isNode&&g.isStream(D)?new f(T,D):a.prepareContent(T,D,H.binary,H.optimizedBinaryString,H.base64);var N=new m(T,E,H);this.files[T]=N}var o=e("./utf8"),a=e("./utils"),l=e("./stream/GenericWorker"),d=e("./stream/StreamHelper"),h=e("./defaults"),c=e("./compressedObject"),m=e("./zipObject"),p=e("./generate"),g=e("./nodejsUtils"),f=e("./nodejs/NodejsStreamInputAdapter"),b=function(T){T.slice(-1)==="/"&&(T=T.substring(0,T.length-1));var D=T.lastIndexOf("/");return 0<D?T.substring(0,D):""},y=function(T){return T.slice(-1)!=="/"&&(T+="/"),T},v=function(T,D){return D=D!==void 0?D:h.createFolders,T=y(T),this.files[T]||s.call(this,T,null,{dir:!0,createFolders:D}),this.files[T]};function S(T){return Object.prototype.toString.call(T)==="[object RegExp]"}var I={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(T){var D,R,M;for(D in this.files)M=this.files[D],(R=D.slice(this.root.length,D.length))&&D.slice(0,this.root.length)===this.root&&T(R,M)},filter:function(T){var D=[];return this.forEach(function(R,M){T(R,M)&&D.push(M)}),D},file:function(T,D,R){if(arguments.length!==1)return T=this.root+T,s.call(this,T,D,R),this;if(S(T)){var M=T;return this.filter(function(H,J){return!J.dir&&M.test(H)})}var O=this.files[this.root+T];return O&&!O.dir?O:null},folder:function(T){if(!T)return this;if(S(T))return this.filter(function(O,H){return H.dir&&T.test(O)});var D=this.root+T,R=v.call(this,D),M=this.clone();return M.root=R.name,M},remove:function(T){T=this.root+T;var D=this.files[T];if(D||(T.slice(-1)!=="/"&&(T+="/"),D=this.files[T]),D&&!D.dir)delete this.files[T];else for(var R=this.filter(function(O,H){return H.name.slice(0,T.length)===T}),M=0;M<R.length;M++)delete this.files[R[M].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(T){var D,R={};try{if((R=a.extend(T||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=R.type.toLowerCase(),R.compression=R.compression.toUpperCase(),R.type==="binarystring"&&(R.type="string"),!R.type)throw new Error("No output type specified.");a.checkSupport(R.type),R.platform!=="darwin"&&R.platform!=="freebsd"&&R.platform!=="linux"&&R.platform!=="sunos"||(R.platform="UNIX"),R.platform==="win32"&&(R.platform="DOS");var M=R.comment||this.comment||"";D=p.generateWorker(this,R,M)}catch(O){(D=new l("error")).error(O)}return new d(D,R.type||"string",R.mimeType)},generateAsync:function(T,D){return this.generateInternalStream(T).accumulate(D)},generateNodeStream:function(T,D){return(T=T||{}).type||(T.type="nodebuffer"),this.generateInternalStream(T).toNodejsStream(D)}};r.exports=I},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,r,n){r.exports=e("stream")},{stream:void 0}],17:[function(e,r,n){var s=e("./DataReader");function o(a){s.call(this,a);for(var l=0;l<this.data.length;l++)a[l]=255&a[l]}e("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data[this.zero+a]},o.prototype.lastIndexOfSignature=function(a){for(var l=a.charCodeAt(0),d=a.charCodeAt(1),h=a.charCodeAt(2),c=a.charCodeAt(3),m=this.length-4;0<=m;--m)if(this.data[m]===l&&this.data[m+1]===d&&this.data[m+2]===h&&this.data[m+3]===c)return m-this.zero;return-1},o.prototype.readAndCheckSignature=function(a){var l=a.charCodeAt(0),d=a.charCodeAt(1),h=a.charCodeAt(2),c=a.charCodeAt(3),m=this.readData(4);return l===m[0]&&d===m[1]&&h===m[2]&&c===m[3]},o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(e,r,n){var s=e("../utils");function o(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var l,d=0;for(this.checkOffset(a),l=this.index+a-1;l>=this.index;l--)d=(d<<8)+this.byteAt(l);return this.index+=a,d},readString:function(a){return s.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},r.exports=o},{"../utils":32}],19:[function(e,r,n){var s=e("./Uint8ArrayReader");function o(a){s.call(this,a)}e("../utils").inherits(o,s),o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,r,n){var s=e("./DataReader");function o(a){s.call(this,a)}e("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},o.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},o.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(e,r,n){var s=e("./ArrayReader");function o(a){s.call(this,a)}e("../utils").inherits(o,s),o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(e,r,n){var s=e("../utils"),o=e("../support"),a=e("./ArrayReader"),l=e("./StringReader"),d=e("./NodeBufferReader"),h=e("./Uint8ArrayReader");r.exports=function(c){var m=s.getTypeOf(c);return s.checkSupport(m),m!=="string"||o.uint8array?m==="nodebuffer"?new d(c):o.uint8array?new h(s.transformTo("uint8array",c)):new a(s.transformTo("array",c)):new l(c)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,r,n){n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,r,n){var s=e("./GenericWorker"),o=e("../utils");function a(l){s.call(this,"ConvertWorker to "+l),this.destType=l}o.inherits(a,s),a.prototype.processChunk=function(l){this.push({data:o.transformTo(this.destType,l.data),meta:l.meta})},r.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(e,r,n){var s=e("./GenericWorker"),o=e("../crc32");function a(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(a,s),a.prototype.processChunk=function(l){this.streamInfo.crc32=o(l.data,this.streamInfo.crc32||0),this.push(l)},r.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,r,n){var s=e("../utils"),o=e("./GenericWorker");function a(l){o.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}s.inherits(a,o),a.prototype.processChunk=function(l){if(l){var d=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=d+l.data.length}o.prototype.processChunk.call(this,l)},r.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(e,r,n){var s=e("../utils"),o=e("./GenericWorker");function a(l){o.call(this,"DataWorker");var d=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(h){d.dataIsReady=!0,d.data=h,d.max=h&&h.length||0,d.type=s.getTypeOf(h),d.isPaused||d._tickAndRepeat()},function(h){d.error(h)})}s.inherits(a,o),a.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,d=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,d);break;case"uint8array":l=this.data.subarray(this.index,d);break;case"array":case"nodebuffer":l=this.data.slice(this.index,d)}return this.index=d,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(e,r,n){function s(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,a){return this._listeners[o].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,a){if(this._listeners[o])for(var l=0;l<this._listeners[o].length;l++)this._listeners[o][l].call(this,a)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var a=this;return o.on("data",function(l){a.processChunk(l)}),o.on("end",function(){a.end()}),o.on("error",function(l){a.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,a){return this.extraStreamInfo[o]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=s},{}],29:[function(e,r,n){var s=e("../utils"),o=e("./ConvertWorker"),a=e("./GenericWorker"),l=e("../base64"),d=e("../support"),h=e("../external"),c=null;if(d.nodestream)try{c=e("../nodejs/NodejsStreamOutputAdapter")}catch{}function m(g,f){return new h.Promise(function(b,y){var v=[],S=g._internalType,I=g._outputType,T=g._mimeType;g.on("data",function(D,R){v.push(D),f&&f(R)}).on("error",function(D){v=[],y(D)}).on("end",function(){try{var D=function(R,M,O){switch(R){case"blob":return s.newBlob(s.transformTo("arraybuffer",M),O);case"base64":return l.encode(M);default:return s.transformTo(R,M)}}(I,function(R,M){var O,H=0,J=null,E=0;for(O=0;O<M.length;O++)E+=M[O].length;switch(R){case"string":return M.join("");case"array":return Array.prototype.concat.apply([],M);case"uint8array":for(J=new Uint8Array(E),O=0;O<M.length;O++)J.set(M[O],H),H+=M[O].length;return J;case"nodebuffer":return Buffer.concat(M);default:throw new Error("concat : unsupported type '"+R+"'")}}(S,v),T);b(D)}catch(R){y(R)}v=[]}).resume()})}function p(g,f,b){var y=f;switch(f){case"blob":case"arraybuffer":y="uint8array";break;case"base64":y="string"}try{this._internalType=y,this._outputType=f,this._mimeType=b,s.checkSupport(y),this._worker=g.pipe(new o(y)),g.lock()}catch(v){this._worker=new a("error"),this._worker.error(v)}}p.prototype={accumulate:function(g){return m(this,g)},on:function(g,f){var b=this;return g==="data"?this._worker.on(g,function(y){f.call(b,y.data,y.meta)}):this._worker.on(g,function(){s.delay(f,arguments,b)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(g){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:this._outputType!=="nodebuffer"},g)}},r.exports=p},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,r,n){if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",n.nodebuffer=typeof Buffer<"u",n.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")n.blob=!1;else{var s=new ArrayBuffer(0);try{n.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(s),n.blob=o.getBlob("application/zip").size===0}catch{n.blob=!1}}}try{n.nodestream=!!e("readable-stream").Readable}catch{n.nodestream=!1}},{"readable-stream":16}],31:[function(e,r,n){for(var s=e("./utils"),o=e("./support"),a=e("./nodejsUtils"),l=e("./stream/GenericWorker"),d=new Array(256),h=0;h<256;h++)d[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;d[254]=d[254]=1;function c(){l.call(this,"utf-8 decode"),this.leftOver=null}function m(){l.call(this,"utf-8 encode")}n.utf8encode=function(p){return o.nodebuffer?a.newBufferFrom(p,"utf-8"):function(g){var f,b,y,v,S,I=g.length,T=0;for(v=0;v<I;v++)(64512&(b=g.charCodeAt(v)))==55296&&v+1<I&&(64512&(y=g.charCodeAt(v+1)))==56320&&(b=65536+(b-55296<<10)+(y-56320),v++),T+=b<128?1:b<2048?2:b<65536?3:4;for(f=o.uint8array?new Uint8Array(T):new Array(T),v=S=0;S<T;v++)(64512&(b=g.charCodeAt(v)))==55296&&v+1<I&&(64512&(y=g.charCodeAt(v+1)))==56320&&(b=65536+(b-55296<<10)+(y-56320),v++),b<128?f[S++]=b:(b<2048?f[S++]=192|b>>>6:(b<65536?f[S++]=224|b>>>12:(f[S++]=240|b>>>18,f[S++]=128|b>>>12&63),f[S++]=128|b>>>6&63),f[S++]=128|63&b);return f}(p)},n.utf8decode=function(p){return o.nodebuffer?s.transformTo("nodebuffer",p).toString("utf-8"):function(g){var f,b,y,v,S=g.length,I=new Array(2*S);for(f=b=0;f<S;)if((y=g[f++])<128)I[b++]=y;else if(4<(v=d[y]))I[b++]=65533,f+=v-1;else{for(y&=v===2?31:v===3?15:7;1<v&&f<S;)y=y<<6|63&g[f++],v--;1<v?I[b++]=65533:y<65536?I[b++]=y:(y-=65536,I[b++]=55296|y>>10&1023,I[b++]=56320|1023&y)}return I.length!==b&&(I.subarray?I=I.subarray(0,b):I.length=b),s.applyFromCharCode(I)}(p=s.transformTo(o.uint8array?"uint8array":"array",p))},s.inherits(c,l),c.prototype.processChunk=function(p){var g=s.transformTo(o.uint8array?"uint8array":"array",p.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var f=g;(g=new Uint8Array(f.length+this.leftOver.length)).set(this.leftOver,0),g.set(f,this.leftOver.length)}else g=this.leftOver.concat(g);this.leftOver=null}var b=function(v,S){var I;for((S=S||v.length)>v.length&&(S=v.length),I=S-1;0<=I&&(192&v[I])==128;)I--;return I<0||I===0?S:I+d[v[I]]>S?I:S}(g),y=g;b!==g.length&&(o.uint8array?(y=g.subarray(0,b),this.leftOver=g.subarray(b,g.length)):(y=g.slice(0,b),this.leftOver=g.slice(b,g.length))),this.push({data:n.utf8decode(y),meta:p.meta})},c.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=c,s.inherits(m,l),m.prototype.processChunk=function(p){this.push({data:n.utf8encode(p.data),meta:p.meta})},n.Utf8EncodeWorker=m},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,r,n){var s=e("./support"),o=e("./base64"),a=e("./nodejsUtils"),l=e("./external");function d(f){return f}function h(f,b){for(var y=0;y<f.length;++y)b[y]=255&f.charCodeAt(y);return b}e("setimmediate"),n.newBlob=function(f,b){n.checkSupport("blob");try{return new Blob([f],{type:b})}catch{try{var y=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return y.append(f),y.getBlob(b)}catch{throw new Error("Bug : can't construct the Blob.")}}};var c={stringifyByChunk:function(f,b,y){var v=[],S=0,I=f.length;if(I<=y)return String.fromCharCode.apply(null,f);for(;S<I;)b==="array"||b==="nodebuffer"?v.push(String.fromCharCode.apply(null,f.slice(S,Math.min(S+y,I)))):v.push(String.fromCharCode.apply(null,f.subarray(S,Math.min(S+y,I)))),S+=y;return v.join("")},stringifyByChar:function(f){for(var b="",y=0;y<f.length;y++)b+=String.fromCharCode(f[y]);return b},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function m(f){var b=65536,y=n.getTypeOf(f),v=!0;if(y==="uint8array"?v=c.applyCanBeUsed.uint8array:y==="nodebuffer"&&(v=c.applyCanBeUsed.nodebuffer),v)for(;1<b;)try{return c.stringifyByChunk(f,y,b)}catch{b=Math.floor(b/2)}return c.stringifyByChar(f)}function p(f,b){for(var y=0;y<f.length;y++)b[y]=f[y];return b}n.applyFromCharCode=m;var g={};g.string={string:d,array:function(f){return h(f,new Array(f.length))},arraybuffer:function(f){return g.string.uint8array(f).buffer},uint8array:function(f){return h(f,new Uint8Array(f.length))},nodebuffer:function(f){return h(f,a.allocBuffer(f.length))}},g.array={string:m,array:d,arraybuffer:function(f){return new Uint8Array(f).buffer},uint8array:function(f){return new Uint8Array(f)},nodebuffer:function(f){return a.newBufferFrom(f)}},g.arraybuffer={string:function(f){return m(new Uint8Array(f))},array:function(f){return p(new Uint8Array(f),new Array(f.byteLength))},arraybuffer:d,uint8array:function(f){return new Uint8Array(f)},nodebuffer:function(f){return a.newBufferFrom(new Uint8Array(f))}},g.uint8array={string:m,array:function(f){return p(f,new Array(f.length))},arraybuffer:function(f){return f.buffer},uint8array:d,nodebuffer:function(f){return a.newBufferFrom(f)}},g.nodebuffer={string:m,array:function(f){return p(f,new Array(f.length))},arraybuffer:function(f){return g.nodebuffer.uint8array(f).buffer},uint8array:function(f){return p(f,new Uint8Array(f.length))},nodebuffer:d},n.transformTo=function(f,b){if(b=b||"",!f)return b;n.checkSupport(f);var y=n.getTypeOf(b);return g[y][f](b)},n.resolve=function(f){for(var b=f.split("/"),y=[],v=0;v<b.length;v++){var S=b[v];S==="."||S===""&&v!==0&&v!==b.length-1||(S===".."?y.pop():y.push(S))}return y.join("/")},n.getTypeOf=function(f){return typeof f=="string"?"string":Object.prototype.toString.call(f)==="[object Array]"?"array":s.nodebuffer&&a.isBuffer(f)?"nodebuffer":s.uint8array&&f instanceof Uint8Array?"uint8array":s.arraybuffer&&f instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(f){if(!s[f.toLowerCase()])throw new Error(f+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(f){var b,y,v="";for(y=0;y<(f||"").length;y++)v+="\\x"+((b=f.charCodeAt(y))<16?"0":"")+b.toString(16).toUpperCase();return v},n.delay=function(f,b,y){setImmediate(function(){f.apply(y||null,b||[])})},n.inherits=function(f,b){function y(){}y.prototype=b.prototype,f.prototype=new y},n.extend=function(){var f,b,y={};for(f=0;f<arguments.length;f++)for(b in arguments[f])Object.prototype.hasOwnProperty.call(arguments[f],b)&&y[b]===void 0&&(y[b]=arguments[f][b]);return y},n.prepareContent=function(f,b,y,v,S){return l.Promise.resolve(b).then(function(I){return s.blob&&(I instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(I))!==-1)&&typeof FileReader<"u"?new l.Promise(function(T,D){var R=new FileReader;R.onload=function(M){T(M.target.result)},R.onerror=function(M){D(M.target.error)},R.readAsArrayBuffer(I)}):I}).then(function(I){var T=n.getTypeOf(I);return T?(T==="arraybuffer"?I=n.transformTo("uint8array",I):T==="string"&&(S?I=o.decode(I):y&&v!==!0&&(I=function(D){return h(D,s.uint8array?new Uint8Array(D.length):new Array(D.length))}(I))),I):l.Promise.reject(new Error("Can't read the data of '"+f+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,r,n){var s=e("./reader/readerFor"),o=e("./utils"),a=e("./signature"),l=e("./zipEntry"),d=e("./support");function h(c){this.files=[],this.loadOptions=c}h.prototype={checkSignature:function(c){if(!this.reader.readAndCheckSignature(c)){this.reader.index-=4;var m=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(m)+", expected "+o.pretty(c)+")")}},isSignature:function(c,m){var p=this.reader.index;this.reader.setIndex(c);var g=this.reader.readString(4)===m;return this.reader.setIndex(p),g},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var c=this.reader.readData(this.zipCommentLength),m=d.uint8array?"uint8array":"array",p=o.transformTo(m,c);this.zipComment=this.loadOptions.decodeFileName(p)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var c,m,p,g=this.zip64EndOfCentralSize-44;0<g;)c=this.reader.readInt(2),m=this.reader.readInt(4),p=this.reader.readData(m),this.zip64ExtensibleData[c]={id:c,length:m,value:p}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var c,m;for(c=0;c<this.files.length;c++)m=this.files[c],this.reader.setIndex(m.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),m.readLocalPart(this.reader),m.handleUTF8(),m.processAttributes()},readCentralDir:function(){var c;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(c=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(c);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var c=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(c<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(c);var m=c;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(c=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(c),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var p=this.centralDirOffset+this.centralDirSize;this.zip64&&(p+=20,p+=12+this.zip64EndOfCentralSize);var g=m-p;if(0<g)this.isSignature(m,a.CENTRAL_FILE_HEADER)||(this.reader.zero=g);else if(g<0)throw new Error("Corrupted zip: missing "+Math.abs(g)+" bytes.")},prepareReader:function(c){this.reader=s(c)},load:function(c){this.prepareReader(c),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=h},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,r,n){var s=e("./reader/readerFor"),o=e("./utils"),a=e("./compressedObject"),l=e("./crc32"),d=e("./utf8"),h=e("./compressions"),c=e("./support");function m(p,g){this.options=p,this.loadOptions=g}m.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(p){var g,f;if(p.skip(22),this.fileNameLength=p.readInt(2),f=p.readInt(2),this.fileName=p.readData(this.fileNameLength),p.skip(f),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((g=function(b){for(var y in h)if(Object.prototype.hasOwnProperty.call(h,y)&&h[y].magic===b)return h[y];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,g,p.readData(this.compressedSize))},readCentralPart:function(p){this.versionMadeBy=p.readInt(2),p.skip(2),this.bitFlag=p.readInt(2),this.compressionMethod=p.readString(2),this.date=p.readDate(),this.crc32=p.readInt(4),this.compressedSize=p.readInt(4),this.uncompressedSize=p.readInt(4);var g=p.readInt(2);if(this.extraFieldsLength=p.readInt(2),this.fileCommentLength=p.readInt(2),this.diskNumberStart=p.readInt(2),this.internalFileAttributes=p.readInt(2),this.externalFileAttributes=p.readInt(4),this.localHeaderOffset=p.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");p.skip(g),this.readExtraFields(p),this.parseZIP64ExtraField(p),this.fileComment=p.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var p=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),p==0&&(this.dosPermissions=63&this.externalFileAttributes),p==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var p=s(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=p.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=p.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=p.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=p.readInt(4))}},readExtraFields:function(p){var g,f,b,y=p.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});p.index+4<y;)g=p.readInt(2),f=p.readInt(2),b=p.readData(f),this.extraFields[g]={id:g,length:f,value:b};p.setIndex(y)},handleUTF8:function(){var p=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=d.utf8decode(this.fileName),this.fileCommentStr=d.utf8decode(this.fileComment);else{var g=this.findExtraFieldUnicodePath();if(g!==null)this.fileNameStr=g;else{var f=o.transformTo(p,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(f)}var b=this.findExtraFieldUnicodeComment();if(b!==null)this.fileCommentStr=b;else{var y=o.transformTo(p,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(y)}}},findExtraFieldUnicodePath:function(){var p=this.extraFields[28789];if(p){var g=s(p.value);return g.readInt(1)!==1||l(this.fileName)!==g.readInt(4)?null:d.utf8decode(g.readData(p.length-5))}return null},findExtraFieldUnicodeComment:function(){var p=this.extraFields[25461];if(p){var g=s(p.value);return g.readInt(1)!==1||l(this.fileComment)!==g.readInt(4)?null:d.utf8decode(g.readData(p.length-5))}return null}},r.exports=m},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,r,n){function s(g,f,b){this.name=g,this.dir=b.dir,this.date=b.date,this.comment=b.comment,this.unixPermissions=b.unixPermissions,this.dosPermissions=b.dosPermissions,this._data=f,this._dataBinary=b.binary,this.options={compression:b.compression,compressionOptions:b.compressionOptions}}var o=e("./stream/StreamHelper"),a=e("./stream/DataWorker"),l=e("./utf8"),d=e("./compressedObject"),h=e("./stream/GenericWorker");s.prototype={internalStream:function(g){var f=null,b="string";try{if(!g)throw new Error("No output type specified.");var y=(b=g.toLowerCase())==="string"||b==="text";b!=="binarystring"&&b!=="text"||(b="string"),f=this._decompressWorker();var v=!this._dataBinary;v&&!y&&(f=f.pipe(new l.Utf8EncodeWorker)),!v&&y&&(f=f.pipe(new l.Utf8DecodeWorker))}catch(S){(f=new h("error")).error(S)}return new o(f,b,"")},async:function(g,f){return this.internalStream(g).accumulate(f)},nodeStream:function(g,f){return this.internalStream(g||"nodebuffer").toNodejsStream(f)},_compressWorker:function(g,f){if(this._data instanceof d&&this._data.compression.magic===g.magic)return this._data.getCompressedWorker();var b=this._decompressWorker();return this._dataBinary||(b=b.pipe(new l.Utf8EncodeWorker)),d.createWorkerFrom(b,g,f)},_decompressWorker:function(){return this._data instanceof d?this._data.getContentWorker():this._data instanceof h?this._data:new a(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],m=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},p=0;p<c.length;p++)s.prototype[c[p]]=m;r.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,r,n){(function(s){var o,a,l=s.MutationObserver||s.WebKitMutationObserver;if(l){var d=0,h=new l(g),c=s.document.createTextNode("");h.observe(c,{characterData:!0}),o=function(){c.data=d=++d%2}}else if(s.setImmediate||s.MessageChannel===void 0)o="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var f=s.document.createElement("script");f.onreadystatechange=function(){g(),f.onreadystatechange=null,f.parentNode.removeChild(f),f=null},s.document.documentElement.appendChild(f)}:function(){setTimeout(g,0)};else{var m=new s.MessageChannel;m.port1.onmessage=g,o=function(){m.port2.postMessage(0)}}var p=[];function g(){var f,b;a=!0;for(var y=p.length;y;){for(b=p,p=[],f=-1;++f<y;)b[f]();y=p.length}a=!1}r.exports=function(f){p.push(f)!==1||a||o()}}).call(this,typeof Sn<"u"?Sn:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(e,r,n){var s=e("immediate");function o(){}var a={},l=["REJECTED"],d=["FULFILLED"],h=["PENDING"];function c(y){if(typeof y!="function")throw new TypeError("resolver must be a function");this.state=h,this.queue=[],this.outcome=void 0,y!==o&&f(this,y)}function m(y,v,S){this.promise=y,typeof v=="function"&&(this.onFulfilled=v,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}function p(y,v,S){s(function(){var I;try{I=v(S)}catch(T){return a.reject(y,T)}I===y?a.reject(y,new TypeError("Cannot resolve promise with itself")):a.resolve(y,I)})}function g(y){var v=y&&y.then;if(y&&(typeof y=="object"||typeof y=="function")&&typeof v=="function")return function(){v.apply(y,arguments)}}function f(y,v){var S=!1;function I(R){S||(S=!0,a.reject(y,R))}function T(R){S||(S=!0,a.resolve(y,R))}var D=b(function(){v(T,I)});D.status==="error"&&I(D.value)}function b(y,v){var S={};try{S.value=y(v),S.status="success"}catch(I){S.status="error",S.value=I}return S}(r.exports=c).prototype.finally=function(y){if(typeof y!="function")return this;var v=this.constructor;return this.then(function(S){return v.resolve(y()).then(function(){return S})},function(S){return v.resolve(y()).then(function(){throw S})})},c.prototype.catch=function(y){return this.then(null,y)},c.prototype.then=function(y,v){if(typeof y!="function"&&this.state===d||typeof v!="function"&&this.state===l)return this;var S=new this.constructor(o);return this.state!==h?p(S,this.state===d?y:v,this.outcome):this.queue.push(new m(S,y,v)),S},m.prototype.callFulfilled=function(y){a.resolve(this.promise,y)},m.prototype.otherCallFulfilled=function(y){p(this.promise,this.onFulfilled,y)},m.prototype.callRejected=function(y){a.reject(this.promise,y)},m.prototype.otherCallRejected=function(y){p(this.promise,this.onRejected,y)},a.resolve=function(y,v){var S=b(g,v);if(S.status==="error")return a.reject(y,S.value);var I=S.value;if(I)f(y,I);else{y.state=d,y.outcome=v;for(var T=-1,D=y.queue.length;++T<D;)y.queue[T].callFulfilled(v)}return y},a.reject=function(y,v){y.state=l,y.outcome=v;for(var S=-1,I=y.queue.length;++S<I;)y.queue[S].callRejected(v);return y},c.resolve=function(y){return y instanceof this?y:a.resolve(new this(o),y)},c.reject=function(y){var v=new this(o);return a.reject(v,y)},c.all=function(y){var v=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=y.length,I=!1;if(!S)return this.resolve([]);for(var T=new Array(S),D=0,R=-1,M=new this(o);++R<S;)O(y[R],R);return M;function O(H,J){v.resolve(H).then(function(E){T[J]=E,++D!==S||I||(I=!0,a.resolve(M,T))},function(E){I||(I=!0,a.reject(M,E))})}},c.race=function(y){var v=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=y.length,I=!1;if(!S)return this.resolve([]);for(var T=-1,D=new this(o);++T<S;)R=y[T],v.resolve(R).then(function(M){I||(I=!0,a.resolve(D,M))},function(M){I||(I=!0,a.reject(D,M))});var R;return D}},{immediate:36}],38:[function(e,r,n){var s={};(0,e("./lib/utils/common").assign)(s,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),r.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,r,n){var s=e("./zlib/deflate"),o=e("./utils/common"),a=e("./utils/strings"),l=e("./zlib/messages"),d=e("./zlib/zstream"),h=Object.prototype.toString,c=0,m=-1,p=0,g=8;function f(y){if(!(this instanceof f))return new f(y);this.options=o.assign({level:m,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},y||{});var v=this.options;v.raw&&0<v.windowBits?v.windowBits=-v.windowBits:v.gzip&&0<v.windowBits&&v.windowBits<16&&(v.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var S=s.deflateInit2(this.strm,v.level,v.method,v.windowBits,v.memLevel,v.strategy);if(S!==c)throw new Error(l[S]);if(v.header&&s.deflateSetHeader(this.strm,v.header),v.dictionary){var I;if(I=typeof v.dictionary=="string"?a.string2buf(v.dictionary):h.call(v.dictionary)==="[object ArrayBuffer]"?new Uint8Array(v.dictionary):v.dictionary,(S=s.deflateSetDictionary(this.strm,I))!==c)throw new Error(l[S]);this._dict_set=!0}}function b(y,v){var S=new f(v);if(S.push(y,!0),S.err)throw S.msg||l[S.err];return S.result}f.prototype.push=function(y,v){var S,I,T=this.strm,D=this.options.chunkSize;if(this.ended)return!1;I=v===~~v?v:v===!0?4:0,typeof y=="string"?T.input=a.string2buf(y):h.call(y)==="[object ArrayBuffer]"?T.input=new Uint8Array(y):T.input=y,T.next_in=0,T.avail_in=T.input.length;do{if(T.avail_out===0&&(T.output=new o.Buf8(D),T.next_out=0,T.avail_out=D),(S=s.deflate(T,I))!==1&&S!==c)return this.onEnd(S),!(this.ended=!0);T.avail_out!==0&&(T.avail_in!==0||I!==4&&I!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(o.shrinkBuf(T.output,T.next_out))):this.onData(o.shrinkBuf(T.output,T.next_out)))}while((0<T.avail_in||T.avail_out===0)&&S!==1);return I===4?(S=s.deflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===c):I!==2||(this.onEnd(c),!(T.avail_out=0))},f.prototype.onData=function(y){this.chunks.push(y)},f.prototype.onEnd=function(y){y===c&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg},n.Deflate=f,n.deflate=b,n.deflateRaw=function(y,v){return(v=v||{}).raw=!0,b(y,v)},n.gzip=function(y,v){return(v=v||{}).gzip=!0,b(y,v)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,r,n){var s=e("./zlib/inflate"),o=e("./utils/common"),a=e("./utils/strings"),l=e("./zlib/constants"),d=e("./zlib/messages"),h=e("./zlib/zstream"),c=e("./zlib/gzheader"),m=Object.prototype.toString;function p(f){if(!(this instanceof p))return new p(f);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},f||{});var b=this.options;b.raw&&0<=b.windowBits&&b.windowBits<16&&(b.windowBits=-b.windowBits,b.windowBits===0&&(b.windowBits=-15)),!(0<=b.windowBits&&b.windowBits<16)||f&&f.windowBits||(b.windowBits+=32),15<b.windowBits&&b.windowBits<48&&!(15&b.windowBits)&&(b.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var y=s.inflateInit2(this.strm,b.windowBits);if(y!==l.Z_OK)throw new Error(d[y]);this.header=new c,s.inflateGetHeader(this.strm,this.header)}function g(f,b){var y=new p(b);if(y.push(f,!0),y.err)throw y.msg||d[y.err];return y.result}p.prototype.push=function(f,b){var y,v,S,I,T,D,R=this.strm,M=this.options.chunkSize,O=this.options.dictionary,H=!1;if(this.ended)return!1;v=b===~~b?b:b===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof f=="string"?R.input=a.binstring2buf(f):m.call(f)==="[object ArrayBuffer]"?R.input=new Uint8Array(f):R.input=f,R.next_in=0,R.avail_in=R.input.length;do{if(R.avail_out===0&&(R.output=new o.Buf8(M),R.next_out=0,R.avail_out=M),(y=s.inflate(R,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&O&&(D=typeof O=="string"?a.string2buf(O):m.call(O)==="[object ArrayBuffer]"?new Uint8Array(O):O,y=s.inflateSetDictionary(this.strm,D)),y===l.Z_BUF_ERROR&&H===!0&&(y=l.Z_OK,H=!1),y!==l.Z_STREAM_END&&y!==l.Z_OK)return this.onEnd(y),!(this.ended=!0);R.next_out&&(R.avail_out!==0&&y!==l.Z_STREAM_END&&(R.avail_in!==0||v!==l.Z_FINISH&&v!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(S=a.utf8border(R.output,R.next_out),I=R.next_out-S,T=a.buf2string(R.output,S),R.next_out=I,R.avail_out=M-I,I&&o.arraySet(R.output,R.output,S,I,0),this.onData(T)):this.onData(o.shrinkBuf(R.output,R.next_out)))),R.avail_in===0&&R.avail_out===0&&(H=!0)}while((0<R.avail_in||R.avail_out===0)&&y!==l.Z_STREAM_END);return y===l.Z_STREAM_END&&(v=l.Z_FINISH),v===l.Z_FINISH?(y=s.inflateEnd(this.strm),this.onEnd(y),this.ended=!0,y===l.Z_OK):v!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(R.avail_out=0))},p.prototype.onData=function(f){this.chunks.push(f)},p.prototype.onEnd=function(f){f===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=f,this.msg=this.strm.msg},n.Inflate=p,n.inflate=g,n.inflateRaw=function(f,b){return(b=b||{}).raw=!0,g(f,b)},n.ungzip=g},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,r,n){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";n.assign=function(l){for(var d=Array.prototype.slice.call(arguments,1);d.length;){var h=d.shift();if(h){if(typeof h!="object")throw new TypeError(h+"must be non-object");for(var c in h)h.hasOwnProperty(c)&&(l[c]=h[c])}}return l},n.shrinkBuf=function(l,d){return l.length===d?l:l.subarray?l.subarray(0,d):(l.length=d,l)};var o={arraySet:function(l,d,h,c,m){if(d.subarray&&l.subarray)l.set(d.subarray(h,h+c),m);else for(var p=0;p<c;p++)l[m+p]=d[h+p]},flattenChunks:function(l){var d,h,c,m,p,g;for(d=c=0,h=l.length;d<h;d++)c+=l[d].length;for(g=new Uint8Array(c),d=m=0,h=l.length;d<h;d++)p=l[d],g.set(p,m),m+=p.length;return g}},a={arraySet:function(l,d,h,c,m){for(var p=0;p<c;p++)l[m+p]=d[h+p]},flattenChunks:function(l){return[].concat.apply([],l)}};n.setTyped=function(l){l?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,o)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,a))},n.setTyped(s)},{}],42:[function(e,r,n){var s=e("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var l=new s.Buf8(256),d=0;d<256;d++)l[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;function h(c,m){if(m<65537&&(c.subarray&&a||!c.subarray&&o))return String.fromCharCode.apply(null,s.shrinkBuf(c,m));for(var p="",g=0;g<m;g++)p+=String.fromCharCode(c[g]);return p}l[254]=l[254]=1,n.string2buf=function(c){var m,p,g,f,b,y=c.length,v=0;for(f=0;f<y;f++)(64512&(p=c.charCodeAt(f)))==55296&&f+1<y&&(64512&(g=c.charCodeAt(f+1)))==56320&&(p=65536+(p-55296<<10)+(g-56320),f++),v+=p<128?1:p<2048?2:p<65536?3:4;for(m=new s.Buf8(v),f=b=0;b<v;f++)(64512&(p=c.charCodeAt(f)))==55296&&f+1<y&&(64512&(g=c.charCodeAt(f+1)))==56320&&(p=65536+(p-55296<<10)+(g-56320),f++),p<128?m[b++]=p:(p<2048?m[b++]=192|p>>>6:(p<65536?m[b++]=224|p>>>12:(m[b++]=240|p>>>18,m[b++]=128|p>>>12&63),m[b++]=128|p>>>6&63),m[b++]=128|63&p);return m},n.buf2binstring=function(c){return h(c,c.length)},n.binstring2buf=function(c){for(var m=new s.Buf8(c.length),p=0,g=m.length;p<g;p++)m[p]=c.charCodeAt(p);return m},n.buf2string=function(c,m){var p,g,f,b,y=m||c.length,v=new Array(2*y);for(p=g=0;p<y;)if((f=c[p++])<128)v[g++]=f;else if(4<(b=l[f]))v[g++]=65533,p+=b-1;else{for(f&=b===2?31:b===3?15:7;1<b&&p<y;)f=f<<6|63&c[p++],b--;1<b?v[g++]=65533:f<65536?v[g++]=f:(f-=65536,v[g++]=55296|f>>10&1023,v[g++]=56320|1023&f)}return h(v,g)},n.utf8border=function(c,m){var p;for((m=m||c.length)>c.length&&(m=c.length),p=m-1;0<=p&&(192&c[p])==128;)p--;return p<0||p===0?m:p+l[c[p]]>m?p:m}},{"./common":41}],43:[function(e,r,n){r.exports=function(s,o,a,l){for(var d=65535&s|0,h=s>>>16&65535|0,c=0;a!==0;){for(a-=c=2e3<a?2e3:a;h=h+(d=d+o[l++]|0)|0,--c;);d%=65521,h%=65521}return d|h<<16|0}},{}],44:[function(e,r,n){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,r,n){var s=function(){for(var o,a=[],l=0;l<256;l++){o=l;for(var d=0;d<8;d++)o=1&o?3988292384^o>>>1:o>>>1;a[l]=o}return a}();r.exports=function(o,a,l,d){var h=s,c=d+l;o^=-1;for(var m=d;m<c;m++)o=o>>>8^h[255&(o^a[m])];return-1^o}},{}],46:[function(e,r,n){var s,o=e("../utils/common"),a=e("./trees"),l=e("./adler32"),d=e("./crc32"),h=e("./messages"),c=0,m=4,p=0,g=-2,f=-1,b=4,y=2,v=8,S=9,I=286,T=30,D=19,R=2*I+1,M=15,O=3,H=258,J=H+O+1,E=42,N=113,_=1,$=2,et=3,U=4;function ot(u,B){return u.msg=h[B],B}function W(u){return(u<<1)-(4<u?9:0)}function st(u){for(var B=u.length;0<=--B;)u[B]=0}function F(u){var B=u.state,L=B.pending;L>u.avail_out&&(L=u.avail_out),L!==0&&(o.arraySet(u.output,B.pending_buf,B.pending_out,L,u.next_out),u.next_out+=L,B.pending_out+=L,u.total_out+=L,u.avail_out-=L,B.pending-=L,B.pending===0&&(B.pending_out=0))}function z(u,B){a._tr_flush_block(u,0<=u.block_start?u.block_start:-1,u.strstart-u.block_start,B),u.block_start=u.strstart,F(u.strm)}function rt(u,B){u.pending_buf[u.pending++]=B}function Q(u,B){u.pending_buf[u.pending++]=B>>>8&255,u.pending_buf[u.pending++]=255&B}function Z(u,B){var L,A,C=u.max_chain_length,P=u.strstart,j=u.prev_length,V=u.nice_match,k=u.strstart>u.w_size-J?u.strstart-(u.w_size-J):0,q=u.window,tt=u.w_mask,Y=u.prev,nt=u.strstart+H,wt=q[P+j-1],ct=q[P+j];u.prev_length>=u.good_match&&(C>>=2),V>u.lookahead&&(V=u.lookahead);do if(q[(L=B)+j]===ct&&q[L+j-1]===wt&&q[L]===q[P]&&q[++L]===q[P+1]){P+=2,L++;do;while(q[++P]===q[++L]&&q[++P]===q[++L]&&q[++P]===q[++L]&&q[++P]===q[++L]&&q[++P]===q[++L]&&q[++P]===q[++L]&&q[++P]===q[++L]&&q[++P]===q[++L]&&P<nt);if(A=H-(nt-P),P=nt-H,j<A){if(u.match_start=B,V<=(j=A))break;wt=q[P+j-1],ct=q[P+j]}}while((B=Y[B&tt])>k&&--C!=0);return j<=u.lookahead?j:u.lookahead}function St(u){var B,L,A,C,P,j,V,k,q,tt,Y=u.w_size;do{if(C=u.window_size-u.lookahead-u.strstart,u.strstart>=Y+(Y-J)){for(o.arraySet(u.window,u.window,Y,Y,0),u.match_start-=Y,u.strstart-=Y,u.block_start-=Y,B=L=u.hash_size;A=u.head[--B],u.head[B]=Y<=A?A-Y:0,--L;);for(B=L=Y;A=u.prev[--B],u.prev[B]=Y<=A?A-Y:0,--L;);C+=Y}if(u.strm.avail_in===0)break;if(j=u.strm,V=u.window,k=u.strstart+u.lookahead,q=C,tt=void 0,tt=j.avail_in,q<tt&&(tt=q),L=tt===0?0:(j.avail_in-=tt,o.arraySet(V,j.input,j.next_in,tt,k),j.state.wrap===1?j.adler=l(j.adler,V,tt,k):j.state.wrap===2&&(j.adler=d(j.adler,V,tt,k)),j.next_in+=tt,j.total_in+=tt,tt),u.lookahead+=L,u.lookahead+u.insert>=O)for(P=u.strstart-u.insert,u.ins_h=u.window[P],u.ins_h=(u.ins_h<<u.hash_shift^u.window[P+1])&u.hash_mask;u.insert&&(u.ins_h=(u.ins_h<<u.hash_shift^u.window[P+O-1])&u.hash_mask,u.prev[P&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=P,P++,u.insert--,!(u.lookahead+u.insert<O)););}while(u.lookahead<J&&u.strm.avail_in!==0)}function zt(u,B){for(var L,A;;){if(u.lookahead<J){if(St(u),u.lookahead<J&&B===c)return _;if(u.lookahead===0)break}if(L=0,u.lookahead>=O&&(u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+O-1])&u.hash_mask,L=u.prev[u.strstart&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=u.strstart),L!==0&&u.strstart-L<=u.w_size-J&&(u.match_length=Z(u,L)),u.match_length>=O)if(A=a._tr_tally(u,u.strstart-u.match_start,u.match_length-O),u.lookahead-=u.match_length,u.match_length<=u.max_lazy_match&&u.lookahead>=O){for(u.match_length--;u.strstart++,u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+O-1])&u.hash_mask,L=u.prev[u.strstart&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=u.strstart,--u.match_length!=0;);u.strstart++}else u.strstart+=u.match_length,u.match_length=0,u.ins_h=u.window[u.strstart],u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+1])&u.hash_mask;else A=a._tr_tally(u,0,u.window[u.strstart]),u.lookahead--,u.strstart++;if(A&&(z(u,!1),u.strm.avail_out===0))return _}return u.insert=u.strstart<O-1?u.strstart:O-1,B===m?(z(u,!0),u.strm.avail_out===0?et:U):u.last_lit&&(z(u,!1),u.strm.avail_out===0)?_:$}function dt(u,B){for(var L,A,C;;){if(u.lookahead<J){if(St(u),u.lookahead<J&&B===c)return _;if(u.lookahead===0)break}if(L=0,u.lookahead>=O&&(u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+O-1])&u.hash_mask,L=u.prev[u.strstart&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=u.strstart),u.prev_length=u.match_length,u.prev_match=u.match_start,u.match_length=O-1,L!==0&&u.prev_length<u.max_lazy_match&&u.strstart-L<=u.w_size-J&&(u.match_length=Z(u,L),u.match_length<=5&&(u.strategy===1||u.match_length===O&&4096<u.strstart-u.match_start)&&(u.match_length=O-1)),u.prev_length>=O&&u.match_length<=u.prev_length){for(C=u.strstart+u.lookahead-O,A=a._tr_tally(u,u.strstart-1-u.prev_match,u.prev_length-O),u.lookahead-=u.prev_length-1,u.prev_length-=2;++u.strstart<=C&&(u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+O-1])&u.hash_mask,L=u.prev[u.strstart&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=u.strstart),--u.prev_length!=0;);if(u.match_available=0,u.match_length=O-1,u.strstart++,A&&(z(u,!1),u.strm.avail_out===0))return _}else if(u.match_available){if((A=a._tr_tally(u,0,u.window[u.strstart-1]))&&z(u,!1),u.strstart++,u.lookahead--,u.strm.avail_out===0)return _}else u.match_available=1,u.strstart++,u.lookahead--}return u.match_available&&(A=a._tr_tally(u,0,u.window[u.strstart-1]),u.match_available=0),u.insert=u.strstart<O-1?u.strstart:O-1,B===m?(z(u,!0),u.strm.avail_out===0?et:U):u.last_lit&&(z(u,!1),u.strm.avail_out===0)?_:$}function ft(u,B,L,A,C){this.good_length=u,this.max_lazy=B,this.nice_length=L,this.max_chain=A,this.func=C}function Ft(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*R),this.dyn_dtree=new o.Buf16(2*(2*T+1)),this.bl_tree=new o.Buf16(2*(2*D+1)),st(this.dyn_ltree),st(this.dyn_dtree),st(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(M+1),this.heap=new o.Buf16(2*I+1),st(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*I+1),st(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Et(u){var B;return u&&u.state?(u.total_in=u.total_out=0,u.data_type=y,(B=u.state).pending=0,B.pending_out=0,B.wrap<0&&(B.wrap=-B.wrap),B.status=B.wrap?E:N,u.adler=B.wrap===2?0:1,B.last_flush=c,a._tr_init(B),p):ot(u,g)}function fe(u){var B=Et(u);return B===p&&function(L){L.window_size=2*L.w_size,st(L.head),L.max_lazy_match=s[L.level].max_lazy,L.good_match=s[L.level].good_length,L.nice_match=s[L.level].nice_length,L.max_chain_length=s[L.level].max_chain,L.strstart=0,L.block_start=0,L.lookahead=0,L.insert=0,L.match_length=L.prev_length=O-1,L.match_available=0,L.ins_h=0}(u.state),B}function ee(u,B,L,A,C,P){if(!u)return g;var j=1;if(B===f&&(B=6),A<0?(j=0,A=-A):15<A&&(j=2,A-=16),C<1||S<C||L!==v||A<8||15<A||B<0||9<B||P<0||b<P)return ot(u,g);A===8&&(A=9);var V=new Ft;return(u.state=V).strm=u,V.wrap=j,V.gzhead=null,V.w_bits=A,V.w_size=1<<V.w_bits,V.w_mask=V.w_size-1,V.hash_bits=C+7,V.hash_size=1<<V.hash_bits,V.hash_mask=V.hash_size-1,V.hash_shift=~~((V.hash_bits+O-1)/O),V.window=new o.Buf8(2*V.w_size),V.head=new o.Buf16(V.hash_size),V.prev=new o.Buf16(V.w_size),V.lit_bufsize=1<<C+6,V.pending_buf_size=4*V.lit_bufsize,V.pending_buf=new o.Buf8(V.pending_buf_size),V.d_buf=1*V.lit_bufsize,V.l_buf=3*V.lit_bufsize,V.level=B,V.strategy=P,V.method=L,fe(u)}s=[new ft(0,0,0,0,function(u,B){var L=65535;for(L>u.pending_buf_size-5&&(L=u.pending_buf_size-5);;){if(u.lookahead<=1){if(St(u),u.lookahead===0&&B===c)return _;if(u.lookahead===0)break}u.strstart+=u.lookahead,u.lookahead=0;var A=u.block_start+L;if((u.strstart===0||u.strstart>=A)&&(u.lookahead=u.strstart-A,u.strstart=A,z(u,!1),u.strm.avail_out===0)||u.strstart-u.block_start>=u.w_size-J&&(z(u,!1),u.strm.avail_out===0))return _}return u.insert=0,B===m?(z(u,!0),u.strm.avail_out===0?et:U):(u.strstart>u.block_start&&(z(u,!1),u.strm.avail_out),_)}),new ft(4,4,8,4,zt),new ft(4,5,16,8,zt),new ft(4,6,32,32,zt),new ft(4,4,16,16,dt),new ft(8,16,32,32,dt),new ft(8,16,128,128,dt),new ft(8,32,128,256,dt),new ft(32,128,258,1024,dt),new ft(32,258,258,4096,dt)],n.deflateInit=function(u,B){return ee(u,B,v,15,8,0)},n.deflateInit2=ee,n.deflateReset=fe,n.deflateResetKeep=Et,n.deflateSetHeader=function(u,B){return u&&u.state?u.state.wrap!==2?g:(u.state.gzhead=B,p):g},n.deflate=function(u,B){var L,A,C,P;if(!u||!u.state||5<B||B<0)return u?ot(u,g):g;if(A=u.state,!u.output||!u.input&&u.avail_in!==0||A.status===666&&B!==m)return ot(u,u.avail_out===0?-5:g);if(A.strm=u,L=A.last_flush,A.last_flush=B,A.status===E)if(A.wrap===2)u.adler=0,rt(A,31),rt(A,139),rt(A,8),A.gzhead?(rt(A,(A.gzhead.text?1:0)+(A.gzhead.hcrc?2:0)+(A.gzhead.extra?4:0)+(A.gzhead.name?8:0)+(A.gzhead.comment?16:0)),rt(A,255&A.gzhead.time),rt(A,A.gzhead.time>>8&255),rt(A,A.gzhead.time>>16&255),rt(A,A.gzhead.time>>24&255),rt(A,A.level===9?2:2<=A.strategy||A.level<2?4:0),rt(A,255&A.gzhead.os),A.gzhead.extra&&A.gzhead.extra.length&&(rt(A,255&A.gzhead.extra.length),rt(A,A.gzhead.extra.length>>8&255)),A.gzhead.hcrc&&(u.adler=d(u.adler,A.pending_buf,A.pending,0)),A.gzindex=0,A.status=69):(rt(A,0),rt(A,0),rt(A,0),rt(A,0),rt(A,0),rt(A,A.level===9?2:2<=A.strategy||A.level<2?4:0),rt(A,3),A.status=N);else{var j=v+(A.w_bits-8<<4)<<8;j|=(2<=A.strategy||A.level<2?0:A.level<6?1:A.level===6?2:3)<<6,A.strstart!==0&&(j|=32),j+=31-j%31,A.status=N,Q(A,j),A.strstart!==0&&(Q(A,u.adler>>>16),Q(A,65535&u.adler)),u.adler=1}if(A.status===69)if(A.gzhead.extra){for(C=A.pending;A.gzindex<(65535&A.gzhead.extra.length)&&(A.pending!==A.pending_buf_size||(A.gzhead.hcrc&&A.pending>C&&(u.adler=d(u.adler,A.pending_buf,A.pending-C,C)),F(u),C=A.pending,A.pending!==A.pending_buf_size));)rt(A,255&A.gzhead.extra[A.gzindex]),A.gzindex++;A.gzhead.hcrc&&A.pending>C&&(u.adler=d(u.adler,A.pending_buf,A.pending-C,C)),A.gzindex===A.gzhead.extra.length&&(A.gzindex=0,A.status=73)}else A.status=73;if(A.status===73)if(A.gzhead.name){C=A.pending;do{if(A.pending===A.pending_buf_size&&(A.gzhead.hcrc&&A.pending>C&&(u.adler=d(u.adler,A.pending_buf,A.pending-C,C)),F(u),C=A.pending,A.pending===A.pending_buf_size)){P=1;break}P=A.gzindex<A.gzhead.name.length?255&A.gzhead.name.charCodeAt(A.gzindex++):0,rt(A,P)}while(P!==0);A.gzhead.hcrc&&A.pending>C&&(u.adler=d(u.adler,A.pending_buf,A.pending-C,C)),P===0&&(A.gzindex=0,A.status=91)}else A.status=91;if(A.status===91)if(A.gzhead.comment){C=A.pending;do{if(A.pending===A.pending_buf_size&&(A.gzhead.hcrc&&A.pending>C&&(u.adler=d(u.adler,A.pending_buf,A.pending-C,C)),F(u),C=A.pending,A.pending===A.pending_buf_size)){P=1;break}P=A.gzindex<A.gzhead.comment.length?255&A.gzhead.comment.charCodeAt(A.gzindex++):0,rt(A,P)}while(P!==0);A.gzhead.hcrc&&A.pending>C&&(u.adler=d(u.adler,A.pending_buf,A.pending-C,C)),P===0&&(A.status=103)}else A.status=103;if(A.status===103&&(A.gzhead.hcrc?(A.pending+2>A.pending_buf_size&&F(u),A.pending+2<=A.pending_buf_size&&(rt(A,255&u.adler),rt(A,u.adler>>8&255),u.adler=0,A.status=N)):A.status=N),A.pending!==0){if(F(u),u.avail_out===0)return A.last_flush=-1,p}else if(u.avail_in===0&&W(B)<=W(L)&&B!==m)return ot(u,-5);if(A.status===666&&u.avail_in!==0)return ot(u,-5);if(u.avail_in!==0||A.lookahead!==0||B!==c&&A.status!==666){var V=A.strategy===2?function(k,q){for(var tt;;){if(k.lookahead===0&&(St(k),k.lookahead===0)){if(q===c)return _;break}if(k.match_length=0,tt=a._tr_tally(k,0,k.window[k.strstart]),k.lookahead--,k.strstart++,tt&&(z(k,!1),k.strm.avail_out===0))return _}return k.insert=0,q===m?(z(k,!0),k.strm.avail_out===0?et:U):k.last_lit&&(z(k,!1),k.strm.avail_out===0)?_:$}(A,B):A.strategy===3?function(k,q){for(var tt,Y,nt,wt,ct=k.window;;){if(k.lookahead<=H){if(St(k),k.lookahead<=H&&q===c)return _;if(k.lookahead===0)break}if(k.match_length=0,k.lookahead>=O&&0<k.strstart&&(Y=ct[nt=k.strstart-1])===ct[++nt]&&Y===ct[++nt]&&Y===ct[++nt]){wt=k.strstart+H;do;while(Y===ct[++nt]&&Y===ct[++nt]&&Y===ct[++nt]&&Y===ct[++nt]&&Y===ct[++nt]&&Y===ct[++nt]&&Y===ct[++nt]&&Y===ct[++nt]&&nt<wt);k.match_length=H-(wt-nt),k.match_length>k.lookahead&&(k.match_length=k.lookahead)}if(k.match_length>=O?(tt=a._tr_tally(k,1,k.match_length-O),k.lookahead-=k.match_length,k.strstart+=k.match_length,k.match_length=0):(tt=a._tr_tally(k,0,k.window[k.strstart]),k.lookahead--,k.strstart++),tt&&(z(k,!1),k.strm.avail_out===0))return _}return k.insert=0,q===m?(z(k,!0),k.strm.avail_out===0?et:U):k.last_lit&&(z(k,!1),k.strm.avail_out===0)?_:$}(A,B):s[A.level].func(A,B);if(V!==et&&V!==U||(A.status=666),V===_||V===et)return u.avail_out===0&&(A.last_flush=-1),p;if(V===$&&(B===1?a._tr_align(A):B!==5&&(a._tr_stored_block(A,0,0,!1),B===3&&(st(A.head),A.lookahead===0&&(A.strstart=0,A.block_start=0,A.insert=0))),F(u),u.avail_out===0))return A.last_flush=-1,p}return B!==m?p:A.wrap<=0?1:(A.wrap===2?(rt(A,255&u.adler),rt(A,u.adler>>8&255),rt(A,u.adler>>16&255),rt(A,u.adler>>24&255),rt(A,255&u.total_in),rt(A,u.total_in>>8&255),rt(A,u.total_in>>16&255),rt(A,u.total_in>>24&255)):(Q(A,u.adler>>>16),Q(A,65535&u.adler)),F(u),0<A.wrap&&(A.wrap=-A.wrap),A.pending!==0?p:1)},n.deflateEnd=function(u){var B;return u&&u.state?(B=u.state.status)!==E&&B!==69&&B!==73&&B!==91&&B!==103&&B!==N&&B!==666?ot(u,g):(u.state=null,B===N?ot(u,-3):p):g},n.deflateSetDictionary=function(u,B){var L,A,C,P,j,V,k,q,tt=B.length;if(!u||!u.state||(P=(L=u.state).wrap)===2||P===1&&L.status!==E||L.lookahead)return g;for(P===1&&(u.adler=l(u.adler,B,tt,0)),L.wrap=0,tt>=L.w_size&&(P===0&&(st(L.head),L.strstart=0,L.block_start=0,L.insert=0),q=new o.Buf8(L.w_size),o.arraySet(q,B,tt-L.w_size,L.w_size,0),B=q,tt=L.w_size),j=u.avail_in,V=u.next_in,k=u.input,u.avail_in=tt,u.next_in=0,u.input=B,St(L);L.lookahead>=O;){for(A=L.strstart,C=L.lookahead-(O-1);L.ins_h=(L.ins_h<<L.hash_shift^L.window[A+O-1])&L.hash_mask,L.prev[A&L.w_mask]=L.head[L.ins_h],L.head[L.ins_h]=A,A++,--C;);L.strstart=A,L.lookahead=O-1,St(L)}return L.strstart+=L.lookahead,L.block_start=L.strstart,L.insert=L.lookahead,L.lookahead=0,L.match_length=L.prev_length=O-1,L.match_available=0,u.next_in=V,u.input=k,u.avail_in=j,L.wrap=P,p},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,r,n){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,r,n){r.exports=function(s,o){var a,l,d,h,c,m,p,g,f,b,y,v,S,I,T,D,R,M,O,H,J,E,N,_,$;a=s.state,l=s.next_in,_=s.input,d=l+(s.avail_in-5),h=s.next_out,$=s.output,c=h-(o-s.avail_out),m=h+(s.avail_out-257),p=a.dmax,g=a.wsize,f=a.whave,b=a.wnext,y=a.window,v=a.hold,S=a.bits,I=a.lencode,T=a.distcode,D=(1<<a.lenbits)-1,R=(1<<a.distbits)-1;t:do{S<15&&(v+=_[l++]<<S,S+=8,v+=_[l++]<<S,S+=8),M=I[v&D];e:for(;;){if(v>>>=O=M>>>24,S-=O,(O=M>>>16&255)===0)$[h++]=65535&M;else{if(!(16&O)){if(!(64&O)){M=I[(65535&M)+(v&(1<<O)-1)];continue e}if(32&O){a.mode=12;break t}s.msg="invalid literal/length code",a.mode=30;break t}H=65535&M,(O&=15)&&(S<O&&(v+=_[l++]<<S,S+=8),H+=v&(1<<O)-1,v>>>=O,S-=O),S<15&&(v+=_[l++]<<S,S+=8,v+=_[l++]<<S,S+=8),M=T[v&R];i:for(;;){if(v>>>=O=M>>>24,S-=O,!(16&(O=M>>>16&255))){if(!(64&O)){M=T[(65535&M)+(v&(1<<O)-1)];continue i}s.msg="invalid distance code",a.mode=30;break t}if(J=65535&M,S<(O&=15)&&(v+=_[l++]<<S,(S+=8)<O&&(v+=_[l++]<<S,S+=8)),p<(J+=v&(1<<O)-1)){s.msg="invalid distance too far back",a.mode=30;break t}if(v>>>=O,S-=O,(O=h-c)<J){if(f<(O=J-O)&&a.sane){s.msg="invalid distance too far back",a.mode=30;break t}if(N=y,(E=0)===b){if(E+=g-O,O<H){for(H-=O;$[h++]=y[E++],--O;);E=h-J,N=$}}else if(b<O){if(E+=g+b-O,(O-=b)<H){for(H-=O;$[h++]=y[E++],--O;);if(E=0,b<H){for(H-=O=b;$[h++]=y[E++],--O;);E=h-J,N=$}}}else if(E+=b-O,O<H){for(H-=O;$[h++]=y[E++],--O;);E=h-J,N=$}for(;2<H;)$[h++]=N[E++],$[h++]=N[E++],$[h++]=N[E++],H-=3;H&&($[h++]=N[E++],1<H&&($[h++]=N[E++]))}else{for(E=h-J;$[h++]=$[E++],$[h++]=$[E++],$[h++]=$[E++],2<(H-=3););H&&($[h++]=$[E++],1<H&&($[h++]=$[E++]))}break}}break}}while(l<d&&h<m);l-=H=S>>3,v&=(1<<(S-=H<<3))-1,s.next_in=l,s.next_out=h,s.avail_in=l<d?d-l+5:5-(l-d),s.avail_out=h<m?m-h+257:257-(h-m),a.hold=v,a.bits=S}},{}],49:[function(e,r,n){var s=e("../utils/common"),o=e("./adler32"),a=e("./crc32"),l=e("./inffast"),d=e("./inftrees"),h=1,c=2,m=0,p=-2,g=1,f=852,b=592;function y(E){return(E>>>24&255)+(E>>>8&65280)+((65280&E)<<8)+((255&E)<<24)}function v(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function S(E){var N;return E&&E.state?(N=E.state,E.total_in=E.total_out=N.total=0,E.msg="",N.wrap&&(E.adler=1&N.wrap),N.mode=g,N.last=0,N.havedict=0,N.dmax=32768,N.head=null,N.hold=0,N.bits=0,N.lencode=N.lendyn=new s.Buf32(f),N.distcode=N.distdyn=new s.Buf32(b),N.sane=1,N.back=-1,m):p}function I(E){var N;return E&&E.state?((N=E.state).wsize=0,N.whave=0,N.wnext=0,S(E)):p}function T(E,N){var _,$;return E&&E.state?($=E.state,N<0?(_=0,N=-N):(_=1+(N>>4),N<48&&(N&=15)),N&&(N<8||15<N)?p:($.window!==null&&$.wbits!==N&&($.window=null),$.wrap=_,$.wbits=N,I(E))):p}function D(E,N){var _,$;return E?($=new v,(E.state=$).window=null,(_=T(E,N))!==m&&(E.state=null),_):p}var R,M,O=!0;function H(E){if(O){var N;for(R=new s.Buf32(512),M=new s.Buf32(32),N=0;N<144;)E.lens[N++]=8;for(;N<256;)E.lens[N++]=9;for(;N<280;)E.lens[N++]=7;for(;N<288;)E.lens[N++]=8;for(d(h,E.lens,0,288,R,0,E.work,{bits:9}),N=0;N<32;)E.lens[N++]=5;d(c,E.lens,0,32,M,0,E.work,{bits:5}),O=!1}E.lencode=R,E.lenbits=9,E.distcode=M,E.distbits=5}function J(E,N,_,$){var et,U=E.state;return U.window===null&&(U.wsize=1<<U.wbits,U.wnext=0,U.whave=0,U.window=new s.Buf8(U.wsize)),$>=U.wsize?(s.arraySet(U.window,N,_-U.wsize,U.wsize,0),U.wnext=0,U.whave=U.wsize):($<(et=U.wsize-U.wnext)&&(et=$),s.arraySet(U.window,N,_-$,et,U.wnext),($-=et)?(s.arraySet(U.window,N,_-$,$,0),U.wnext=$,U.whave=U.wsize):(U.wnext+=et,U.wnext===U.wsize&&(U.wnext=0),U.whave<U.wsize&&(U.whave+=et))),0}n.inflateReset=I,n.inflateReset2=T,n.inflateResetKeep=S,n.inflateInit=function(E){return D(E,15)},n.inflateInit2=D,n.inflate=function(E,N){var _,$,et,U,ot,W,st,F,z,rt,Q,Z,St,zt,dt,ft,Ft,Et,fe,ee,u,B,L,A,C=0,P=new s.Buf8(4),j=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!E||!E.state||!E.output||!E.input&&E.avail_in!==0)return p;(_=E.state).mode===12&&(_.mode=13),ot=E.next_out,et=E.output,st=E.avail_out,U=E.next_in,$=E.input,W=E.avail_in,F=_.hold,z=_.bits,rt=W,Q=st,B=m;t:for(;;)switch(_.mode){case g:if(_.wrap===0){_.mode=13;break}for(;z<16;){if(W===0)break t;W--,F+=$[U++]<<z,z+=8}if(2&_.wrap&&F===35615){P[_.check=0]=255&F,P[1]=F>>>8&255,_.check=a(_.check,P,2,0),z=F=0,_.mode=2;break}if(_.flags=0,_.head&&(_.head.done=!1),!(1&_.wrap)||(((255&F)<<8)+(F>>8))%31){E.msg="incorrect header check",_.mode=30;break}if((15&F)!=8){E.msg="unknown compression method",_.mode=30;break}if(z-=4,u=8+(15&(F>>>=4)),_.wbits===0)_.wbits=u;else if(u>_.wbits){E.msg="invalid window size",_.mode=30;break}_.dmax=1<<u,E.adler=_.check=1,_.mode=512&F?10:12,z=F=0;break;case 2:for(;z<16;){if(W===0)break t;W--,F+=$[U++]<<z,z+=8}if(_.flags=F,(255&_.flags)!=8){E.msg="unknown compression method",_.mode=30;break}if(57344&_.flags){E.msg="unknown header flags set",_.mode=30;break}_.head&&(_.head.text=F>>8&1),512&_.flags&&(P[0]=255&F,P[1]=F>>>8&255,_.check=a(_.check,P,2,0)),z=F=0,_.mode=3;case 3:for(;z<32;){if(W===0)break t;W--,F+=$[U++]<<z,z+=8}_.head&&(_.head.time=F),512&_.flags&&(P[0]=255&F,P[1]=F>>>8&255,P[2]=F>>>16&255,P[3]=F>>>24&255,_.check=a(_.check,P,4,0)),z=F=0,_.mode=4;case 4:for(;z<16;){if(W===0)break t;W--,F+=$[U++]<<z,z+=8}_.head&&(_.head.xflags=255&F,_.head.os=F>>8),512&_.flags&&(P[0]=255&F,P[1]=F>>>8&255,_.check=a(_.check,P,2,0)),z=F=0,_.mode=5;case 5:if(1024&_.flags){for(;z<16;){if(W===0)break t;W--,F+=$[U++]<<z,z+=8}_.length=F,_.head&&(_.head.extra_len=F),512&_.flags&&(P[0]=255&F,P[1]=F>>>8&255,_.check=a(_.check,P,2,0)),z=F=0}else _.head&&(_.head.extra=null);_.mode=6;case 6:if(1024&_.flags&&(W<(Z=_.length)&&(Z=W),Z&&(_.head&&(u=_.head.extra_len-_.length,_.head.extra||(_.head.extra=new Array(_.head.extra_len)),s.arraySet(_.head.extra,$,U,Z,u)),512&_.flags&&(_.check=a(_.check,$,Z,U)),W-=Z,U+=Z,_.length-=Z),_.length))break t;_.length=0,_.mode=7;case 7:if(2048&_.flags){if(W===0)break t;for(Z=0;u=$[U+Z++],_.head&&u&&_.length<65536&&(_.head.name+=String.fromCharCode(u)),u&&Z<W;);if(512&_.flags&&(_.check=a(_.check,$,Z,U)),W-=Z,U+=Z,u)break t}else _.head&&(_.head.name=null);_.length=0,_.mode=8;case 8:if(4096&_.flags){if(W===0)break t;for(Z=0;u=$[U+Z++],_.head&&u&&_.length<65536&&(_.head.comment+=String.fromCharCode(u)),u&&Z<W;);if(512&_.flags&&(_.check=a(_.check,$,Z,U)),W-=Z,U+=Z,u)break t}else _.head&&(_.head.comment=null);_.mode=9;case 9:if(512&_.flags){for(;z<16;){if(W===0)break t;W--,F+=$[U++]<<z,z+=8}if(F!==(65535&_.check)){E.msg="header crc mismatch",_.mode=30;break}z=F=0}_.head&&(_.head.hcrc=_.flags>>9&1,_.head.done=!0),E.adler=_.check=0,_.mode=12;break;case 10:for(;z<32;){if(W===0)break t;W--,F+=$[U++]<<z,z+=8}E.adler=_.check=y(F),z=F=0,_.mode=11;case 11:if(_.havedict===0)return E.next_out=ot,E.avail_out=st,E.next_in=U,E.avail_in=W,_.hold=F,_.bits=z,2;E.adler=_.check=1,_.mode=12;case 12:if(N===5||N===6)break t;case 13:if(_.last){F>>>=7&z,z-=7&z,_.mode=27;break}for(;z<3;){if(W===0)break t;W--,F+=$[U++]<<z,z+=8}switch(_.last=1&F,z-=1,3&(F>>>=1)){case 0:_.mode=14;break;case 1:if(H(_),_.mode=20,N!==6)break;F>>>=2,z-=2;break t;case 2:_.mode=17;break;case 3:E.msg="invalid block type",_.mode=30}F>>>=2,z-=2;break;case 14:for(F>>>=7&z,z-=7&z;z<32;){if(W===0)break t;W--,F+=$[U++]<<z,z+=8}if((65535&F)!=(F>>>16^65535)){E.msg="invalid stored block lengths",_.mode=30;break}if(_.length=65535&F,z=F=0,_.mode=15,N===6)break t;case 15:_.mode=16;case 16:if(Z=_.length){if(W<Z&&(Z=W),st<Z&&(Z=st),Z===0)break t;s.arraySet(et,$,U,Z,ot),W-=Z,U+=Z,st-=Z,ot+=Z,_.length-=Z;break}_.mode=12;break;case 17:for(;z<14;){if(W===0)break t;W--,F+=$[U++]<<z,z+=8}if(_.nlen=257+(31&F),F>>>=5,z-=5,_.ndist=1+(31&F),F>>>=5,z-=5,_.ncode=4+(15&F),F>>>=4,z-=4,286<_.nlen||30<_.ndist){E.msg="too many length or distance symbols",_.mode=30;break}_.have=0,_.mode=18;case 18:for(;_.have<_.ncode;){for(;z<3;){if(W===0)break t;W--,F+=$[U++]<<z,z+=8}_.lens[j[_.have++]]=7&F,F>>>=3,z-=3}for(;_.have<19;)_.lens[j[_.have++]]=0;if(_.lencode=_.lendyn,_.lenbits=7,L={bits:_.lenbits},B=d(0,_.lens,0,19,_.lencode,0,_.work,L),_.lenbits=L.bits,B){E.msg="invalid code lengths set",_.mode=30;break}_.have=0,_.mode=19;case 19:for(;_.have<_.nlen+_.ndist;){for(;ft=(C=_.lencode[F&(1<<_.lenbits)-1])>>>16&255,Ft=65535&C,!((dt=C>>>24)<=z);){if(W===0)break t;W--,F+=$[U++]<<z,z+=8}if(Ft<16)F>>>=dt,z-=dt,_.lens[_.have++]=Ft;else{if(Ft===16){for(A=dt+2;z<A;){if(W===0)break t;W--,F+=$[U++]<<z,z+=8}if(F>>>=dt,z-=dt,_.have===0){E.msg="invalid bit length repeat",_.mode=30;break}u=_.lens[_.have-1],Z=3+(3&F),F>>>=2,z-=2}else if(Ft===17){for(A=dt+3;z<A;){if(W===0)break t;W--,F+=$[U++]<<z,z+=8}z-=dt,u=0,Z=3+(7&(F>>>=dt)),F>>>=3,z-=3}else{for(A=dt+7;z<A;){if(W===0)break t;W--,F+=$[U++]<<z,z+=8}z-=dt,u=0,Z=11+(127&(F>>>=dt)),F>>>=7,z-=7}if(_.have+Z>_.nlen+_.ndist){E.msg="invalid bit length repeat",_.mode=30;break}for(;Z--;)_.lens[_.have++]=u}}if(_.mode===30)break;if(_.lens[256]===0){E.msg="invalid code -- missing end-of-block",_.mode=30;break}if(_.lenbits=9,L={bits:_.lenbits},B=d(h,_.lens,0,_.nlen,_.lencode,0,_.work,L),_.lenbits=L.bits,B){E.msg="invalid literal/lengths set",_.mode=30;break}if(_.distbits=6,_.distcode=_.distdyn,L={bits:_.distbits},B=d(c,_.lens,_.nlen,_.ndist,_.distcode,0,_.work,L),_.distbits=L.bits,B){E.msg="invalid distances set",_.mode=30;break}if(_.mode=20,N===6)break t;case 20:_.mode=21;case 21:if(6<=W&&258<=st){E.next_out=ot,E.avail_out=st,E.next_in=U,E.avail_in=W,_.hold=F,_.bits=z,l(E,Q),ot=E.next_out,et=E.output,st=E.avail_out,U=E.next_in,$=E.input,W=E.avail_in,F=_.hold,z=_.bits,_.mode===12&&(_.back=-1);break}for(_.back=0;ft=(C=_.lencode[F&(1<<_.lenbits)-1])>>>16&255,Ft=65535&C,!((dt=C>>>24)<=z);){if(W===0)break t;W--,F+=$[U++]<<z,z+=8}if(ft&&!(240&ft)){for(Et=dt,fe=ft,ee=Ft;ft=(C=_.lencode[ee+((F&(1<<Et+fe)-1)>>Et)])>>>16&255,Ft=65535&C,!(Et+(dt=C>>>24)<=z);){if(W===0)break t;W--,F+=$[U++]<<z,z+=8}F>>>=Et,z-=Et,_.back+=Et}if(F>>>=dt,z-=dt,_.back+=dt,_.length=Ft,ft===0){_.mode=26;break}if(32&ft){_.back=-1,_.mode=12;break}if(64&ft){E.msg="invalid literal/length code",_.mode=30;break}_.extra=15&ft,_.mode=22;case 22:if(_.extra){for(A=_.extra;z<A;){if(W===0)break t;W--,F+=$[U++]<<z,z+=8}_.length+=F&(1<<_.extra)-1,F>>>=_.extra,z-=_.extra,_.back+=_.extra}_.was=_.length,_.mode=23;case 23:for(;ft=(C=_.distcode[F&(1<<_.distbits)-1])>>>16&255,Ft=65535&C,!((dt=C>>>24)<=z);){if(W===0)break t;W--,F+=$[U++]<<z,z+=8}if(!(240&ft)){for(Et=dt,fe=ft,ee=Ft;ft=(C=_.distcode[ee+((F&(1<<Et+fe)-1)>>Et)])>>>16&255,Ft=65535&C,!(Et+(dt=C>>>24)<=z);){if(W===0)break t;W--,F+=$[U++]<<z,z+=8}F>>>=Et,z-=Et,_.back+=Et}if(F>>>=dt,z-=dt,_.back+=dt,64&ft){E.msg="invalid distance code",_.mode=30;break}_.offset=Ft,_.extra=15&ft,_.mode=24;case 24:if(_.extra){for(A=_.extra;z<A;){if(W===0)break t;W--,F+=$[U++]<<z,z+=8}_.offset+=F&(1<<_.extra)-1,F>>>=_.extra,z-=_.extra,_.back+=_.extra}if(_.offset>_.dmax){E.msg="invalid distance too far back",_.mode=30;break}_.mode=25;case 25:if(st===0)break t;if(Z=Q-st,_.offset>Z){if((Z=_.offset-Z)>_.whave&&_.sane){E.msg="invalid distance too far back",_.mode=30;break}St=Z>_.wnext?(Z-=_.wnext,_.wsize-Z):_.wnext-Z,Z>_.length&&(Z=_.length),zt=_.window}else zt=et,St=ot-_.offset,Z=_.length;for(st<Z&&(Z=st),st-=Z,_.length-=Z;et[ot++]=zt[St++],--Z;);_.length===0&&(_.mode=21);break;case 26:if(st===0)break t;et[ot++]=_.length,st--,_.mode=21;break;case 27:if(_.wrap){for(;z<32;){if(W===0)break t;W--,F|=$[U++]<<z,z+=8}if(Q-=st,E.total_out+=Q,_.total+=Q,Q&&(E.adler=_.check=_.flags?a(_.check,et,Q,ot-Q):o(_.check,et,Q,ot-Q)),Q=st,(_.flags?F:y(F))!==_.check){E.msg="incorrect data check",_.mode=30;break}z=F=0}_.mode=28;case 28:if(_.wrap&&_.flags){for(;z<32;){if(W===0)break t;W--,F+=$[U++]<<z,z+=8}if(F!==(4294967295&_.total)){E.msg="incorrect length check",_.mode=30;break}z=F=0}_.mode=29;case 29:B=1;break t;case 30:B=-3;break t;case 31:return-4;case 32:default:return p}return E.next_out=ot,E.avail_out=st,E.next_in=U,E.avail_in=W,_.hold=F,_.bits=z,(_.wsize||Q!==E.avail_out&&_.mode<30&&(_.mode<27||N!==4))&&J(E,E.output,E.next_out,Q-E.avail_out)?(_.mode=31,-4):(rt-=E.avail_in,Q-=E.avail_out,E.total_in+=rt,E.total_out+=Q,_.total+=Q,_.wrap&&Q&&(E.adler=_.check=_.flags?a(_.check,et,Q,E.next_out-Q):o(_.check,et,Q,E.next_out-Q)),E.data_type=_.bits+(_.last?64:0)+(_.mode===12?128:0)+(_.mode===20||_.mode===15?256:0),(rt==0&&Q===0||N===4)&&B===m&&(B=-5),B)},n.inflateEnd=function(E){if(!E||!E.state)return p;var N=E.state;return N.window&&(N.window=null),E.state=null,m},n.inflateGetHeader=function(E,N){var _;return E&&E.state&&2&(_=E.state).wrap?((_.head=N).done=!1,m):p},n.inflateSetDictionary=function(E,N){var _,$=N.length;return E&&E.state?(_=E.state).wrap!==0&&_.mode!==11?p:_.mode===11&&o(1,N,$,0)!==_.check?-3:J(E,N,$,$)?(_.mode=31,-4):(_.havedict=1,m):p},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,r,n){var s=e("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(h,c,m,p,g,f,b,y){var v,S,I,T,D,R,M,O,H,J=y.bits,E=0,N=0,_=0,$=0,et=0,U=0,ot=0,W=0,st=0,F=0,z=null,rt=0,Q=new s.Buf16(16),Z=new s.Buf16(16),St=null,zt=0;for(E=0;E<=15;E++)Q[E]=0;for(N=0;N<p;N++)Q[c[m+N]]++;for(et=J,$=15;1<=$&&Q[$]===0;$--);if($<et&&(et=$),$===0)return g[f++]=20971520,g[f++]=20971520,y.bits=1,0;for(_=1;_<$&&Q[_]===0;_++);for(et<_&&(et=_),E=W=1;E<=15;E++)if(W<<=1,(W-=Q[E])<0)return-1;if(0<W&&(h===0||$!==1))return-1;for(Z[1]=0,E=1;E<15;E++)Z[E+1]=Z[E]+Q[E];for(N=0;N<p;N++)c[m+N]!==0&&(b[Z[c[m+N]]++]=N);if(R=h===0?(z=St=b,19):h===1?(z=o,rt-=257,St=a,zt-=257,256):(z=l,St=d,-1),E=_,D=f,ot=N=F=0,I=-1,T=(st=1<<(U=et))-1,h===1&&852<st||h===2&&592<st)return 1;for(;;){for(M=E-ot,H=b[N]<R?(O=0,b[N]):b[N]>R?(O=St[zt+b[N]],z[rt+b[N]]):(O=96,0),v=1<<E-ot,_=S=1<<U;g[D+(F>>ot)+(S-=v)]=M<<24|O<<16|H|0,S!==0;);for(v=1<<E-1;F&v;)v>>=1;if(v!==0?(F&=v-1,F+=v):F=0,N++,--Q[E]==0){if(E===$)break;E=c[m+b[N]]}if(et<E&&(F&T)!==I){for(ot===0&&(ot=et),D+=_,W=1<<(U=E-ot);U+ot<$&&!((W-=Q[U+ot])<=0);)U++,W<<=1;if(st+=1<<U,h===1&&852<st||h===2&&592<st)return 1;g[I=F&T]=et<<24|U<<16|D-f|0}}return F!==0&&(g[D+F]=E-ot<<24|64<<16|0),y.bits=et,0}},{"../utils/common":41}],51:[function(e,r,n){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,r,n){var s=e("../utils/common"),o=0,a=1;function l(C){for(var P=C.length;0<=--P;)C[P]=0}var d=0,h=29,c=256,m=c+1+h,p=30,g=19,f=2*m+1,b=15,y=16,v=7,S=256,I=16,T=17,D=18,R=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],M=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],O=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],J=new Array(2*(m+2));l(J);var E=new Array(2*p);l(E);var N=new Array(512);l(N);var _=new Array(256);l(_);var $=new Array(h);l($);var et,U,ot,W=new Array(p);function st(C,P,j,V,k){this.static_tree=C,this.extra_bits=P,this.extra_base=j,this.elems=V,this.max_length=k,this.has_stree=C&&C.length}function F(C,P){this.dyn_tree=C,this.max_code=0,this.stat_desc=P}function z(C){return C<256?N[C]:N[256+(C>>>7)]}function rt(C,P){C.pending_buf[C.pending++]=255&P,C.pending_buf[C.pending++]=P>>>8&255}function Q(C,P,j){C.bi_valid>y-j?(C.bi_buf|=P<<C.bi_valid&65535,rt(C,C.bi_buf),C.bi_buf=P>>y-C.bi_valid,C.bi_valid+=j-y):(C.bi_buf|=P<<C.bi_valid&65535,C.bi_valid+=j)}function Z(C,P,j){Q(C,j[2*P],j[2*P+1])}function St(C,P){for(var j=0;j|=1&C,C>>>=1,j<<=1,0<--P;);return j>>>1}function zt(C,P,j){var V,k,q=new Array(b+1),tt=0;for(V=1;V<=b;V++)q[V]=tt=tt+j[V-1]<<1;for(k=0;k<=P;k++){var Y=C[2*k+1];Y!==0&&(C[2*k]=St(q[Y]++,Y))}}function dt(C){var P;for(P=0;P<m;P++)C.dyn_ltree[2*P]=0;for(P=0;P<p;P++)C.dyn_dtree[2*P]=0;for(P=0;P<g;P++)C.bl_tree[2*P]=0;C.dyn_ltree[2*S]=1,C.opt_len=C.static_len=0,C.last_lit=C.matches=0}function ft(C){8<C.bi_valid?rt(C,C.bi_buf):0<C.bi_valid&&(C.pending_buf[C.pending++]=C.bi_buf),C.bi_buf=0,C.bi_valid=0}function Ft(C,P,j,V){var k=2*P,q=2*j;return C[k]<C[q]||C[k]===C[q]&&V[P]<=V[j]}function Et(C,P,j){for(var V=C.heap[j],k=j<<1;k<=C.heap_len&&(k<C.heap_len&&Ft(P,C.heap[k+1],C.heap[k],C.depth)&&k++,!Ft(P,V,C.heap[k],C.depth));)C.heap[j]=C.heap[k],j=k,k<<=1;C.heap[j]=V}function fe(C,P,j){var V,k,q,tt,Y=0;if(C.last_lit!==0)for(;V=C.pending_buf[C.d_buf+2*Y]<<8|C.pending_buf[C.d_buf+2*Y+1],k=C.pending_buf[C.l_buf+Y],Y++,V===0?Z(C,k,P):(Z(C,(q=_[k])+c+1,P),(tt=R[q])!==0&&Q(C,k-=$[q],tt),Z(C,q=z(--V),j),(tt=M[q])!==0&&Q(C,V-=W[q],tt)),Y<C.last_lit;);Z(C,S,P)}function ee(C,P){var j,V,k,q=P.dyn_tree,tt=P.stat_desc.static_tree,Y=P.stat_desc.has_stree,nt=P.stat_desc.elems,wt=-1;for(C.heap_len=0,C.heap_max=f,j=0;j<nt;j++)q[2*j]!==0?(C.heap[++C.heap_len]=wt=j,C.depth[j]=0):q[2*j+1]=0;for(;C.heap_len<2;)q[2*(k=C.heap[++C.heap_len]=wt<2?++wt:0)]=1,C.depth[k]=0,C.opt_len--,Y&&(C.static_len-=tt[2*k+1]);for(P.max_code=wt,j=C.heap_len>>1;1<=j;j--)Et(C,q,j);for(k=nt;j=C.heap[1],C.heap[1]=C.heap[C.heap_len--],Et(C,q,1),V=C.heap[1],C.heap[--C.heap_max]=j,C.heap[--C.heap_max]=V,q[2*k]=q[2*j]+q[2*V],C.depth[k]=(C.depth[j]>=C.depth[V]?C.depth[j]:C.depth[V])+1,q[2*j+1]=q[2*V+1]=k,C.heap[1]=k++,Et(C,q,1),2<=C.heap_len;);C.heap[--C.heap_max]=C.heap[1],function(ct,me){var Ji,Ee,Ki,Nt,nn,ps,ze=me.dyn_tree,ba=me.max_code,yc=me.stat_desc.static_tree,bc=me.stat_desc.has_stree,vc=me.stat_desc.extra_bits,va=me.stat_desc.extra_base,Qi=me.stat_desc.max_length,sn=0;for(Nt=0;Nt<=b;Nt++)ct.bl_count[Nt]=0;for(ze[2*ct.heap[ct.heap_max]+1]=0,Ji=ct.heap_max+1;Ji<f;Ji++)Qi<(Nt=ze[2*ze[2*(Ee=ct.heap[Ji])+1]+1]+1)&&(Nt=Qi,sn++),ze[2*Ee+1]=Nt,ba<Ee||(ct.bl_count[Nt]++,nn=0,va<=Ee&&(nn=vc[Ee-va]),ps=ze[2*Ee],ct.opt_len+=ps*(Nt+nn),bc&&(ct.static_len+=ps*(yc[2*Ee+1]+nn)));if(sn!==0){do{for(Nt=Qi-1;ct.bl_count[Nt]===0;)Nt--;ct.bl_count[Nt]--,ct.bl_count[Nt+1]+=2,ct.bl_count[Qi]--,sn-=2}while(0<sn);for(Nt=Qi;Nt!==0;Nt--)for(Ee=ct.bl_count[Nt];Ee!==0;)ba<(Ki=ct.heap[--Ji])||(ze[2*Ki+1]!==Nt&&(ct.opt_len+=(Nt-ze[2*Ki+1])*ze[2*Ki],ze[2*Ki+1]=Nt),Ee--)}}(C,P),zt(q,wt,C.bl_count)}function u(C,P,j){var V,k,q=-1,tt=P[1],Y=0,nt=7,wt=4;for(tt===0&&(nt=138,wt=3),P[2*(j+1)+1]=65535,V=0;V<=j;V++)k=tt,tt=P[2*(V+1)+1],++Y<nt&&k===tt||(Y<wt?C.bl_tree[2*k]+=Y:k!==0?(k!==q&&C.bl_tree[2*k]++,C.bl_tree[2*I]++):Y<=10?C.bl_tree[2*T]++:C.bl_tree[2*D]++,q=k,wt=(Y=0)===tt?(nt=138,3):k===tt?(nt=6,3):(nt=7,4))}function B(C,P,j){var V,k,q=-1,tt=P[1],Y=0,nt=7,wt=4;for(tt===0&&(nt=138,wt=3),V=0;V<=j;V++)if(k=tt,tt=P[2*(V+1)+1],!(++Y<nt&&k===tt)){if(Y<wt)for(;Z(C,k,C.bl_tree),--Y!=0;);else k!==0?(k!==q&&(Z(C,k,C.bl_tree),Y--),Z(C,I,C.bl_tree),Q(C,Y-3,2)):Y<=10?(Z(C,T,C.bl_tree),Q(C,Y-3,3)):(Z(C,D,C.bl_tree),Q(C,Y-11,7));q=k,wt=(Y=0)===tt?(nt=138,3):k===tt?(nt=6,3):(nt=7,4)}}l(W);var L=!1;function A(C,P,j,V){Q(C,(d<<1)+(V?1:0),3),function(k,q,tt,Y){ft(k),Y&&(rt(k,tt),rt(k,~tt)),s.arraySet(k.pending_buf,k.window,q,tt,k.pending),k.pending+=tt}(C,P,j,!0)}n._tr_init=function(C){L||(function(){var P,j,V,k,q,tt=new Array(b+1);for(k=V=0;k<h-1;k++)for($[k]=V,P=0;P<1<<R[k];P++)_[V++]=k;for(_[V-1]=k,k=q=0;k<16;k++)for(W[k]=q,P=0;P<1<<M[k];P++)N[q++]=k;for(q>>=7;k<p;k++)for(W[k]=q<<7,P=0;P<1<<M[k]-7;P++)N[256+q++]=k;for(j=0;j<=b;j++)tt[j]=0;for(P=0;P<=143;)J[2*P+1]=8,P++,tt[8]++;for(;P<=255;)J[2*P+1]=9,P++,tt[9]++;for(;P<=279;)J[2*P+1]=7,P++,tt[7]++;for(;P<=287;)J[2*P+1]=8,P++,tt[8]++;for(zt(J,m+1,tt),P=0;P<p;P++)E[2*P+1]=5,E[2*P]=St(P,5);et=new st(J,R,c+1,m,b),U=new st(E,M,0,p,b),ot=new st(new Array(0),O,0,g,v)}(),L=!0),C.l_desc=new F(C.dyn_ltree,et),C.d_desc=new F(C.dyn_dtree,U),C.bl_desc=new F(C.bl_tree,ot),C.bi_buf=0,C.bi_valid=0,dt(C)},n._tr_stored_block=A,n._tr_flush_block=function(C,P,j,V){var k,q,tt=0;0<C.level?(C.strm.data_type===2&&(C.strm.data_type=function(Y){var nt,wt=4093624447;for(nt=0;nt<=31;nt++,wt>>>=1)if(1&wt&&Y.dyn_ltree[2*nt]!==0)return o;if(Y.dyn_ltree[18]!==0||Y.dyn_ltree[20]!==0||Y.dyn_ltree[26]!==0)return a;for(nt=32;nt<c;nt++)if(Y.dyn_ltree[2*nt]!==0)return a;return o}(C)),ee(C,C.l_desc),ee(C,C.d_desc),tt=function(Y){var nt;for(u(Y,Y.dyn_ltree,Y.l_desc.max_code),u(Y,Y.dyn_dtree,Y.d_desc.max_code),ee(Y,Y.bl_desc),nt=g-1;3<=nt&&Y.bl_tree[2*H[nt]+1]===0;nt--);return Y.opt_len+=3*(nt+1)+5+5+4,nt}(C),k=C.opt_len+3+7>>>3,(q=C.static_len+3+7>>>3)<=k&&(k=q)):k=q=j+5,j+4<=k&&P!==-1?A(C,P,j,V):C.strategy===4||q===k?(Q(C,2+(V?1:0),3),fe(C,J,E)):(Q(C,4+(V?1:0),3),function(Y,nt,wt,ct){var me;for(Q(Y,nt-257,5),Q(Y,wt-1,5),Q(Y,ct-4,4),me=0;me<ct;me++)Q(Y,Y.bl_tree[2*H[me]+1],3);B(Y,Y.dyn_ltree,nt-1),B(Y,Y.dyn_dtree,wt-1)}(C,C.l_desc.max_code+1,C.d_desc.max_code+1,tt+1),fe(C,C.dyn_ltree,C.dyn_dtree)),dt(C),V&&ft(C)},n._tr_tally=function(C,P,j){return C.pending_buf[C.d_buf+2*C.last_lit]=P>>>8&255,C.pending_buf[C.d_buf+2*C.last_lit+1]=255&P,C.pending_buf[C.l_buf+C.last_lit]=255&j,C.last_lit++,P===0?C.dyn_ltree[2*j]++:(C.matches++,P--,C.dyn_ltree[2*(_[j]+c+1)]++,C.dyn_dtree[2*z(P)]++),C.last_lit===C.lit_bufsize-1},n._tr_align=function(C){Q(C,2,3),Z(C,S,J),function(P){P.bi_valid===16?(rt(P,P.bi_buf),P.bi_buf=0,P.bi_valid=0):8<=P.bi_valid&&(P.pending_buf[P.pending++]=255&P.bi_buf,P.bi_buf>>=8,P.bi_valid-=8)}(C)}},{"../utils/common":41}],53:[function(e,r,n){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,r,n){(function(s){(function(o,a){if(!o.setImmediate){var l,d,h,c,m=1,p={},g=!1,f=o.document,b=Object.getPrototypeOf&&Object.getPrototypeOf(o);b=b&&b.setTimeout?b:o,l={}.toString.call(o.process)==="[object process]"?function(I){process.nextTick(function(){v(I)})}:function(){if(o.postMessage&&!o.importScripts){var I=!0,T=o.onmessage;return o.onmessage=function(){I=!1},o.postMessage("","*"),o.onmessage=T,I}}()?(c="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",S,!1):o.attachEvent("onmessage",S),function(I){o.postMessage(c+I,"*")}):o.MessageChannel?((h=new MessageChannel).port1.onmessage=function(I){v(I.data)},function(I){h.port2.postMessage(I)}):f&&"onreadystatechange"in f.createElement("script")?(d=f.documentElement,function(I){var T=f.createElement("script");T.onreadystatechange=function(){v(I),T.onreadystatechange=null,d.removeChild(T),T=null},d.appendChild(T)}):function(I){setTimeout(v,0,I)},b.setImmediate=function(I){typeof I!="function"&&(I=new Function(""+I));for(var T=new Array(arguments.length-1),D=0;D<T.length;D++)T[D]=arguments[D+1];var R={callback:I,args:T};return p[m]=R,l(m),m++},b.clearImmediate=y}function y(I){delete p[I]}function v(I){if(g)setTimeout(v,0,I);else{var T=p[I];if(T){g=!0;try{(function(D){var R=D.callback,M=D.args;switch(M.length){case 0:R();break;case 1:R(M[0]);break;case 2:R(M[0],M[1]);break;case 3:R(M[0],M[1],M[2]);break;default:R.apply(a,M)}})(T)}finally{y(I),g=!1}}}}function S(I){I.source===o&&typeof I.data=="string"&&I.data.indexOf(c)===0&&v(+I.data.slice(c.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof Sn<"u"?Sn:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(_c);var gy=_c.exports;const yy=_y(gy),by=new Gc({verticalOffset:{screenLength:"30px"},callout:new qc({color:"black",size:"1px"}),symbolLayers:[new Yc({material:{color:"black"},halo:{color:"white",size:"1px"},size:"13px"})]}),vy=new my({view:yi});yi.ui.add(vy,"top-right");yi.when(async()=>{const i=await Zc(()=>$i.associatedLayer),t=new Mg({view:yi,layer:$i,editingEnabled:!0,container:"tableDiv",menuConfig:{items:[new ne({label:"Add as graphic",clickFunction:()=>Sy(t.highlightIds),autoCloseMenu:!0}),new ne({label:"Download source",clickFunction:()=>Ay(i,t.highlightIds),autoCloseMenu:!0}),new ne({label:"Download glb",clickFunction:()=>Cy(i,t.highlightIds),autoCloseMenu:!0}),new ne({label:"Delete",clickFunction:async()=>{await Iy(t.highlightIds),t.refresh()},autoCloseMenu:!0})]},visibleElements:{menuItems:{clearSelection:!0,refreshData:!0,toggleColumns:!0,selectedRecordsShowAllToggle:!0,zoomToSelection:!0}}});await wy(i)});async function wy(i){if(!i)return;const t=await Fn(`${i.url}/${i.layerId}/query3d`,{query:{where:"1=1",returnGeometry:!0,f:"json"}}),{features:e}=t.data,r=[],n=[];for(const{geometry:o,attributes:a}of e){if(!o)continue;const l=Xc.fromJSON(o);l.spatialReference=i.spatialReference;const d=Jc.fromExtent(l);for(const m of d.rings)for(const p of m)p[2]=l.zmin;const h=new Kc({symbolLayers:[new Qc({material:{color:[255,0,255,.5]},size:l.zmax-l.zmin})]}),c=new Fo({geometry:d,attributes:{OBJECTID:a.OBJECTID}});r.push(c),n.push(new tu({symbol:h,value:a.OBJECTID}))}const s=new eu({title:"Model extents",visible:!1,source:r,objectIdField:"OBJECTID",spatialReference:i.spatialReference,renderer:new iu({uniqueValueInfos:n,field:"OBJECTID"}),labelingInfo:[new ru({symbol:by,labelExpressionInfo:{expression:"$feature.OBJECTID"}})]});yi.map.add(s)}async function Cy(i,t){return gc(i,t,"glb")}async function Ay(i,t){return gc(i,t,"source")}async function gc(i,t,e){const r=i.infoFor3D.assetTypeField,{features:n}=(await Fn(`${i.url}/${i.layerId}/query`,{query:{objectIds:t.toArray(),outFields:[i.objectIdField,r],f:"json"}})).data;for(const s of n){const a=(await Fn(`${i.url}/${i.layerId}/query3d`,{query:{formatOf3DObjects:e==="source"?s.attributes[r]:"3D_glb",objectIds:[s.attributes[i.objectIdField]],f:"json"}})).data.assetMaps,l=await xy(a);if(l.length===1)Aa(l[0],l[0].name);else{const d=new yy;for(const m of l)d.file(m.name,await m.arrayBuffer());const h=a.find(({assetType:m})=>i.infoFor3D.editFormats.includes(m))?.assetName??a[0].assetName,c=await d.generateAsync({type:"blob"});Aa(c,h.replace(/\//g,"-")+".zip")}}}async function Sy(i){const{features:t}=await $i.queryFeatures({objectIds:i.toArray(),returnGeometry:!0});yi.graphics.addMany(t),await Promise.all(t.map(async({geometry:e})=>{e.type==="mesh"&&(console.log(),await e.load())})),await yi.goTo(t)}async function xy(i){const t=new Map;for(const e of i){let r=t.get(e.assetName);r||(r=[],t.set(e.assetName,r)),r.push(e)}return Promise.all(Array.from(t.keys()).map(e=>{const r=t.get(e);return r.sort((n,s)=>n.seqNo-s.seqNo),Ey(r[0].assetName,r.map(({assetURL:n})=>n))}))}async function Ey(i,t){const e=await Promise.all(t.map(async r=>(await Fn(r,{responseType:"blob"})).data));return new File(e,i)}async function Iy(i){const t=$i.createQuery();t.returnGeometry=!1,t.objectIds=i.toArray(),t.outFields=["*"];const e=await $i.queryFeatures(t);await $i.applyEdits({deleteFeatures:e.features})}
