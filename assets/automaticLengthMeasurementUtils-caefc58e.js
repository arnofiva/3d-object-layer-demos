import{aD as o,aE as v,aF as u,au as lt,uf as tt,uh as I,np as x,tO as i,tP as dt,bm as z,bu as k,aV as et,tN as ft,r1 as $t,py as _t,e2 as bt,pB as Q,s1 as st,bQ as M,c0 as yt,pz as wt,wB as Tt,pC as Lt}from"./index-cdda5707.js";import{e as Mt,q as nt,x as xt,F as zt,S as kt,k as Ct,T as rt,a as Et,r as $}from"./getDefaultUnitForView-399249e8.js";import{f as ct,s as pt,m as L,Z as O,x as Ot}from"./euclideanLengthMeasurementUtils-37e24abd.js";import{geodesicLength as ht}from"./geometryEngine-56bd014d.js";let y=class extends lt{constructor(t){super(t),this.helpMessage=void 0}};o([v()],y.prototype,"tooltipOptions",void 0),o([v()],y.prototype,"helpMessage",void 0),y=o([u("esri.views.interactive.tooltip.SketchTooltipInfo")],y);const _="esri-tooltip",r=`${_}-content`,Nt=`${_}-table`,Ht=`${_}-help-message`;let h=class extends I{get _units(){const t=Mt(this.tooltip.view);return{length:t,verticalLength:t,area:t}}_getHelpMessage(t){const{info:e}=this,{tooltipOptions:n,helpMessage:a,viewType:c}=e,p=n?.visibleElements?.helpMessage,m=t??a,mt=c==="3d"?"helpMessages3d":"helpMessages2d";return p&&m?this._messagesTooltip?.sketch?.[mt]?.[m]:void 0}_formatScale(t){return x(t,{style:"percent",maximumFractionDigits:0})}_formatRelativeOrientation(t){return x(t,{maximumFractionDigits:2,minimumFractionDigits:2,signDisplay:"exceptZero"})}_formatLength(t,e,n){return nt(this._messagesUnits,t,e??this._units.length,n)}_formatRelativeLength(t){return xt(this._messagesUnits,t,this._units.length)}_formatVerticalLength(t){return zt(this._messagesUnits,t,this._units.verticalLength)}_formatRelativeVerticalLength(t){return kt(this._messagesUnits,t,this._units.verticalLength)}_formatTotalLength(t){return nt(this._messagesUnits,t,this._units.length)}_formatArea(t){return Ct(this._messagesUnits,t,this._units.area)}_formatPercentage(t){return x(t.value,{style:"percent"})}};o([v()],h.prototype,"info",void 0),o([v()],h.prototype,"tooltip",void 0),o([v()],h.prototype,"_units",null),o([tt("esri/core/t9n/Units"),v()],h.prototype,"_messagesUnits",void 0),o([tt("esri/views/interactive/tooltip/t9n/Tooltip"),v()],h.prototype,"_messagesTooltip",void 0),h=o([u("esri.views.interactive.tooltip.content.TooltipContent")],h);function g({className:s,helpMessage:t},...e){const n=e.filter(a=>!!a);return i("div",{class:dt(s,r)},n.length>0?i("div",{class:Nt},...n):null,t?i("div",{key:"help-message",class:Ht},t):null)}const C=`${_}-field`,E={base:C,title:`${C}__title`,value:`${C}__value`};let l=class extends I{render(){return i("div",{class:E.base},i("div",{class:E.title},this.title),i("div",{class:E.value},this.value))}};o([v()],l.prototype,"title",void 0),o([v()],l.prototype,"value",void 0),l=o([u("esri.views.interactive.tooltip.support.TooltipField")],l);const Rt={base:`${_}-value-by-value`};let d=class extends I{constructor(){super(...arguments),this.divider="Ã—"}render(){return i("div",{class:Rt.base},i("span",null,this.left),i("span",null,this.divider),i("span",null,this.right))}};o([v()],d.prototype,"left",void 0),o([v()],d.prototype,"divider",void 0),o([v()],d.prototype,"right",void 0),d=o([u("esri.views.interactive.tooltip.support.ValueByValue")],d);const Pt={base:`${r} ${`${r}--draw-rectangle`}`};let N=class extends h{render(){const{area:t,radius:e,xSize:n,ySize:a,tooltipOptions:c}=this.info,{visibleElements:p}=c,m=this._messagesTooltip.sketch;return i(g,{className:Pt.base,helpMessage:this._getHelpMessage()},p.radius&&e!=null&&i(l,{title:m.radius,value:this._formatLength(e)}),p.size&&n!=null&&a!=null&&i(l,{title:m.size,value:i(d,{left:this._formatLength(n),right:this._formatLength(a)})}),p.area&&i(l,{title:m.area,value:this._formatArea(t)}))}};N=o([u("esri.views.interactive.tooltip.content.TooltipContentDrawCircle")],N);const Vt={base:`${r}--draw-mesh`};let H=class extends h{render(){const{elevation:t,tooltipOptions:e}=this.info,{visibleElements:n}=e,a=this._messagesTooltip.sketch;return i(g,{className:Vt.base,helpMessage:this._getHelpMessage()},n.elevation&&i(l,{title:a.elevation,value:this._formatVerticalLength(t)}))}};H=o([u("esri.views.interactive.tooltip.content.TooltipContentDrawMesh")],H);const St={base:`${r}--draw-point`};let R=class extends h{render(){const{elevation:t,tooltipOptions:e}=this.info,{visibleElements:n}=e,a=this._messagesTooltip.sketch;return i(g,{className:St.base,helpMessage:this._getHelpMessage()},n.elevation&&i(l,{title:a.elevation,value:this._formatVerticalLength(t)}))}};R=o([u("esri.views.interactive.tooltip.content.TooltipContentDrawPoint")],R);const Wt={base:`${r} ${`${r}--draw-polygon`}`};let P=class extends h{render(){const{area:t,elevation:e,tooltipOptions:n,viewType:a}=this.info,{visibleElements:c}=n,p=this._messagesTooltip.sketch;return i(g,{className:Wt.base,helpMessage:this._getHelpMessage()},c.elevation&&a!=="2d"&&i(l,{title:p.elevation,value:this._formatVerticalLength(e)}),c.area&&i(l,{title:p.area,value:this._formatArea(t)}))}};P=o([u("esri.views.interactive.tooltip.content.TooltipContentDrawPolygon")],P);const Ut={base:`${r} ${`${r}--draw-polyline`}`};let V=class extends h{render(){const{elevation:t,totalLength:e,tooltipOptions:n,viewType:a}=this.info,{visibleElements:c}=n,p=this._messagesTooltip.sketch;return i(g,{className:Ut.base,helpMessage:this._getHelpMessage()},c.elevation&&a!=="2d"&&i(l,{title:p.elevation,value:this._formatVerticalLength(t)}),c.totalLength&&i(l,{title:p.totalLength,value:this._formatLength(e)}))}};V=o([u("esri.views.interactive.tooltip.content.TooltipContentDrawPolyline")],V);const Dt={base:`${r} ${`${r}--draw-rectangle`}`};let S=class extends h{render(){const{area:t,xSize:e,ySize:n,tooltipOptions:a}=this.info,{visibleElements:c}=a,p=this._messagesTooltip.sketch;return i(g,{className:Dt.base,helpMessage:this._getHelpMessage()},c.size&&e!=null&&n!=null&&i(l,{title:p.size,value:i(d,{left:this._formatLength(e),right:this._formatLength(n)})}),c.area&&i(l,{title:p.area,value:this._formatArea(t)}))}};S=o([u("esri.views.interactive.tooltip.content.TooltipContentDrawRectangle")],S);const At={base:`${r} ${`${r}--extent-rotate`}`};let W=class extends h{render(){const{angle:s,tooltipOptions:t}=this.info,{visibleElements:e}=t,n=this._messagesTooltip.sketch;return i(g,{className:At.base,helpMessage:this._getHelpMessage()},e.rotation&&i(l,{title:n.rotation,value:this._formatRelativeOrientation(s)}))}};W=o([u("esri.views.interactive.tooltip.content.TooltipContentExtentRotate")],W);const Zt={base:`${r} ${`${r}--extent-scale`}`};let U=class extends h{render(){const t=this.info,{visibleElements:e}=t.tooltipOptions,n=this._messagesTooltip.sketch;return i(g,{className:Zt.base,helpMessage:this._getHelpMessage()},e.size&&i(l,{title:n.size,value:i(d,{left:this._formatLength(t.xSize),right:this._formatLength(t.ySize)})}),e.scale&&i(l,{title:n.scale,value:i(d,{left:this._formatScale(t.xScale),right:this._formatScale(t.yScale)})}))}};U=o([u("esri.views.interactive.tooltip.content.TooltipContentExtentScale")],U);const Ft={base:`${r} ${`${r}--reshape-edge-offset`}`};let D=class extends h{render(){const{area:t,distance:e,totalLength:n,tooltipOptions:a}=this.info,{visibleElements:c}=a,p=this._messagesTooltip.sketch;return i(g,{className:Ft.base,helpMessage:this._getHelpMessage()},c.distance&&i(l,{title:p.distance,value:this._formatRelativeLength(e)}),c.area&&t!=null&&i(l,{title:p.area,value:this._formatArea(t)}),c.totalLength&&n!=null&&i(l,{title:p.totalLength,value:this._formatLength(n)}))}};D=o([u("esri.views.interactive.tooltip.content.TooltipContentReshapeEdgeOffset")],D);const Bt={base:`${r} ${`${r}--transform-absolute`}`};let A=class extends h{render(){const{info:t}=this,{visibleElements:e}=t.tooltipOptions,n=this._messagesTooltip.sketch;return i(g,{className:Bt.base,helpMessage:this._getHelpMessage()},e.orientation&&t.orientation!=null&&i(l,{key:"orientation",title:n.orientation,value:rt(t.orientation,t.rotationType,t.orientationPrecision)}),e.size&&t.size!=null&&i(l,{key:"size",title:n.size,value:this._formatLength(t.size,t.sizeUnit,t.sizePrecision)}))}};A=o([u("esri.views.interactive.tooltip.content.TooltipContentTransformAbsolute")],A);const Gt={base:`${r} ${`${r}--transform-rotate`}`};let Z=class extends h{render(){const{info:t}=this,{visibleElements:e}=t.tooltipOptions,n=this._messagesTooltip.sketch;return i(g,{className:Gt.base,helpMessage:this._getHelpMessage()},e.rotation&&t.rotation!=null&&i(l,{key:"rotation",title:n.rotation,value:Et(t.rotation,t.rotationType,t.rotationPrecision)}),e.orientation&&t.orientation!=null&&i(l,{key:"orientation",title:n.orientation,value:rt(t.orientation,t.rotationType,t.orientationPrecision)}))}};Z=o([u("esri.views.interactive.tooltip.content.TooltipContentTransformRotate")],Z);const qt={base:`${r} ${`${r}--transform-scale`}`};let F=class extends h{render(){const{info:t}=this,{visibleElements:e}=t.tooltipOptions,n=this._messagesTooltip.sketch;return i(g,{className:qt.base,helpMessage:this._getHelpMessage()},e.scale&&t.scale!=null&&i(l,{key:"scale",title:n.scale,value:this._formatPercentage(t.scale)}),e.size&&t.size!=null&&i(l,{key:"size",title:n.size,value:this._formatLength(t.size,t.sizeUnit,t.sizePrecision)}))}};F=o([u("esri.views.interactive.tooltip.content.TooltipContentTransformScale")],F);const Xt={base:`${r} ${`${r}--translate-graphic`}`};let B=class extends h{render(){const{info:t}=this,{visibleElements:e}=t.tooltipOptions,n=this._messagesTooltip.sketch;return i(g,{className:Xt.base,helpMessage:this._getHelpMessage()},e.distance&&i(l,{title:n.distance,value:this._formatLength(t.distance)}))}};B=o([u("esri.views.interactive.tooltip.content.TooltipContentTranslateGraphic")],B);const Yt={base:`${r} ${`${r}--translate-graphic-xy`}`};let G=class extends h{render(){const{info:t}=this,{visibleElements:e}=t.tooltipOptions,n=this._messagesTooltip.sketch;return i(g,{className:Yt.base,helpMessage:this._getHelpMessage()},e.distance&&i(l,{title:n.distance,value:this._formatRelativeLength(t.distance)}))}};G=o([u("esri.views.interactive.tooltip.content.TooltipContentTranslateGraphicXY")],G);const jt={base:`${r} ${`${r}--translate-graphic-z`}`};let q=class extends h{render(){const{info:s}=this,{visibleElements:t}=s.tooltipOptions,e=this._messagesTooltip.sketch;return i(g,{className:jt.base,helpMessage:this._getHelpMessage()},t.distance&&i(l,{title:e.distance,value:this._formatRelativeVerticalLength(s.distance)}))}};q=o([u("esri.views.interactive.tooltip.content.TooltipContentTranslateGraphicZ")],q);const It={base:`${r} ${`${r}--translate-vertex`}`};let X=class extends h{render(){const{distance:t,elevation:e,area:n,totalLength:a,tooltipOptions:c}=this.info,{visibleElements:p}=c,m=this._messagesTooltip.sketch;return i(g,{className:It.base,helpMessage:this._getHelpMessage()},p.distance&&i(l,{title:m.distance,value:this._formatLength(t)}),p.elevation&&e!=null&&i(l,{title:m.elevation,value:this._formatVerticalLength(e)}),p.area&&n!=null&&i(l,{title:m.area,value:this._formatArea(n)}),p.totalLength&&a!=null&&i(l,{title:m.totalLength,value:this._formatLength(a)}))}};X=o([u("esri.views.interactive.tooltip.content.TooltipContentTranslateVertex")],X);const Qt={base:`${r} ${`${r}--translate-vertex`}`};let Y=class extends h{render(){const{area:t,distance:e,elevation:n,totalLength:a,tooltipOptions:c}=this.info,{visibleElements:p}=c,m=this._messagesTooltip.sketch;return i(g,{className:Qt.base,helpMessage:this._getHelpMessage()},p.distance&&i(l,{title:m.distance,value:this._formatRelativeLength(e)}),p.elevation&&n!=null&&i(l,{title:m.elevation,value:this._formatVerticalLength(n)}),p.area&&t!=null&&i(l,{title:m.area,value:this._formatArea(t)}),p.totalLength&&a!=null&&i(l,{title:m.totalLength,value:this._formatLength(a)}))}};Y=o([u("esri.views.interactive.tooltip.content.TooltipContentTranslateVertexXY")],Y);const Jt={base:`${r} ${`${r}--translate-vertex`}`};let j=class extends h{render(){const{distance:t,elevation:e,tooltipOptions:n}=this.info,{visibleElements:a}=n,c=this._messagesTooltip.sketch;return i(g,{className:Jt.base,helpMessage:this._getHelpMessage()},a.distance&&i(l,{title:c.distance,value:this._formatRelativeVerticalLength(t)}),a.elevation&&e!=null&&i(l,{title:c.elevation,value:this._formatVerticalLength(e)}))}};j=o([u("esri.views.interactive.tooltip.content.TooltipContentTranslateVertexZ")],j);function Kt(s,t){if(t==null)return null;const e=document.createElement("div");switch(t.type){case"draw-point":return new R({tooltip:s,info:t,container:e});case"draw-polygon":return new P({tooltip:s,info:t,container:e});case"draw-polyline":return new V({tooltip:s,info:t,container:e});case"draw-mesh":return new H({tooltip:s,info:t,container:e});case"draw-rectangle":return new S({tooltip:s,info:t,container:e});case"draw-circle":return new N({tooltip:s,info:t,container:e});case"extent-rotate":return new W({tooltip:s,info:t,container:e});case"extent-scale":return new U({tooltip:s,info:t,container:e});case"transform-absolute":return new A({tooltip:s,info:t,container:e});case"transform-rotate":return new Z({tooltip:s,info:t,container:e});case"transform-scale":return new F({tooltip:s,info:t,container:e});case"translate-graphic":return new B({tooltip:s,info:t,container:e});case"translate-graphic-z":return new q({tooltip:s,info:t,container:e});case"translate-graphic-xy":return new G({tooltip:s,info:t,container:e});case"translate-vertex":return new X({tooltip:s,info:t,container:e});case"translate-vertex-z":return new j({tooltip:s,info:t,container:e});case"translate-vertex-xy":return new Y({tooltip:s,info:t,container:e});case"reshape-edge-offset":return new D({tooltip:s,info:t,container:e})}}const te={base:`${_}`};let f=class extends lt{constructor(t){super(t),this.info=null,this._contentContainer=(()=>{const e=document.createElement("div");return e.classList.add(te.base),e})(),this._contentWidget=null}initialize(){const t=this._contentContainer;this.addHandles([z(()=>this.view.overlay?.surface,e=>{t.remove(),e?.appendChild(t)},k),z(()=>this.info,(e,n)=>{if(this._contentWidget!=null&&e!=null&&n!=null&&e.type===n.type)this._contentWidget.info=e;else{this._contentWidget=et(this._contentWidget);const a=Kt(this,e);a&&(this._contentWidget=a,a.container&&t.appendChild(a.container))}},k),z(()=>({container:this._contentContainer,contentWidget:this._contentWidget,screenPoint:this._screenPoint}),ee,k)])}destroy(){this._contentWidget=et(this._contentWidget),this._contentContainer.remove()}clear(){this.info=null}get _screenPoint(){const t=this.view.inputManager;return t?.multiTouchActive?null:t?.latestPointerLocation}get test(){return{contentContainer:this._contentContainer,visible:this._contentContainer?.style.display!=="none"}}};function ee({container:s,contentWidget:t,screenPoint:e}){const{style:n}=s;if(e!=null&&t!=null){n.display="block";const a=ft(s),c=`translate(${Math.round(e.x)+it[0]*(a?-1:1)}px, ${Math.round(e.y)+it[1]}px)`;n.transform=a?`translate(-100%, 0) ${c}`:c}else n.display="none"}o([v({nonNullable:!0})],f.prototype,"view",void 0),o([v()],f.prototype,"info",void 0),o([v()],f.prototype,"_contentContainer",void 0),o([v()],f.prototype,"_contentWidget",void 0),o([v()],f.prototype,"_screenPoint",null),f=o([u("esri.views.interactive.tooltip.Tooltip")],f);const it=[20,20];function ut(s,t,e,n,...a){return $t(s)&&_t(s)?t.apply(void 0,a):bt(s)?e.apply(void 0,a):n.apply(void 0,a)}function gt(s){const{spatialReference:t}=s;return ut(t,ae,oe,le,s)}function vt(s,t){if(!yt(s.spatialReference,t.spatialReference))return null;const{spatialReference:e}=s;return w[0]=s.x,w[1]=s.y,w[2]=s.hasZ?s.z:0,T[0]=t.x,T[1]=t.y,T[2]=t.hasZ?t.z:0,J(w,T,e)}function J(s,t,e){return ut(e,se,ne,ie,s,t,e)}function se(s,t,e){return $(Q(K,s,t,e).distance,"meters")}function ne(s,t,e){return $(ht(re(s,t,e),"meters"),"meters")}function ie(s,t,e){return st(s,e,at)&&st(t,e,ot)?$(Q(K,at,ot).distance,"meters"):null}function ae(s){return $(wt([s],"meters")[0],"meters")}function oe(s){return $(ht(s,"meters"),"meters")}function le(s){const t=[];if(!Tt(s,t))return null;let e=0;for(const n of t){let a=0;for(let c=1;c<n.length;++c)a+=Q(K,n[c-1],n[c]).distance;e+=a}return $(e,"meters")}function re(s,t,e){return{type:"polyline",spatialReference:e,paths:[[[...s],[...t]]]}}const K=new Lt,w=M(),T=M(),at=M(),ot=M();function Re(s,t){return b(pt,gt,ct,t,s)}function Pe(s,t,e,n){return b(Ot,J,O,n,s,t,e)}function Ve(s,t,e){return b(L,vt,L,e,s,t)}function Se(s,t,e,n){return b(O,J,O,n,s,t,e)}function We(s){return b(pt,gt,ct,"on-the-ground",s)}function Ue(s,t){return b(L,vt,L,"on-the-ground",s,t)}function b(s,t,e,n,...a){if(n==="on-the-ground"){const c=t.apply(void 0,a);return c??e.apply(void 0,a)}return s.apply(void 0,a)}export{Se as a,J as b,f as d,We as g,Pe as l,Ue as m,Re as p,ut as r,Ve as s,y as t};
