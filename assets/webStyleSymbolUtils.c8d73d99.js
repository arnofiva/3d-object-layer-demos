import{ov as N,ow as $,ox as w,bI as c,oy as S,oz as x,N as D,r as U,bD as O,oA as g,oB as B,oC as F,oD as f,oE as j,oF as h,oG as d,oH as z}from"./vendor.fd144a9e.js";function H(e,t,a,o){return e.name?e.styleName&&e.styleName==="Esri2DPointSymbolsStyle"?C(e,t,o):x(e,t,o).then(r=>A(r,e.name,t,a,o)):Promise.reject(new D("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))}function A(e,t,a,o,r){const u=e.data,m=a&&U(a.portal)?a.portal:O.getDefault(),p={portal:m,url:c(e.baseUrl),origin:"portal-item"},s=u.items.find(n=>n.name===t);if(!s){const n=`The symbol name '${t}' could not be found`;return Promise.reject(new D("symbolstyleutils:symbol-name-not-found",n,{symbolName:t}))}let i=g(B(s,o),p),y=s.thumbnail&&s.thumbnail.href;const b=s.thumbnail&&s.thumbnail.imageData;F()&&(i=f(i),y=f(y));const P={portal:m,url:c(S(i)),origin:"portal-item"};return N(i,r).then(n=>{const E=o==="cimRef"?$(n.data):n.data,l=w(E,P);if(l&&j(l)){if(y){const v=g(y,p);l.thumbnail=new h({url:v})}else b&&(l.thumbnail=new h({url:`data:image/png;base64,${b}`}));e.styleUrl?l.styleOrigin=new d({portal:a.portal,styleUrl:e.styleUrl,name:t}):e.styleName&&(l.styleOrigin=new d({portal:a.portal,styleName:e.styleName,name:t}))}return l})}function C(e,t,a){const o=z.replace(/\{SymbolName\}/gi,e.name),r=U(t.portal)?t.portal:O.getDefault();return N(o,a).then(u=>{const m=$(u.data);return w(m,{portal:r,url:c(S(o)),origin:"portal-item"})})}export{A as fetchSymbolFromStyle,H as resolveWebStyleSymbol};
