import{i as D}from"./executionError-e8d36121.js";import{bw as N,bx as o,by as k,bz as O}from"./main-79e5ed80.js";class m{}var y;m.instance=new N("Etc/UTC"),function(r){r.TimeZoneNotRecognised="TimeZoneNotRecognised"}(y||(y={}));const A={[y.TimeZoneNotRecognised]:"Timezone identifier has not been recognised."};class S extends Error{constructor(e,t){super(D(A[e],t)),this.declaredRootClass="esri.arcade.arcadedate.dateerror",Error.captureStackTrace&&Error.captureStackTrace(this,S)}}class n{constructor(e){this._date=e,this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(e=0,t=1,s=1,Z=0,a=0,d=0,u=0,p){if(isNaN(e)||isNaN(t)||isNaN(s)||isNaN(Z)||isNaN(a)||isNaN(d)||isNaN(u))return null;let c=0;const g=o.local(e,t).daysInMonth;s<1&&(c=s-1,s=1),s>g&&(c=s-g,s=g);let h=0;t>12?(h=t-12,t=12):t<1&&(h=t-1,t=1);let l=0;a>59?(l=a-59,a=59):a<0&&(l=a,a=0);let f=0;d>59?(f=d-59,d=59):d<0&&(f=d,d=0);let w=0;u>999?(w=u-999,u=999):u<0&&(w=u,u=0);let i=o.fromObject({day:s,year:e,month:t,hour:Z,minute:a,second:d,millisecond:u},{zone:T(p)});return h!==0&&(i=i.plus({months:h})),c!==0&&(i=i.plus({days:c})),l!==0&&(i=i.plus({minutes:l})),f!==0&&(i=i.plus({seconds:f})),w!==0&&(i=i.plus({milliseconds:w})),new n(i)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??"system"}static arcadeDateAndZoneToArcadeDate(e,t){const s=T(t);return e.isUnknownTimeZone||s===m.instance?n.fromParts(e.year,e.monthJS+1,e.day,e.hour,e.minute,e.second,e.millisecond,s):new n(e._date.setZone(t))}static dateJSToArcadeDate(e){return new n(o.fromJSDate(e,{zone:"system"}))}static dateJSAndZoneToArcadeDate(e,t="system"){return new n(o.fromJSDate(e,{zone:t}))}static unknownEpochToArcadeDate(e){return new n(o.fromMillis(e,{zone:m.instance}))}static unknownDateJSToArcadeDate(e){return new n(o.fromMillis(e.getTime(),{zone:m.instance}))}static epochToArcadeDate(e,t="system"){return new n(o.fromMillis(e,{zone:t}))}static dateTimeToArcadeDate(e){return new n(e)}clone(){return new n(this._date)}changeTimeZone(e){const t=T(e);return n.dateTimeToArcadeDate(this._date.setZone(t))}static dateTimeAndZoneToArcadeDate(e,t){const s=T(t);return e.zone===m.instance||s===m.instance?n.fromParts(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond,s):new n(e.setZone(s))}static nowToArcadeDate(e){return new n(o.fromJSDate(new Date,{zone:e}))}static nowUTCToArcadeDate(){return new n(o.utc())}get isSystem(){return this.timeZone==="system"||this.timeZone===n.systemTimeZoneCanonicalName}equals(e){return this.isSystem&&e.isSystem?this.toNumber()===e.toNumber():this.isUnknownTimeZone===e.isUnknownTimeZone&&this._date.equals(e._date)}get isUnknownTimeZone(){return this._date.zone===m.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let e=this._date.weekday;return e>6&&(e=0),e}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if(this._date.zone.type==="system")return"system";const e=this.zone;return e.type==="fixed"?e.fixed===0?"utc":e.formatOffset(0,"short"):e.name}stringify(){return JSON.stringify(this.toJSDate())}plus(e){return new n(this._date.plus(e))}diff(e,t="milliseconds"){return this._date.diff(e._date,t)[t]}toISOString(e){return e?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})}toFormat(e,t){return this._date.toFormat(e,t)}toJSDate(){return this._date.toJSDate()}toSQLString(){return"timestamp '"+this._date.toFormat("yyyy-LL-dd HH:mm:ss")+"'"}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new n(this._date.toUTC())}toLocal(){return new n(this._date.toLocal())}toString(){return this.toISOString(!0)}}function T(r){if(r instanceof k)return r;if(r.toLowerCase()==="system")return"system";if(r.toLowerCase()==="utc")return"utc";if(r.toLowerCase()==="unknown")return m.instance;if(/^[\+\-]?[0-9]{1,2}([:][0-9]{2})?$/.test(r)){const t=O.parseSpecifier("UTC"+(r.startsWith("+")||r.startsWith("-")?"":"+")+r);if(t)return t}const e=N.create(r);if(!e.isValid)throw new S(y.TimeZoneNotRecognised);return e}export{n as c,T as u};
