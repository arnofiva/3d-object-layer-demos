var K=Object.defineProperty,g=Object.defineProperties;var z=Object.getOwnPropertyDescriptors;var b=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var d=(e,r,t)=>r in e?K(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,n=(e,r)=>{for(var t in r||(r={}))E.call(r,t)&&d(e,t,r[t]);if(b)for(var t of b(r))L.call(r,t)&&d(e,t,r[t]);return e},m=(e,r)=>g(e,z(r));import{E as p,S as N}from"./Utils.cbd1a050.js";import{A as T,f,_ as x}from"./MaterialKey.21e4497a.js";import"./vendor.fd144a9e.js";import"./enums.ba1e21c6.js";import"./number.08b65821.js";import"./CIMSymbolHelper.e50e6314.js";import"./BidiEngine.4cfb7343.js";function V(e){var r;return e.type==="line-marker"?{type:"line-marker",color:(r=e.color)==null?void 0:r.toJSON(),placement:e.placement,style:e.style}:e.constructor.fromJSON(e.toJSON()).toJSON()}function S(e){return T(e)}function D(e,r,t){if(!e)return null;switch(e.type){case"simple-fill":case"picture-fill":return v(e,r,t);case"simple-marker":case"picture-marker":return O(e,r,t);case"simple-line":return w(e,r,t);case"text":return A(e,r,t);case"label":return k(e,r,t);case"cim":return{type:"cim",rendererKey:r.vvFlags,data:e.data,maxVVSize:r.maxVVSize};case"CIMSymbolReference":return{type:"cim",rendererKey:r.vvFlags,data:e,maxVVSize:r.maxVVSize};case"web-style":return m(n({},V(e)),{type:"web-style",hash:e.hash(),rendererKey:r.vvFlags,maxVVSize:r.maxVVSize});default:throw new Error(`symbol not supported ${e.type}`)}}function k(e,r,t){const a=e.toJSON(),l=f(p.LABEL,m(n({},r),{placement:a.labelPlacement}));return m(n({materialKey:t?S(l):l,hash:e.hash()},a),{labelPlacement:a.labelPlacement})}function v(e,r,t){const a=f(p.FILL,r),l=t?S(a):a,s=e.clone(),o=s.outline,c=x(r.symbologyType);c||(s.outline=null);const h=n({materialKey:l,hash:s.hash()},V(s));if(c)return h;const u=[];if(u.push(h),o){const i=f(p.LINE,m(n({},r),{isOutline:!0})),y=n({materialKey:t?S(i):i,hash:o.hash()},V(o));u.push(y)}return{type:"composite-symbol",layers:u,hash:u.reduce((i,y)=>y.hash+i,"")}}function w(e,r,t){var u;const a=x(r.symbologyType)?N.DEFAULT:r.symbologyType,l=f(p.LINE,m(n({},r),{symbologyType:a})),s=t?S(l):l,o=e.clone(),c=o.marker;o.marker=null;const h=[];if(h.push(n({materialKey:s,hash:o.hash()},V(o))),c){const i=f(p.MARKER,r),y=t?S(i):i;c.color=(u=c.color)!=null?u:o.color,h.push(n({materialKey:y,hash:c.hash(),lineWidth:o.width},V(c)))}return{type:"composite-symbol",layers:h,hash:h.reduce((i,y)=>y.hash+i,"")}}function O(e,r,t){const a=f(p.MARKER,r),l=t?S(a):a,s=V(e);return m(n({materialKey:l,hash:e.hash()},s),{angle:e.angle,maxVVSize:r.maxVVSize})}function A(e,r,t){const a=f(p.TEXT,r),l=t?S(a):a,s=V(e);return m(n({materialKey:l,hash:e.hash()},s),{angle:e.angle,maxVVSize:r.maxVVSize})}export{D as createSymbolSchema};
